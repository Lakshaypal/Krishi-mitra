var iU=Object.defineProperty;var rU=(n,e,t)=>e in n?iU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Vn=(n,e,t)=>rU(n,typeof e!="symbol"?e+"":e,t);function sU(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function CP(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var PP={exports:{}},q0={},RP={exports:{}},rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _f=Symbol.for("react.element"),oU=Symbol.for("react.portal"),aU=Symbol.for("react.fragment"),lU=Symbol.for("react.strict_mode"),cU=Symbol.for("react.profiler"),uU=Symbol.for("react.provider"),dU=Symbol.for("react.context"),hU=Symbol.for("react.forward_ref"),fU=Symbol.for("react.suspense"),pU=Symbol.for("react.memo"),mU=Symbol.for("react.lazy"),Xb=Symbol.iterator;function gU(n){return n===null||typeof n!="object"?null:(n=Xb&&n[Xb]||n["@@iterator"],typeof n=="function"?n:null)}var IP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},NP=Object.assign,LP={};function Wu(n,e,t){this.props=n,this.context=e,this.refs=LP,this.updater=t||IP}Wu.prototype.isReactComponent={};Wu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Wu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function DP(){}DP.prototype=Wu.prototype;function kS(n,e,t){this.props=n,this.context=e,this.refs=LP,this.updater=t||IP}var OS=kS.prototype=new DP;OS.constructor=kS;NP(OS,Wu.prototype);OS.isPureReactComponent=!0;var Yb=Array.isArray,FP=Object.prototype.hasOwnProperty,BS={current:null},UP={key:!0,ref:!0,__self:!0,__source:!0};function kP(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)FP.call(e,i)&&!UP.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:_f,type:n,key:s,ref:o,props:r,_owner:BS.current}}function vU(n,e){return{$$typeof:_f,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function zS(n){return typeof n=="object"&&n!==null&&n.$$typeof===_f}function yU(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var qb=/\/+/g;function ix(n,e){return typeof n=="object"&&n!==null&&n.key!=null?yU(""+n.key):e.toString(36)}function eg(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case _f:case oU:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+ix(o,0):i,Yb(r)?(t="",n!=null&&(t=n.replace(qb,"$&/")+"/"),eg(r,e,t,"",function(u){return u})):r!=null&&(zS(r)&&(r=vU(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(qb,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Yb(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+ix(s,a);o+=eg(s,e,t,l,r)}else if(l=gU(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+ix(s,a++),o+=eg(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Op(n,e,t){if(n==null)return n;var i=[],r=0;return eg(n,i,"","",function(s){return e.call(t,s,r++)}),i}function xU(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var sr={current:null},tg={transition:null},_U={ReactCurrentDispatcher:sr,ReactCurrentBatchConfig:tg,ReactCurrentOwner:BS};function OP(){throw Error("act(...) is not supported in production builds of React.")}rn.Children={map:Op,forEach:function(n,e,t){Op(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Op(n,function(){e++}),e},toArray:function(n){return Op(n,function(e){return e})||[]},only:function(n){if(!zS(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};rn.Component=Wu;rn.Fragment=aU;rn.Profiler=cU;rn.PureComponent=kS;rn.StrictMode=lU;rn.Suspense=fU;rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_U;rn.act=OP;rn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=NP({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=BS.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)FP.call(e,l)&&!UP.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:_f,type:n.type,key:r,ref:s,props:i,_owner:o}};rn.createContext=function(n){return n={$$typeof:dU,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:uU,_context:n},n.Consumer=n};rn.createElement=kP;rn.createFactory=function(n){var e=kP.bind(null,n);return e.type=n,e};rn.createRef=function(){return{current:null}};rn.forwardRef=function(n){return{$$typeof:hU,render:n}};rn.isValidElement=zS;rn.lazy=function(n){return{$$typeof:mU,_payload:{_status:-1,_result:n},_init:xU}};rn.memo=function(n,e){return{$$typeof:pU,type:n,compare:e===void 0?null:e}};rn.startTransition=function(n){var e=tg.transition;tg.transition={};try{n()}finally{tg.transition=e}};rn.unstable_act=OP;rn.useCallback=function(n,e){return sr.current.useCallback(n,e)};rn.useContext=function(n){return sr.current.useContext(n)};rn.useDebugValue=function(){};rn.useDeferredValue=function(n){return sr.current.useDeferredValue(n)};rn.useEffect=function(n,e){return sr.current.useEffect(n,e)};rn.useId=function(){return sr.current.useId()};rn.useImperativeHandle=function(n,e,t){return sr.current.useImperativeHandle(n,e,t)};rn.useInsertionEffect=function(n,e){return sr.current.useInsertionEffect(n,e)};rn.useLayoutEffect=function(n,e){return sr.current.useLayoutEffect(n,e)};rn.useMemo=function(n,e){return sr.current.useMemo(n,e)};rn.useReducer=function(n,e,t){return sr.current.useReducer(n,e,t)};rn.useRef=function(n){return sr.current.useRef(n)};rn.useState=function(n){return sr.current.useState(n)};rn.useSyncExternalStore=function(n,e,t){return sr.current.useSyncExternalStore(n,e,t)};rn.useTransition=function(){return sr.current.useTransition()};rn.version="18.3.1";RP.exports=rn;var j=RP.exports;const SU=CP(j),wU=sU({__proto__:null,default:SU},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MU=j,EU=Symbol.for("react.element"),bU=Symbol.for("react.fragment"),TU=Object.prototype.hasOwnProperty,AU=MU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CU={key:!0,ref:!0,__self:!0,__source:!0};function BP(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)TU.call(e,i)&&!CU.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:EU,type:n,key:s,ref:o,props:r,_owner:AU.current}}q0.Fragment=bU;q0.jsx=BP;q0.jsxs=BP;PP.exports=q0;var T=PP.exports,zP={exports:{}},kr={},VP={exports:{}},HP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,Y){var X=O.length;O.push(Y);e:for(;0<X;){var se=X-1>>>1,me=O[se];if(0<r(me,Y))O[se]=Y,O[X]=me,X=se;else break e}}function t(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var Y=O[0],X=O.pop();if(X!==Y){O[0]=X;e:for(var se=0,me=O.length,Re=me>>>1;se<Re;){var at=2*(se+1)-1,Ct=O[at],ue=at+1,Se=O[ue];if(0>r(Ct,X))ue<me&&0>r(Se,Ct)?(O[se]=Se,O[ue]=X,se=ue):(O[se]=Ct,O[at]=X,se=at);else if(ue<me&&0>r(Se,X))O[se]=Se,O[ue]=X,se=ue;else break e}}return Y}function r(O,Y){var X=O.sortIndex-Y.sortIndex;return X!==0?X:O.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,m=!1,y=!1,S=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(O){for(var Y=t(u);Y!==null;){if(Y.callback===null)i(u);else if(Y.startTime<=O)i(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(u)}}function E(O){if(S=!1,M(O),!y)if(t(l)!==null)y=!0,ee(A);else{var Y=t(u);Y!==null&&Q(E,Y.startTime-O)}}function A(O,Y){y=!1,S&&(S=!1,g(N),N=-1),m=!0;var X=p;try{for(M(Y),f=t(l);f!==null&&(!(f.expirationTime>Y)||O&&!k());){var se=f.callback;if(typeof se=="function"){f.callback=null,p=f.priorityLevel;var me=se(f.expirationTime<=Y);Y=n.unstable_now(),typeof me=="function"?f.callback=me:f===t(l)&&i(l),M(Y)}else i(l);f=t(l)}if(f!==null)var Re=!0;else{var at=t(u);at!==null&&Q(E,at.startTime-Y),Re=!1}return Re}finally{f=null,p=X,m=!1}}var P=!1,L=null,N=-1,C=5,R=-1;function k(){return!(n.unstable_now()-R<C)}function H(){if(L!==null){var O=n.unstable_now();R=O;var Y=!0;try{Y=L(!0,O)}finally{Y?$():(P=!1,L=null)}}else P=!1}var $;if(typeof _=="function")$=function(){_(H)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,le=ne.port2;ne.port1.onmessage=H,$=function(){le.postMessage(null)}}else $=function(){x(H,0)};function ee(O){L=O,P||(P=!0,$())}function Q(O,Y){N=x(function(){O(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,ee(A))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var X=p;p=Y;try{return O()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,Y){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var X=p;p=O;try{return Y()}finally{p=X}},n.unstable_scheduleCallback=function(O,Y,X){var se=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?se+X:se):X=se,O){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=X+me,O={id:h++,callback:Y,priorityLevel:O,startTime:X,expirationTime:me,sortIndex:-1},X>se?(O.sortIndex=X,e(u,O),t(l)===null&&O===t(u)&&(S?(g(N),N=-1):S=!0,Q(E,X-se))):(O.sortIndex=me,e(l,O),y||m||(y=!0,ee(A))),O},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(O){var Y=p;return function(){var X=p;p=Y;try{return O.apply(this,arguments)}finally{p=X}}}})(HP);VP.exports=HP;var PU=VP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RU=j,Dr=PU;function Ge(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GP=new Set,Ph={};function Kl(n,e){Mu(n,e),Mu(n+"Capture",e)}function Mu(n,e){for(Ph[n]=e,n=0;n<e.length;n++)GP.add(e[n])}var To=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),q_=Object.prototype.hasOwnProperty,IU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zb={},$b={};function NU(n){return q_.call($b,n)?!0:q_.call(Zb,n)?!1:IU.test(n)?$b[n]=!0:(Zb[n]=!0,!1)}function LU(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function DU(n,e,t,i){if(e===null||typeof e>"u"||LU(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function or(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ai={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ai[n]=new or(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ai[e]=new or(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ai[n]=new or(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ai[n]=new or(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ai[n]=new or(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ai[n]=new or(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ai[n]=new or(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ai[n]=new or(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ai[n]=new or(n,5,!1,n.toLowerCase(),null,!1,!1)});var VS=/[\-:]([a-z])/g;function HS(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(VS,HS);Ai[e]=new or(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(VS,HS);Ai[e]=new or(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(VS,HS);Ai[e]=new or(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ai[n]=new or(n,1,!1,n.toLowerCase(),null,!1,!1)});Ai.xlinkHref=new or("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ai[n]=new or(n,1,!1,n.toLowerCase(),null,!0,!0)});function GS(n,e,t,i){var r=Ai.hasOwnProperty(e)?Ai[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DU(e,t,r,i)&&(t=null),i||r===null?NU(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var No=RU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bp=Symbol.for("react.element"),jc=Symbol.for("react.portal"),Xc=Symbol.for("react.fragment"),WS=Symbol.for("react.strict_mode"),Z_=Symbol.for("react.profiler"),WP=Symbol.for("react.provider"),jP=Symbol.for("react.context"),jS=Symbol.for("react.forward_ref"),$_=Symbol.for("react.suspense"),K_=Symbol.for("react.suspense_list"),XS=Symbol.for("react.memo"),ta=Symbol.for("react.lazy"),XP=Symbol.for("react.offscreen"),Kb=Symbol.iterator;function Sd(n){return n===null||typeof n!="object"?null:(n=Kb&&n[Kb]||n["@@iterator"],typeof n=="function"?n:null)}var On=Object.assign,rx;function $d(n){if(rx===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);rx=e&&e[1]||""}return`
`+rx+n}var sx=!1;function ox(n,e){if(!n||sx)return"";sx=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{sx=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?$d(n):""}function FU(n){switch(n.tag){case 5:return $d(n.type);case 16:return $d("Lazy");case 13:return $d("Suspense");case 19:return $d("SuspenseList");case 0:case 2:case 15:return n=ox(n.type,!1),n;case 11:return n=ox(n.type.render,!1),n;case 1:return n=ox(n.type,!0),n;default:return""}}function J_(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Xc:return"Fragment";case jc:return"Portal";case Z_:return"Profiler";case WS:return"StrictMode";case $_:return"Suspense";case K_:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case jP:return(n.displayName||"Context")+".Consumer";case WP:return(n._context.displayName||"Context")+".Provider";case jS:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case XS:return e=n.displayName||null,e!==null?e:J_(n.type)||"Memo";case ta:e=n._payload,n=n._init;try{return J_(n(e))}catch{}}return null}function UU(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J_(e);case 8:return e===WS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ea(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function YP(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kU(n){var e=YP(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function zp(n){n._valueTracker||(n._valueTracker=kU(n))}function qP(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=YP(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function wg(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Q_(n,e){var t=e.checked;return On({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Jb(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Ea(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ZP(n,e){e=e.checked,e!=null&&GS(n,"checked",e,!1)}function e1(n,e){ZP(n,e);var t=Ea(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?t1(n,e.type,t):e.hasOwnProperty("defaultValue")&&t1(n,e.type,Ea(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Qb(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function t1(n,e,t){(e!=="number"||wg(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Kd=Array.isArray;function du(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Ea(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function n1(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ge(91));return On({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function eT(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ge(92));if(Kd(t)){if(1<t.length)throw Error(Ge(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ea(t)}}function $P(n,e){var t=Ea(e.value),i=Ea(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function tT(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function KP(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function i1(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?KP(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Vp,JP=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Vp=Vp||document.createElement("div"),Vp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vp.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Rh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var sh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OU=["Webkit","ms","Moz","O"];Object.keys(sh).forEach(function(n){OU.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),sh[e]=sh[n]})});function QP(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||sh.hasOwnProperty(n)&&sh[n]?(""+e).trim():e+"px"}function eR(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=QP(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var BU=On({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function r1(n,e){if(e){if(BU[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ge(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ge(62))}}function s1(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var o1=null;function YS(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var a1=null,hu=null,fu=null;function nT(n){if(n=Mf(n)){if(typeof a1!="function")throw Error(Ge(280));var e=n.stateNode;e&&(e=Q0(e),a1(n.stateNode,n.type,e))}}function tR(n){hu?fu?fu.push(n):fu=[n]:hu=n}function nR(){if(hu){var n=hu,e=fu;if(fu=hu=null,nT(n),e)for(n=0;n<e.length;n++)nT(e[n])}}function iR(n,e){return n(e)}function rR(){}var ax=!1;function sR(n,e,t){if(ax)return n(e,t);ax=!0;try{return iR(n,e,t)}finally{ax=!1,(hu!==null||fu!==null)&&(rR(),nR())}}function Ih(n,e){var t=n.stateNode;if(t===null)return null;var i=Q0(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ge(231,e,typeof t));return t}var l1=!1;if(To)try{var wd={};Object.defineProperty(wd,"passive",{get:function(){l1=!0}}),window.addEventListener("test",wd,wd),window.removeEventListener("test",wd,wd)}catch{l1=!1}function zU(n,e,t,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var oh=!1,Mg=null,Eg=!1,c1=null,VU={onError:function(n){oh=!0,Mg=n}};function HU(n,e,t,i,r,s,o,a,l){oh=!1,Mg=null,zU.apply(VU,arguments)}function GU(n,e,t,i,r,s,o,a,l){if(HU.apply(this,arguments),oh){if(oh){var u=Mg;oh=!1,Mg=null}else throw Error(Ge(198));Eg||(Eg=!0,c1=u)}}function Jl(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function oR(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function iT(n){if(Jl(n)!==n)throw Error(Ge(188))}function WU(n){var e=n.alternate;if(!e){if(e=Jl(n),e===null)throw Error(Ge(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return iT(r),n;if(s===i)return iT(r),e;s=s.sibling}throw Error(Ge(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Ge(189))}}if(t.alternate!==i)throw Error(Ge(190))}if(t.tag!==3)throw Error(Ge(188));return t.stateNode.current===t?n:e}function aR(n){return n=WU(n),n!==null?lR(n):null}function lR(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=lR(n);if(e!==null)return e;n=n.sibling}return null}var cR=Dr.unstable_scheduleCallback,rT=Dr.unstable_cancelCallback,jU=Dr.unstable_shouldYield,XU=Dr.unstable_requestPaint,qn=Dr.unstable_now,YU=Dr.unstable_getCurrentPriorityLevel,qS=Dr.unstable_ImmediatePriority,uR=Dr.unstable_UserBlockingPriority,bg=Dr.unstable_NormalPriority,qU=Dr.unstable_LowPriority,dR=Dr.unstable_IdlePriority,Z0=null,Ys=null;function ZU(n){if(Ys&&typeof Ys.onCommitFiberRoot=="function")try{Ys.onCommitFiberRoot(Z0,n,void 0,(n.current.flags&128)===128)}catch{}}var Es=Math.clz32?Math.clz32:JU,$U=Math.log,KU=Math.LN2;function JU(n){return n>>>=0,n===0?32:31-($U(n)/KU|0)|0}var Hp=64,Gp=4194304;function Jd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Tg(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Jd(a):(s&=o,s!==0&&(i=Jd(s)))}else o=t&~r,o!==0?i=Jd(o):s!==0&&(i=Jd(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Es(e),r=1<<t,i|=n[t],e&=~r;return i}function QU(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ek(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Es(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=QU(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function u1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function hR(){var n=Hp;return Hp<<=1,!(Hp&4194240)&&(Hp=64),n}function lx(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Sf(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Es(e),n[e]=t}function tk(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Es(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function ZS(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Es(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var mn=0;function fR(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var pR,$S,mR,gR,vR,d1=!1,Wp=[],ma=null,ga=null,va=null,Nh=new Map,Lh=new Map,ra=[],nk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sT(n,e){switch(n){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":ga=null;break;case"mouseover":case"mouseout":va=null;break;case"pointerover":case"pointerout":Nh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lh.delete(e.pointerId)}}function Md(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Mf(e),e!==null&&$S(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function ik(n,e,t,i,r){switch(e){case"focusin":return ma=Md(ma,n,e,t,i,r),!0;case"dragenter":return ga=Md(ga,n,e,t,i,r),!0;case"mouseover":return va=Md(va,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Nh.set(s,Md(Nh.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Lh.set(s,Md(Lh.get(s)||null,n,e,t,i,r)),!0}return!1}function yR(n){var e=Sl(n.target);if(e!==null){var t=Jl(e);if(t!==null){if(e=t.tag,e===13){if(e=oR(t),e!==null){n.blockedOn=e,vR(n.priority,function(){mR(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ng(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=h1(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);o1=i,t.target.dispatchEvent(i),o1=null}else return e=Mf(t),e!==null&&$S(e),n.blockedOn=t,!1;e.shift()}return!0}function oT(n,e,t){ng(n)&&t.delete(e)}function rk(){d1=!1,ma!==null&&ng(ma)&&(ma=null),ga!==null&&ng(ga)&&(ga=null),va!==null&&ng(va)&&(va=null),Nh.forEach(oT),Lh.forEach(oT)}function Ed(n,e){n.blockedOn===e&&(n.blockedOn=null,d1||(d1=!0,Dr.unstable_scheduleCallback(Dr.unstable_NormalPriority,rk)))}function Dh(n){function e(r){return Ed(r,n)}if(0<Wp.length){Ed(Wp[0],n);for(var t=1;t<Wp.length;t++){var i=Wp[t];i.blockedOn===n&&(i.blockedOn=null)}}for(ma!==null&&Ed(ma,n),ga!==null&&Ed(ga,n),va!==null&&Ed(va,n),Nh.forEach(e),Lh.forEach(e),t=0;t<ra.length;t++)i=ra[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<ra.length&&(t=ra[0],t.blockedOn===null);)yR(t),t.blockedOn===null&&ra.shift()}var pu=No.ReactCurrentBatchConfig,Ag=!0;function sk(n,e,t,i){var r=mn,s=pu.transition;pu.transition=null;try{mn=1,KS(n,e,t,i)}finally{mn=r,pu.transition=s}}function ok(n,e,t,i){var r=mn,s=pu.transition;pu.transition=null;try{mn=4,KS(n,e,t,i)}finally{mn=r,pu.transition=s}}function KS(n,e,t,i){if(Ag){var r=h1(n,e,t,i);if(r===null)yx(n,e,i,Cg,t),sT(n,i);else if(ik(r,n,e,t,i))i.stopPropagation();else if(sT(n,i),e&4&&-1<nk.indexOf(n)){for(;r!==null;){var s=Mf(r);if(s!==null&&pR(s),s=h1(n,e,t,i),s===null&&yx(n,e,i,Cg,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else yx(n,e,i,null,t)}}var Cg=null;function h1(n,e,t,i){if(Cg=null,n=YS(i),n=Sl(n),n!==null)if(e=Jl(n),e===null)n=null;else if(t=e.tag,t===13){if(n=oR(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Cg=n,null}function xR(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YU()){case qS:return 1;case uR:return 4;case bg:case qU:return 16;case dR:return 536870912;default:return 16}default:return 16}}var aa=null,JS=null,ig=null;function _R(){if(ig)return ig;var n,e=JS,t=e.length,i,r="value"in aa?aa.value:aa.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return ig=r.slice(n,1<i?1-i:void 0)}function rg(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function jp(){return!0}function aT(){return!1}function Or(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jp:aT,this.isPropagationStopped=aT,this}return On(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=jp)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=jp)},persist:function(){},isPersistent:jp}),e}var ju={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},QS=Or(ju),wf=On({},ju,{view:0,detail:0}),ak=Or(wf),cx,ux,bd,$0=On({},wf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ew,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==bd&&(bd&&n.type==="mousemove"?(cx=n.screenX-bd.screenX,ux=n.screenY-bd.screenY):ux=cx=0,bd=n),cx)},movementY:function(n){return"movementY"in n?n.movementY:ux}}),lT=Or($0),lk=On({},$0,{dataTransfer:0}),ck=Or(lk),uk=On({},wf,{relatedTarget:0}),dx=Or(uk),dk=On({},ju,{animationName:0,elapsedTime:0,pseudoElement:0}),hk=Or(dk),fk=On({},ju,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),pk=Or(fk),mk=On({},ju,{data:0}),cT=Or(mk),gk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xk(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=yk[n])?!!e[n]:!1}function ew(){return xk}var _k=On({},wf,{key:function(n){if(n.key){var e=gk[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=rg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?vk[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ew,charCode:function(n){return n.type==="keypress"?rg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?rg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Sk=Or(_k),wk=On({},$0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uT=Or(wk),Mk=On({},wf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ew}),Ek=Or(Mk),bk=On({},ju,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tk=Or(bk),Ak=On({},$0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ck=Or(Ak),Pk=[9,13,27,32],tw=To&&"CompositionEvent"in window,ah=null;To&&"documentMode"in document&&(ah=document.documentMode);var Rk=To&&"TextEvent"in window&&!ah,SR=To&&(!tw||ah&&8<ah&&11>=ah),dT=" ",hT=!1;function wR(n,e){switch(n){case"keyup":return Pk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MR(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Yc=!1;function Ik(n,e){switch(n){case"compositionend":return MR(e);case"keypress":return e.which!==32?null:(hT=!0,dT);case"textInput":return n=e.data,n===dT&&hT?null:n;default:return null}}function Nk(n,e){if(Yc)return n==="compositionend"||!tw&&wR(n,e)?(n=_R(),ig=JS=aa=null,Yc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return SR&&e.locale!=="ko"?null:e.data;default:return null}}var Lk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Lk[n.type]:e==="textarea"}function ER(n,e,t,i){tR(i),e=Pg(e,"onChange"),0<e.length&&(t=new QS("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var lh=null,Fh=null;function Dk(n){FR(n,0)}function K0(n){var e=$c(n);if(qP(e))return n}function Fk(n,e){if(n==="change")return e}var bR=!1;if(To){var hx;if(To){var fx="oninput"in document;if(!fx){var pT=document.createElement("div");pT.setAttribute("oninput","return;"),fx=typeof pT.oninput=="function"}hx=fx}else hx=!1;bR=hx&&(!document.documentMode||9<document.documentMode)}function mT(){lh&&(lh.detachEvent("onpropertychange",TR),Fh=lh=null)}function TR(n){if(n.propertyName==="value"&&K0(Fh)){var e=[];ER(e,Fh,n,YS(n)),sR(Dk,e)}}function Uk(n,e,t){n==="focusin"?(mT(),lh=e,Fh=t,lh.attachEvent("onpropertychange",TR)):n==="focusout"&&mT()}function kk(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return K0(Fh)}function Ok(n,e){if(n==="click")return K0(e)}function Bk(n,e){if(n==="input"||n==="change")return K0(e)}function zk(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var As=typeof Object.is=="function"?Object.is:zk;function Uh(n,e){if(As(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!q_.call(e,r)||!As(n[r],e[r]))return!1}return!0}function gT(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function vT(n,e){var t=gT(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=gT(t)}}function AR(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?AR(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function CR(){for(var n=window,e=wg();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=wg(n.document)}return e}function nw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Vk(n){var e=CR(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&AR(t.ownerDocument.documentElement,t)){if(i!==null&&nw(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=vT(t,s);var o=vT(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Hk=To&&"documentMode"in document&&11>=document.documentMode,qc=null,f1=null,ch=null,p1=!1;function yT(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;p1||qc==null||qc!==wg(i)||(i=qc,"selectionStart"in i&&nw(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ch&&Uh(ch,i)||(ch=i,i=Pg(f1,"onSelect"),0<i.length&&(e=new QS("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=qc)))}function Xp(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Zc={animationend:Xp("Animation","AnimationEnd"),animationiteration:Xp("Animation","AnimationIteration"),animationstart:Xp("Animation","AnimationStart"),transitionend:Xp("Transition","TransitionEnd")},px={},PR={};To&&(PR=document.createElement("div").style,"AnimationEvent"in window||(delete Zc.animationend.animation,delete Zc.animationiteration.animation,delete Zc.animationstart.animation),"TransitionEvent"in window||delete Zc.transitionend.transition);function J0(n){if(px[n])return px[n];if(!Zc[n])return n;var e=Zc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in PR)return px[n]=e[t];return n}var RR=J0("animationend"),IR=J0("animationiteration"),NR=J0("animationstart"),LR=J0("transitionend"),DR=new Map,xT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Da(n,e){DR.set(n,e),Kl(e,[n])}for(var mx=0;mx<xT.length;mx++){var gx=xT[mx],Gk=gx.toLowerCase(),Wk=gx[0].toUpperCase()+gx.slice(1);Da(Gk,"on"+Wk)}Da(RR,"onAnimationEnd");Da(IR,"onAnimationIteration");Da(NR,"onAnimationStart");Da("dblclick","onDoubleClick");Da("focusin","onFocus");Da("focusout","onBlur");Da(LR,"onTransitionEnd");Mu("onMouseEnter",["mouseout","mouseover"]);Mu("onMouseLeave",["mouseout","mouseover"]);Mu("onPointerEnter",["pointerout","pointerover"]);Mu("onPointerLeave",["pointerout","pointerover"]);Kl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qd));function _T(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,GU(i,e,void 0,n),n.currentTarget=null}function FR(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;_T(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;_T(r,a,u),s=l}}}if(Eg)throw n=c1,Eg=!1,c1=null,n}function En(n,e){var t=e[x1];t===void 0&&(t=e[x1]=new Set);var i=n+"__bubble";t.has(i)||(UR(e,n,2,!1),t.add(i))}function vx(n,e,t){var i=0;e&&(i|=4),UR(t,n,i,e)}var Yp="_reactListening"+Math.random().toString(36).slice(2);function kh(n){if(!n[Yp]){n[Yp]=!0,GP.forEach(function(t){t!=="selectionchange"&&(jk.has(t)||vx(t,!1,n),vx(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Yp]||(e[Yp]=!0,vx("selectionchange",!1,e))}}function UR(n,e,t,i){switch(xR(e)){case 1:var r=sk;break;case 4:r=ok;break;default:r=KS}t=r.bind(null,e,t,n),r=void 0,!l1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function yx(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Sl(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}sR(function(){var u=s,h=YS(t),f=[];e:{var p=DR.get(n);if(p!==void 0){var m=QS,y=n;switch(n){case"keypress":if(rg(t)===0)break e;case"keydown":case"keyup":m=Sk;break;case"focusin":y="focus",m=dx;break;case"focusout":y="blur",m=dx;break;case"beforeblur":case"afterblur":m=dx;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=lT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=ck;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Ek;break;case RR:case IR:case NR:m=hk;break;case LR:m=Tk;break;case"scroll":m=ak;break;case"wheel":m=Ck;break;case"copy":case"cut":case"paste":m=pk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=uT}var S=(e&4)!==0,x=!S&&n==="scroll",g=S?p!==null?p+"Capture":null:p;S=[];for(var _=u,M;_!==null;){M=_;var E=M.stateNode;if(M.tag===5&&E!==null&&(M=E,g!==null&&(E=Ih(_,g),E!=null&&S.push(Oh(_,E,M)))),x)break;_=_.return}0<S.length&&(p=new m(p,y,null,t,h),f.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==o1&&(y=t.relatedTarget||t.fromElement)&&(Sl(y)||y[Ao]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=u,y=y?Sl(y):null,y!==null&&(x=Jl(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(S=lT,E="onMouseLeave",g="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(S=uT,E="onPointerLeave",g="onPointerEnter",_="pointer"),x=m==null?p:$c(m),M=y==null?p:$c(y),p=new S(E,_+"leave",m,t,h),p.target=x,p.relatedTarget=M,E=null,Sl(h)===u&&(S=new S(g,_+"enter",y,t,h),S.target=M,S.relatedTarget=x,E=S),x=E,m&&y)t:{for(S=m,g=y,_=0,M=S;M;M=_c(M))_++;for(M=0,E=g;E;E=_c(E))M++;for(;0<_-M;)S=_c(S),_--;for(;0<M-_;)g=_c(g),M--;for(;_--;){if(S===g||g!==null&&S===g.alternate)break t;S=_c(S),g=_c(g)}S=null}else S=null;m!==null&&ST(f,p,m,S,!1),y!==null&&x!==null&&ST(f,x,y,S,!0)}}e:{if(p=u?$c(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var A=Fk;else if(fT(p))if(bR)A=Bk;else{A=kk;var P=Uk}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=Ok);if(A&&(A=A(n,u))){ER(f,A,t,h);break e}P&&P(n,p,u),n==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&t1(p,"number",p.value)}switch(P=u?$c(u):window,n){case"focusin":(fT(P)||P.contentEditable==="true")&&(qc=P,f1=u,ch=null);break;case"focusout":ch=f1=qc=null;break;case"mousedown":p1=!0;break;case"contextmenu":case"mouseup":case"dragend":p1=!1,yT(f,t,h);break;case"selectionchange":if(Hk)break;case"keydown":case"keyup":yT(f,t,h)}var L;if(tw)e:{switch(n){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Yc?wR(n,t)&&(N="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(SR&&t.locale!=="ko"&&(Yc||N!=="onCompositionStart"?N==="onCompositionEnd"&&Yc&&(L=_R()):(aa=h,JS="value"in aa?aa.value:aa.textContent,Yc=!0)),P=Pg(u,N),0<P.length&&(N=new cT(N,n,null,t,h),f.push({event:N,listeners:P}),L?N.data=L:(L=MR(t),L!==null&&(N.data=L)))),(L=Rk?Ik(n,t):Nk(n,t))&&(u=Pg(u,"onBeforeInput"),0<u.length&&(h=new cT("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:u}),h.data=L))}FR(f,e)})}function Oh(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Pg(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Ih(n,t),s!=null&&i.unshift(Oh(n,s,r)),s=Ih(n,e),s!=null&&i.push(Oh(n,s,r))),n=n.return}return i}function _c(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ST(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=Ih(t,s),l!=null&&o.unshift(Oh(t,l,a))):r||(l=Ih(t,s),l!=null&&o.push(Oh(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Xk=/\r\n?/g,Yk=/\u0000|\uFFFD/g;function wT(n){return(typeof n=="string"?n:""+n).replace(Xk,`
`).replace(Yk,"")}function qp(n,e,t){if(e=wT(e),wT(n)!==e&&t)throw Error(Ge(425))}function Rg(){}var m1=null,g1=null;function v1(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var y1=typeof setTimeout=="function"?setTimeout:void 0,qk=typeof clearTimeout=="function"?clearTimeout:void 0,MT=typeof Promise=="function"?Promise:void 0,Zk=typeof queueMicrotask=="function"?queueMicrotask:typeof MT<"u"?function(n){return MT.resolve(null).then(n).catch($k)}:y1;function $k(n){setTimeout(function(){throw n})}function xx(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Dh(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Dh(e)}function ya(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function ET(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Xu=Math.random().toString(36).slice(2),Ws="__reactFiber$"+Xu,Bh="__reactProps$"+Xu,Ao="__reactContainer$"+Xu,x1="__reactEvents$"+Xu,Kk="__reactListeners$"+Xu,Jk="__reactHandles$"+Xu;function Sl(n){var e=n[Ws];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ao]||t[Ws]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=ET(n);n!==null;){if(t=n[Ws])return t;n=ET(n)}return e}n=t,t=n.parentNode}return null}function Mf(n){return n=n[Ws]||n[Ao],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function $c(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ge(33))}function Q0(n){return n[Bh]||null}var _1=[],Kc=-1;function Fa(n){return{current:n}}function Tn(n){0>Kc||(n.current=_1[Kc],_1[Kc]=null,Kc--)}function wn(n,e){Kc++,_1[Kc]=n.current,n.current=e}var ba={},ji=Fa(ba),yr=Fa(!1),zl=ba;function Eu(n,e){var t=n.type.contextTypes;if(!t)return ba;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function xr(n){return n=n.childContextTypes,n!=null}function Ig(){Tn(yr),Tn(ji)}function bT(n,e,t){if(ji.current!==ba)throw Error(Ge(168));wn(ji,e),wn(yr,t)}function kR(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ge(108,UU(n)||"Unknown",r));return On({},t,i)}function Ng(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ba,zl=ji.current,wn(ji,n),wn(yr,yr.current),!0}function TT(n,e,t){var i=n.stateNode;if(!i)throw Error(Ge(169));t?(n=kR(n,e,zl),i.__reactInternalMemoizedMergedChildContext=n,Tn(yr),Tn(ji),wn(ji,n)):Tn(yr),wn(yr,t)}var yo=null,ev=!1,_x=!1;function OR(n){yo===null?yo=[n]:yo.push(n)}function Qk(n){ev=!0,OR(n)}function Ua(){if(!_x&&yo!==null){_x=!0;var n=0,e=mn;try{var t=yo;for(mn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}yo=null,ev=!1}catch(r){throw yo!==null&&(yo=yo.slice(n+1)),cR(qS,Ua),r}finally{mn=e,_x=!1}}return null}var Jc=[],Qc=0,Lg=null,Dg=0,Zr=[],$r=0,Vl=null,wo=1,Mo="";function fl(n,e){Jc[Qc++]=Dg,Jc[Qc++]=Lg,Lg=n,Dg=e}function BR(n,e,t){Zr[$r++]=wo,Zr[$r++]=Mo,Zr[$r++]=Vl,Vl=n;var i=wo;n=Mo;var r=32-Es(i)-1;i&=~(1<<r),t+=1;var s=32-Es(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,wo=1<<32-Es(e)+r|t<<r|i,Mo=s+n}else wo=1<<s|t<<r|i,Mo=n}function iw(n){n.return!==null&&(fl(n,1),BR(n,1,0))}function rw(n){for(;n===Lg;)Lg=Jc[--Qc],Jc[Qc]=null,Dg=Jc[--Qc],Jc[Qc]=null;for(;n===Vl;)Vl=Zr[--$r],Zr[$r]=null,Mo=Zr[--$r],Zr[$r]=null,wo=Zr[--$r],Zr[$r]=null}var Ir=null,Pr=null,Rn=!1,_s=null;function zR(n,e){var t=Jr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function AT(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ir=n,Pr=ya(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ir=n,Pr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Vl!==null?{id:wo,overflow:Mo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Jr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ir=n,Pr=null,!0):!1;default:return!1}}function S1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function w1(n){if(Rn){var e=Pr;if(e){var t=e;if(!AT(n,e)){if(S1(n))throw Error(Ge(418));e=ya(t.nextSibling);var i=Ir;e&&AT(n,e)?zR(i,t):(n.flags=n.flags&-4097|2,Rn=!1,Ir=n)}}else{if(S1(n))throw Error(Ge(418));n.flags=n.flags&-4097|2,Rn=!1,Ir=n}}}function CT(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ir=n}function Zp(n){if(n!==Ir)return!1;if(!Rn)return CT(n),Rn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!v1(n.type,n.memoizedProps)),e&&(e=Pr)){if(S1(n))throw VR(),Error(Ge(418));for(;e;)zR(n,e),e=ya(e.nextSibling)}if(CT(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ge(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Pr=ya(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Pr=null}}else Pr=Ir?ya(n.stateNode.nextSibling):null;return!0}function VR(){for(var n=Pr;n;)n=ya(n.nextSibling)}function bu(){Pr=Ir=null,Rn=!1}function sw(n){_s===null?_s=[n]:_s.push(n)}var eO=No.ReactCurrentBatchConfig;function Td(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ge(309));var i=t.stateNode}if(!i)throw Error(Ge(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ge(284));if(!t._owner)throw Error(Ge(290,n))}return n}function $p(n,e){throw n=Object.prototype.toString.call(e),Error(Ge(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function PT(n){var e=n._init;return e(n._payload)}function HR(n){function e(g,_){if(n){var M=g.deletions;M===null?(g.deletions=[_],g.flags|=16):M.push(_)}}function t(g,_){if(!n)return null;for(;_!==null;)e(g,_),_=_.sibling;return null}function i(g,_){for(g=new Map;_!==null;)_.key!==null?g.set(_.key,_):g.set(_.index,_),_=_.sibling;return g}function r(g,_){return g=wa(g,_),g.index=0,g.sibling=null,g}function s(g,_,M){return g.index=M,n?(M=g.alternate,M!==null?(M=M.index,M<_?(g.flags|=2,_):M):(g.flags|=2,_)):(g.flags|=1048576,_)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,_,M,E){return _===null||_.tag!==6?(_=Ax(M,g.mode,E),_.return=g,_):(_=r(_,M),_.return=g,_)}function l(g,_,M,E){var A=M.type;return A===Xc?h(g,_,M.props.children,E,M.key):_!==null&&(_.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===ta&&PT(A)===_.type)?(E=r(_,M.props),E.ref=Td(g,_,M),E.return=g,E):(E=dg(M.type,M.key,M.props,null,g.mode,E),E.ref=Td(g,_,M),E.return=g,E)}function u(g,_,M,E){return _===null||_.tag!==4||_.stateNode.containerInfo!==M.containerInfo||_.stateNode.implementation!==M.implementation?(_=Cx(M,g.mode,E),_.return=g,_):(_=r(_,M.children||[]),_.return=g,_)}function h(g,_,M,E,A){return _===null||_.tag!==7?(_=Ll(M,g.mode,E,A),_.return=g,_):(_=r(_,M),_.return=g,_)}function f(g,_,M){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Ax(""+_,g.mode,M),_.return=g,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Bp:return M=dg(_.type,_.key,_.props,null,g.mode,M),M.ref=Td(g,null,_),M.return=g,M;case jc:return _=Cx(_,g.mode,M),_.return=g,_;case ta:var E=_._init;return f(g,E(_._payload),M)}if(Kd(_)||Sd(_))return _=Ll(_,g.mode,M,null),_.return=g,_;$p(g,_)}return null}function p(g,_,M,E){var A=_!==null?_.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return A!==null?null:a(g,_,""+M,E);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Bp:return M.key===A?l(g,_,M,E):null;case jc:return M.key===A?u(g,_,M,E):null;case ta:return A=M._init,p(g,_,A(M._payload),E)}if(Kd(M)||Sd(M))return A!==null?null:h(g,_,M,E,null);$p(g,M)}return null}function m(g,_,M,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(M)||null,a(_,g,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Bp:return g=g.get(E.key===null?M:E.key)||null,l(_,g,E,A);case jc:return g=g.get(E.key===null?M:E.key)||null,u(_,g,E,A);case ta:var P=E._init;return m(g,_,M,P(E._payload),A)}if(Kd(E)||Sd(E))return g=g.get(M)||null,h(_,g,E,A,null);$p(_,E)}return null}function y(g,_,M,E){for(var A=null,P=null,L=_,N=_=0,C=null;L!==null&&N<M.length;N++){L.index>N?(C=L,L=null):C=L.sibling;var R=p(g,L,M[N],E);if(R===null){L===null&&(L=C);break}n&&L&&R.alternate===null&&e(g,L),_=s(R,_,N),P===null?A=R:P.sibling=R,P=R,L=C}if(N===M.length)return t(g,L),Rn&&fl(g,N),A;if(L===null){for(;N<M.length;N++)L=f(g,M[N],E),L!==null&&(_=s(L,_,N),P===null?A=L:P.sibling=L,P=L);return Rn&&fl(g,N),A}for(L=i(g,L);N<M.length;N++)C=m(L,g,N,M[N],E),C!==null&&(n&&C.alternate!==null&&L.delete(C.key===null?N:C.key),_=s(C,_,N),P===null?A=C:P.sibling=C,P=C);return n&&L.forEach(function(k){return e(g,k)}),Rn&&fl(g,N),A}function S(g,_,M,E){var A=Sd(M);if(typeof A!="function")throw Error(Ge(150));if(M=A.call(M),M==null)throw Error(Ge(151));for(var P=A=null,L=_,N=_=0,C=null,R=M.next();L!==null&&!R.done;N++,R=M.next()){L.index>N?(C=L,L=null):C=L.sibling;var k=p(g,L,R.value,E);if(k===null){L===null&&(L=C);break}n&&L&&k.alternate===null&&e(g,L),_=s(k,_,N),P===null?A=k:P.sibling=k,P=k,L=C}if(R.done)return t(g,L),Rn&&fl(g,N),A;if(L===null){for(;!R.done;N++,R=M.next())R=f(g,R.value,E),R!==null&&(_=s(R,_,N),P===null?A=R:P.sibling=R,P=R);return Rn&&fl(g,N),A}for(L=i(g,L);!R.done;N++,R=M.next())R=m(L,g,N,R.value,E),R!==null&&(n&&R.alternate!==null&&L.delete(R.key===null?N:R.key),_=s(R,_,N),P===null?A=R:P.sibling=R,P=R);return n&&L.forEach(function(H){return e(g,H)}),Rn&&fl(g,N),A}function x(g,_,M,E){if(typeof M=="object"&&M!==null&&M.type===Xc&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case Bp:e:{for(var A=M.key,P=_;P!==null;){if(P.key===A){if(A=M.type,A===Xc){if(P.tag===7){t(g,P.sibling),_=r(P,M.props.children),_.return=g,g=_;break e}}else if(P.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===ta&&PT(A)===P.type){t(g,P.sibling),_=r(P,M.props),_.ref=Td(g,P,M),_.return=g,g=_;break e}t(g,P);break}else e(g,P);P=P.sibling}M.type===Xc?(_=Ll(M.props.children,g.mode,E,M.key),_.return=g,g=_):(E=dg(M.type,M.key,M.props,null,g.mode,E),E.ref=Td(g,_,M),E.return=g,g=E)}return o(g);case jc:e:{for(P=M.key;_!==null;){if(_.key===P)if(_.tag===4&&_.stateNode.containerInfo===M.containerInfo&&_.stateNode.implementation===M.implementation){t(g,_.sibling),_=r(_,M.children||[]),_.return=g,g=_;break e}else{t(g,_);break}else e(g,_);_=_.sibling}_=Cx(M,g.mode,E),_.return=g,g=_}return o(g);case ta:return P=M._init,x(g,_,P(M._payload),E)}if(Kd(M))return y(g,_,M,E);if(Sd(M))return S(g,_,M,E);$p(g,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,_!==null&&_.tag===6?(t(g,_.sibling),_=r(_,M),_.return=g,g=_):(t(g,_),_=Ax(M,g.mode,E),_.return=g,g=_),o(g)):t(g,_)}return x}var Tu=HR(!0),GR=HR(!1),Fg=Fa(null),Ug=null,eu=null,ow=null;function aw(){ow=eu=Ug=null}function lw(n){var e=Fg.current;Tn(Fg),n._currentValue=e}function M1(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function mu(n,e){Ug=n,ow=eu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(vr=!0),n.firstContext=null)}function rs(n){var e=n._currentValue;if(ow!==n)if(n={context:n,memoizedValue:e,next:null},eu===null){if(Ug===null)throw Error(Ge(308));eu=n,Ug.dependencies={lanes:0,firstContext:n}}else eu=eu.next=n;return e}var wl=null;function cw(n){wl===null?wl=[n]:wl.push(n)}function WR(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,cw(e)):(t.next=r.next,r.next=t),e.interleaved=t,Co(n,i)}function Co(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var na=!1;function uw(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jR(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Eo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function xa(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,an&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Co(n,t)}return r=i.interleaved,r===null?(e.next=e,cw(i)):(e.next=r.next,r.next=e),i.interleaved=e,Co(n,t)}function sg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,ZS(n,t)}}function RT(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function kg(n,e,t,i){var r=n.updateQueue;na=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,S=a;switch(p=e,m=t,S.tag){case 1:if(y=S.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=S.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=On({},f,p);break e;case 2:na=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=m,l=f):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(h===null&&(l=f),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Gl|=o,n.lanes=o,n.memoizedState=f}}function IT(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Ge(191,r));r.call(i)}}}var Ef={},qs=Fa(Ef),zh=Fa(Ef),Vh=Fa(Ef);function Ml(n){if(n===Ef)throw Error(Ge(174));return n}function dw(n,e){switch(wn(Vh,e),wn(zh,n),wn(qs,Ef),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:i1(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=i1(e,n)}Tn(qs),wn(qs,e)}function Au(){Tn(qs),Tn(zh),Tn(Vh)}function XR(n){Ml(Vh.current);var e=Ml(qs.current),t=i1(e,n.type);e!==t&&(wn(zh,n),wn(qs,t))}function hw(n){zh.current===n&&(Tn(qs),Tn(zh))}var Ln=Fa(0);function Og(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sx=[];function fw(){for(var n=0;n<Sx.length;n++)Sx[n]._workInProgressVersionPrimary=null;Sx.length=0}var og=No.ReactCurrentDispatcher,wx=No.ReactCurrentBatchConfig,Hl=0,kn=null,li=null,yi=null,Bg=!1,uh=!1,Hh=0,tO=0;function Fi(){throw Error(Ge(321))}function pw(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!As(n[t],e[t]))return!1;return!0}function mw(n,e,t,i,r,s){if(Hl=s,kn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,og.current=n===null||n.memoizedState===null?sO:oO,n=t(i,r),uh){s=0;do{if(uh=!1,Hh=0,25<=s)throw Error(Ge(301));s+=1,yi=li=null,e.updateQueue=null,og.current=aO,n=t(i,r)}while(uh)}if(og.current=zg,e=li!==null&&li.next!==null,Hl=0,yi=li=kn=null,Bg=!1,e)throw Error(Ge(300));return n}function gw(){var n=Hh!==0;return Hh=0,n}function Hs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yi===null?kn.memoizedState=yi=n:yi=yi.next=n,yi}function ss(){if(li===null){var n=kn.alternate;n=n!==null?n.memoizedState:null}else n=li.next;var e=yi===null?kn.memoizedState:yi.next;if(e!==null)yi=e,li=n;else{if(n===null)throw Error(Ge(310));li=n,n={memoizedState:li.memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},yi===null?kn.memoizedState=yi=n:yi=yi.next=n}return yi}function Gh(n,e){return typeof e=="function"?e(n):e}function Mx(n){var e=ss(),t=e.queue;if(t===null)throw Error(Ge(311));t.lastRenderedReducer=n;var i=li,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Hl&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,kn.lanes|=h,Gl|=h}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,As(i,e.memoizedState)||(vr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,kn.lanes|=s,Gl|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Ex(n){var e=ss(),t=e.queue;if(t===null)throw Error(Ge(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);As(s,e.memoizedState)||(vr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function YR(){}function qR(n,e){var t=kn,i=ss(),r=e(),s=!As(i.memoizedState,r);if(s&&(i.memoizedState=r,vr=!0),i=i.queue,vw(KR.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||yi!==null&&yi.memoizedState.tag&1){if(t.flags|=2048,Wh(9,$R.bind(null,t,i,r,e),void 0,null),Si===null)throw Error(Ge(349));Hl&30||ZR(t,e,r)}return r}function ZR(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=kn.updateQueue,e===null?(e={lastEffect:null,stores:null},kn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function $R(n,e,t,i){e.value=t,e.getSnapshot=i,JR(e)&&QR(n)}function KR(n,e,t){return t(function(){JR(e)&&QR(n)})}function JR(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!As(n,t)}catch{return!0}}function QR(n){var e=Co(n,1);e!==null&&bs(e,n,1,-1)}function NT(n){var e=Hs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gh,lastRenderedState:n},e.queue=n,n=n.dispatch=rO.bind(null,kn,n),[e.memoizedState,n]}function Wh(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=kn.updateQueue,e===null?(e={lastEffect:null,stores:null},kn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function e3(){return ss().memoizedState}function ag(n,e,t,i){var r=Hs();kn.flags|=n,r.memoizedState=Wh(1|e,t,void 0,i===void 0?null:i)}function tv(n,e,t,i){var r=ss();i=i===void 0?null:i;var s=void 0;if(li!==null){var o=li.memoizedState;if(s=o.destroy,i!==null&&pw(i,o.deps)){r.memoizedState=Wh(e,t,s,i);return}}kn.flags|=n,r.memoizedState=Wh(1|e,t,s,i)}function LT(n,e){return ag(8390656,8,n,e)}function vw(n,e){return tv(2048,8,n,e)}function t3(n,e){return tv(4,2,n,e)}function n3(n,e){return tv(4,4,n,e)}function i3(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function r3(n,e,t){return t=t!=null?t.concat([n]):null,tv(4,4,i3.bind(null,e,n),t)}function yw(){}function s3(n,e){var t=ss();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&pw(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function o3(n,e){var t=ss();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&pw(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function a3(n,e,t){return Hl&21?(As(t,e)||(t=hR(),kn.lanes|=t,Gl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,vr=!0),n.memoizedState=t)}function nO(n,e){var t=mn;mn=t!==0&&4>t?t:4,n(!0);var i=wx.transition;wx.transition={};try{n(!1),e()}finally{mn=t,wx.transition=i}}function l3(){return ss().memoizedState}function iO(n,e,t){var i=Sa(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},c3(n))u3(e,t);else if(t=WR(n,e,t,i),t!==null){var r=nr();bs(t,n,i,r),d3(t,e,i)}}function rO(n,e,t){var i=Sa(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(c3(n))u3(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,As(a,o)){var l=e.interleaved;l===null?(r.next=r,cw(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=WR(n,e,r,i),t!==null&&(r=nr(),bs(t,n,i,r),d3(t,e,i))}}function c3(n){var e=n.alternate;return n===kn||e!==null&&e===kn}function u3(n,e){uh=Bg=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function d3(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,ZS(n,t)}}var zg={readContext:rs,useCallback:Fi,useContext:Fi,useEffect:Fi,useImperativeHandle:Fi,useInsertionEffect:Fi,useLayoutEffect:Fi,useMemo:Fi,useReducer:Fi,useRef:Fi,useState:Fi,useDebugValue:Fi,useDeferredValue:Fi,useTransition:Fi,useMutableSource:Fi,useSyncExternalStore:Fi,useId:Fi,unstable_isNewReconciler:!1},sO={readContext:rs,useCallback:function(n,e){return Hs().memoizedState=[n,e===void 0?null:e],n},useContext:rs,useEffect:LT,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ag(4194308,4,i3.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ag(4194308,4,n,e)},useInsertionEffect:function(n,e){return ag(4,2,n,e)},useMemo:function(n,e){var t=Hs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Hs();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=iO.bind(null,kn,n),[i.memoizedState,n]},useRef:function(n){var e=Hs();return n={current:n},e.memoizedState=n},useState:NT,useDebugValue:yw,useDeferredValue:function(n){return Hs().memoizedState=n},useTransition:function(){var n=NT(!1),e=n[0];return n=nO.bind(null,n[1]),Hs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=kn,r=Hs();if(Rn){if(t===void 0)throw Error(Ge(407));t=t()}else{if(t=e(),Si===null)throw Error(Ge(349));Hl&30||ZR(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,LT(KR.bind(null,i,s,n),[n]),i.flags|=2048,Wh(9,$R.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Hs(),e=Si.identifierPrefix;if(Rn){var t=Mo,i=wo;t=(i&~(1<<32-Es(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Hh++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=tO++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},oO={readContext:rs,useCallback:s3,useContext:rs,useEffect:vw,useImperativeHandle:r3,useInsertionEffect:t3,useLayoutEffect:n3,useMemo:o3,useReducer:Mx,useRef:e3,useState:function(){return Mx(Gh)},useDebugValue:yw,useDeferredValue:function(n){var e=ss();return a3(e,li.memoizedState,n)},useTransition:function(){var n=Mx(Gh)[0],e=ss().memoizedState;return[n,e]},useMutableSource:YR,useSyncExternalStore:qR,useId:l3,unstable_isNewReconciler:!1},aO={readContext:rs,useCallback:s3,useContext:rs,useEffect:vw,useImperativeHandle:r3,useInsertionEffect:t3,useLayoutEffect:n3,useMemo:o3,useReducer:Ex,useRef:e3,useState:function(){return Ex(Gh)},useDebugValue:yw,useDeferredValue:function(n){var e=ss();return li===null?e.memoizedState=n:a3(e,li.memoizedState,n)},useTransition:function(){var n=Ex(Gh)[0],e=ss().memoizedState;return[n,e]},useMutableSource:YR,useSyncExternalStore:qR,useId:l3,unstable_isNewReconciler:!1};function ys(n,e){if(n&&n.defaultProps){e=On({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function E1(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:On({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var nv={isMounted:function(n){return(n=n._reactInternals)?Jl(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=nr(),r=Sa(n),s=Eo(i,r);s.payload=e,t!=null&&(s.callback=t),e=xa(n,s,r),e!==null&&(bs(e,n,r,i),sg(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=nr(),r=Sa(n),s=Eo(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=xa(n,s,r),e!==null&&(bs(e,n,r,i),sg(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=nr(),i=Sa(n),r=Eo(t,i);r.tag=2,e!=null&&(r.callback=e),e=xa(n,r,i),e!==null&&(bs(e,n,i,t),sg(e,n,i))}};function DT(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Uh(t,i)||!Uh(r,s):!0}function h3(n,e,t){var i=!1,r=ba,s=e.contextType;return typeof s=="object"&&s!==null?s=rs(s):(r=xr(e)?zl:ji.current,i=e.contextTypes,s=(i=i!=null)?Eu(n,r):ba),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nv,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function FT(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&nv.enqueueReplaceState(e,e.state,null)}function b1(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},uw(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=rs(s):(s=xr(e)?zl:ji.current,r.context=Eu(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(E1(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&nv.enqueueReplaceState(r,r.state,null),kg(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Cu(n,e){try{var t="",i=e;do t+=FU(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function bx(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function T1(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var lO=typeof WeakMap=="function"?WeakMap:Map;function f3(n,e,t){t=Eo(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Hg||(Hg=!0,U1=i),T1(n,e)},t}function p3(n,e,t){t=Eo(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){T1(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){T1(n,e),typeof i!="function"&&(_a===null?_a=new Set([this]):_a.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function UT(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new lO;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=wO.bind(null,n,e,t),e.then(n,n))}function kT(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function OT(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Eo(-1,1),e.tag=2,xa(t,e,1))),t.lanes|=1),n)}var cO=No.ReactCurrentOwner,vr=!1;function Ki(n,e,t,i){e.child=n===null?GR(e,null,t,i):Tu(e,n.child,t,i)}function BT(n,e,t,i,r){t=t.render;var s=e.ref;return mu(e,r),i=mw(n,e,t,i,s,r),t=gw(),n!==null&&!vr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Po(n,e,r)):(Rn&&t&&iw(e),e.flags|=1,Ki(n,e,i,r),e.child)}function zT(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!Tw(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,m3(n,e,s,i,r)):(n=dg(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Uh,t(o,i)&&n.ref===e.ref)return Po(n,e,r)}return e.flags|=1,n=wa(s,i),n.ref=e.ref,n.return=e,e.child=n}function m3(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Uh(s,i)&&n.ref===e.ref)if(vr=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(vr=!0);else return e.lanes=n.lanes,Po(n,e,r)}return A1(n,e,t,i,r)}function g3(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wn(nu,Cr),Cr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,wn(nu,Cr),Cr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,wn(nu,Cr),Cr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,wn(nu,Cr),Cr|=i;return Ki(n,e,r,t),e.child}function v3(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function A1(n,e,t,i,r){var s=xr(t)?zl:ji.current;return s=Eu(e,s),mu(e,r),t=mw(n,e,t,i,s,r),i=gw(),n!==null&&!vr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Po(n,e,r)):(Rn&&i&&iw(e),e.flags|=1,Ki(n,e,t,r),e.child)}function VT(n,e,t,i,r){if(xr(t)){var s=!0;Ng(e)}else s=!1;if(mu(e,r),e.stateNode===null)lg(n,e),h3(e,t,i),b1(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=rs(u):(u=xr(t)?zl:ji.current,u=Eu(e,u));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&FT(e,o,i,u),na=!1;var p=e.memoizedState;o.state=p,kg(e,i,o,r),l=e.memoizedState,a!==i||p!==l||yr.current||na?(typeof h=="function"&&(E1(e,t,h,i),l=e.memoizedState),(a=na||DT(e,t,a,i,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,jR(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:ys(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=rs(l):(l=xr(t)?zl:ji.current,l=Eu(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&FT(e,o,i,l),na=!1,p=e.memoizedState,o.state=p,kg(e,i,o,r);var y=e.memoizedState;a!==f||p!==y||yr.current||na?(typeof m=="function"&&(E1(e,t,m,i),y=e.memoizedState),(u=na||DT(e,t,u,i,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return C1(n,e,t,i,s,r)}function C1(n,e,t,i,r,s){v3(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&TT(e,t,!1),Po(n,e,s);i=e.stateNode,cO.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Tu(e,n.child,null,s),e.child=Tu(e,null,a,s)):Ki(n,e,a,s),e.memoizedState=i.state,r&&TT(e,t,!0),e.child}function y3(n){var e=n.stateNode;e.pendingContext?bT(n,e.pendingContext,e.pendingContext!==e.context):e.context&&bT(n,e.context,!1),dw(n,e.containerInfo)}function HT(n,e,t,i,r){return bu(),sw(r),e.flags|=256,Ki(n,e,t,i),e.child}var P1={dehydrated:null,treeContext:null,retryLane:0};function R1(n){return{baseLanes:n,cachePool:null,transitions:null}}function x3(n,e,t){var i=e.pendingProps,r=Ln.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),wn(Ln,r&1),n===null)return w1(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=sv(o,i,0,null),n=Ll(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=R1(t),e.memoizedState=P1,n):xw(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return uO(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=wa(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=wa(a,s):(s=Ll(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?R1(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=P1,i}return s=n.child,n=s.sibling,i=wa(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function xw(n,e){return e=sv({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Kp(n,e,t,i){return i!==null&&sw(i),Tu(e,n.child,null,t),n=xw(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function uO(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=bx(Error(Ge(422))),Kp(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=sv({mode:"visible",children:i.children},r,0,null),s=Ll(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Tu(e,n.child,null,o),e.child.memoizedState=R1(o),e.memoizedState=P1,s);if(!(e.mode&1))return Kp(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Ge(419)),i=bx(s,i,void 0),Kp(n,e,o,i)}if(a=(o&n.childLanes)!==0,vr||a){if(i=Si,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Co(n,r),bs(i,n,r,-1))}return bw(),i=bx(Error(Ge(421))),Kp(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=MO.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,Pr=ya(r.nextSibling),Ir=e,Rn=!0,_s=null,n!==null&&(Zr[$r++]=wo,Zr[$r++]=Mo,Zr[$r++]=Vl,wo=n.id,Mo=n.overflow,Vl=e),e=xw(e,i.children),e.flags|=4096,e)}function GT(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),M1(n.return,e,t)}function Tx(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function _3(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ki(n,e,i.children,t),i=Ln.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&GT(n,t,e);else if(n.tag===19)GT(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(wn(Ln,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Og(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Tx(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Og(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Tx(e,!0,t,null,s);break;case"together":Tx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lg(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Po(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Gl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ge(153));if(e.child!==null){for(n=e.child,t=wa(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=wa(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function dO(n,e,t){switch(e.tag){case 3:y3(e),bu();break;case 5:XR(e);break;case 1:xr(e.type)&&Ng(e);break;case 4:dw(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;wn(Fg,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(wn(Ln,Ln.current&1),e.flags|=128,null):t&e.child.childLanes?x3(n,e,t):(wn(Ln,Ln.current&1),n=Po(n,e,t),n!==null?n.sibling:null);wn(Ln,Ln.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return _3(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),wn(Ln,Ln.current),i)break;return null;case 22:case 23:return e.lanes=0,g3(n,e,t)}return Po(n,e,t)}var S3,I1,w3,M3;S3=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};I1=function(){};w3=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Ml(qs.current);var s=null;switch(t){case"input":r=Q_(n,r),i=Q_(n,i),s=[];break;case"select":r=On({},r,{value:void 0}),i=On({},i,{value:void 0}),s=[];break;case"textarea":r=n1(n,r),i=n1(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Rg)}r1(t,i);var o;t=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ph.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ph.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&En("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};M3=function(n,e,t,i){t!==i&&(e.flags|=4)};function Ad(n,e){if(!Rn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Ui(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function hO(n,e,t){var i=e.pendingProps;switch(rw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ui(e),null;case 1:return xr(e.type)&&Ig(),Ui(e),null;case 3:return i=e.stateNode,Au(),Tn(yr),Tn(ji),fw(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Zp(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_s!==null&&(B1(_s),_s=null))),I1(n,e),Ui(e),null;case 5:hw(e);var r=Ml(Vh.current);if(t=e.type,n!==null&&e.stateNode!=null)w3(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ge(166));return Ui(e),null}if(n=Ml(qs.current),Zp(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Ws]=e,i[Bh]=s,n=(e.mode&1)!==0,t){case"dialog":En("cancel",i),En("close",i);break;case"iframe":case"object":case"embed":En("load",i);break;case"video":case"audio":for(r=0;r<Qd.length;r++)En(Qd[r],i);break;case"source":En("error",i);break;case"img":case"image":case"link":En("error",i),En("load",i);break;case"details":En("toggle",i);break;case"input":Jb(i,s),En("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},En("invalid",i);break;case"textarea":eT(i,s),En("invalid",i)}r1(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&qp(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&qp(i.textContent,a,n),r=["children",""+a]):Ph.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&En("scroll",i)}switch(t){case"input":zp(i),Qb(i,s,!0);break;case"textarea":zp(i),tT(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Rg)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=KP(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Ws]=e,n[Bh]=i,S3(n,e,!1,!1),e.stateNode=n;e:{switch(o=s1(t,i),t){case"dialog":En("cancel",n),En("close",n),r=i;break;case"iframe":case"object":case"embed":En("load",n),r=i;break;case"video":case"audio":for(r=0;r<Qd.length;r++)En(Qd[r],n);r=i;break;case"source":En("error",n),r=i;break;case"img":case"image":case"link":En("error",n),En("load",n),r=i;break;case"details":En("toggle",n),r=i;break;case"input":Jb(n,i),r=Q_(n,i),En("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=On({},i,{value:void 0}),En("invalid",n);break;case"textarea":eT(n,i),r=n1(n,i),En("invalid",n);break;default:r=i}r1(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?eR(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&JP(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Rh(n,l):typeof l=="number"&&Rh(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ph.hasOwnProperty(s)?l!=null&&s==="onScroll"&&En("scroll",n):l!=null&&GS(n,s,l,o))}switch(t){case"input":zp(n),Qb(n,i,!1);break;case"textarea":zp(n),tT(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Ea(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?du(n,!!i.multiple,s,!1):i.defaultValue!=null&&du(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Rg)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ui(e),null;case 6:if(n&&e.stateNode!=null)M3(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ge(166));if(t=Ml(Vh.current),Ml(qs.current),Zp(e)){if(i=e.stateNode,t=e.memoizedProps,i[Ws]=e,(s=i.nodeValue!==t)&&(n=Ir,n!==null))switch(n.tag){case 3:qp(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&qp(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Ws]=e,e.stateNode=i}return Ui(e),null;case 13:if(Tn(Ln),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Rn&&Pr!==null&&e.mode&1&&!(e.flags&128))VR(),bu(),e.flags|=98560,s=!1;else if(s=Zp(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Ge(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ge(317));s[Ws]=e}else bu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ui(e),s=!1}else _s!==null&&(B1(_s),_s=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Ln.current&1?ci===0&&(ci=3):bw())),e.updateQueue!==null&&(e.flags|=4),Ui(e),null);case 4:return Au(),I1(n,e),n===null&&kh(e.stateNode.containerInfo),Ui(e),null;case 10:return lw(e.type._context),Ui(e),null;case 17:return xr(e.type)&&Ig(),Ui(e),null;case 19:if(Tn(Ln),s=e.memoizedState,s===null)return Ui(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Ad(s,!1);else{if(ci!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Og(n),o!==null){for(e.flags|=128,Ad(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return wn(Ln,Ln.current&1|2),e.child}n=n.sibling}s.tail!==null&&qn()>Pu&&(e.flags|=128,i=!0,Ad(s,!1),e.lanes=4194304)}else{if(!i)if(n=Og(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ad(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Rn)return Ui(e),null}else 2*qn()-s.renderingStartTime>Pu&&t!==1073741824&&(e.flags|=128,i=!0,Ad(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=qn(),e.sibling=null,t=Ln.current,wn(Ln,i?t&1|2:t&1),e):(Ui(e),null);case 22:case 23:return Ew(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Cr&1073741824&&(Ui(e),e.subtreeFlags&6&&(e.flags|=8192)):Ui(e),null;case 24:return null;case 25:return null}throw Error(Ge(156,e.tag))}function fO(n,e){switch(rw(e),e.tag){case 1:return xr(e.type)&&Ig(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Au(),Tn(yr),Tn(ji),fw(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return hw(e),null;case 13:if(Tn(Ln),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ge(340));bu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Tn(Ln),null;case 4:return Au(),null;case 10:return lw(e.type._context),null;case 22:case 23:return Ew(),null;case 24:return null;default:return null}}var Jp=!1,zi=!1,pO=typeof WeakSet=="function"?WeakSet:Set,mt=null;function tu(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Gn(n,e,i)}else t.current=null}function N1(n,e,t){try{t()}catch(i){Gn(n,e,i)}}var WT=!1;function mO(n,e){if(m1=Ag,n=CR(),nw(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=n,p=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++u===r&&(a=o),p===s&&++h===i&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(g1={focusedElem:n,selectionRange:t},Ag=!1,mt=e;mt!==null;)if(e=mt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,mt=n;else for(;mt!==null;){e=mt;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var S=y.memoizedProps,x=y.memoizedState,g=e.stateNode,_=g.getSnapshotBeforeUpdate(e.elementType===e.type?S:ys(e.type,S),x);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var M=e.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ge(163))}}catch(E){Gn(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,mt=n;break}mt=e.return}return y=WT,WT=!1,y}function dh(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&N1(e,t,s)}r=r.next}while(r!==i)}}function iv(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function L1(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function E3(n){var e=n.alternate;e!==null&&(n.alternate=null,E3(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ws],delete e[Bh],delete e[x1],delete e[Kk],delete e[Jk])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function b3(n){return n.tag===5||n.tag===3||n.tag===4}function jT(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||b3(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function D1(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Rg));else if(i!==4&&(n=n.child,n!==null))for(D1(n,e,t),n=n.sibling;n!==null;)D1(n,e,t),n=n.sibling}function F1(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(F1(n,e,t),n=n.sibling;n!==null;)F1(n,e,t),n=n.sibling}var Mi=null,xs=!1;function Go(n,e,t){for(t=t.child;t!==null;)T3(n,e,t),t=t.sibling}function T3(n,e,t){if(Ys&&typeof Ys.onCommitFiberUnmount=="function")try{Ys.onCommitFiberUnmount(Z0,t)}catch{}switch(t.tag){case 5:zi||tu(t,e);case 6:var i=Mi,r=xs;Mi=null,Go(n,e,t),Mi=i,xs=r,Mi!==null&&(xs?(n=Mi,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Mi.removeChild(t.stateNode));break;case 18:Mi!==null&&(xs?(n=Mi,t=t.stateNode,n.nodeType===8?xx(n.parentNode,t):n.nodeType===1&&xx(n,t),Dh(n)):xx(Mi,t.stateNode));break;case 4:i=Mi,r=xs,Mi=t.stateNode.containerInfo,xs=!0,Go(n,e,t),Mi=i,xs=r;break;case 0:case 11:case 14:case 15:if(!zi&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&N1(t,e,o),r=r.next}while(r!==i)}Go(n,e,t);break;case 1:if(!zi&&(tu(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Gn(t,e,a)}Go(n,e,t);break;case 21:Go(n,e,t);break;case 22:t.mode&1?(zi=(i=zi)||t.memoizedState!==null,Go(n,e,t),zi=i):Go(n,e,t);break;default:Go(n,e,t)}}function XT(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new pO),e.forEach(function(i){var r=EO.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function ds(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Mi=a.stateNode,xs=!1;break e;case 3:Mi=a.stateNode.containerInfo,xs=!0;break e;case 4:Mi=a.stateNode.containerInfo,xs=!0;break e}a=a.return}if(Mi===null)throw Error(Ge(160));T3(s,o,r),Mi=null,xs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Gn(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)A3(e,n),e=e.sibling}function A3(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ds(e,n),Os(n),i&4){try{dh(3,n,n.return),iv(3,n)}catch(S){Gn(n,n.return,S)}try{dh(5,n,n.return)}catch(S){Gn(n,n.return,S)}}break;case 1:ds(e,n),Os(n),i&512&&t!==null&&tu(t,t.return);break;case 5:if(ds(e,n),Os(n),i&512&&t!==null&&tu(t,t.return),n.flags&32){var r=n.stateNode;try{Rh(r,"")}catch(S){Gn(n,n.return,S)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&ZP(r,s),s1(a,o);var u=s1(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?eR(r,f):h==="dangerouslySetInnerHTML"?JP(r,f):h==="children"?Rh(r,f):GS(r,h,f,u)}switch(a){case"input":e1(r,s);break;case"textarea":$P(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?du(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?du(r,!!s.multiple,s.defaultValue,!0):du(r,!!s.multiple,s.multiple?[]:"",!1))}r[Bh]=s}catch(S){Gn(n,n.return,S)}}break;case 6:if(ds(e,n),Os(n),i&4){if(n.stateNode===null)throw Error(Ge(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(S){Gn(n,n.return,S)}}break;case 3:if(ds(e,n),Os(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Dh(e.containerInfo)}catch(S){Gn(n,n.return,S)}break;case 4:ds(e,n),Os(n);break;case 13:ds(e,n),Os(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(ww=qn())),i&4&&XT(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(zi=(u=zi)||h,ds(e,n),zi=u):ds(e,n),Os(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(mt=n,h=n.child;h!==null;){for(f=mt=h;mt!==null;){switch(p=mt,m=p.child,p.tag){case 0:case 11:case 14:case 15:dh(4,p,p.return);break;case 1:tu(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(S){Gn(i,t,S)}}break;case 5:tu(p,p.return);break;case 22:if(p.memoizedState!==null){qT(f);continue}}m!==null?(m.return=p,mt=m):qT(f)}h=h.sibling}e:for(h=null,f=n;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=QP("display",o))}catch(S){Gn(n,n.return,S)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(S){Gn(n,n.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ds(e,n),Os(n),i&4&&XT(n);break;case 21:break;default:ds(e,n),Os(n)}}function Os(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(b3(t)){var i=t;break e}t=t.return}throw Error(Ge(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Rh(r,""),i.flags&=-33);var s=jT(n);F1(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=jT(n);D1(n,a,o);break;default:throw Error(Ge(161))}}catch(l){Gn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function gO(n,e,t){mt=n,C3(n)}function C3(n,e,t){for(var i=(n.mode&1)!==0;mt!==null;){var r=mt,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Jp;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||zi;a=Jp;var u=zi;if(Jp=o,(zi=l)&&!u)for(mt=r;mt!==null;)o=mt,l=o.child,o.tag===22&&o.memoizedState!==null?ZT(r):l!==null?(l.return=o,mt=l):ZT(r);for(;s!==null;)mt=s,C3(s),s=s.sibling;mt=r,Jp=a,zi=u}YT(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,mt=s):YT(n)}}function YT(n){for(;mt!==null;){var e=mt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zi||iv(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!zi)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:ys(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&IT(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}IT(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Dh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ge(163))}zi||e.flags&512&&L1(e)}catch(p){Gn(e,e.return,p)}}if(e===n){mt=null;break}if(t=e.sibling,t!==null){t.return=e.return,mt=t;break}mt=e.return}}function qT(n){for(;mt!==null;){var e=mt;if(e===n){mt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,mt=t;break}mt=e.return}}function ZT(n){for(;mt!==null;){var e=mt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{iv(4,e)}catch(l){Gn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Gn(e,r,l)}}var s=e.return;try{L1(e)}catch(l){Gn(e,s,l)}break;case 5:var o=e.return;try{L1(e)}catch(l){Gn(e,o,l)}}}catch(l){Gn(e,e.return,l)}if(e===n){mt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,mt=a;break}mt=e.return}}var vO=Math.ceil,Vg=No.ReactCurrentDispatcher,_w=No.ReactCurrentOwner,es=No.ReactCurrentBatchConfig,an=0,Si=null,ii=null,bi=0,Cr=0,nu=Fa(0),ci=0,jh=null,Gl=0,rv=0,Sw=0,hh=null,mr=null,ww=0,Pu=1/0,vo=null,Hg=!1,U1=null,_a=null,Qp=!1,la=null,Gg=0,fh=0,k1=null,cg=-1,ug=0;function nr(){return an&6?qn():cg!==-1?cg:cg=qn()}function Sa(n){return n.mode&1?an&2&&bi!==0?bi&-bi:eO.transition!==null?(ug===0&&(ug=hR()),ug):(n=mn,n!==0||(n=window.event,n=n===void 0?16:xR(n.type)),n):1}function bs(n,e,t,i){if(50<fh)throw fh=0,k1=null,Error(Ge(185));Sf(n,t,i),(!(an&2)||n!==Si)&&(n===Si&&(!(an&2)&&(rv|=t),ci===4&&sa(n,bi)),_r(n,i),t===1&&an===0&&!(e.mode&1)&&(Pu=qn()+500,ev&&Ua()))}function _r(n,e){var t=n.callbackNode;ek(n,e);var i=Tg(n,n===Si?bi:0);if(i===0)t!==null&&rT(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&rT(t),e===1)n.tag===0?Qk($T.bind(null,n)):OR($T.bind(null,n)),Zk(function(){!(an&6)&&Ua()}),t=null;else{switch(fR(i)){case 1:t=qS;break;case 4:t=uR;break;case 16:t=bg;break;case 536870912:t=dR;break;default:t=bg}t=U3(t,P3.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function P3(n,e){if(cg=-1,ug=0,an&6)throw Error(Ge(327));var t=n.callbackNode;if(gu()&&n.callbackNode!==t)return null;var i=Tg(n,n===Si?bi:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Wg(n,i);else{e=i;var r=an;an|=2;var s=I3();(Si!==n||bi!==e)&&(vo=null,Pu=qn()+500,Nl(n,e));do try{_O();break}catch(a){R3(n,a)}while(!0);aw(),Vg.current=s,an=r,ii!==null?e=0:(Si=null,bi=0,e=ci)}if(e!==0){if(e===2&&(r=u1(n),r!==0&&(i=r,e=O1(n,r))),e===1)throw t=jh,Nl(n,0),sa(n,i),_r(n,qn()),t;if(e===6)sa(n,i);else{if(r=n.current.alternate,!(i&30)&&!yO(r)&&(e=Wg(n,i),e===2&&(s=u1(n),s!==0&&(i=s,e=O1(n,s))),e===1))throw t=jh,Nl(n,0),sa(n,i),_r(n,qn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Ge(345));case 2:pl(n,mr,vo);break;case 3:if(sa(n,i),(i&130023424)===i&&(e=ww+500-qn(),10<e)){if(Tg(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){nr(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=y1(pl.bind(null,n,mr,vo),e);break}pl(n,mr,vo);break;case 4:if(sa(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Es(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=qn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*vO(i/1960))-i,10<i){n.timeoutHandle=y1(pl.bind(null,n,mr,vo),i);break}pl(n,mr,vo);break;case 5:pl(n,mr,vo);break;default:throw Error(Ge(329))}}}return _r(n,qn()),n.callbackNode===t?P3.bind(null,n):null}function O1(n,e){var t=hh;return n.current.memoizedState.isDehydrated&&(Nl(n,e).flags|=256),n=Wg(n,e),n!==2&&(e=mr,mr=t,e!==null&&B1(e)),n}function B1(n){mr===null?mr=n:mr.push.apply(mr,n)}function yO(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!As(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sa(n,e){for(e&=~Sw,e&=~rv,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Es(e),i=1<<t;n[t]=-1,e&=~i}}function $T(n){if(an&6)throw Error(Ge(327));gu();var e=Tg(n,0);if(!(e&1))return _r(n,qn()),null;var t=Wg(n,e);if(n.tag!==0&&t===2){var i=u1(n);i!==0&&(e=i,t=O1(n,i))}if(t===1)throw t=jh,Nl(n,0),sa(n,e),_r(n,qn()),t;if(t===6)throw Error(Ge(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,pl(n,mr,vo),_r(n,qn()),null}function Mw(n,e){var t=an;an|=1;try{return n(e)}finally{an=t,an===0&&(Pu=qn()+500,ev&&Ua())}}function Wl(n){la!==null&&la.tag===0&&!(an&6)&&gu();var e=an;an|=1;var t=es.transition,i=mn;try{if(es.transition=null,mn=1,n)return n()}finally{mn=i,es.transition=t,an=e,!(an&6)&&Ua()}}function Ew(){Cr=nu.current,Tn(nu)}function Nl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,qk(t)),ii!==null)for(t=ii.return;t!==null;){var i=t;switch(rw(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ig();break;case 3:Au(),Tn(yr),Tn(ji),fw();break;case 5:hw(i);break;case 4:Au();break;case 13:Tn(Ln);break;case 19:Tn(Ln);break;case 10:lw(i.type._context);break;case 22:case 23:Ew()}t=t.return}if(Si=n,ii=n=wa(n.current,null),bi=Cr=e,ci=0,jh=null,Sw=rv=Gl=0,mr=hh=null,wl!==null){for(e=0;e<wl.length;e++)if(t=wl[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}wl=null}return n}function R3(n,e){do{var t=ii;try{if(aw(),og.current=zg,Bg){for(var i=kn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Bg=!1}if(Hl=0,yi=li=kn=null,uh=!1,Hh=0,_w.current=null,t===null||t.return===null){ci=1,jh=e,ii=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=bi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=kT(o);if(m!==null){m.flags&=-257,OT(m,o,a,s,e),m.mode&1&&UT(s,u,e),e=m,l=u;var y=e.updateQueue;if(y===null){var S=new Set;S.add(l),e.updateQueue=S}else y.add(l);break e}else{if(!(e&1)){UT(s,u,e),bw();break e}l=Error(Ge(426))}}else if(Rn&&a.mode&1){var x=kT(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),OT(x,o,a,s,e),sw(Cu(l,a));break e}}s=l=Cu(l,a),ci!==4&&(ci=2),hh===null?hh=[s]:hh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=f3(s,l,e);RT(s,g);break e;case 1:a=l;var _=s.type,M=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(_a===null||!_a.has(M)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=p3(s,a,e);RT(s,E);break e}}s=s.return}while(s!==null)}L3(t)}catch(A){e=A,ii===t&&t!==null&&(ii=t=t.return);continue}break}while(!0)}function I3(){var n=Vg.current;return Vg.current=zg,n===null?zg:n}function bw(){(ci===0||ci===3||ci===2)&&(ci=4),Si===null||!(Gl&268435455)&&!(rv&268435455)||sa(Si,bi)}function Wg(n,e){var t=an;an|=2;var i=I3();(Si!==n||bi!==e)&&(vo=null,Nl(n,e));do try{xO();break}catch(r){R3(n,r)}while(!0);if(aw(),an=t,Vg.current=i,ii!==null)throw Error(Ge(261));return Si=null,bi=0,ci}function xO(){for(;ii!==null;)N3(ii)}function _O(){for(;ii!==null&&!jU();)N3(ii)}function N3(n){var e=F3(n.alternate,n,Cr);n.memoizedProps=n.pendingProps,e===null?L3(n):ii=e,_w.current=null}function L3(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=fO(t,e),t!==null){t.flags&=32767,ii=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ci=6,ii=null;return}}else if(t=hO(t,e,Cr),t!==null){ii=t;return}if(e=e.sibling,e!==null){ii=e;return}ii=e=n}while(e!==null);ci===0&&(ci=5)}function pl(n,e,t){var i=mn,r=es.transition;try{es.transition=null,mn=1,SO(n,e,t,i)}finally{es.transition=r,mn=i}return null}function SO(n,e,t,i){do gu();while(la!==null);if(an&6)throw Error(Ge(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ge(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(tk(n,s),n===Si&&(ii=Si=null,bi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Qp||(Qp=!0,U3(bg,function(){return gu(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=es.transition,es.transition=null;var o=mn;mn=1;var a=an;an|=4,_w.current=null,mO(n,t),A3(t,n),Vk(g1),Ag=!!m1,g1=m1=null,n.current=t,gO(t),XU(),an=a,mn=o,es.transition=s}else n.current=t;if(Qp&&(Qp=!1,la=n,Gg=r),s=n.pendingLanes,s===0&&(_a=null),ZU(t.stateNode),_r(n,qn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(Hg)throw Hg=!1,n=U1,U1=null,n;return Gg&1&&n.tag!==0&&gu(),s=n.pendingLanes,s&1?n===k1?fh++:(fh=0,k1=n):fh=0,Ua(),null}function gu(){if(la!==null){var n=fR(Gg),e=es.transition,t=mn;try{if(es.transition=null,mn=16>n?16:n,la===null)var i=!1;else{if(n=la,la=null,Gg=0,an&6)throw Error(Ge(331));var r=an;for(an|=4,mt=n.current;mt!==null;){var s=mt,o=s.child;if(mt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(mt=u;mt!==null;){var h=mt;switch(h.tag){case 0:case 11:case 15:dh(8,h,s)}var f=h.child;if(f!==null)f.return=h,mt=f;else for(;mt!==null;){h=mt;var p=h.sibling,m=h.return;if(E3(h),h===u){mt=null;break}if(p!==null){p.return=m,mt=p;break}mt=m}}}var y=s.alternate;if(y!==null){var S=y.child;if(S!==null){y.child=null;do{var x=S.sibling;S.sibling=null,S=x}while(S!==null)}}mt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,mt=o;else e:for(;mt!==null;){if(s=mt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:dh(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,mt=g;break e}mt=s.return}}var _=n.current;for(mt=_;mt!==null;){o=mt;var M=o.child;if(o.subtreeFlags&2064&&M!==null)M.return=o,mt=M;else e:for(o=_;mt!==null;){if(a=mt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:iv(9,a)}}catch(A){Gn(a,a.return,A)}if(a===o){mt=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,mt=E;break e}mt=a.return}}if(an=r,Ua(),Ys&&typeof Ys.onPostCommitFiberRoot=="function")try{Ys.onPostCommitFiberRoot(Z0,n)}catch{}i=!0}return i}finally{mn=t,es.transition=e}}return!1}function KT(n,e,t){e=Cu(t,e),e=f3(n,e,1),n=xa(n,e,1),e=nr(),n!==null&&(Sf(n,1,e),_r(n,e))}function Gn(n,e,t){if(n.tag===3)KT(n,n,t);else for(;e!==null;){if(e.tag===3){KT(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(_a===null||!_a.has(i))){n=Cu(t,n),n=p3(e,n,1),e=xa(e,n,1),n=nr(),e!==null&&(Sf(e,1,n),_r(e,n));break}}e=e.return}}function wO(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=nr(),n.pingedLanes|=n.suspendedLanes&t,Si===n&&(bi&t)===t&&(ci===4||ci===3&&(bi&130023424)===bi&&500>qn()-ww?Nl(n,0):Sw|=t),_r(n,e)}function D3(n,e){e===0&&(n.mode&1?(e=Gp,Gp<<=1,!(Gp&130023424)&&(Gp=4194304)):e=1);var t=nr();n=Co(n,e),n!==null&&(Sf(n,e,t),_r(n,t))}function MO(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),D3(n,t)}function EO(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Ge(314))}i!==null&&i.delete(e),D3(n,t)}var F3;F3=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||yr.current)vr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return vr=!1,dO(n,e,t);vr=!!(n.flags&131072)}else vr=!1,Rn&&e.flags&1048576&&BR(e,Dg,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;lg(n,e),n=e.pendingProps;var r=Eu(e,ji.current);mu(e,t),r=mw(null,e,i,n,r,t);var s=gw();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xr(i)?(s=!0,Ng(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,uw(e),r.updater=nv,e.stateNode=r,r._reactInternals=e,b1(e,i,n,t),e=C1(null,e,i,!0,s,t)):(e.tag=0,Rn&&s&&iw(e),Ki(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(lg(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=TO(i),n=ys(i,n),r){case 0:e=A1(null,e,i,n,t);break e;case 1:e=VT(null,e,i,n,t);break e;case 11:e=BT(null,e,i,n,t);break e;case 14:e=zT(null,e,i,ys(i.type,n),t);break e}throw Error(Ge(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ys(i,r),A1(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ys(i,r),VT(n,e,i,r,t);case 3:e:{if(y3(e),n===null)throw Error(Ge(387));i=e.pendingProps,s=e.memoizedState,r=s.element,jR(n,e),kg(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Cu(Error(Ge(423)),e),e=HT(n,e,i,t,r);break e}else if(i!==r){r=Cu(Error(Ge(424)),e),e=HT(n,e,i,t,r);break e}else for(Pr=ya(e.stateNode.containerInfo.firstChild),Ir=e,Rn=!0,_s=null,t=GR(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(bu(),i===r){e=Po(n,e,t);break e}Ki(n,e,i,t)}e=e.child}return e;case 5:return XR(e),n===null&&w1(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,v1(i,r)?o=null:s!==null&&v1(i,s)&&(e.flags|=32),v3(n,e),Ki(n,e,o,t),e.child;case 6:return n===null&&w1(e),null;case 13:return x3(n,e,t);case 4:return dw(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Tu(e,null,i,t):Ki(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ys(i,r),BT(n,e,i,r,t);case 7:return Ki(n,e,e.pendingProps,t),e.child;case 8:return Ki(n,e,e.pendingProps.children,t),e.child;case 12:return Ki(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,wn(Fg,i._currentValue),i._currentValue=o,s!==null)if(As(s.value,o)){if(s.children===r.children&&!yr.current){e=Po(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Eo(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),M1(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ge(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),M1(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ki(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,mu(e,t),r=rs(r),i=i(r),e.flags|=1,Ki(n,e,i,t),e.child;case 14:return i=e.type,r=ys(i,e.pendingProps),r=ys(i.type,r),zT(n,e,i,r,t);case 15:return m3(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ys(i,r),lg(n,e),e.tag=1,xr(i)?(n=!0,Ng(e)):n=!1,mu(e,t),h3(e,i,r),b1(e,i,r,t),C1(null,e,i,!0,n,t);case 19:return _3(n,e,t);case 22:return g3(n,e,t)}throw Error(Ge(156,e.tag))};function U3(n,e){return cR(n,e)}function bO(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(n,e,t,i){return new bO(n,e,t,i)}function Tw(n){return n=n.prototype,!(!n||!n.isReactComponent)}function TO(n){if(typeof n=="function")return Tw(n)?1:0;if(n!=null){if(n=n.$$typeof,n===jS)return 11;if(n===XS)return 14}return 2}function wa(n,e){var t=n.alternate;return t===null?(t=Jr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function dg(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")Tw(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Xc:return Ll(t.children,r,s,e);case WS:o=8,r|=8;break;case Z_:return n=Jr(12,t,e,r|2),n.elementType=Z_,n.lanes=s,n;case $_:return n=Jr(13,t,e,r),n.elementType=$_,n.lanes=s,n;case K_:return n=Jr(19,t,e,r),n.elementType=K_,n.lanes=s,n;case XP:return sv(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case WP:o=10;break e;case jP:o=9;break e;case jS:o=11;break e;case XS:o=14;break e;case ta:o=16,i=null;break e}throw Error(Ge(130,n==null?n:typeof n,""))}return e=Jr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Ll(n,e,t,i){return n=Jr(7,n,i,e),n.lanes=t,n}function sv(n,e,t,i){return n=Jr(22,n,i,e),n.elementType=XP,n.lanes=t,n.stateNode={isHidden:!1},n}function Ax(n,e,t){return n=Jr(6,n,null,e),n.lanes=t,n}function Cx(n,e,t){return e=Jr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function AO(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lx(0),this.expirationTimes=lx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lx(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Aw(n,e,t,i,r,s,o,a,l){return n=new AO(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Jr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},uw(s),n}function CO(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function k3(n){if(!n)return ba;n=n._reactInternals;e:{if(Jl(n)!==n||n.tag!==1)throw Error(Ge(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ge(171))}if(n.tag===1){var t=n.type;if(xr(t))return kR(n,t,e)}return e}function O3(n,e,t,i,r,s,o,a,l){return n=Aw(t,i,!0,n,r,s,o,a,l),n.context=k3(null),t=n.current,i=nr(),r=Sa(t),s=Eo(i,r),s.callback=e??null,xa(t,s,r),n.current.lanes=r,Sf(n,r,i),_r(n,i),n}function ov(n,e,t,i){var r=e.current,s=nr(),o=Sa(r);return t=k3(t),e.context===null?e.context=t:e.pendingContext=t,e=Eo(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=xa(r,e,o),n!==null&&(bs(n,r,o,s),sg(n,r,o)),o}function jg(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function JT(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Cw(n,e){JT(n,e),(n=n.alternate)&&JT(n,e)}function PO(){return null}var B3=typeof reportError=="function"?reportError:function(n){console.error(n)};function Pw(n){this._internalRoot=n}av.prototype.render=Pw.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ge(409));ov(n,e,null,null)};av.prototype.unmount=Pw.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Wl(function(){ov(null,n,null,null)}),e[Ao]=null}};function av(n){this._internalRoot=n}av.prototype.unstable_scheduleHydration=function(n){if(n){var e=gR();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ra.length&&e!==0&&e<ra[t].priority;t++);ra.splice(t,0,n),t===0&&yR(n)}};function Rw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function lv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function QT(){}function RO(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=jg(o);s.call(u)}}var o=O3(e,i,n,0,null,!1,!1,"",QT);return n._reactRootContainer=o,n[Ao]=o.current,kh(n.nodeType===8?n.parentNode:n),Wl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=jg(l);a.call(u)}}var l=Aw(n,0,!1,null,null,!1,!1,"",QT);return n._reactRootContainer=l,n[Ao]=l.current,kh(n.nodeType===8?n.parentNode:n),Wl(function(){ov(e,l,t,i)}),l}function cv(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=jg(o);a.call(l)}}ov(e,o,n,r)}else o=RO(t,e,n,r,i);return jg(o)}pR=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Jd(e.pendingLanes);t!==0&&(ZS(e,t|1),_r(e,qn()),!(an&6)&&(Pu=qn()+500,Ua()))}break;case 13:Wl(function(){var i=Co(n,1);if(i!==null){var r=nr();bs(i,n,1,r)}}),Cw(n,1)}};$S=function(n){if(n.tag===13){var e=Co(n,134217728);if(e!==null){var t=nr();bs(e,n,134217728,t)}Cw(n,134217728)}};mR=function(n){if(n.tag===13){var e=Sa(n),t=Co(n,e);if(t!==null){var i=nr();bs(t,n,e,i)}Cw(n,e)}};gR=function(){return mn};vR=function(n,e){var t=mn;try{return mn=n,e()}finally{mn=t}};a1=function(n,e,t){switch(e){case"input":if(e1(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Q0(i);if(!r)throw Error(Ge(90));qP(i),e1(i,r)}}}break;case"textarea":$P(n,t);break;case"select":e=t.value,e!=null&&du(n,!!t.multiple,e,!1)}};iR=Mw;rR=Wl;var IO={usingClientEntryPoint:!1,Events:[Mf,$c,Q0,tR,nR,Mw]},Cd={findFiberByHostInstance:Sl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},NO={bundleType:Cd.bundleType,version:Cd.version,rendererPackageName:Cd.rendererPackageName,rendererConfig:Cd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:No.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=aR(n),n===null?null:n.stateNode},findFiberByHostInstance:Cd.findFiberByHostInstance||PO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var em=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!em.isDisabled&&em.supportsFiber)try{Z0=em.inject(NO),Ys=em}catch{}}kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IO;kr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rw(e))throw Error(Ge(200));return CO(n,e,null,t)};kr.createRoot=function(n,e){if(!Rw(n))throw Error(Ge(299));var t=!1,i="",r=B3;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Aw(n,1,!1,null,null,t,!1,i,r),n[Ao]=e.current,kh(n.nodeType===8?n.parentNode:n),new Pw(e)};kr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ge(188)):(n=Object.keys(n).join(","),Error(Ge(268,n)));return n=aR(e),n=n===null?null:n.stateNode,n};kr.flushSync=function(n){return Wl(n)};kr.hydrate=function(n,e,t){if(!lv(e))throw Error(Ge(200));return cv(null,n,e,!0,t)};kr.hydrateRoot=function(n,e,t){if(!Rw(n))throw Error(Ge(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=B3;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=O3(e,null,n,1,t??null,r,!1,s,o),n[Ao]=e.current,kh(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new av(e)};kr.render=function(n,e,t){if(!lv(e))throw Error(Ge(200));return cv(null,n,e,!1,t)};kr.unmountComponentAtNode=function(n){if(!lv(n))throw Error(Ge(40));return n._reactRootContainer?(Wl(function(){cv(null,null,n,!1,function(){n._reactRootContainer=null,n[Ao]=null})}),!0):!1};kr.unstable_batchedUpdates=Mw;kr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!lv(t))throw Error(Ge(200));if(n==null||n._reactInternals===void 0)throw Error(Ge(38));return cv(n,e,t,!1,i)};kr.version="18.3.1-next-f1338f8080-20240426";function z3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(z3)}catch(n){console.error(n)}}z3(),zP.exports=kr;var LO=zP.exports,V3,eA=LO;V3=eA.createRoot,eA.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xh(){return Xh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Xh.apply(this,arguments)}var ca;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ca||(ca={}));const tA="popstate";function DO(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return z1("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:Xg(r)}return UO(e,t,null,n)}function ri(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function H3(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function FO(){return Math.random().toString(36).substr(2,8)}function nA(n,e){return{usr:n.state,key:n.key,idx:e}}function z1(n,e,t,i){return t===void 0&&(t=null),Xh({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Yu(e):e,{state:t,key:e&&e.key||i||FO()})}function Xg(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Yu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function UO(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=ca.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(Xh({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=ca.Pop;let x=h(),g=x==null?null:x-u;u=x,l&&l({action:a,location:S.location,delta:g})}function p(x,g){a=ca.Push;let _=z1(S.location,x,g);u=h()+1;let M=nA(_,u),E=S.createHref(_);try{o.pushState(M,"",E)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;r.location.assign(E)}s&&l&&l({action:a,location:S.location,delta:1})}function m(x,g){a=ca.Replace;let _=z1(S.location,x,g);u=h();let M=nA(_,u),E=S.createHref(_);o.replaceState(M,"",E),s&&l&&l({action:a,location:S.location,delta:0})}function y(x){let g=r.location.origin!=="null"?r.location.origin:r.location.href,_=typeof x=="string"?x:Xg(x);return _=_.replace(/ $/,"%20"),ri(g,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,g)}let S={get action(){return a},get location(){return n(r,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(tA,f),l=x,()=>{r.removeEventListener(tA,f),l=null}},createHref(x){return e(r,x)},createURL:y,encodeLocation(x){let g=y(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(x){return o.go(x)}};return S}var iA;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(iA||(iA={}));function kO(n,e,t){return t===void 0&&(t="/"),OO(n,e,t,!1)}function OO(n,e,t,i){let r=typeof e=="string"?Yu(e):e,s=Iw(r.pathname||"/",t);if(s==null)return null;let o=G3(n);BO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=$O(s);a=qO(o[l],u,i)}return a}function G3(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ri(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=Ma([i,l.relativePath]),h=t.concat(l);s.children&&s.children.length>0&&(ri(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),G3(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:XO(u,s.index),routesMeta:h})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of W3(s.path))r(s,o,l)}),e}function W3(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=W3(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function BO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:YO(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const zO=/^:[\w-]+$/,VO=3,HO=2,GO=1,WO=10,jO=-2,rA=n=>n==="*";function XO(n,e){let t=n.split("/"),i=t.length;return t.some(rA)&&(i+=jO),e&&(i+=HO),t.filter(r=>!rA(r)).reduce((r,s)=>r+(zO.test(s)?VO:s===""?GO:WO),i)}function YO(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function qO(n,e,t){let{routesMeta:i}=n,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=sA({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),p=l.route;if(!f&&u&&t&&!i[i.length-1].route.index&&(f=sA({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:Ma([s,f.pathname]),pathnameBase:e4(Ma([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=Ma([s,f.pathnameBase]))}return o}function sA(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=ZO(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,h,f)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let S=a[f]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const y=a[f];return m&&!y?u[p]=void 0:u[p]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function ZO(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),H3(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function $O(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return H3(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Iw(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function KO(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Yu(n):n;return{pathname:t?t.startsWith("/")?t:JO(t,e):e,search:t4(i),hash:n4(r)}}function JO(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Px(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function j3(n,e){let t=QO(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function X3(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Yu(n):(r=Xh({},n),ri(!r.pathname||!r.pathname.includes("?"),Px("?","pathname","search",r)),ri(!r.pathname||!r.pathname.includes("#"),Px("#","pathname","hash",r)),ri(!r.search||!r.search.includes("#"),Px("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;r.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=KO(r,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Ma=n=>n.join("/").replace(/\/\/+/g,"/"),e4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),t4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,n4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function i4(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Y3=["post","put","patch","delete"];new Set(Y3);const r4=["get",...Y3];new Set(r4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yh(){return Yh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Yh.apply(this,arguments)}const Nw=j.createContext(null),s4=j.createContext(null),Ql=j.createContext(null),uv=j.createContext(null),ec=j.createContext({outlet:null,matches:[],isDataRoute:!1}),q3=j.createContext(null);function o4(n,e){let{relative:t}=e===void 0?{}:e;bf()||ri(!1);let{basename:i,navigator:r}=j.useContext(Ql),{hash:s,pathname:o,search:a}=$3(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:Ma([i,o])),r.createHref({pathname:l,search:a,hash:s})}function bf(){return j.useContext(uv)!=null}function Tf(){return bf()||ri(!1),j.useContext(uv).location}function Z3(n){j.useContext(Ql).static||j.useLayoutEffect(n)}function a4(){let{isDataRoute:n}=j.useContext(ec);return n?_4():l4()}function l4(){bf()||ri(!1);let n=j.useContext(Nw),{basename:e,future:t,navigator:i}=j.useContext(Ql),{matches:r}=j.useContext(ec),{pathname:s}=Tf(),o=JSON.stringify(j3(r,t.v7_relativeSplatPath)),a=j.useRef(!1);return Z3(()=>{a.current=!0}),j.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let f=X3(u,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ma([e,f.pathname])),(h.replace?i.replace:i.push)(f,h.state,h)},[e,i,o,s,n])}function $3(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=j.useContext(Ql),{matches:r}=j.useContext(ec),{pathname:s}=Tf(),o=JSON.stringify(j3(r,i.v7_relativeSplatPath));return j.useMemo(()=>X3(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function c4(n,e){return u4(n,e)}function u4(n,e,t,i){bf()||ri(!1);let{navigator:r}=j.useContext(Ql),{matches:s}=j.useContext(ec),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Tf(),h;if(e){var f;let x=typeof e=="string"?Yu(e):e;l==="/"||(f=x.pathname)!=null&&f.startsWith(l)||ri(!1),h=x}else h=u;let p=h.pathname||"/",m=p;if(l!=="/"){let x=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=kO(n,{pathname:m}),S=m4(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Ma([l,r.encodeLocation?r.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Ma([l,r.encodeLocation?r.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,t,i);return e&&S?j.createElement(uv.Provider,{value:{location:Yh({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ca.Pop}},S):S}function d4(){let n=x4(),e=i4(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:r},t):null,null)}const h4=j.createElement(d4,null);class f4 extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(ec.Provider,{value:this.props.routeContext},j.createElement(q3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function p4(n){let{routeContext:e,match:t,children:i}=n,r=j.useContext(Nw);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(ec.Provider,{value:e},i)}function m4(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(r=t)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||ri(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(t&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:m}=t,y=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let m,y=!1,S=null,x=null;t&&(m=a&&f.route.id?a[f.route.id]:void 0,S=f.route.errorElement||h4,l&&(u<0&&p===0?(y=!0,x=null):u===p&&(y=!0,x=f.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,p+1)),_=()=>{let M;return m?M=S:y?M=x:f.route.Component?M=j.createElement(f.route.Component,null):f.route.element?M=f.route.element:M=h,j.createElement(p4,{match:f,routeContext:{outlet:h,matches:g,isDataRoute:t!=null},children:M})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?j.createElement(f4,{location:t.location,revalidation:t.revalidation,component:S,error:m,children:_(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):_()},null)}var K3=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(K3||{}),Yg=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Yg||{});function g4(n){let e=j.useContext(Nw);return e||ri(!1),e}function v4(n){let e=j.useContext(s4);return e||ri(!1),e}function y4(n){let e=j.useContext(ec);return e||ri(!1),e}function J3(n){let e=y4(),t=e.matches[e.matches.length-1];return t.route.id||ri(!1),t.route.id}function x4(){var n;let e=j.useContext(q3),t=v4(Yg.UseRouteError),i=J3(Yg.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function _4(){let{router:n}=g4(K3.UseNavigateStable),e=J3(Yg.UseNavigateStable),t=j.useRef(!1);return Z3(()=>{t.current=!0}),j.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,Yh({fromRouteId:e},s)))},[n,e])}function S4(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function ml(n){ri(!1)}function w4(n){let{basename:e="/",children:t=null,location:i,navigationType:r=ca.Pop,navigator:s,static:o=!1,future:a}=n;bf()&&ri(!1);let l=e.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:l,navigator:s,static:o,future:Yh({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Yu(i));let{pathname:h="/",search:f="",hash:p="",state:m=null,key:y="default"}=i,S=j.useMemo(()=>{let x=Iw(h,l);return x==null?null:{location:{pathname:x,search:f,hash:p,state:m,key:y},navigationType:r}},[l,h,f,p,m,y,r]);return S==null?null:j.createElement(Ql.Provider,{value:u},j.createElement(uv.Provider,{children:t,value:S}))}function M4(n){let{children:e,location:t}=n;return c4(V1(e),t)}new Promise(()=>{});function V1(n,e){e===void 0&&(e=[]);let t=[];return j.Children.forEach(n,(i,r)=>{if(!j.isValidElement(i))return;let s=[...e,r];if(i.type===j.Fragment){t.push.apply(t,V1(i.props.children,s));return}i.type!==ml&&ri(!1),!i.props.index||!i.props.children||ri(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=V1(i.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function H1(){return H1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},H1.apply(this,arguments)}function E4(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function b4(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function T4(n,e){return n.button===0&&(!e||e==="_self")&&!b4(n)}const A4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],C4="6";try{window.__reactRouterVersion=C4}catch{}const P4="startTransition",oA=wU[P4];function R4(n){let{basename:e,children:t,future:i,window:r}=n,s=j.useRef();s.current==null&&(s.current=DO({window:r,v5Compat:!0}));let o=s.current,[a,l]=j.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},h=j.useCallback(f=>{u&&oA?oA(()=>l(f)):l(f)},[l,u]);return j.useLayoutEffect(()=>o.listen(h),[o,h]),j.useEffect(()=>S4(i),[i]),j.createElement(w4,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const I4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",N4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ph=j.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:f}=e,p=E4(e,A4),{basename:m}=j.useContext(Ql),y,S=!1;if(typeof u=="string"&&N4.test(u)&&(y=u,I4))try{let M=new URL(window.location.href),E=u.startsWith("//")?new URL(M.protocol+u):new URL(u),A=Iw(E.pathname,m);E.origin===M.origin&&A!=null?u=A+E.search+E.hash:S=!0}catch{}let x=o4(u,{relative:r}),g=L4(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:f});function _(M){i&&i(M),M.defaultPrevented||g(M)}return j.createElement("a",H1({},p,{href:y||x,onClick:S||s?i:_,ref:t,target:l}))});var aA;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(aA||(aA={}));var lA;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(lA||(lA={}));function L4(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=a4(),u=Tf(),h=$3(n,{relative:o});return j.useCallback(f=>{if(T4(f,t)){f.preventDefault();let p=i!==void 0?i:Xg(u)===Xg(h);l(n,{replace:p,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,h,i,r,t,n,s,o,a])}const Lw=j.createContext({});function Dw(n){const e=j.useRef(null);return e.current===null&&(e.current=n()),e.current}const Q3=typeof window<"u",eI=Q3?j.useLayoutEffect:j.useEffect,dv=j.createContext(null);function Fw(n,e){n.indexOf(e)===-1&&n.push(e)}function Uw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Js=(n,e,t)=>t>e?e:t<n?n:t;let hv=()=>{},Ru=()=>{};const Ro={},tI=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function nI(n){return typeof n=="object"&&n!==null}const iI=n=>/^0[^.\s]+$/u.test(n);function kw(n){let e;return()=>(e===void 0&&(e=n()),e)}const ts=n=>n,D4=(n,e)=>t=>e(n(t)),Af=(...n)=>n.reduce(D4),qh=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class Ow{constructor(){this.subscriptions=[]}add(e){return Fw(this.subscriptions,e),()=>Uw(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Zs=n=>n*1e3,Qr=n=>n/1e3;function rI(n,e){return e?n*(1e3/e):0}const sI=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,F4=1e-7,U4=12;function k4(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=sI(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>F4&&++a<U4);return o}function Cf(n,e,t,i){if(n===e&&t===i)return ts;const r=s=>k4(s,0,1,n,t);return s=>s===0||s===1?s:sI(r(s),e,i)}const oI=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,aI=n=>e=>1-n(1-e),lI=Cf(.33,1.53,.69,.99),Bw=aI(lI),cI=oI(Bw),uI=n=>(n*=2)<1?.5*Bw(n):.5*(2-Math.pow(2,-10*(n-1))),zw=n=>1-Math.sin(Math.acos(n)),dI=aI(zw),hI=oI(zw),O4=Cf(.42,0,1,1),B4=Cf(0,0,.58,1),fI=Cf(.42,0,.58,1),z4=n=>Array.isArray(n)&&typeof n[0]!="number",pI=n=>Array.isArray(n)&&typeof n[0]=="number",cA={linear:ts,easeIn:O4,easeInOut:fI,easeOut:B4,circIn:zw,circInOut:hI,circOut:dI,backIn:Bw,backInOut:cI,backOut:lI,anticipate:uI},V4=n=>typeof n=="string",uA=n=>{if(pI(n)){Ru(n.length===4,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[e,t,i,r]=n;return Cf(e,t,i,r)}else if(V4(n))return Ru(cA[n]!==void 0,`Invalid easing type '${n}'`,"invalid-easing-type"),cA[n];return n},tm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],dA={value:null,addProjectionMetrics:null};function H4(n,e){let t=new Set,i=new Set,r=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function u(f){o.has(f)&&(h.schedule(f),n()),l++,f(a)}const h={schedule:(f,p=!1,m=!1)=>{const S=m&&r?t:i;return p&&o.add(f),S.has(f)||S.add(f),f},cancel:f=>{i.delete(f),o.delete(f)},process:f=>{if(a=f,r){s=!0;return}r=!0,[t,i]=[i,t],t.forEach(u),e&&dA.value&&dA.value.frameloop[e].push(l),l=0,t.clear(),r=!1,s&&(s=!1,h.process(f))}};return h}const G4=40;function mI(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=tm.reduce((M,E)=>(M[E]=H4(s,e?E:void 0),M),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:h,update:f,preRender:p,render:m,postRender:y}=o,S=()=>{const M=Ro.useManualTiming?r.timestamp:performance.now();t=!1,Ro.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(M-r.timestamp,G4),1)),r.timestamp=M,r.isProcessing=!0,a.process(r),l.process(r),u.process(r),h.process(r),f.process(r),p.process(r),m.process(r),y.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(S))},x=()=>{t=!0,i=!0,r.isProcessing||n(S)};return{schedule:tm.reduce((M,E)=>{const A=o[E];return M[E]=(P,L=!1,N=!1)=>(t||x(),A.schedule(P,L,N)),M},{}),cancel:M=>{for(let E=0;E<tm.length;E++)o[tm[E]].cancel(M)},state:r,steps:o}}const{schedule:An,cancel:Ta,state:Ei,steps:Rx}=mI(typeof requestAnimationFrame<"u"?requestAnimationFrame:ts,!0);let hg;function W4(){hg=void 0}const er={now:()=>(hg===void 0&&er.set(Ei.isProcessing||Ro.useManualTiming?Ei.timestamp:performance.now()),hg),set:n=>{hg=n,queueMicrotask(W4)}},gI=n=>e=>typeof e=="string"&&e.startsWith(n),vI=gI("--"),j4=gI("var(--"),Vw=n=>j4(n)?X4.test(n.split("/*")[0].trim()):!1,X4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function hA(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const qu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Zh={...qu,transform:n=>Js(0,1,n)},nm={...qu,default:1},mh=n=>Math.round(n*1e5)/1e5,Hw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Y4(n){return n==null}const q4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Gw=(n,e)=>t=>!!(typeof t=="string"&&q4.test(t)&&t.startsWith(n)||e&&!Y4(t)&&Object.prototype.hasOwnProperty.call(t,e)),yI=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(Hw);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Z4=n=>Js(0,255,n),Ix={...qu,transform:n=>Math.round(Z4(n))},El={test:Gw("rgb","red"),parse:yI("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+Ix.transform(n)+", "+Ix.transform(e)+", "+Ix.transform(t)+", "+mh(Zh.transform(i))+")"};function $4(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const G1={test:Gw("#"),parse:$4,transform:El.transform},Pf=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ea=Pf("deg"),$s=Pf("%"),pt=Pf("px"),K4=Pf("vh"),J4=Pf("vw"),fA={...$s,parse:n=>$s.parse(n)/100,transform:n=>$s.transform(n*100)},iu={test:Gw("hsl","hue"),parse:yI("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+$s.transform(mh(e))+", "+$s.transform(mh(t))+", "+mh(Zh.transform(i))+")"},ni={test:n=>El.test(n)||G1.test(n)||iu.test(n),parse:n=>El.test(n)?El.parse(n):iu.test(n)?iu.parse(n):G1.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?El.transform(n):iu.transform(n),getAnimatableNone:n=>{const e=ni.parse(n);return e.alpha=0,ni.transform(e)}},Q4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function eB(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Hw))==null?void 0:e.length)||0)+(((t=n.match(Q4))==null?void 0:t.length)||0)>0}const xI="number",_I="color",tB="var",nB="var(",pA="${}",iB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $h(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(iB,l=>(ni.test(l)?(i.color.push(s),r.push(_I),t.push(ni.parse(l))):l.startsWith(nB)?(i.var.push(s),r.push(tB),t.push(l)):(i.number.push(s),r.push(xI),t.push(parseFloat(l))),++s,pA)).split(pA);return{values:t,split:a,indexes:i,types:r}}function SI(n){return $h(n).values}function wI(n){const{split:e,types:t}=$h(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===xI?s+=mh(r[o]):a===_I?s+=ni.transform(r[o]):s+=r[o]}return s}}const rB=n=>typeof n=="number"?0:ni.test(n)?ni.getAnimatableNone(n):n;function sB(n){const e=SI(n);return wI(n)(e.map(rB))}const Aa={test:eB,parse:SI,createTransformer:wI,getAnimatableNone:sB};function Nx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function oB({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=Nx(l,a,n+1/3),s=Nx(l,a,n),o=Nx(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function qg(n,e){return t=>t>0?e:n}const Dn=(n,e,t)=>n+(e-n)*t,Lx=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},aB=[G1,El,iu],lB=n=>aB.find(e=>e.test(n));function mA(n){const e=lB(n);if(hv(!!e,`'${n}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!e)return!1;let t=e.parse(n);return e===iu&&(t=oB(t)),t}const gA=(n,e)=>{const t=mA(n),i=mA(e);if(!t||!i)return qg(n,e);const r={...t};return s=>(r.red=Lx(t.red,i.red,s),r.green=Lx(t.green,i.green,s),r.blue=Lx(t.blue,i.blue,s),r.alpha=Dn(t.alpha,i.alpha,s),El.transform(r))},W1=new Set(["none","hidden"]);function cB(n,e){return W1.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function uB(n,e){return t=>Dn(n,e,t)}function Ww(n){return typeof n=="number"?uB:typeof n=="string"?Vw(n)?qg:ni.test(n)?gA:fB:Array.isArray(n)?MI:typeof n=="object"?ni.test(n)?gA:dB:qg}function MI(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>Ww(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function dB(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=Ww(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function hB(n,e){const t=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const s=e.types[r],o=n.indexes[s][i[s]],a=n.values[o]??0;t[r]=a,i[s]++}return t}const fB=(n,e)=>{const t=Aa.createTransformer(e),i=$h(n),r=$h(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?W1.has(n)&&!r.values.length||W1.has(e)&&!i.values.length?cB(n,e):Af(MI(hB(i,r),r.values),t):(hv(!0,`Complex values '${n}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),qg(n,e))};function EI(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Dn(n,e,t):Ww(n)(n,e)}const pB=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>An.update(e,t),stop:()=>Ta(e),now:()=>Ei.isProcessing?Ei.timestamp:er.now()}},bI=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=Math.round(n(s/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Zg=2e4;function jw(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<Zg;)e+=t,i=n.next(e);return e>=Zg?1/0:e}function mB(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(jw(i),Zg);return{type:"keyframes",ease:s=>i.next(r*s).value/e,duration:Qr(r)}}const gB=5;function TI(n,e,t){const i=Math.max(e-gB,0);return rI(t-n(i),e-i)}const Nn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Dx=.001;function vB({duration:n=Nn.duration,bounce:e=Nn.bounce,velocity:t=Nn.velocity,mass:i=Nn.mass}){let r,s;hv(n<=Zs(Nn.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let o=1-e;o=Js(Nn.minDamping,Nn.maxDamping,o),n=Js(Nn.minDuration,Nn.maxDuration,Qr(n)),o<1?(r=u=>{const h=u*o,f=h*n,p=h-t,m=j1(u,o),y=Math.exp(-f);return Dx-p/m*y},s=u=>{const f=u*o*n,p=f*t+t,m=Math.pow(o,2)*Math.pow(u,2)*n,y=Math.exp(-f),S=j1(Math.pow(u,2),o);return(-r(u)+Dx>0?-1:1)*((p-m)*y)/S}):(r=u=>{const h=Math.exp(-u*n),f=(u-t)*n+1;return-Dx+h*f},s=u=>{const h=Math.exp(-u*n),f=(t-u)*(n*n);return h*f});const a=5/n,l=xB(r,s,a);if(n=Zs(n),isNaN(l))return{stiffness:Nn.stiffness,damping:Nn.damping,duration:n};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:n}}}const yB=12;function xB(n,e,t){let i=t;for(let r=1;r<yB;r++)i=i-n(i)/e(i);return i}function j1(n,e){return n*Math.sqrt(1-e*e)}const _B=["duration","bounce"],SB=["stiffness","damping","mass"];function vA(n,e){return e.some(t=>n[t]!==void 0)}function wB(n){let e={velocity:Nn.velocity,stiffness:Nn.stiffness,damping:Nn.damping,mass:Nn.mass,isResolvedFromDuration:!1,...n};if(!vA(n,SB)&&vA(n,_B))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*Js(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:Nn.mass,stiffness:r,damping:s}}else{const t=vB(n);e={...e,...t,mass:Nn.mass},e.isResolvedFromDuration=!0}return e}function $g(n=Nn.visualDuration,e=Nn.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:h,duration:f,velocity:p,isResolvedFromDuration:m}=wB({...t,velocity:-Qr(t.velocity||0)}),y=p||0,S=u/(2*Math.sqrt(l*h)),x=o-s,g=Qr(Math.sqrt(l/h)),_=Math.abs(x)<5;i||(i=_?Nn.restSpeed.granular:Nn.restSpeed.default),r||(r=_?Nn.restDelta.granular:Nn.restDelta.default);let M;if(S<1){const A=j1(g,S);M=P=>{const L=Math.exp(-S*g*P);return o-L*((y+S*g*x)/A*Math.sin(A*P)+x*Math.cos(A*P))}}else if(S===1)M=A=>o-Math.exp(-g*A)*(x+(y+g*x)*A);else{const A=g*Math.sqrt(S*S-1);M=P=>{const L=Math.exp(-S*g*P),N=Math.min(A*P,300);return o-L*((y+S*g*x)*Math.sinh(N)+A*x*Math.cosh(N))/A}}const E={calculatedDuration:m&&f||null,next:A=>{const P=M(A);if(m)a.done=A>=f;else{let L=A===0?y:0;S<1&&(L=A===0?Zs(y):TI(M,A,P));const N=Math.abs(L)<=i,C=Math.abs(o-P)<=r;a.done=N&&C}return a.value=a.done?o:P,a},toString:()=>{const A=Math.min(jw(E),Zg),P=bI(L=>E.next(A*L).value,A,30);return A+"ms "+P},toTransition:()=>{}};return E}$g.applyToOptions=n=>{const e=mB(n,100,$g);return n.ease=e.ease,n.duration=Zs(e.duration),n.type="keyframes",n};function X1({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const f=n[0],p={done:!1,value:f},m=N=>a!==void 0&&N<a||l!==void 0&&N>l,y=N=>a===void 0?l:l===void 0||Math.abs(a-N)<Math.abs(l-N)?a:l;let S=t*e;const x=f+S,g=o===void 0?x:o(x);g!==x&&(S=g-f);const _=N=>-S*Math.exp(-N/i),M=N=>g+_(N),E=N=>{const C=_(N),R=M(N);p.done=Math.abs(C)<=u,p.value=p.done?g:R};let A,P;const L=N=>{m(p.value)&&(A=N,P=$g({keyframes:[p.value,y(p.value)],velocity:TI(M,N,p.value),damping:r,stiffness:s,restDelta:u,restSpeed:h}))};return L(0),{calculatedDuration:null,next:N=>{let C=!1;return!P&&A===void 0&&(C=!0,E(N),L(N)),A!==void 0&&N>=A?P.next(N-A):(!C&&E(N),p)}}}function MB(n,e,t){const i=[],r=t||Ro.mix||EI,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||ts:e;a=Af(l,a)}i.push(a)}return i}function EB(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(Ru(s===e.length,"Both input and output ranges must be the same length","range-length"),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=MB(e,i,r),l=a.length,u=h=>{if(o&&h<n[0])return e[0];let f=0;if(l>1)for(;f<n.length-2&&!(h<n[f+1]);f++);const p=qh(n[f],n[f+1],h);return a[f](p)};return t?h=>u(Js(n[0],n[s-1],h)):u}function bB(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=qh(0,e,i);n.push(Dn(t,1,r))}}function TB(n){const e=[0];return bB(e,n.length-1),e}function AB(n,e){return n.map(t=>t*e)}function CB(n,e){return n.map(()=>e||fI).splice(0,n.length-1)}function gh({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=z4(i)?i.map(uA):uA(i),s={done:!1,value:e[0]},o=AB(t&&t.length===e.length?t:TB(e),n),a=EB(o,e,{ease:Array.isArray(r)?r:CB(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const PB=n=>n!==null;function Xw(n,{repeat:e,repeatType:t="loop"},i,r=1){const s=n.filter(PB),a=r<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!a||i===void 0?s[a]:i}const RB={decay:X1,inertia:X1,tween:gh,keyframes:gh,spring:$g};function AI(n){typeof n.type=="string"&&(n.type=RB[n.type])}class Yw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const IB=n=>n/100;class qw extends Yw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,r;const{motionValue:t}=this.options;t&&t.updatedAt!==er.now()&&this.tick(er.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(i=this.options).onStop)==null||r.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;AI(e);const{type:t=gh,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=t||gh;l!==gh&&typeof a[0]!="number"&&(this.mixKeyframes=Af(IB,EI(a[0],a[1])),a=[0,100]);const u=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=jw(u));const{calculatedDuration:h}=u;this.calculatedDuration=h,this.resolvedDuration=h+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=u}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:u=0,keyframes:h,repeat:f,repeatType:p,repeatDelay:m,type:y,onUpdate:S,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-u*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let M=this.currentTime,E=i;if(f){const N=Math.min(this.currentTime,r)/a;let C=Math.floor(N),R=N%1;!R&&N>=1&&(R=1),R===1&&C--,C=Math.min(C,f+1),!!(C%2)&&(p==="reverse"?(R=1-R,m&&(R-=m/a)):p==="mirror"&&(E=o)),M=Js(0,1,R)*a}const A=_?{done:!1,value:h[0]}:E.next(M);s&&(A.value=s(A.value));let{done:P}=A;!_&&l!==null&&(P=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return L&&y!==X1&&(A.value=Xw(h,this.options,x,this.speed)),S&&S(A.value),L&&this.finish(),A}then(e,t){return this.finished.then(e,t)}get duration(){return Qr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Qr(e)}get time(){return Qr(this.currentTime)}set time(e){var t;e=Zs(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(er.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Qr(this.currentTime))}play(){var r,s;if(this.isStopped)return;const{driver:e=pB,startTime:t}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(r=this.options).onPlay)==null||s.call(r);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(er.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function NB(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const bl=n=>n*180/Math.PI,Y1=n=>{const e=bl(Math.atan2(n[1],n[0]));return q1(e)},LB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Y1,rotateZ:Y1,skewX:n=>bl(Math.atan(n[1])),skewY:n=>bl(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},q1=n=>(n=n%360,n<0&&(n+=360),n),yA=Y1,xA=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),_A=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),DB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:xA,scaleY:_A,scale:n=>(xA(n)+_A(n))/2,rotateX:n=>q1(bl(Math.atan2(n[6],n[5]))),rotateY:n=>q1(bl(Math.atan2(-n[2],n[0]))),rotateZ:yA,rotate:yA,skewX:n=>bl(Math.atan(n[4])),skewY:n=>bl(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Z1(n){return n.includes("scale")?1:0}function $1(n,e){if(!n||n==="none")return Z1(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(t)i=DB,r=t;else{const a=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=LB,r=a}if(!r)return Z1(e);const s=i[e],o=r[1].split(",").map(UB);return typeof s=="function"?s(o):o[s]}const FB=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return $1(t,e)};function UB(n){return parseFloat(n.trim())}const Zu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],$u=new Set(Zu),SA=n=>n===qu||n===pt,kB=new Set(["x","y","z"]),OB=Zu.filter(n=>!kB.has(n));function BB(n){const e=[];return OB.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const ua={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>$1(e,"x"),y:(n,{transform:e})=>$1(e,"y")};ua.translateX=ua.x;ua.translateY=ua.y;const Dl=new Set;let K1=!1,J1=!1,Q1=!1;function CI(){if(J1){const n=Array.from(Dl).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=BB(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))==null||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}J1=!1,K1=!1,Dl.forEach(n=>n.complete(Q1)),Dl.clear()}function PI(){Dl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(J1=!0)})}function zB(){Q1=!0,PI(),CI(),Q1=!1}class Zw{constructor(e,t,i,r,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Dl.add(this),K1||(K1=!0,An.read(PI),An.resolveKeyframes(CI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(e[0]===null){const s=r==null?void 0:r.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&t){const a=i.readValue(t,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),r&&s===void 0&&r.set(e[0])}NB(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Dl.delete(this)}cancel(){this.state==="scheduled"&&(Dl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const VB=n=>n.startsWith("--");function HB(n,e,t){VB(e)?n.style.setProperty(e,t):n.style[e]=t}const GB=kw(()=>window.ScrollTimeline!==void 0),WB={};function jB(n,e){const t=kw(n);return()=>WB[e]??t()}const RI=jB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),eh=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,wA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:eh([0,.65,.55,1]),circOut:eh([.55,0,1,.45]),backIn:eh([.31,.01,.66,-.59]),backOut:eh([.33,1.53,.69,.99])};function II(n,e){if(n)return typeof n=="function"?RI()?bI(n,e):"ease-out":pI(n)?eh(n):Array.isArray(n)?n.map(t=>II(t,e)||wA.easeOut):wA[n]}function XB(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const h={[e]:t};l&&(h.offset=l);const f=II(a,r);Array.isArray(f)&&(h.easing=f);const p={delay:i,duration:r,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),n.animate(h,p)}function NI(n){return typeof n=="function"&&"applyToOptions"in n}function YB({type:n,...e}){return NI(n)&&RI()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class qB extends Yw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,Ru(typeof e.type!="string",`Mini animate() doesn't support "type" as a string.`,"mini-spring");const u=YB(e);this.animation=XB(t,i,r,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=Xw(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):HB(t,i,h),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,i;const e=((i=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:i.call(t).duration)||0;return Qr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Qr(e)}get time(){return Qr(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Zs(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&GB()?(this.animation.timeline=e,ts):t(this)}}const LI={anticipate:uI,backInOut:cI,circInOut:hI};function ZB(n){return n in LI}function $B(n){typeof n.ease=="string"&&ZB(n.ease)&&(n.ease=LI[n.ease])}const Fx=10;class KB extends qB{constructor(e){$B(e),AI(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:r,element:s,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const a=new qw({...o,autoplay:!1}),l=Math.max(Fx,er.now()-this.startTime),u=Js(0,Fx,l-Fx);t.setWithVelocity(a.sample(Math.max(0,l-u)).value,a.sample(l).value,u),a.stop()}}const MA=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Aa.test(n)||n==="0")&&!n.startsWith("url("));function JB(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function QB(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=MA(r,e),a=MA(s,e);return hv(o===a,`You are trying to animate ${e} from "${r}" to "${s}". "${o?s:r}" is not an animatable value.`,"value-not-animatable"),!o||!a?!1:JB(n)||(t==="spring"||NI(t))&&i}function eS(n){n.duration=0,n.type="keyframes"}const ez=new Set(["opacity","clipPath","filter","transform"]),tz=kw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function nz(n){var h;const{motionValue:e,name:t,repeatDelay:i,repeatType:r,damping:s,type:o}=n;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return tz()&&t&&ez.has(t)&&(t!=="transform"||!u)&&!l&&!i&&r!=="mirror"&&s!==0&&o!=="inertia"}const iz=40;class rz extends Yw{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:h,...f}){var y;super(),this.stop=()=>{var S,x;this._animation&&(this._animation.stop(),(S=this.stopTimeline)==null||S.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=er.now();const p={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,name:l,motionValue:u,element:h,...f},m=(h==null?void 0:h.KeyframeResolver)||Zw;this.keyframeResolver=new m(a,(S,x,g)=>this.onKeyframesResolved(S,x,p,!g),l,u,h),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:h}=i;this.resolvedAt=er.now(),QB(e,s,o,a)||((Ro.instantAnimations||!l)&&(h==null||h(Xw(e,i,t))),e[0]=e[e.length-1],eS(i),i.repeat=0);const p={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>iz?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},m=!u&&nz(p)?new KB({...p,element:p.motionValue.owner.current}):new qw(p);m.finished.then(()=>this.notifyFinished()).catch(ts),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),zB()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const sz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function oz(n){const e=sz.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}const az=4;function DI(n,e,t=1){Ru(t<=az,`Max CSS variable fallback depth detected in property "${n}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[i,r]=oz(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return tI(o)?parseFloat(o):o}return Vw(r)?DI(r,e,t+1):r}function $w(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const lz={type:"spring",stiffness:500,damping:25,restSpeed:10},cz=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),uz={type:"keyframes",duration:.8},dz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},hz=(n,{keyframes:e})=>e.length>2?uz:$u.has(n)?n.startsWith("scale")?cz(e[1]):lz:dz;function fz({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}const pz=n=>n!==null;function mz(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(pz),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}function FI(n,e,t,i=0,r=1){const s=Array.from(n).sort((u,h)=>u.sortNodePosition(h)).indexOf(e),o=n.size,a=(o-1)*i;return typeof t=="function"?t(s,o):r===1?s*i:a-s*i}const Kw=(n,e,t,i={},r,s)=>o=>{const a=$w(i,n)||{},l=a.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Zs(l);const h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};fz(a)||Object.assign(h,hz(n,h)),h.duration&&(h.duration=Zs(h.duration)),h.repeatDelay&&(h.repeatDelay=Zs(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(eS(h),h.delay===0&&(f=!0)),(Ro.instantAnimations||Ro.skipAnimations)&&(f=!0,eS(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,f&&!s&&e.get()!==void 0){const p=mz(h.keyframes,a);if(p!==void 0){An.update(()=>{h.onUpdate(p),h.onComplete()});return}}return a.isSync?new qw(h):new rz(h)},UI=new Set(["width","height","top","left","right","bottom",...Zu]),EA=30,gz=n=>!isNaN(parseFloat(n));class vz{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var s;const r=er.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=er.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=gz(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Ow);const i=this.events[e].add(t);return e==="change"?()=>{i(),An.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=er.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>EA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,EA);return rI(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Iu(n,e){return new vz(n,e)}function bA(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function Jw(n,e,t,i){if(typeof e=="function"){const[r,s]=bA(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=bA(i);e=e(t!==void 0?t:n.custom,r,s)}return e}function vu(n,e,t){const i=n.getProps();return Jw(i,e,t!==void 0?t:i.custom,n)}const tS=n=>Array.isArray(n);function yz(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Iu(t))}function xz(n){return tS(n)?n[n.length-1]||0:n}function _z(n,e){const t=vu(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=xz(s[o]);yz(n,o,a)}}const Vi=n=>!!(n&&n.getVelocity);function Sz(n){return!!(Vi(n)&&n.add)}function nS(n,e){const t=n.getValue("willChange");if(Sz(t))return t.add(e);if(!t&&Ro.WillChange){const i=new Ro.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function Qw(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const wz="framerAppearId",kI="data-"+Qw(wz);function OI(n){return n.props[kI]}function Mz({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function BI(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=e;i&&(s=i);const l=[],u=r&&n.animationState&&n.animationState.getState()[r];for(const h in a){const f=n.getValue(h,n.latestValues[h]??null),p=a[h];if(p===void 0||u&&Mz(u,h))continue;const m={delay:t,...$w(s||{},h)},y=f.get();if(y!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===y&&!m.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const g=OI(n);if(g){const _=window.MotionHandoffAnimation(g,h,An);_!==null&&(m.startTime=_,S=!0)}}nS(n,h),f.start(Kw(h,f,p,n.shouldReduceMotion&&UI.has(h)?{type:!1}:m,n,S));const x=f.animation;x&&l.push(x)}return o&&Promise.all(l).then(()=>{An.update(()=>{o&&_z(n,o)})}),l}function iS(n,e,t={}){var l;const i=vu(n,e,t.type==="exit"?(l=n.presenceContext)==null?void 0:l.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(BI(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=r;return Ez(n,e,u,h,f,p,t)}:()=>Promise.resolve(),{when:a}=r;if(a){const[u,h]=a==="beforeChildren"?[s,o]:[o,s];return u().then(()=>h())}else return Promise.all([s(),o(t.delay)])}function Ez(n,e,t=0,i=0,r=0,s=1,o){const a=[];for(const l of n.variantChildren)l.notify("AnimationStart",e),a.push(iS(l,e,{...o,delay:t+(typeof i=="function"?0:i)+FI(n.variantChildren,l,i,r,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function bz(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>iS(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=iS(n,e,t);else{const r=typeof e=="function"?vu(n,e,t.custom):e;i=Promise.all(BI(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const Tz={test:n=>n==="auto",parse:n=>n},zI=n=>e=>e.test(n),VI=[qu,pt,$s,ea,J4,K4,Tz],TA=n=>VI.find(zI(n));function Az(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||iI(n):!0}const Cz=new Set(["brightness","contrast","saturate","opacity"]);function Pz(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Hw)||[];if(!i)return n;const r=t.replace(i,"");let s=Cz.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const Rz=/\b([a-z-]*)\(.*?\)/gu,rS={...Aa,getAnimatableNone:n=>{const e=n.match(Rz);return e?e.map(Pz).join(" "):n}},AA={...qu,transform:Math.round},Iz={rotate:ea,rotateX:ea,rotateY:ea,rotateZ:ea,scale:nm,scaleX:nm,scaleY:nm,scaleZ:nm,skew:ea,skewX:ea,skewY:ea,distance:pt,translateX:pt,translateY:pt,translateZ:pt,x:pt,y:pt,z:pt,perspective:pt,transformPerspective:pt,opacity:Zh,originX:fA,originY:fA,originZ:pt},eM={borderWidth:pt,borderTopWidth:pt,borderRightWidth:pt,borderBottomWidth:pt,borderLeftWidth:pt,borderRadius:pt,radius:pt,borderTopLeftRadius:pt,borderTopRightRadius:pt,borderBottomRightRadius:pt,borderBottomLeftRadius:pt,width:pt,maxWidth:pt,height:pt,maxHeight:pt,top:pt,right:pt,bottom:pt,left:pt,inset:pt,insetBlock:pt,insetBlockStart:pt,insetBlockEnd:pt,insetInline:pt,insetInlineStart:pt,insetInlineEnd:pt,padding:pt,paddingTop:pt,paddingRight:pt,paddingBottom:pt,paddingLeft:pt,paddingBlock:pt,paddingBlockStart:pt,paddingBlockEnd:pt,paddingInline:pt,paddingInlineStart:pt,paddingInlineEnd:pt,margin:pt,marginTop:pt,marginRight:pt,marginBottom:pt,marginLeft:pt,marginBlock:pt,marginBlockStart:pt,marginBlockEnd:pt,marginInline:pt,marginInlineStart:pt,marginInlineEnd:pt,backgroundPositionX:pt,backgroundPositionY:pt,...Iz,zIndex:AA,fillOpacity:Zh,strokeOpacity:Zh,numOctaves:AA},Nz={...eM,color:ni,backgroundColor:ni,outlineColor:ni,fill:ni,stroke:ni,borderColor:ni,borderTopColor:ni,borderRightColor:ni,borderBottomColor:ni,borderLeftColor:ni,filter:rS,WebkitFilter:rS},HI=n=>Nz[n];function GI(n,e){let t=HI(n);return t!==rS&&(t=Aa),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Lz=new Set(["auto","none","0"]);function Dz(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!Lz.has(s)&&$h(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=GI(t,r)}class Fz extends Zw{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),Vw(f))){const p=DI(f,t.current);p!==void 0&&(e[h]=p),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!UI.has(i)||e.length!==2)return;const[r,s]=e,o=TA(r),a=TA(s),l=hA(r),u=hA(s);if(l!==u&&ua[i]){this.needsMeasurement=!0;return}if(o!==a)if(SA(o)&&SA(a))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else ua[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||Az(e[r]))&&i.push(r);i.length&&Dz(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ua[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var a;const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=ua[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function Uz(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const r=document.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}const WI=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function jI(n){return nI(n)&&"offsetHeight"in n}const{schedule:tM,cancel:f$}=mI(queueMicrotask,!1),vs={x:!1,y:!1};function XI(){return vs.x||vs.y}function kz(n){return n==="x"||n==="y"?vs[n]?null:(vs[n]=!0,()=>{vs[n]=!1}):vs.x||vs.y?null:(vs.x=vs.y=!0,()=>{vs.x=vs.y=!1})}function YI(n,e){const t=Uz(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function CA(n){return!(n.pointerType==="touch"||XI())}function Oz(n,e,t={}){const[i,r,s]=YI(n,t),o=a=>{if(!CA(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const h=f=>{CA(f)&&(u(f),l.removeEventListener("pointerleave",h))};l.addEventListener("pointerleave",h,r)};return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const qI=(n,e)=>e?n===e?!0:qI(n,e.parentElement):!1,nM=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Bz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ZI(n){return Bz.has(n.tagName)||n.isContentEditable===!0}const fg=new WeakSet;function PA(n){return e=>{e.key==="Enter"&&n(e)}}function Ux(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const zz=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=PA(()=>{if(fg.has(t))return;Ux(t,"down");const r=PA(()=>{Ux(t,"up")}),s=()=>Ux(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function RA(n){return nM(n)&&!XI()}function Vz(n,e,t={}){const[i,r,s]=YI(n,t),o=a=>{const l=a.currentTarget;if(!RA(a))return;fg.add(l);const u=e(l,a),h=(m,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),fg.has(l)&&fg.delete(l),RA(m)&&typeof u=="function"&&u(m,{success:y})},f=m=>{h(m,l===window||l===document||t.useGlobalTarget||qI(l,m.target))},p=m=>{h(m,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",p,r)};return i.forEach(a=>{(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),jI(a)&&(a.addEventListener("focus",u=>zz(u,r)),!ZI(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function $I(n){return nI(n)&&"ownerSVGElement"in n}function Hz(n){return $I(n)&&n.tagName==="svg"}const Gz=[...VI,ni,Aa],Wz=n=>Gz.find(zI(n)),IA=()=>({translate:0,scale:1,origin:0,originPoint:0}),ru=()=>({x:IA(),y:IA()}),NA=()=>({min:0,max:0}),ai=()=>({x:NA(),y:NA()}),sS={current:null},KI={current:!1},jz=typeof window<"u";function Xz(){if(KI.current=!0,!!jz)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>sS.current=n.matches;n.addEventListener("change",e),e()}else sS.current=!1}const Yz=new WeakMap;function fv(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Kh(n){return typeof n=="string"||Array.isArray(n)}const iM=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],rM=["initial",...iM];function pv(n){return fv(n.animate)||rM.some(e=>Kh(n[e]))}function JI(n){return!!(pv(n)||n.variants)}function qz(n,e,t){for(const i in e){const r=e[i],s=t[i];if(Vi(r))n.addValue(i,r);else if(Vi(s))n.addValue(i,Iu(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,Iu(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const LA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Kg={};function QI(n){Kg=n}function Zz(){return Kg}class $z{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Zw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=er.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,An.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=pv(t),this.isVariantNode=JI(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(t,{},this);for(const p in f){const m=f[p];l[p]!==void 0&&Vi(m)&&m.set(l[p])}}mount(e){var t;this.current=e,Yz.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,r)=>this.bindToMotionValue(r,i)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(KI.current||Xz(),this.shouldReduceMotion=sS.current),(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Ta(this.notifyUpdate),Ta(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const i=this.features[t];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=$u.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&An.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;typeof window<"u"&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Kg){const t=Kg[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ai()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<LA.length;i++){const r=LA[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=qz(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Iu(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(tI(i)||iI(i))?i=parseFloat(i):!Wz(i)&&Aa.test(t)&&(i=GI(e,t)),this.setBaseTarget(e,Vi(i)?i.get():i)),Vi(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var s;const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const o=Jw(this.props,t,(s=this.presenceContext)==null?void 0:s.custom);o&&(i=o[e])}if(t&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Vi(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Ow),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){tM.render(this.render)}}class ka{constructor(e){this.isMounted=!1,this.node=e}update(){}}class eN extends $z{constructor(){super(...arguments),this.KeyframeResolver=Fz}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const i=e.style;return i?i[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function tN({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function Kz({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Jz(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function kx(n){return n===void 0||n===1}function oS({scale:n,scaleX:e,scaleY:t}){return!kx(n)||!kx(e)||!kx(t)}function gl(n){return oS(n)||nN(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function nN(n){return DA(n.x)||DA(n.y)}function DA(n){return n&&n!=="0%"}function Jg(n,e,t){const i=n-t,r=e*i;return t+r}function FA(n,e,t,i,r){return r!==void 0&&(n=Jg(n,r,i)),Jg(n,t,i)+e}function aS(n,e=0,t=1,i,r){n.min=FA(n.min,e,t,i,r),n.max=FA(n.max,e,t,i,r)}function iN(n,{x:e,y:t}){aS(n.x,e.translate,e.scale,e.originPoint),aS(n.y,t.translate,t.scale,t.originPoint)}const UA=.999999999999,kA=1.0000000000001;function Qz(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ou(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,iN(n,o)),i&&gl(s.latestValues)&&ou(n,s.latestValues))}e.x<kA&&e.x>UA&&(e.x=1),e.y<kA&&e.y>UA&&(e.y=1)}function su(n,e){n.min=n.min+e,n.max=n.max+e}function OA(n,e,t,i,r=.5){const s=Dn(n.min,n.max,r);aS(n,e,t,s,i)}function ou(n,e){OA(n.x,e.x,e.scaleX,e.scale,e.originX),OA(n.y,e.y,e.scaleY,e.scale,e.originY)}function rN(n,e){return tN(Jz(n.getBoundingClientRect(),e))}function e5(n,e,t){const i=rN(n,t),{scroll:r}=e;return r&&(su(i.x,r.offset.x),su(i.y,r.offset.y)),i}const t5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},n5=Zu.length;function i5(n,e,t){let i="",r=!0;for(let s=0;s<n5;s++){const o=Zu[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const u=WI(a,eM[o]);if(!l){r=!1;const h=t5[o]||o;i+=`${h}(${u}) `}t&&(e[o]=u)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function sM(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const u=e[l];if($u.has(l)){o=!0;continue}else if(vI(l)){r[l]=u;continue}else{const h=WI(u,eM[l]);l.startsWith("origin")?(a=!0,s[l]=h):i[l]=h}}if(e.transform||(o||t?i.transform=i5(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:h=0}=s;i.transformOrigin=`${l} ${u} ${h}`}}function sN(n,{style:e,vars:t},i,r){const s=n.style;let o;for(o in e)s[o]=e[o];r==null||r.applyProjectionStyles(s,i);for(o in t)s.setProperty(o,t[o])}function BA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Pd={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(pt.test(n))n=parseFloat(n);else return n;const t=BA(n,e.target.x),i=BA(n,e.target.y);return`${t}% ${i}%`}},r5={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=Aa.parse(n);if(r.length>5)return i;const s=Aa.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const u=Dn(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),s(r)}},lS={borderRadius:{...Pd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pd,borderTopRightRadius:Pd,borderBottomLeftRadius:Pd,borderBottomRightRadius:Pd,boxShadow:r5};function oN(n,{layout:e,layoutId:t}){return $u.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!lS[n]||n==="opacity")}function oM(n,e,t){var o;const i=n.style,r=e==null?void 0:e.style,s={};if(!i)return s;for(const a in i)(Vi(i[a])||r&&Vi(r[a])||oN(a,n)||((o=t==null?void 0:t.getValue(a))==null?void 0:o.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function s5(n){return window.getComputedStyle(n)}class o5 extends eN{constructor(){super(...arguments),this.type="html",this.renderInstance=sN}readValueFromInstance(e,t){var i;if($u.has(t))return(i=this.projection)!=null&&i.isProjecting?Z1(t):FB(e,t);{const r=s5(e),s=(vI(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return rN(e,t)}build(e,t,i){sM(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return oM(e,t,i)}}const a5={offset:"stroke-dashoffset",array:"stroke-dasharray"},l5={offset:"strokeDashoffset",array:"strokeDasharray"};function c5(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?a5:l5;n[s.offset]=pt.transform(-i);const o=pt.transform(e),a=pt.transform(t);n[s.array]=`${o} ${a}`}const u5=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function aN(n,{attrX:e,attrY:t,attrScale:i,pathLength:r,pathSpacing:s=1,pathOffset:o=0,...a},l,u,h){if(sM(n,a,u),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:f,style:p}=n;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete f.transformBox);for(const m of u5)f[m]!==void 0&&(p[m]=f[m],delete f[m]);e!==void 0&&(f.x=e),t!==void 0&&(f.y=t),i!==void 0&&(f.scale=i),r!==void 0&&c5(f,r,s,o,!1)}const lN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),cN=n=>typeof n=="string"&&n.toLowerCase()==="svg";function d5(n,e,t,i){sN(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(lN.has(r)?r:Qw(r),e.attrs[r])}function uN(n,e,t){const i=oM(n,e,t);for(const r in n)if(Vi(n[r])||Vi(e[r])){const s=Zu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}class h5 extends eN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ai}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if($u.has(t)){const i=HI(t);return i&&i.default||0}return t=lN.has(t)?t:Qw(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return uN(e,t,i)}build(e,t,i){aN(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){d5(e,t,i,r)}mount(e){this.isSVGTag=cN(e.tagName),super.mount(e)}}const f5=rM.length;function dN(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?dN(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<f5;t++){const i=rM[t],r=n.props[i];(Kh(r)||r===!1)&&(e[i]=r)}return e}function hN(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const p5=[...iM].reverse(),m5=iM.length;function g5(n){return e=>Promise.all(e.map(({animation:t,options:i})=>bz(n,t,i)))}function v5(n){let e=g5(n),t=zA(),i=!0;const r=l=>(u,h)=>{var p;const f=vu(n,h,l==="exit"?(p=n.presenceContext)==null?void 0:p.custom:void 0);if(f){const{transition:m,transitionEnd:y,...S}=f;u={...u,...S,...y}}return u};function s(l){e=l(n)}function o(l){const{props:u}=n,h=dN(n.parent)||{},f=[],p=new Set;let m={},y=1/0;for(let x=0;x<m5;x++){const g=p5[x],_=t[g],M=u[g]!==void 0?u[g]:h[g],E=Kh(M),A=g===l?_.isActive:null;A===!1&&(y=x);let P=M===h[g]&&M!==u[g]&&E;if(P&&i&&n.manuallyAnimateOnMount&&(P=!1),_.protectedKeys={...m},!_.isActive&&A===null||!M&&!_.prevProp||fv(M)||typeof M=="boolean")continue;const L=y5(_.prevProp,M);let N=L||g===l&&_.isActive&&!P&&E||x>y&&E,C=!1;const R=Array.isArray(M)?M:[M];let k=R.reduce(r(g),{});A===!1&&(k={});const{prevResolvedValues:H={}}=_,$={...H,...k},ne=Q=>{N=!0,p.has(Q)&&(C=!0,p.delete(Q)),_.needsAnimating[Q]=!0;const O=n.getValue(Q);O&&(O.liveStyle=!1)};for(const Q in $){const O=k[Q],Y=H[Q];if(m.hasOwnProperty(Q))continue;let X=!1;tS(O)&&tS(Y)?X=!hN(O,Y):X=O!==Y,X?O!=null?ne(Q):p.add(Q):O!==void 0&&p.has(Q)?ne(Q):_.protectedKeys[Q]=!0}_.prevProp=M,_.prevResolvedValues=k,_.isActive&&(m={...m,...k}),i&&n.blockInitialAnimation&&(N=!1);const le=P&&L;N&&(!le||C)&&f.push(...R.map(Q=>{const O={type:g};if(typeof Q=="string"&&i&&!le&&n.manuallyAnimateOnMount&&n.parent){const{parent:Y}=n,X=vu(Y,Q);if(Y.enteringChildren&&X){const{delayChildren:se}=X.transition||{};O.delay=FI(Y.enteringChildren,n,se)}}return{animation:Q,options:O}}))}if(p.size){const x={};if(typeof u.initial!="boolean"){const g=vu(n,Array.isArray(u.initial)?u.initial[0]:u.initial);g&&g.transition&&(x.transition=g.transition)}p.forEach(g=>{const _=n.getBaseTarget(g),M=n.getValue(g);M&&(M.liveStyle=!0),x[g]=_??null}),f.push({animation:x})}let S=!!f.length;return i&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(S=!1),i=!1,S?e(f):Promise.resolve()}function a(l,u){var f;if(t[l].isActive===u)return Promise.resolve();(f=n.variantChildren)==null||f.forEach(p=>{var m;return(m=p.animationState)==null?void 0:m.setActive(l,u)}),t[l].isActive=u;const h=o(l);for(const p in t)t[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=zA()}}}function y5(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!hN(e,n):!1}function Ja(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zA(){return{animate:Ja(!0),whileInView:Ja(),whileHover:Ja(),whileTap:Ja(),whileDrag:Ja(),whileFocus:Ja(),exit:Ja()}}const fN=1e-4,x5=1-fN,_5=1+fN,pN=.01,S5=0-pN,w5=0+pN;function tr(n){return n.max-n.min}function M5(n,e,t){return Math.abs(n-e)<=t}function VA(n,e,t,i=.5){n.origin=i,n.originPoint=Dn(e.min,e.max,n.origin),n.scale=tr(t)/tr(e),n.translate=Dn(t.min,t.max,n.origin)-n.originPoint,(n.scale>=x5&&n.scale<=_5||isNaN(n.scale))&&(n.scale=1),(n.translate>=S5&&n.translate<=w5||isNaN(n.translate))&&(n.translate=0)}function vh(n,e,t,i){VA(n.x,e.x,t.x,i?i.originX:void 0),VA(n.y,e.y,t.y,i?i.originY:void 0)}function HA(n,e,t){n.min=t.min+e.min,n.max=n.min+tr(e)}function E5(n,e,t){HA(n.x,e.x,t.x),HA(n.y,e.y,t.y)}function GA(n,e,t){n.min=e.min-t.min,n.max=n.min+tr(e)}function Qg(n,e,t){GA(n.x,e.x,t.x),GA(n.y,e.y,t.y)}function WA(n,e,t,i,r){return n-=e,n=Jg(n,1/t,i),r!==void 0&&(n=Jg(n,1/r,i)),n}function b5(n,e=0,t=1,i=.5,r,s=n,o=n){if($s.test(e)&&(e=parseFloat(e),e=Dn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Dn(s.min,s.max,i);n===s&&(a-=e),n.min=WA(n.min,e,t,a,r),n.max=WA(n.max,e,t,a,r)}function jA(n,e,[t,i,r],s,o){b5(n,e[t],e[i],e[r],e.scale,s,o)}const T5=["x","scaleX","originX"],A5=["y","scaleY","originY"];function XA(n,e,t,i){jA(n.x,e,T5,t?t.x:void 0,i?i.x:void 0),jA(n.y,e,A5,t?t.y:void 0,i?i.y:void 0)}function YA(n,e){n.min=e.min,n.max=e.max}function hs(n,e){YA(n.x,e.x),YA(n.y,e.y)}function qA(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function ZA(n){return n.translate===0&&n.scale===1}function mN(n){return ZA(n.x)&&ZA(n.y)}function $A(n,e){return n.min===e.min&&n.max===e.max}function C5(n,e){return $A(n.x,e.x)&&$A(n.y,e.y)}function KA(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function gN(n,e){return KA(n.x,e.x)&&KA(n.y,e.y)}function JA(n){return tr(n.x)/tr(n.y)}function QA(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function qr(n){return[n("x"),n("y")]}function P5(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:h,rotateX:f,rotateY:p,skewX:m,skewY:y}=t;u&&(i=`perspective(${u}px) ${i}`),h&&(i+=`rotate(${h}deg) `),f&&(i+=`rotateX(${f}deg) `),p&&(i+=`rotateY(${p}deg) `),m&&(i+=`skewX(${m}deg) `),y&&(i+=`skewY(${y}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const vN=["TopLeft","TopRight","BottomLeft","BottomRight"],R5=vN.length,eC=n=>typeof n=="string"?parseFloat(n):n,tC=n=>typeof n=="number"||pt.test(n);function I5(n,e,t,i,r,s){r?(n.opacity=Dn(0,t.opacity??1,N5(i)),n.opacityExit=Dn(e.opacity??1,0,L5(i))):s&&(n.opacity=Dn(e.opacity??1,t.opacity??1,i));for(let o=0;o<R5;o++){const a=`border${vN[o]}Radius`;let l=nC(e,a),u=nC(t,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||tC(l)===tC(u)?(n[a]=Math.max(Dn(eC(l),eC(u),i),0),($s.test(u)||$s.test(l))&&(n[a]+="%")):n[a]=u}(e.rotate||t.rotate)&&(n.rotate=Dn(e.rotate||0,t.rotate||0,i))}function nC(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const N5=yN(0,.5,dI),L5=yN(.5,.95,ts);function yN(n,e,t){return i=>i<n?0:i>e?1:t(qh(n,e,i))}function D5(n,e){const t=er.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(Ta(i),n(s-e))};return An.setup(i,!0),()=>Ta(i)}function Jh(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function pg(n){return Vi(n)?n.get():n}function F5(n,e,t){const i=Vi(n)?n:Iu(n);return i.start(Kw("",i,e,t)),i.animation}const U5=(n,e)=>n.depth-e.depth;class k5{constructor(){this.children=[],this.isDirty=!1}add(e){Fw(this.children,e),this.isDirty=!0}remove(e){Uw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(U5),this.isDirty=!1,this.children.forEach(e)}}class O5{constructor(){this.members=[]}add(e){Fw(this.members,e),e.scheduleRender()}remove(e){if(Uw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const mg={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Ox=["","X","Y","Z"],B5=1e3;let z5=0;function Bx(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function xN(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=OI(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",An,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&xN(i)}function _N({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=z5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(G5),this.nodes.forEach(Y5),this.nodes.forEach(q5),this.nodes.forEach(W5)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new k5)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ow),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=$I(o)&&!Hz(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),n){let h,f=0;const p=()=>this.root.updateBlockedByResize=!1;An.read(()=>{f=window.innerWidth}),n(o,()=>{const m=window.innerWidth;m!==f&&(f=m,this.root.updateBlockedByResize=!0,h&&h(),h=D5(p,250),mg.hasAnimatedSinceResize&&(mg.hasAnimatedSinceResize=!1,this.nodes.forEach(sC)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||Q5,{onLayoutAnimationStart:S,onLayoutAnimationComplete:x}=u.getProps(),g=!this.targetLayout||!gN(this.targetLayout,m),_=!f&&p;if(this.options.layoutRoot||this.resumeFrom||_||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...$w(y,"layout"),onPlay:S,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(h,_)}else f||sC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ta(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Z5),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&xN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(iC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(rC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(X5),this.nodes.forEach(V5),this.nodes.forEach(H5)):this.nodes.forEach(rC),this.clearAllSnapshots();const a=er.now();Ei.delta=Js(0,1e3/60,a-Ei.timestamp),Ei.timestamp=a,Ei.isProcessing=!0,Rx.update.process(Ei),Rx.preRender.process(Ei),Rx.render.process(Ei),Ei.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tM.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(j5),this.sharedNodes.forEach($5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,An.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){An.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!tr(this.snapshot.measuredBox.x)&&!tr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ai(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!mN(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||gl(this.latestValues)||h)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),eV(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return ai();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(tV))){const{scroll:h}=this.root;h&&(su(a.x,h.offset.x),su(a.y,h.offset.y))}return a}removeElementScroll(o){var l;const a=ai();if(hs(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&hs(a,o),su(a.x,f.offset.x),su(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=ai();hs(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ou(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),gl(h.latestValues)&&ou(l,h.latestValues)}return gl(this.latestValues)&&ou(l,this.latestValues),l}removeTransform(o){const a=ai();hs(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!gl(u.latestValues))continue;oS(u.latestValues)&&u.updateSnapshot();const h=ai(),f=u.measurePageBox();hs(h,f),XA(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return gl(this.latestValues)&&XA(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ei.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!this.layout||!(h||f))return;this.resolvedRelativeTargetAt=Ei.timestamp;const p=this.getClosestProjectingParent();p&&this.linkedParentVersion!==p.layoutVersion&&!p.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(p&&p.layout?this.createRelativeTarget(p,this.layout.layoutBox,p.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ai(),this.targetWithTransforms=ai()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),E5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hs(this.target,this.layout.layoutBox),iN(this.target,this.targetDelta)):hs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?this.createRelativeTarget(p,this.target,p.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||oS(this.parent.latestValues)||nN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ai(),this.relativeTargetOrigin=ai(),Qg(this.relativeTargetOrigin,a,l),hs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var y;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ei.timestamp&&(l=!1),l)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;hs(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;Qz(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ai());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(qA(this.prevProjectionDelta.x,this.projectionDelta.x),qA(this.prevProjectionDelta.y,this.projectionDelta.y)),vh(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!QA(this.projectionDelta.x,this.prevProjectionDelta.x)||!QA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ru(),this.projectionDelta=ru(),this.projectionDeltaWithTransform=ru()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},f=ru();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=ai(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,S=m!==y,x=this.getStack(),g=!x||x.members.length<=1,_=!!(S&&!g&&this.options.crossfade===!0&&!this.path.some(J5));this.animationProgress=0;let M;this.mixTargetDelta=E=>{const A=E/1e3;oC(f.x,o.x,A),oC(f.y,o.y,A),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qg(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),K5(this.relativeTarget,this.relativeTargetOrigin,p,A),M&&C5(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=ai()),hs(M,this.relativeTarget)),S&&(this.animationValues=h,I5(h,u,this.latestValues,A,_,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Ta(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=An.update(()=>{mg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Iu(0)),this.currentAnimation=F5(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(B5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&SN(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||ai();const f=tr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=tr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}hs(a,l),ou(a,h),vh(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new O5),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&Bx("z",o,u,this.animationValues);for(let h=0;h<Ox.length;h++)Bx(`rotate${Ox[h]}`,o,u,this.animationValues),Bx(`skew${Ox[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=pg(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=pg(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!gl(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=P5(this.projectionDeltaWithTransform,this.treeScale,h);l&&(f=l(h,f)),o.transform=f;const{x:p,y:m}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in lS){if(h[y]===void 0)continue;const{correct:S,applyTo:x,isCSSVariable:g}=lS[y],_=f==="none"?h[y]:S(h[y],u);if(x){const M=x.length;for(let E=0;E<M;E++)o[x[E]]=_}else g?this.options.visualElement.renderState.vars[y]=_:o[y]=_}this.options.layoutId&&(o.pointerEvents=u===this?pg(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(iC),this.root.sharedNodes.clear()}}}function V5(n){n.updateLayout()}function H5(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=e.source!==n.layout.source;s==="size"?qr(f=>{const p=o?e.measuredBox[f]:e.layoutBox[f],m=tr(p);p.min=i[f].min,p.max=p.min+m}):SN(s,e.layoutBox,i)&&qr(f=>{const p=o?e.measuredBox[f]:e.layoutBox[f],m=tr(i[f]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+m)});const a=ru();vh(a,i,e.layoutBox);const l=ru();o?vh(l,n.applyTransform(r,!0),e.measuredBox):vh(l,i,e.layoutBox);const u=!mN(a);let h=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const y=ai();Qg(y,e.layoutBox,p.layoutBox);const S=ai();Qg(S,i,m.layoutBox),gN(y,S)||(h=!0),f.options.layoutRoot&&(n.relativeTarget=S,n.relativeTargetOrigin=y,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function G5(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function W5(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function j5(n){n.clearSnapshot()}function iC(n){n.clearMeasurements()}function rC(n){n.isLayoutDirty=!1}function X5(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function sC(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Y5(n){n.resolveTargetDelta()}function q5(n){n.calcProjection()}function Z5(n){n.resetSkewAndRotation()}function $5(n){n.removeLeadSnapshot()}function oC(n,e,t){n.translate=Dn(e.translate,0,t),n.scale=Dn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function aC(n,e,t,i){n.min=Dn(e.min,t.min,i),n.max=Dn(e.max,t.max,i)}function K5(n,e,t,i){aC(n.x,e.x,t.x,i),aC(n.y,e.y,t.y,i)}function J5(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Q5={duration:.45,ease:[.4,0,.1,1]},lC=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),cC=lC("applewebkit/")&&!lC("chrome/")?Math.round:ts;function uC(n){n.min=cC(n.min),n.max=cC(n.max)}function eV(n){uC(n.x),uC(n.y)}function SN(n,e,t){return n==="position"||n==="preserve-aspect"&&!M5(JA(e),JA(t),.2)}function tV(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const nV=_N({attachResizeListener:(n,e)=>Jh(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),zx={current:void 0},wN=_N({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!zx.current){const n=new nV({});n.mount(window),n.setOptions({layoutScroll:!0}),zx.current=n}return zx.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),aM=j.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function dC(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function iV(...n){return e=>{let t=!1;const i=n.map(r=>{const s=dC(r,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():dC(n[r],null)}}}}function rV(...n){return j.useCallback(iV(...n),n)}class sV extends j.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,r=jI(i)&&i.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function oV({children:n,isPresent:e,anchorX:t,root:i}){var h;const r=j.useId(),s=j.useRef(null),o=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=j.useContext(aM),l=((h=n.props)==null?void 0:h.ref)??(n==null?void 0:n.ref),u=rV(s,l);return j.useInsertionEffect(()=>{const{width:f,height:p,top:m,left:y,right:S}=o.current;if(e||!s.current||!f||!p)return;const x=t==="left"?`left: ${y}`:`right: ${S}`;s.current.dataset.motionPopId=r;const g=document.createElement("style");a&&(g.nonce=a);const _=i??document.head;return _.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${p}px !important;
            ${x}px !important;
            top: ${m}px !important;
          }
        `),()=>{_.contains(g)&&_.removeChild(g)}},[e]),T.jsx(sV,{isPresent:e,childRef:s,sizeRef:o,children:j.cloneElement(n,{ref:u})})}const aV=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const u=Dw(lV),h=j.useId();let f=!0,p=j.useMemo(()=>(f=!1,{id:h,initial:e,isPresent:t,custom:r,onExitComplete:m=>{u.set(m,!0);for(const y of u.values())if(!y)return;i&&i()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[t,u,i]);return s&&f&&(p={...p}),j.useMemo(()=>{u.forEach((m,y)=>u.set(y,!1))},[t]),j.useEffect(()=>{!t&&!u.size&&i&&i()},[t]),o==="popLayout"&&(n=T.jsx(oV,{isPresent:t,anchorX:a,root:l,children:n})),T.jsx(dv.Provider,{value:p,children:n})};function lV(){return new Map}function MN(n=!0){const e=j.useContext(dv);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=j.useId();j.useEffect(()=>{if(n)return r(s)},[n]);const o=j.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const im=n=>n.key||"";function hC(n){const e=[];return j.Children.forEach(n,t=>{j.isValidElement(t)&&e.push(t)}),e}const lM=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,h]=MN(o),f=j.useMemo(()=>hC(n),[n]),p=o&&!u?[]:f.map(im),m=j.useRef(!0),y=j.useRef(f),S=Dw(()=>new Map),x=j.useRef(new Set),[g,_]=j.useState(f),[M,E]=j.useState(f);eI(()=>{m.current=!1,y.current=f;for(let L=0;L<M.length;L++){const N=im(M[L]);p.includes(N)?(S.delete(N),x.current.delete(N)):S.get(N)!==!0&&S.set(N,!1)}},[M,p.length,p.join("-")]);const A=[];if(f!==g){let L=[...f];for(let N=0;N<M.length;N++){const C=M[N],R=im(C);p.includes(R)||(L.splice(N,0,C),A.push(C))}return s==="wait"&&A.length&&(L=A),E(hC(L)),_(f),null}const{forceRender:P}=j.useContext(Lw);return T.jsx(T.Fragment,{children:M.map(L=>{const N=im(L),C=o&&!u?!1:f===M||p.includes(N),R=()=>{if(x.current.has(N))return;if(x.current.add(N),S.has(N))S.set(N,!0);else return;let k=!0;S.forEach(H=>{H||(k=!1)}),k&&(P==null||P(),E(y.current),o&&(h==null||h()),i&&i())};return T.jsx(aV,{isPresent:C,initial:!m.current||t?void 0:!1,custom:e,presenceAffectsLayout:r,mode:s,root:l,onExitComplete:C?void 0:R,anchorX:a,children:L},N)})})},EN=j.createContext({strict:!1}),fC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let pC=!1;function cV(){if(pC)return;const n={};for(const e in fC)n[e]={isEnabled:t=>fC[e].some(i=>!!t[i])};QI(n),pC=!0}function bN(){return cV(),Zz()}function uV(n){const e=bN();for(const t in n)e[t]={...e[t],...n[t]};QI(e)}const dV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function e0(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||dV.has(n)}let TN=n=>!e0(n);function hV(n){typeof n=="function"&&(TN=e=>e.startsWith("on")?!e0(e):n(e))}try{hV(require("@emotion/is-prop-valid").default)}catch{}function fV(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(TN(r)||t===!0&&e0(r)||!e&&!e0(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}const mv=j.createContext({});function pV(n,e){if(pv(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Kh(t)?t:void 0,animate:Kh(i)?i:void 0}}return n.inherit!==!1?e:{}}function mV(n){const{initial:e,animate:t}=pV(n,j.useContext(mv));return j.useMemo(()=>({initial:e,animate:t}),[mC(e),mC(t)])}function mC(n){return Array.isArray(n)?n.join(" "):n}const cM=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function AN(n,e,t){for(const i in e)!Vi(e[i])&&!oN(i,t)&&(n[i]=e[i])}function gV({transformTemplate:n},e){return j.useMemo(()=>{const t=cM();return sM(t,e,n),Object.assign({},t.vars,t.style)},[e])}function vV(n,e){const t=n.style||{},i={};return AN(i,t,n),Object.assign(i,gV(n,e)),i}function yV(n,e){const t={},i=vV(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const CN=()=>({...cM(),attrs:{}});function xV(n,e,t,i){const r=j.useMemo(()=>{const s=CN();return aN(s,e,cN(i),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};AN(s,n.style,n),r.style={...s,...r.style}}return r}const _V=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function uM(n){return typeof n!="string"||n.includes("-")?!1:!!(_V.indexOf(n)>-1||/[A-Z]/u.test(n))}function SV(n,e,t,{latestValues:i},r,s=!1,o){const l=(o??uM(n)?xV:yV)(e,i,r,n),u=fV(e,typeof n=="string",s),h=n!==j.Fragment?{...u,...l,ref:t}:{},{children:f}=e,p=j.useMemo(()=>Vi(f)?f.get():f,[f]);return j.createElement(n,{...h,children:p})}function wV({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,r){return{latestValues:MV(t,i,r,n),renderState:e()}}function MV(n,e,t,i){const r={},s=i(n,{});for(const p in s)r[p]=pg(s[p]);let{initial:o,animate:a}=n;const l=pv(n),u=JI(n);e&&u&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const f=h?a:o;if(f&&typeof f!="boolean"&&!fv(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const y=Jw(n,p[m]);if(y){const{transitionEnd:S,transition:x,...g}=y;for(const _ in g){let M=g[_];if(Array.isArray(M)){const E=h?M.length-1:0;M=M[E]}M!==null&&(r[_]=M)}for(const _ in S)r[_]=S[_]}}}return r}const PN=n=>(e,t)=>{const i=j.useContext(mv),r=j.useContext(dv),s=()=>wV(n,e,i,r);return t?s():Dw(s)},EV=PN({scrapeMotionValuesFromProps:oM,createRenderState:cM}),bV=PN({scrapeMotionValuesFromProps:uN,createRenderState:CN}),TV=Symbol.for("motionComponentSymbol");function AV(n,e,t){const i=j.useRef(t);j.useInsertionEffect(()=>{i.current=t});const r=j.useRef(null);return j.useCallback(s=>{var a;s&&((a=n.onMount)==null||a.call(n,s)),e&&(s?e.mount(s):e.unmount());const o=i.current;if(typeof o=="function")if(s){const l=o(s);typeof l=="function"&&(r.current=l)}else r.current?(r.current(),r.current=null):o(s);else o&&(o.current=s)},[e])}const RN=j.createContext({});function th(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function CV(n,e,t,i,r,s){var x,g;const{visualElement:o}=j.useContext(mv),a=j.useContext(EN),l=j.useContext(dv),u=j.useContext(aM).reducedMotion,h=j.useRef(null);i=i||a.renderer,!h.current&&i&&(h.current=i(n,{visualState:e,parent:o,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u,isSVG:s}));const f=h.current,p=j.useContext(RN);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&PV(h.current,t,r,p);const m=j.useRef(!1);j.useInsertionEffect(()=>{f&&m.current&&f.update(t,l)});const y=t[kI],S=j.useRef(!!y&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,y))&&((g=window.MotionHasOptimisedAnimation)==null?void 0:g.call(window,y)));return eI(()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),S.current&&f.animationState&&f.animationState.animateChanges())}),j.useEffect(()=>{f&&(!S.current&&f.animationState&&f.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,y)}),S.current=!1),f.enteringChildren=void 0)}),f}function PV(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:h}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:IN(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&th(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:h,layoutScroll:l,layoutRoot:u})}function IN(n){if(n)return n.options.allowProjection!==!1?n.projection:IN(n.parent)}function Vx(n,{forwardMotionProps:e=!1,type:t}={},i,r){i&&uV(i);const s=t?t==="svg":uM(n),o=s?bV:EV;function a(u,h){let f;const p={...j.useContext(aM),...u,layoutId:RV(u)},{isStatic:m}=p,y=mV(u),S=o(u,m);if(!m&&Q3){IV();const x=NV(p);f=x.MeasureLayout,y.visualElement=CV(n,S,p,r,x.ProjectionNode,s)}return T.jsxs(mv.Provider,{value:y,children:[f&&y.visualElement?T.jsx(f,{visualElement:y.visualElement,...p}):null,SV(n,u,AV(S,y.visualElement,h),S,m,e,s)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=j.forwardRef(a);return l[TV]=n,l}function RV({layoutId:n}){const e=j.useContext(Lw).id;return e&&n!==void 0?e+"-"+n:n}function IV(n,e){j.useContext(EN).strict}function NV(n){const e=bN(),{drag:t,layout:i}=e;if(!t&&!i)return{};const r={...t,...i};return{MeasureLayout:t!=null&&t.isEnabled(n)||i!=null&&i.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function LV(n,e){if(typeof Proxy>"u")return Vx;const t=new Map,i=(s,o)=>Vx(s,o,n,e),r=(s,o)=>i(s,o);return new Proxy(r,{get:(s,o)=>o==="create"?i:(t.has(o)||t.set(o,Vx(o,void 0,n,e)),t.get(o))})}const DV=(n,e)=>e.isSVG??uM(n)?new h5(e):new o5(e,{allowProjection:n!==j.Fragment});class FV extends ka{constructor(e){super(e),e.animationState||(e.animationState=v5(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();fv(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let UV=0;class kV extends ka{constructor(){super(...arguments),this.id=UV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const OV={animation:{Feature:FV},exit:{Feature:kV}};function Rf(n){return{point:{x:n.pageX,y:n.pageY}}}const BV=n=>e=>nM(e)&&n(e,Rf(e));function yh(n,e,t,i){return Jh(n,e,BV(t),i)}const NN=({current:n})=>n?n.ownerDocument.defaultView:null,gC=(n,e)=>Math.abs(n-e);function zV(n,e){const t=gC(n.x,e.x),i=gC(n.y,e.y);return Math.sqrt(t**2+i**2)}const vC=new Set(["auto","scroll"]);class LN{constructor(e,t,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3,element:a}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=m=>{this.handleScroll(m.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Gx(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,S=zV(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!S)return;const{point:x}=m,{timestamp:g}=Ei;this.history.push({...x,timestamp:g});const{onStart:_,onMove:M}=this.handlers;y||(_&&_(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Hx(y,this.transformPagePoint),An.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:S,onSessionEnd:x,resumeAnimation:g}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Gx(m.type==="pointercancel"?this.lastMoveEventInfo:Hx(y,this.transformPagePoint),this.history);this.startEvent&&S&&S(m,_),x&&x(m,_)},!nM(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=r||window;const l=Rf(e),u=Hx(l,this.transformPagePoint),{point:h}=u,{timestamp:f}=Ei;this.history=[{...h,timestamp:f}];const{onSessionStart:p}=t;p&&p(e,Gx(u,this.history)),this.removeListeners=Af(yh(this.contextWindow,"pointermove",this.handlePointerMove),yh(this.contextWindow,"pointerup",this.handlePointerUp),yh(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(e){let t=e.parentElement;for(;t;){const i=getComputedStyle(t);(vC.has(i.overflowX)||vC.has(i.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const i=e===window,r=i?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},s={x:r.x-t.x,y:r.y-t.y};s.x===0&&s.y===0||(i?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(e,r),An.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Ta(this.updatePoint)}}function Hx(n,e){return e?{point:e(n.point)}:n}function yC(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Gx({point:n},e){return{point:n,delta:yC(n,DN(e)),offset:yC(n,VV(e)),velocity:HV(e,.1)}}function VV(n){return n[0]}function DN(n){return n[n.length-1]}function HV(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=DN(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Zs(e)));)t--;if(!i)return{x:0,y:0};const s=Qr(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function GV(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Dn(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Dn(t,n,i.max):Math.min(n,t)),n}function xC(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function WV(n,{top:e,left:t,bottom:i,right:r}){return{x:xC(n.x,t,r),y:xC(n.y,e,i)}}function _C(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function jV(n,e){return{x:_C(n.x,e.x),y:_C(n.y,e.y)}}function XV(n,e){let t=.5;const i=tr(n),r=tr(e);return r>i?t=qh(e.min,e.max-i,n.min):i>r&&(t=qh(n.min,n.max-r,e.min)),Js(0,1,t)}function YV(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const cS=.35;function qV(n=cS){return n===!1?n=0:n===!0&&(n=cS),{x:SC(n,"left","right"),y:SC(n,"top","bottom")}}function SC(n,e,t){return{min:wC(n,e),max:wC(n,t)}}function wC(n,e){return typeof n=="number"?n:n[e]||0}const ZV=new WeakMap;class $V{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ai(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=f=>{t?(this.stopAnimation(),this.snapToCursor(Rf(f).point)):this.pauseAnimation()},o=(f,p)=>{this.stopAnimation();const{drag:m,dragPropagation:y,onDragStart:S}=this.getProps();if(m&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kz(m),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qr(g=>{let _=this.getAxisMotionValue(g).get()||0;if($s.test(_)){const{projection:M}=this.visualElement;if(M&&M.layout){const E=M.layout.layoutBox[g];E&&(_=tr(E)*(parseFloat(_)/100))}}this.originPoint[g]=_}),S&&An.postRender(()=>S(f,p)),nS(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p;const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:S,onDrag:x}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:g}=p;if(y&&this.currentDirection===null){this.currentDirection=KV(g),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",p.point,g),this.updateAxis("y",p.point,g),this.visualElement.render(),x&&x(f,p)},l=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p,this.stop(f,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>qr(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)==null?void 0:p.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new LN(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:i,contextWindow:NN(this.visualElement),element:this.visualElement.current})}stop(e,t){const i=e||this.latestPointerEvent,r=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!i)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&An.postRender(()=>a(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!rm(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=GV(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,r=this.constraints;e&&th(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=WV(i.layoutBox,e):this.constraints=!1,this.elastic=qV(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&qr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=YV(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!th(e))return!1;const i=e.current;Ru(i!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=e5(i,r.root,this.visualElement.getTransformPagePoint());let o=jV(r.layout.layoutBox,s);if(t){const a=t(Kz(o));this.hasMutatedConstraints=!!a,a&&(o=tN(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=qr(h=>{if(!rm(h,t,this.currentDirection))return;let f=l&&l[h]||{};o&&(f={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,y={type:"inertia",velocity:i?e[h]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,y)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return nS(this.visualElement,e),i.start(Kw(e,i,0,t,this.visualElement,!1))}stopAnimation(){qr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){qr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){qr(t=>{const{drag:i}=this.getProps();if(!rm(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t],l=s.get()||0;s.set(e[t]-Dn(o,a,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!th(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};qr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=XV({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),qr(o=>{if(!rm(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Dn(l,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;ZV.set(this.visualElement,this);const e=this.visualElement.current,t=yh(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&!ZI(l.target)&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();th(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),An.read(i);const o=Jh(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(qr(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=cS,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function rm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function KV(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class JV extends ka{constructor(e){super(e),this.removeGroupControls=ts,this.removeListeners=ts,this.controls=new $V(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ts}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const MC=n=>(e,t)=>{n&&An.postRender(()=>n(e,t))};class QV extends ka{constructor(){super(...arguments),this.removePointerDownListener=ts}onPointerDown(e){this.session=new LN(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:NN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:MC(e),onStart:MC(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&An.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=yh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Wx=!1;class e6 extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),Wx&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),mg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,{projection:o}=i;return o&&(o.isPresent=s,Wx=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||An.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),tM.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;Wx=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function FN(n){const[e,t]=MN(),i=j.useContext(Lw);return T.jsx(e6,{...n,layoutGroup:i,switchLayoutGroup:j.useContext(RN),isPresent:e,safeToRemove:t})}const t6={pan:{Feature:QV},drag:{Feature:JV,ProjectionNode:wN,MeasureLayout:FN}};function EC(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&An.postRender(()=>s(e,Rf(e)))}class n6 extends ka{mount(){const{current:e}=this.node;e&&(this.unmount=Oz(e,(t,i)=>(EC(this.node,i,"Start"),r=>EC(this.node,r,"End"))))}unmount(){}}class i6 extends ka{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Af(Jh(this.node.current,"focus",()=>this.onFocus()),Jh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function bC(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&An.postRender(()=>s(e,Rf(e)))}class r6 extends ka{mount(){const{current:e}=this.node;e&&(this.unmount=Vz(e,(t,i)=>(bC(this.node,i,"Start"),(r,{success:s})=>bC(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const uS=new WeakMap,jx=new WeakMap,s6=n=>{const e=uS.get(n.target);e&&e(n)},o6=n=>{n.forEach(s6)};function a6({root:n,...e}){const t=n||document;jx.has(t)||jx.set(t,{});const i=jx.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(o6,{root:n,...e})),i[r]}function l6(n,e,t){const i=a6(e);return uS.set(n,t),i.observe(n),()=>{uS.delete(n),i.unobserve(n)}}const c6={some:0,all:1};class u6 extends ka{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:c6[r]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=u?h:f;p&&p(l)};return l6(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(d6(e,t))&&this.startObserver()}unmount(){}}function d6({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const h6={inView:{Feature:u6},tap:{Feature:r6},focus:{Feature:i6},hover:{Feature:n6}},f6={layout:{ProjectionNode:wN,MeasureLayout:FN}},p6={...OV,...h6,...t6,...f6},Dt=LV(p6,DV);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UN=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var g6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=j.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:o,...a},l)=>j.createElement("svg",{ref:l,...g6,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:UN("lucide",r),...a},[...o.map(([u,h])=>j.createElement(u,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=(n,e)=>{const t=j.forwardRef(({className:i,...r},s)=>j.createElement(v6,{ref:s,iconNode:e,className:UN(`lucide-${m6(n)}`,i),...r}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=Xt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=Xt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=Xt("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=Xt("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=Xt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=Xt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=Xt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=Xt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=Xt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=Xt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=Xt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=Xt("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=Xt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=Xt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Xt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=Xt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=Xt("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=Xt("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=Xt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=Xt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=Xt("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=Xt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=Xt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=Xt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=Xt("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=Xt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=Xt("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=Xt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=Xt("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=Xt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=Xt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=Xt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=Xt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=Xt("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=Xt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=Xt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=Xt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=Xt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=Xt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=Xt("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=Xt("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=Xt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),PC=[{path:"/",label:"Home",icon:T6},{path:"/diagnosis",label:"Diagnosis",icon:Fl},{path:"/sourcing",label:"Sourcing",icon:Gs},{path:"/market",label:"Market",icon:Nu},{path:"/strategy",label:"Strategy",icon:Ca},{path:"/schemes",label:"Schemes",icon:yu}];function V6(){const[n,e]=j.useState(!1),t=Tf();return T.jsx(Dt.nav,{initial:{y:-100},animate:{y:0},transition:{type:"spring",stiffness:100,damping:20},className:"fixed top-0 left-0 right-0 z-50 px-4 py-4",children:T.jsxs("div",{className:"max-w-7xl mx-auto",children:[T.jsx("div",{className:"glass-strong rounded-2xl px-6 py-3",children:T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs(ph,{to:"/",className:"flex items-center gap-3 group",children:[T.jsx(Dt.div,{whileHover:{rotate:360},transition:{duration:.6},className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-secondary flex items-center justify-center",children:T.jsx(jl,{className:"w-6 h-6 text-primary-foreground"})}),T.jsx("span",{className:"font-orbitron text-xl font-bold hologram-text",children:"Krishi Mitra"})]}),T.jsx("div",{className:"hidden lg:flex items-center gap-1",children:PC.map(i=>{const r=t.pathname===i.path,s=i.icon;return T.jsxs(ph,{to:i.path,className:"relative px-4 py-2 rounded-xl transition-all duration-300 group",children:[r&&T.jsx(Dt.div,{layoutId:"navbar-active",className:"absolute inset-0 bg-primary/20 rounded-xl neon-border",transition:{type:"spring",stiffness:300,damping:30}}),T.jsxs("span",{className:`relative flex items-center gap-2 text-sm font-medium transition-colors ${r?"text-primary neon-text":"text-muted-foreground hover:text-foreground"}`,children:[T.jsx(s,{className:"w-4 h-4"}),i.label]})]},i.path)})}),T.jsx("button",{onClick:()=>e(!n),className:"lg:hidden p-2 rounded-xl glass hover:neon-border transition-all",children:n?T.jsx(z6,{className:"w-6 h-6"}):T.jsx(A6,{className:"w-6 h-6"})})]})}),T.jsx(lM,{children:n&&T.jsx(Dt.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.2},className:"lg:hidden mt-2 glass-strong rounded-2xl p-4 space-y-1",children:PC.map(i=>{const r=t.pathname===i.path,s=i.icon;return T.jsxs(ph,{to:i.path,onClick:()=>e(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${r?"bg-primary/20 neon-border text-primary":"hover:bg-muted text-muted-foreground hover:text-foreground"}`,children:[T.jsx(s,{className:"w-5 h-5"}),T.jsx("span",{className:"font-medium",children:i.label})]},i.path)})})})]})})}function H6({children:n}){return T.jsxs("div",{className:"min-h-screen relative",children:[T.jsx(V6,{}),T.jsx("main",{className:"relative z-10 pt-24 pb-12",children:n})]})}function ON(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=ON(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function G6(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=ON(n))&&(i&&(i+=" "),i+=e);return i}const fM="-",W6=n=>{const e=X6(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:o=>{const a=o.split(fM);return a[0]===""&&a.length!==1&&a.shift(),BN(a,e)||j6(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&i[o]?[...l,...i[o]]:l}}},BN=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),r=i?BN(n.slice(1),i):void 0;if(r)return r;if(e.validators.length===0)return;const s=n.join(fM);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},RC=/^\[(.+)\]$/,j6=n=>{if(RC.test(n)){const e=RC.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},X6=n=>{const{theme:e,prefix:t}=n,i={nextPart:new Map,validators:[]};return q6(Object.entries(n.classGroups),t).forEach(([s,o])=>{fS(o,i,s,e)}),i},fS=(n,e,t,i)=>{n.forEach(r=>{if(typeof r=="string"){const s=r===""?e:IC(e,r);s.classGroupId=t;return}if(typeof r=="function"){if(Y6(r)){fS(r(i),e,t,i);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([s,o])=>{fS(o,IC(e,s),t,i)})})},IC=(n,e)=>{let t=n;return e.split(fM).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},Y6=n=>n.isThemeGetter,q6=(n,e)=>e?n.map(([t,i])=>{const r=i.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,r]}):n,Z6=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const r=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,i=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=i.get(s))!==void 0)return r(s,o),o},set(s,o){t.has(s)?t.set(s,o):r(s,o)}}},zN="!",$6=n=>{const{separator:e,experimentalParseClassName:t}=n,i=e.length===1,r=e[0],s=e.length,o=a=>{const l=[];let u=0,h=0,f;for(let x=0;x<a.length;x++){let g=a[x];if(u===0){if(g===r&&(i||a.slice(x,x+s)===e)){l.push(a.slice(h,x)),h=x+s;continue}if(g==="/"){f=x;continue}}g==="["?u++:g==="]"&&u--}const p=l.length===0?a:a.substring(h),m=p.startsWith(zN),y=m?p.substring(1):p,S=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:S}};return t?a=>t({className:a,parseClassName:o}):o},K6=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(i=>{i[0]==="["?(e.push(...t.sort(),i),t=[]):t.push(i)}),e.push(...t.sort()),e},J6=n=>({cache:Z6(n.cacheSize),parseClassName:$6(n),...W6(n)}),Q6=/\s+/,e8=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:r}=e,s=[],o=n.trim().split(Q6);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(u);let y=!!m,S=i(y?p.substring(0,m):p);if(!S){if(!y){a=u+(a.length>0?" "+a:a);continue}if(S=i(p),!S){a=u+(a.length>0?" "+a:a);continue}y=!1}const x=K6(h).join(":"),g=f?x+zN:x,_=g+S;if(s.includes(_))continue;s.push(_);const M=r(S,y);for(let E=0;E<M.length;++E){const A=M[E];s.push(g+A)}a=u+(a.length>0?" "+a:a)}return a};function t8(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=VN(e))&&(i&&(i+=" "),i+=t);return i}const VN=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=VN(n[i]))&&(t&&(t+=" "),t+=e);return t};function n8(n,...e){let t,i,r,s=o;function o(l){const u=e.reduce((h,f)=>f(h),n());return t=J6(u),i=t.cache.get,r=t.cache.set,s=a,a(l)}function a(l){const u=i(l);if(u)return u;const h=e8(l,t);return r(l,h),h}return function(){return s(t8.apply(null,arguments))}}const Mn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},HN=/^\[(?:([a-z-]+):)?(.+)\]$/i,i8=/^\d+\/\d+$/,r8=new Set(["px","full","screen"]),s8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,o8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,a8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,l8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,c8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,co=n=>xu(n)||r8.has(n)||i8.test(n),Wo=n=>Ku(n,"length",v8),xu=n=>!!n&&!Number.isNaN(Number(n)),Xx=n=>Ku(n,"number",xu),Rd=n=>!!n&&Number.isInteger(Number(n)),u8=n=>n.endsWith("%")&&xu(n.slice(0,-1)),Yt=n=>HN.test(n),jo=n=>s8.test(n),d8=new Set(["length","size","percentage"]),h8=n=>Ku(n,d8,GN),f8=n=>Ku(n,"position",GN),p8=new Set(["image","url"]),m8=n=>Ku(n,p8,x8),g8=n=>Ku(n,"",y8),Id=()=>!0,Ku=(n,e,t)=>{const i=HN.exec(n);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):t(i[2]):!1},v8=n=>o8.test(n)&&!a8.test(n),GN=()=>!1,y8=n=>l8.test(n),x8=n=>c8.test(n),_8=()=>{const n=Mn("colors"),e=Mn("spacing"),t=Mn("blur"),i=Mn("brightness"),r=Mn("borderColor"),s=Mn("borderRadius"),o=Mn("borderSpacing"),a=Mn("borderWidth"),l=Mn("contrast"),u=Mn("grayscale"),h=Mn("hueRotate"),f=Mn("invert"),p=Mn("gap"),m=Mn("gradientColorStops"),y=Mn("gradientColorStopPositions"),S=Mn("inset"),x=Mn("margin"),g=Mn("opacity"),_=Mn("padding"),M=Mn("saturate"),E=Mn("scale"),A=Mn("sepia"),P=Mn("skew"),L=Mn("space"),N=Mn("translate"),C=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",Yt,e],H=()=>[Yt,e],$=()=>["",co,Wo],ne=()=>["auto",xu,Yt],le=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ee=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",Yt],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],se=()=>[xu,Yt];return{cacheSize:500,separator:":",theme:{colors:[Id],spacing:[co,Wo],blur:["none","",jo,Yt],brightness:se(),borderColor:[n],borderRadius:["none","","full",jo,Yt],borderSpacing:H(),borderWidth:$(),contrast:se(),grayscale:Y(),hueRotate:se(),invert:Y(),gap:H(),gradientColorStops:[n],gradientColorStopPositions:[u8,Wo],inset:k(),margin:k(),opacity:se(),padding:H(),saturate:se(),scale:se(),sepia:Y(),skew:se(),space:H(),translate:H()},classGroups:{aspect:[{aspect:["auto","square","video",Yt]}],container:["container"],columns:[{columns:[jo]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...le(),Yt]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Rd,Yt]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Yt]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",Rd,Yt]}],"grid-cols":[{"grid-cols":[Id]}],"col-start-end":[{col:["auto",{span:["full",Rd,Yt]},Yt]}],"col-start":[{"col-start":ne()}],"col-end":[{"col-end":ne()}],"grid-rows":[{"grid-rows":[Id]}],"row-start-end":[{row:["auto",{span:[Rd,Yt]},Yt]}],"row-start":[{"row-start":ne()}],"row-end":[{"row-end":ne()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Yt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Yt]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Yt,e]}],"min-w":[{"min-w":[Yt,e,"min","max","fit"]}],"max-w":[{"max-w":[Yt,e,"none","full","min","max","fit","prose",{screen:[jo]},jo]}],h:[{h:[Yt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Yt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Yt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Yt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",jo,Wo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Xx]}],"font-family":[{font:[Id]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Yt]}],"line-clamp":[{"line-clamp":["none",xu,Xx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",co,Yt]}],"list-image":[{"list-image":["none",Yt]}],"list-style-type":[{list:["none","disc","decimal",Yt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",co,Wo]}],"underline-offset":[{"underline-offset":["auto",co,Yt]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...le(),f8]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",h8]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},m8]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...ee(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:ee()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...ee()]}],"outline-offset":[{"outline-offset":[co,Yt]}],"outline-w":[{outline:[co,Wo]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[co,Wo]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",jo,g8]}],"shadow-color":[{shadow:[Id]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",jo,Yt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[M]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[M]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Yt]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",Yt]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",Yt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Rd,Yt]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Yt]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Yt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Yt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[co,Wo,Xx]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},S8=n8(_8);function If(...n){return S8(G6(n))}function gn({children:n,variant:e="default",hover:t=!0,className:i,...r}){const s={default:"glass",strong:"glass-strong",subtle:"glass-subtle",neon:"glass neon-border"};return T.jsx(Dt.div,{whileHover:t?{scale:1.02,y:-5}:void 0,transition:{type:"spring",stiffness:300,damping:20},className:If(s[e],"rounded-2xl p-6 holo-card",i),...r,children:n})}function Sr({children:n,variant:e="primary",size:t="md",onClick:i,disabled:r=!1,className:s,type:o="button"}){const a="relative overflow-hidden rounded-xl font-semibold transition-all duration-300 flex items-center justify-center gap-2",l={primary:"bg-gradient-to-r from-primary to-secondary text-primary-foreground hover:shadow-[0_0_30px_rgba(0,255,157,0.5)]",secondary:"glass neon-border text-primary hover:bg-primary/10",ghost:"bg-transparent text-muted-foreground hover:text-foreground hover:bg-muted"},u={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};return T.jsxs(Dt.button,{type:o,onClick:i,disabled:r,whileHover:{scale:r?1:1.02},whileTap:{scale:r?1:.98},className:If(a,l[e],u[t],r&&"opacity-50 cursor-not-allowed",s),children:[T.jsx("span",{className:"absolute inset-0 overflow-hidden rounded-xl",children:T.jsx("span",{className:"absolute inset-0 -translate-x-full bg-gradient-to-r from-transparent via-white/20 to-transparent group-hover:translate-x-full transition-transform duration-700"})}),T.jsx("span",{className:"relative",children:n})]})}function Nd({children:n,delay:e=0,className:t}){return T.jsx(Dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e,duration:.5},className:If("w-16 h-16 rounded-2xl glass flex items-center justify-center animate-float",t),style:{animationDelay:`${e}s`},children:n})}function Pa({children:n,variant:e="info",className:t}){const i={success:"bg-primary/20 text-primary border-primary/50",warning:"bg-yellow-500/20 text-yellow-400 border-yellow-500/50",error:"bg-red-500/20 text-red-400 border-red-500/50",info:"bg-secondary/20 text-secondary border-secondary/50"};return T.jsx(Dt.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:If("inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border",i[e],t),children:n})}const w8=[{path:"/diagnosis",icon:Fl,title:"Crop Diagnosis",description:"AI-powered disease detection from leaf photos with instant remedies",gradient:"from-emerald-500 to-green-600",delay:.1},{path:"/sourcing",icon:Gs,title:"Local Sourcing",description:"Find nearest stores for fertilizers, pesticides & agricultural supplies",gradient:"from-cyan-500 to-teal-600",delay:.2},{path:"/market",icon:Nu,title:"Market Intelligence",description:"Real-time mandi prices with AI-driven sell/wait recommendations",gradient:"from-purple-500 to-violet-600",delay:.3},{path:"/strategy",icon:Ca,title:"Crop Planning",description:"Personalized farming strategies based on your land and resources",gradient:"from-orange-500 to-amber-600",delay:.4},{path:"/schemes",icon:yu,title:"Government Schemes",description:"Navigate subsidies and agricultural programs with voice assistance",gradient:"from-pink-500 to-rose-600",delay:.5}],M8=[{value:"50+",label:"Languages",icon:kN},{value:"100+",label:"Crop Types",icon:jl},{value:"24/7",label:"Available",icon:L6}];function E8(){return T.jsxs("div",{className:"relative overflow-hidden",children:[T.jsx("section",{className:"min-h-[90vh] flex items-center justify-center px-4",children:T.jsx("div",{className:"max-w-7xl mx-auto w-full",children:T.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[T.jsxs(Dt.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8},className:"space-y-8",children:[T.jsxs("div",{className:"space-y-4",children:[T.jsxs(Pa,{variant:"success",children:[T.jsx(vg,{className:"w-4 h-4 mr-2"}),"AI-Powered Farming Assistant"]}),T.jsxs("h1",{className:"text-5xl md:text-7xl font-bold leading-tight",children:[T.jsx("span",{className:"hologram-text",children:"Krishi"}),T.jsx("br",{}),T.jsx("span",{className:"text-foreground",children:"Mitra"})]}),T.jsx("p",{className:"text-xl text-muted-foreground max-w-lg",children:"Your intelligent farming companion. Voice-first, multilingual, designed for the next billion farmers."})]}),T.jsxs("div",{className:"flex flex-wrap gap-4",children:[T.jsx(ph,{to:"/diagnosis",children:T.jsxs(Sr,{size:"lg",children:[T.jsx(Fl,{className:"w-5 h-5"}),"Start Diagnosis",T.jsx(dS,{className:"w-5 h-5"})]})}),T.jsxs(Sr,{variant:"secondary",size:"lg",children:[T.jsx(gg,{className:"w-5 h-5"}),"Voice Command"]})]}),T.jsx("div",{className:"flex gap-8 pt-8",children:M8.map((n,e)=>T.jsxs(Dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5+e*.1},className:"text-center",children:[T.jsx(n.icon,{className:"w-6 h-6 text-primary mx-auto mb-2"}),T.jsx("div",{className:"text-3xl font-bold neon-text",children:n.value}),T.jsx("div",{className:"text-sm text-muted-foreground",children:n.label})]},n.label))})]}),T.jsxs(Dt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.3},className:"relative h-[500px] hidden lg:block",children:[T.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:[T.jsx(Dt.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"w-40 h-40 rounded-full border-2 border-primary/30 border-dashed"}),T.jsx(Dt.div,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-24 h-24 rounded-2xl bg-gradient-to-br from-primary to-secondary flex items-center justify-center animate-pulse-glow",children:T.jsx(jl,{className:"w-12 h-12 text-primary-foreground"})})]}),T.jsx(Nd,{className:"absolute top-0 left-1/4",delay:.1,children:T.jsx(Fl,{className:"w-8 h-8 text-emerald-400"})}),T.jsx(Nd,{className:"absolute top-1/4 right-0",delay:.2,children:T.jsx(Gs,{className:"w-8 h-8 text-cyan-400"})}),T.jsx(Nd,{className:"absolute bottom-1/4 right-1/4",delay:.3,children:T.jsx(Nu,{className:"w-8 h-8 text-purple-400"})}),T.jsx(Nd,{className:"absolute bottom-0 left-1/3",delay:.4,children:T.jsx(Ca,{className:"w-8 h-8 text-orange-400"})}),T.jsx(Nd,{className:"absolute top-1/3 left-0",delay:.5,children:T.jsx(yu,{className:"w-8 h-8 text-pink-400"})})]})]})})}),T.jsx("section",{className:"py-20 px-4",children:T.jsxs("div",{className:"max-w-7xl mx-auto",children:[T.jsxs(Dt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[T.jsx("h2",{className:"text-4xl font-bold mb-4",children:T.jsx("span",{className:"hologram-text",children:"Intelligent Agents"})}),T.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Six specialized AI agents working together to empower your farming decisions"})]}),T.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:w8.map(n=>T.jsx(ph,{to:n.path,children:T.jsxs(gn,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:n.delay},className:"h-full group cursor-pointer",children:[T.jsx("div",{className:`w-14 h-14 rounded-xl bg-gradient-to-br ${n.gradient} flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`,children:T.jsx(n.icon,{className:"w-7 h-7 text-white"})}),T.jsx("h3",{className:"text-xl font-bold mb-2 group-hover:text-primary transition-colors",children:n.title}),T.jsx("p",{className:"text-muted-foreground",children:n.description}),T.jsxs("div",{className:"mt-4 flex items-center gap-2 text-primary opacity-0 group-hover:opacity-100 transition-opacity",children:[T.jsx("span",{className:"text-sm font-medium",children:"Explore"}),T.jsx(dS,{className:"w-4 h-4"})]})]})},n.path))})]})}),T.jsx("section",{className:"py-20 px-4",children:T.jsx("div",{className:"max-w-5xl mx-auto",children:T.jsx(gn,{variant:"neon",hover:!1,className:"text-center",children:T.jsxs(Dt.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"space-y-6",children:[T.jsx(Dt.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"w-20 h-20 mx-auto rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center",children:T.jsx(gg,{className:"w-10 h-10 text-primary-foreground"})}),T.jsxs("h2",{className:"text-3xl md:text-4xl font-bold",children:["Voice-First, ",T.jsx("span",{className:"hologram-text",children:"Multilingual"})]}),T.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Speak in your language  Hindi, Tamil, Telugu, Kannada, and 50+ more. Get instant audio responses you can understand."}),T.jsxs(Sr,{size:"lg",children:[T.jsx(gg,{className:"w-5 h-5"}),"Try Voice Command"]})]})})})})]})}const b8={plant:"Tomato",disease:"Early Blight (Alternaria solani)",severity:"medium",confidence:94,symptoms:["Dark brown circular spots with concentric rings","Yellowing of leaves around spots","Spots start on lower/older leaves","Lesions may have a target-like appearance"],remedies:{organic:["Neem oil spray (2ml/L water)","Copper-based fungicide","Baking soda solution (1 tbsp/gallon)","Remove and destroy infected leaves"],chemical:["Mancozeb 75% WP @ 2.5g/L","Chlorothalonil @ 2g/L","Azoxystrobin 23% SC @ 1ml/L"]},prevention:["Use disease-free seeds","Maintain proper plant spacing","Water at the base, avoid wetting leaves","Rotate crops every 2-3 years","Apply mulch to prevent soil splash"]};function T8(){const[n,e]=j.useState(null),[t,i]=j.useState(!1),[r,s]=j.useState(null),o=j.useRef(null),a=f=>{var m;const p=(m=f.target.files)==null?void 0:m[0];if(p){const y=new FileReader;y.onload=S=>{var x;e((x=S.target)==null?void 0:x.result),s(null)},y.readAsDataURL(p)}},l=async()=>{i(!0),await new Promise(f=>setTimeout(f,3e3)),s(b8),i(!1)},u=()=>{e(null),s(null)},h={low:"success",medium:"warning",high:"error"};return T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[T.jsxs(Dt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[T.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[T.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500 to-green-600 flex items-center justify-center",children:T.jsx(Fl,{className:"w-6 h-6 text-white"})}),T.jsxs("h1",{className:"text-4xl font-bold",children:["Crop ",T.jsx("span",{className:"hologram-text",children:"Diagnosis"})]})]}),T.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Upload a photo of your crop leaf and get instant AI-powered disease detection with detailed remedies in your language."})]}),T.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[T.jsx(Dt.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.2},children:T.jsxs(gn,{variant:"strong",hover:!1,className:"h-full",children:[T.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[T.jsx(w6,{className:"w-5 h-5 text-primary"}),"Upload Leaf Image"]}),n?T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"relative rounded-2xl overflow-hidden",children:[T.jsx("img",{src:n,alt:"Selected crop",className:"w-full h-64 object-cover"}),t&&T.jsx("div",{className:"absolute inset-0 bg-background/80 flex items-center justify-center",children:T.jsxs("div",{className:"text-center",children:[T.jsx(Dt.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:T.jsx(t0,{className:"w-12 h-12 text-primary mx-auto mb-4"})}),T.jsx("p",{className:"text-lg font-medium",children:"Analyzing..."}),T.jsx("p",{className:"text-sm text-muted-foreground",children:"Vision Agent processing your image"})]})})]}),T.jsxs("div",{className:"flex gap-4",children:[!r&&T.jsx(Sr,{onClick:l,disabled:t,className:"flex-1",children:t?T.jsxs(T.Fragment,{children:[T.jsx(t0,{className:"w-5 h-5 animate-spin"}),"Analyzing..."]}):T.jsxs(T.Fragment,{children:[T.jsx(Fl,{className:"w-5 h-5"}),"Analyze Crop"]})}),T.jsxs(Sr,{variant:"ghost",onClick:u,children:[T.jsx(N6,{className:"w-5 h-5"}),"Reset"]})]})]}):T.jsxs("div",{onClick:()=>{var f;return(f=o.current)==null?void 0:f.click()},className:"border-2 border-dashed border-primary/30 rounded-2xl p-12 text-center cursor-pointer hover:border-primary/60 hover:bg-primary/5 transition-all group",children:[T.jsx(Dt.div,{animate:{y:[0,-10,0]},transition:{duration:2,repeat:1/0},className:"w-20 h-20 mx-auto mb-6 rounded-2xl bg-primary/10 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:T.jsx(k6,{className:"w-10 h-10 text-primary"})}),T.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Drop your image here"}),T.jsx("p",{className:"text-muted-foreground mb-4",children:"or click to browse files"}),T.jsx("p",{className:"text-sm text-muted-foreground",children:"Supports JPG, PNG, WEBP up to 10MB"})]}),T.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:a,className:"hidden"})]})}),T.jsx(Dt.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{delay:.3},children:T.jsx(lM,{mode:"wait",children:r?T.jsxs(Dt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"space-y-6",children:[T.jsxs(gn,{variant:"neon",hover:!1,children:[T.jsxs("div",{className:"flex items-start justify-between mb-4",children:[T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.jsx(jl,{className:"w-5 h-5 text-primary"}),T.jsx("span",{className:"text-muted-foreground",children:"Identified Plant"})]}),T.jsx("h3",{className:"text-2xl font-bold",children:r.plant})]}),T.jsxs(Pa,{variant:h[r.severity],children:[r.severity.toUpperCase()," Severity"]})]}),T.jsxs("div",{className:"p-4 rounded-xl bg-destructive/10 border border-destructive/30 mb-4",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.jsx(U6,{className:"w-5 h-5 text-destructive"}),T.jsx("span",{className:"font-semibold",children:"Disease Detected"})]}),T.jsx("p",{className:"text-lg",children:r.disease})]}),T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{children:[T.jsx("span",{className:"text-muted-foreground",children:"Confidence"}),T.jsxs("div",{className:"text-2xl font-bold text-primary",children:[r.confidence,"%"]})]}),T.jsxs(Sr,{variant:"secondary",size:"sm",children:[T.jsx(gv,{className:"w-4 h-4"}),"Listen in Hindi"]})]})]}),T.jsxs(gn,{hover:!1,children:[T.jsxs("h4",{className:"font-bold mb-4 flex items-center gap-2",children:[T.jsx(_6,{className:"w-5 h-5 text-orange-400"}),"Symptoms"]}),T.jsx("ul",{className:"space-y-2",children:r.symptoms.map((f,p)=>T.jsxs("li",{className:"flex items-start gap-2 text-muted-foreground",children:[T.jsx(dM,{className:"w-4 h-4 text-primary mt-1 flex-shrink-0"}),f]},p))})]}),T.jsxs(gn,{hover:!1,children:[T.jsxs("h4",{className:"font-bold mb-4 flex items-center gap-2",children:[T.jsx(I6,{className:"w-5 h-5 text-emerald-400"}),"Recommended Remedies"]}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("h5",{className:"text-sm font-semibold text-primary mb-2",children:" Organic"}),T.jsx("ul",{className:"space-y-1",children:r.remedies.organic.map((f,p)=>T.jsxs("li",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[T.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),f]},p))})]}),T.jsxs("div",{children:[T.jsx("h5",{className:"text-sm font-semibold text-secondary mb-2",children:" Chemical"}),T.jsx("ul",{className:"space-y-1",children:r.remedies.chemical.map((f,p)=>T.jsxs("li",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[T.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-secondary"}),f]},p))})]})]})]}),T.jsxs(gn,{hover:!1,children:[T.jsxs("h4",{className:"font-bold mb-4 flex items-center gap-2",children:[T.jsx(hS,{className:"w-5 h-5 text-cyan-400"}),"Prevention Tips"]}),T.jsx("ul",{className:"space-y-2",children:r.prevention.map((f,p)=>T.jsxs("li",{className:"flex items-start gap-2 text-muted-foreground text-sm",children:[T.jsxs("span",{className:"text-primary font-bold",children:[p+1,"."]}),f]},p))})]})]},"result"):T.jsx(Dt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:T.jsx(gn,{hover:!1,className:"h-full min-h-[400px] flex items-center justify-center",children:T.jsxs("div",{className:"text-center",children:[T.jsx(Dt.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"w-24 h-24 mx-auto mb-6 rounded-2xl glass flex items-center justify-center",children:T.jsx(Fl,{className:"w-12 h-12 text-primary/50"})}),T.jsx("h3",{className:"text-xl font-semibold mb-2 text-muted-foreground",children:"Waiting for Analysis"}),T.jsx("p",{className:"text-muted-foreground",children:"Upload a leaf image to get started"})]})})},"placeholder")})})]})]})}const A8=[{id:"1",name:"Kisan Agro Center",address:"Main Road, Near Bus Stand, Dist. Nashik",distance:"2.3 km",phone:"+91 98765 43210",rating:4.5,isOpen:!0,products:["Neem Oil","Copper Fungicide","Organic Fertilizers"]},{id:"2",name:"Shri Ganesh Fertilizers",address:"Market Yard, Shop No. 45, Nashik",distance:"3.8 km",phone:"+91 87654 32109",rating:4.2,isOpen:!0,products:["Mancozeb","Urea","DAP","Pesticides"]},{id:"3",name:"Modern Agri Supplies",address:"Industrial Area, MIDC Road, Nashik",distance:"5.1 km",phone:"+91 76543 21098",rating:4.8,isOpen:!1,products:["All Agricultural Supplies","Drip Irrigation","Seeds"]}],C8=["Neem Oil","Mancozeb 75% WP","Copper Fungicide","Organic Fertilizer","Drip Irrigation Kit"];function P8(){const[n,e]=j.useState(""),[t,i]=j.useState(!1),[r,s]=j.useState([]),o=async()=>{n.trim()&&(i(!0),await new Promise(l=>setTimeout(l,2e3)),s(A8),i(!1))},a=l=>{e(l)};return T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[T.jsxs(Dt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[T.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[T.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-teal-600 flex items-center justify-center",children:T.jsx(Gs,{className:"w-6 h-6 text-white"})}),T.jsxs("h1",{className:"text-4xl font-bold",children:["Local ",T.jsx("span",{className:"hologram-text",children:"Sourcing"})]})]}),T.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Find the nearest stores for fertilizers, pesticides, and agricultural supplies based on your diagnosis recommendations."})]}),T.jsx(Dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-3xl mx-auto mb-12",children:T.jsxs(gn,{variant:"strong",hover:!1,children:[T.jsxs("div",{className:"flex gap-4 mb-6",children:[T.jsxs("div",{className:"flex-1 relative",children:[T.jsx(hM,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),T.jsx("input",{type:"text",value:n,onChange:l=>e(l.target.value),onKeyDown:l=>l.key==="Enter"&&o(),placeholder:"Search for products (e.g., Neem Oil, Mancozeb)",className:"w-full pl-12 pr-4 py-4 rounded-xl bg-muted/50 border border-border focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all"})]}),T.jsx(Sr,{onClick:o,disabled:t,children:t?T.jsx(t0,{className:"w-5 h-5 animate-spin"}):T.jsxs(T.Fragment,{children:[T.jsx(Gs,{className:"w-5 h-5"}),"Find Stores"]})})]}),T.jsxs("div",{className:"flex flex-wrap gap-2",children:[T.jsx("span",{className:"text-sm text-muted-foreground mr-2",children:"Quick search:"}),C8.map(l=>T.jsx("button",{onClick:()=>a(l),className:"px-3 py-1 rounded-full text-sm glass hover:neon-border transition-all",children:l},l))]})]})}),r.length>0&&T.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[T.jsxs(Dt.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},className:"space-y-4",children:[T.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Found ",r.length," stores near you"]}),r.map((l,u)=>T.jsx(Dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:u*.1},children:T.jsxs(gn,{className:"group",children:[T.jsxs("div",{className:"flex justify-between items-start mb-3",children:[T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[T.jsx(CC,{className:"w-5 h-5 text-primary"}),T.jsx("h3",{className:"font-bold group-hover:text-primary transition-colors",children:l.name})]}),T.jsx("p",{className:"text-sm text-muted-foreground",children:l.address})]}),T.jsxs(Pa,{variant:l.isOpen?"success":"error",children:[T.jsx(E6,{className:"w-3 h-3 mr-1"}),l.isOpen?"Open":"Closed"]})]}),T.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm",children:[T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx(P6,{className:"w-4 h-4 text-secondary"}),T.jsx("span",{children:l.distance})]}),T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx(D6,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"}),T.jsx("span",{children:l.rating})]}),T.jsxs("a",{href:`tel:${l.phone}`,className:"flex items-center gap-1 text-primary hover:underline",children:[T.jsx(R6,{className:"w-4 h-4"}),T.jsx("span",{children:l.phone})]})]}),T.jsx("div",{className:"flex flex-wrap gap-2",children:l.products.map(h=>T.jsx("span",{className:"px-2 py-1 rounded-md text-xs bg-primary/10 text-primary",children:h},h))})]})},l.id))]}),T.jsx(Dt.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},children:T.jsx(gn,{variant:"strong",hover:!1,className:"h-full min-h-[500px]",children:T.jsxs("div",{className:"h-full rounded-xl bg-gradient-to-br from-primary/5 to-secondary/5 flex items-center justify-center relative overflow-hidden",children:[T.jsx("div",{className:"absolute inset-0 grid-pattern opacity-30"}),T.jsxs("div",{className:"text-center relative z-10",children:[T.jsx(Dt.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"w-20 h-20 mx-auto mb-4 rounded-full glass neon-border flex items-center justify-center",children:T.jsx(Gs,{className:"w-10 h-10 text-primary"})}),T.jsx("h3",{className:"text-xl font-bold mb-2",children:"Interactive Map"}),T.jsx("p",{className:"text-muted-foreground max-w-xs",children:"Google Maps integration will show store locations with navigation"}),T.jsx("div",{className:"absolute top-20 left-20",children:T.jsx("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center animate-bounce",children:T.jsx(Gs,{className:"w-4 h-4 text-primary-foreground"})})}),T.jsx("div",{className:"absolute top-40 right-32",children:T.jsx("div",{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center animate-bounce",style:{animationDelay:"0.2s"},children:T.jsx(Gs,{className:"w-4 h-4 text-primary-foreground"})})}),T.jsx("div",{className:"absolute bottom-32 left-40",children:T.jsx("div",{className:"w-8 h-8 rounded-full bg-accent flex items-center justify-center animate-bounce",style:{animationDelay:"0.4s"},children:T.jsx(Gs,{className:"w-4 h-4 text-primary-foreground"})})})]})]})})})]}),r.length===0&&!t&&T.jsx(Dt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:T.jsxs(gn,{hover:!1,className:"max-w-2xl mx-auto text-center py-16",children:[T.jsx(Dt.div,{animate:{y:[0,-10,0]},transition:{duration:2,repeat:1/0},className:"w-24 h-24 mx-auto mb-6 rounded-2xl glass flex items-center justify-center",children:T.jsx(CC,{className:"w-12 h-12 text-primary/50"})}),T.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Find Local Stores"}),T.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"Search for agricultural products and we'll find the nearest stores that have them in stock."})]})})]})}const R8={crop:"Tomato",market:"Nashik APMC",currentPrice:3500,previousPrice:3200,trend:"up",recommendation:"wait",confidence:87,priceHistory:[{date:"Jan 7",price:2800},{date:"Jan 8",price:2950},{date:"Jan 9",price:3100},{date:"Jan 10",price:3050},{date:"Jan 11",price:3200},{date:"Jan 12",price:3350},{date:"Jan 13",price:3500}],analysis:"Prices have shown a strong upward momentum (+25% in 7 days). Based on historical patterns and current supply-demand dynamics, prices are expected to peak in 2-3 days. Recommend waiting for optimal selling point."},I8=["Tomato","Onion","Potato","Wheat","Rice","Cotton","Soybean","Sugarcane"];function N8(){const[n,e]=j.useState(""),[t,i]=j.useState(null),[r,s]=j.useState(!1),o=async u=>{e(u),s(!0),await new Promise(h=>setTimeout(h,1500)),i({...R8,crop:u}),s(!1)},a=t?Math.max(...t.priceHistory.map(u=>u.price)):0,l=t?Math.min(...t.priceHistory.map(u=>u.price)):0;return T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[T.jsxs(Dt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[T.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[T.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center",children:T.jsx(Nu,{className:"w-6 h-6 text-white"})}),T.jsxs("h1",{className:"text-4xl font-bold",children:["Market ",T.jsx("span",{className:"hologram-text",children:"Intelligence"})]})]}),T.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Get real-time mandi prices with AI-powered sell/wait recommendations to maximize your profits."})]}),T.jsx(Dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-4xl mx-auto mb-12",children:T.jsxs(gn,{variant:"strong",hover:!1,children:[T.jsxs("div",{className:"flex gap-4 mb-6",children:[T.jsxs("div",{className:"flex-1 relative",children:[T.jsx(hM,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),T.jsx("input",{type:"text",value:n,onChange:u=>e(u.target.value),placeholder:"Enter crop name (e.g., Tomato, Onion)",className:"w-full pl-12 pr-4 py-4 rounded-xl bg-muted/50 border border-border focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all"})]}),T.jsxs(Sr,{onClick:()=>o(n),disabled:!n||r,children:[T.jsx(TC,{className:"w-5 h-5"}),"Get Price"]})]}),T.jsxs("div",{className:"flex flex-wrap gap-2",children:[T.jsx("span",{className:"text-sm text-muted-foreground mr-2",children:"Popular crops:"}),I8.map(u=>T.jsx("button",{onClick:()=>o(u),className:`px-4 py-2 rounded-xl text-sm transition-all ${n===u?"bg-primary text-primary-foreground neon-border":"glass hover:neon-border"}`,children:u},u))]})]})}),t&&T.jsxs(Dt.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"grid lg:grid-cols-3 gap-6",children:[T.jsxs(gn,{variant:"neon",hover:!1,className:"lg:col-span-2",children:[T.jsxs("div",{className:"flex items-start justify-between mb-6",children:[T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[T.jsx(Gs,{className:"w-4 h-4"}),T.jsx("span",{children:t.market})]}),T.jsx("h2",{className:"text-3xl font-bold",children:t.crop})]}),T.jsxs(Sr,{variant:"secondary",size:"sm",children:[T.jsx(gv,{className:"w-4 h-4"}),"Listen"]})]}),T.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[T.jsxs("div",{className:"p-6 rounded-xl bg-primary/10",children:[T.jsx("span",{className:"text-muted-foreground",children:"Current Price"}),T.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[T.jsx(Qh,{className:"w-8 h-8 text-primary"}),T.jsx("span",{className:"text-4xl font-bold neon-text",children:t.currentPrice}),T.jsx("span",{className:"text-muted-foreground",children:"/quintal"})]}),T.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.trend==="up"?T.jsx(Nu,{className:"w-5 h-5 text-green-400"}):T.jsx(F6,{className:"w-5 h-5 text-red-400"}),T.jsxs("span",{className:t.trend==="up"?"text-green-400":"text-red-400",children:[t.trend==="up"?"+":"-",Math.abs(t.currentPrice-t.previousPrice)," from yesterday"]})]})]}),T.jsxs("div",{className:`p-6 rounded-xl ${t.recommendation==="sell"?"bg-green-500/10 border-2 border-green-500/50":"bg-yellow-500/10 border-2 border-yellow-500/50"}`,children:[T.jsx("span",{className:"text-muted-foreground",children:"AI Recommendation"}),T.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[T.jsx("span",{className:`text-4xl font-bold ${t.recommendation==="sell"?"text-green-400":"text-yellow-400"}`,children:t.recommendation.toUpperCase()}),T.jsxs(Pa,{variant:t.recommendation==="sell"?"success":"warning",children:[t.confidence,"% confidence"]})]})]})]}),T.jsxs("div",{className:"mb-6",children:[T.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[T.jsx(Ca,{className:"w-5 h-5 text-secondary"}),"7-Day Price Trend"]}),T.jsx("div",{className:"h-48 flex items-end gap-2",children:t.priceHistory.map((u,h)=>{const f=(u.price-l)/(a-l)*100+20;return T.jsxs(Dt.div,{initial:{height:0},animate:{height:`${f}%`},transition:{delay:h*.1,duration:.5},className:"flex-1 flex flex-col items-center",children:[T.jsx("div",{className:"w-full rounded-t-lg bg-gradient-to-t from-primary to-secondary relative group cursor-pointer",style:{height:"100%"},children:T.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:T.jsxs("span",{className:"text-sm font-bold text-primary",children:["",u.price]})})}),T.jsx("span",{className:"text-xs text-muted-foreground mt-2",children:u.date})]},u.date)})})]}),T.jsxs("div",{className:"p-4 rounded-xl bg-muted/30",children:[T.jsx("h4",{className:"font-bold mb-2",children:"Market Analysis"}),T.jsx("p",{className:"text-muted-foreground",children:t.analysis})]})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs(gn,{children:[T.jsx("h3",{className:"font-bold mb-4",children:"Price Summary"}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("span",{className:"text-muted-foreground",children:"7-Day High"}),T.jsxs("span",{className:"font-bold text-green-400",children:["",a]})]}),T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("span",{className:"text-muted-foreground",children:"7-Day Low"}),T.jsxs("span",{className:"font-bold text-red-400",children:["",l]})]}),T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("span",{className:"text-muted-foreground",children:"7-Day Avg"}),T.jsxs("span",{className:"font-bold",children:["",Math.round(t.priceHistory.reduce((u,h)=>u+h.price,0)/t.priceHistory.length)]})]}),T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("span",{className:"text-muted-foreground",children:"Trend"}),T.jsx(Pa,{variant:t.trend==="up"?"success":"error",children:t.trend==="up"?" Bullish":" Bearish"})]})]})]}),T.jsxs(gn,{children:[T.jsx("h3",{className:"font-bold mb-4",children:"Other Markets"}),T.jsx("div",{className:"space-y-3",children:["Mumbai APMC","Pune APMC","Kolhapur Mandi"].map(u=>T.jsxs("div",{className:"flex justify-between items-center p-3 rounded-xl bg-muted/30 hover:bg-muted/50 cursor-pointer transition-all group",children:[T.jsx("span",{children:u}),T.jsx(dS,{className:"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity"})]},u))})]})]})]}),!t&&!r&&T.jsxs(gn,{hover:!1,className:"max-w-2xl mx-auto text-center py-16",children:[T.jsx(Dt.div,{animate:{y:[0,-10,0]},transition:{duration:2,repeat:1/0},className:"w-24 h-24 mx-auto mb-6 rounded-2xl glass flex items-center justify-center",children:T.jsx(TC,{className:"w-12 h-12 text-primary/50"})}),T.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Check Market Prices"}),T.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"Select a crop to view current mandi prices and get AI-powered recommendations on when to sell."})]})]})}const L8={totalInvestment:75e3,expectedReturn:18e4,roi:140,crops:[{crop:"Tomato",allocation:40,investment:3e4,expectedReturn:72e3,season:"Rabi",waterNeed:"medium",timeline:"Jan - Apr (90 days)"},{crop:"Onion",allocation:35,investment:26250,expectedReturn:63e3,season:"Kharif",waterNeed:"low",timeline:"Jun - Oct (120 days)"},{crop:"Green Chilli",allocation:25,investment:18750,expectedReturn:45e3,season:"Year-round",waterNeed:"medium",timeline:"Any (75 days)"}],tips:["Consider drip irrigation to reduce water usage by 40%","Apply for PM-KISAN scheme for additional 6000/year","Intercropping onion with tomato can increase land efficiency","Store onions for 2-3 months post-harvest for better prices","Use organic pest control for premium pricing"]};function D8(){const[n,e]=j.useState({landSize:"",budget:"",waterAccess:"medium",soilType:"loamy",location:""}),[t,i]=j.useState(null),[r,s]=j.useState(!1),o=async()=>{s(!0),await new Promise(l=>setTimeout(l,3e3)),i(L8),s(!1)},a={low:"text-green-400",medium:"text-yellow-400",high:"text-red-400"};return T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[T.jsxs(Dt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[T.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[T.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-orange-500 to-amber-600 flex items-center justify-center",children:T.jsx(Ca,{className:"w-6 h-6 text-white"})}),T.jsxs("h1",{className:"text-4xl font-bold",children:["Crop ",T.jsx("span",{className:"hologram-text",children:"Strategy"})]})]}),T.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Get personalized crop planning based on your land, budget, and resources. Maximize your profits with AI-optimized recommendations."})]}),T.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[T.jsx(Dt.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.2},children:T.jsxs(gn,{variant:"strong",hover:!1,children:[T.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[T.jsx(vg,{className:"w-5 h-5 text-primary"}),"Your Farm Details"]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{children:[T.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium mb-2",children:[T.jsx(AC,{className:"w-4 h-4 text-primary"}),"Land Size (Acres)"]}),T.jsx("input",{type:"number",value:n.landSize,onChange:l=>e({...n,landSize:l.target.value}),placeholder:"e.g., 2",className:"w-full px-4 py-3 rounded-xl bg-muted/50 border border-border focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all"})]}),T.jsxs("div",{children:[T.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium mb-2",children:[T.jsx(B6,{className:"w-4 h-4 text-primary"}),"Budget ()"]}),T.jsx("input",{type:"number",value:n.budget,onChange:l=>e({...n,budget:l.target.value}),placeholder:"e.g., 75000",className:"w-full px-4 py-3 rounded-xl bg-muted/50 border border-border focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all"})]}),T.jsxs("div",{children:[T.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium mb-2",children:[T.jsx(hS,{className:"w-4 h-4 text-primary"}),"Water Availability"]}),T.jsx("div",{className:"grid grid-cols-3 gap-3",children:["low","medium","high"].map(l=>T.jsx("button",{onClick:()=>e({...n,waterAccess:l}),className:`py-3 rounded-xl text-sm font-medium transition-all ${n.waterAccess===l?"bg-primary text-primary-foreground neon-border":"glass hover:neon-border"}`,children:l.charAt(0).toUpperCase()+l.slice(1)},l))})]}),T.jsxs("div",{children:[T.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium mb-2",children:[T.jsx(jl,{className:"w-4 h-4 text-primary"}),"Soil Type"]}),T.jsx("div",{className:"grid grid-cols-3 gap-3",children:["sandy","loamy","clay"].map(l=>T.jsx("button",{onClick:()=>e({...n,soilType:l}),className:`py-3 rounded-xl text-sm font-medium transition-all ${n.soilType===l?"bg-primary text-primary-foreground neon-border":"glass hover:neon-border"}`,children:l.charAt(0).toUpperCase()+l.slice(1)},l))})]}),T.jsxs("div",{children:[T.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium mb-2",children:[T.jsx(AC,{className:"w-4 h-4 text-primary"}),"Location / District"]}),T.jsx("input",{type:"text",value:n.location,onChange:l=>e({...n,location:l.target.value}),placeholder:"e.g., Nashik, Maharashtra",className:"w-full px-4 py-3 rounded-xl bg-muted/50 border border-border focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all"})]}),T.jsx(Sr,{onClick:o,className:"w-full",disabled:r,children:r?T.jsxs(T.Fragment,{children:[T.jsx(t0,{className:"w-5 h-5 animate-spin"}),"AI is planning..."]}):T.jsxs(T.Fragment,{children:[T.jsx(vg,{className:"w-5 h-5"}),"Generate Crop Plan"]})})]})]})}),T.jsx(Dt.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{delay:.3},children:t?T.jsxs("div",{className:"space-y-6",children:[T.jsxs(gn,{variant:"neon",hover:!1,children:[T.jsxs("div",{className:"flex justify-between items-start mb-6",children:[T.jsx("h2",{className:"text-xl font-bold",children:"Your Optimized Plan"}),T.jsxs(Sr,{variant:"secondary",size:"sm",children:[T.jsx(gv,{className:"w-4 h-4"}),"Listen"]})]}),T.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[T.jsxs("div",{className:"text-center p-4 rounded-xl bg-muted/30",children:[T.jsx("span",{className:"text-sm text-muted-foreground",children:"Investment"}),T.jsxs("div",{className:"flex items-center justify-center gap-1 mt-1",children:[T.jsx(Qh,{className:"w-5 h-5 text-primary"}),T.jsx("span",{className:"text-2xl font-bold",children:t.totalInvestment.toLocaleString()})]})]}),T.jsxs("div",{className:"text-center p-4 rounded-xl bg-green-500/10",children:[T.jsx("span",{className:"text-sm text-muted-foreground",children:"Expected Return"}),T.jsxs("div",{className:"flex items-center justify-center gap-1 mt-1",children:[T.jsx(Qh,{className:"w-5 h-5 text-green-400"}),T.jsx("span",{className:"text-2xl font-bold text-green-400",children:t.expectedReturn.toLocaleString()})]})]}),T.jsxs("div",{className:"text-center p-4 rounded-xl bg-secondary/10",children:[T.jsx("span",{className:"text-sm text-muted-foreground",children:"ROI"}),T.jsx("div",{className:"mt-1",children:T.jsxs("span",{className:"text-2xl font-bold text-secondary",children:[t.roi,"%"]})})]})]})]}),t.crops.map((l,u)=>T.jsx(Dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+u*.1},children:T.jsxs(gn,{children:[T.jsxs("div",{className:"flex items-start justify-between mb-4",children:[T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[T.jsx(jl,{className:"w-5 h-5 text-primary"}),T.jsx("h3",{className:"text-lg font-bold",children:l.crop}),T.jsxs(Pa,{variant:"info",children:[l.allocation,"% land"]})]}),T.jsx("p",{className:"text-sm text-muted-foreground",children:l.timeline})]}),T.jsxs("span",{className:`text-sm ${a[l.waterNeed]}`,children:[T.jsx(hS,{className:"w-4 h-4 inline mr-1"}),l.waterNeed," water"]})]}),T.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[T.jsxs("div",{children:[T.jsx("span",{className:"text-muted-foreground",children:"Season"}),T.jsx("p",{className:"font-medium",children:l.season})]}),T.jsxs("div",{children:[T.jsx("span",{className:"text-muted-foreground",children:"Investment"}),T.jsxs("p",{className:"font-medium",children:["",l.investment.toLocaleString()]})]}),T.jsxs("div",{children:[T.jsx("span",{className:"text-muted-foreground",children:"Return"}),T.jsxs("p",{className:"font-medium text-green-400",children:["",l.expectedReturn.toLocaleString()]})]})]})]})},l.crop)),T.jsxs(gn,{hover:!1,children:[T.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[T.jsx(vg,{className:"w-5 h-5 text-yellow-400"}),"Pro Tips"]}),T.jsx("ul",{className:"space-y-3",children:t.tips.map((l,u)=>T.jsxs("li",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[T.jsx(dM,{className:"w-4 h-4 text-primary mt-0.5 flex-shrink-0"}),l]},u))})]})]}):T.jsx(gn,{hover:!1,className:"h-full min-h-[500px] flex items-center justify-center",children:T.jsxs("div",{className:"text-center",children:[T.jsxs(Dt.div,{animate:{rotate:[0,360]},transition:{duration:20,repeat:1/0,ease:"linear"},className:"w-24 h-24 mx-auto mb-6 rounded-2xl glass flex items-center justify-center relative",children:[T.jsx(Ca,{className:"w-12 h-12 text-primary/50"}),T.jsx("div",{className:"absolute inset-0 rounded-2xl border-2 border-dashed border-primary/30 animate-spin",style:{animationDuration:"10s"}})]}),T.jsx("h3",{className:"text-xl font-semibold mb-2 text-muted-foreground",children:"AI Strategy Agent Ready"}),T.jsx("p",{className:"text-muted-foreground max-w-xs mx-auto",children:"Fill in your farm details and let our AI create an optimized crop plan for maximum profit."})]})})})]})]})}const F8=[{id:"1",name:"PM-KISAN Samman Nidhi",ministry:"Ministry of Agriculture",benefit:"Direct income support of 6000 per year in 3 installments",eligibility:["Small and marginal farmer families","Combined land holding up to 2 hectares","Valid Aadhaar card linked to bank account"],documents:["Aadhaar Card","Land Records","Bank Passbook"],deadline:"Ongoing",amount:"6,000/year",category:"Income Support"},{id:"2",name:"Pradhan Mantri Fasal Bima Yojana",ministry:"Ministry of Agriculture",benefit:"Crop insurance with low premium rates for farmers",eligibility:["All farmers including sharecroppers and tenant farmers","Compulsory for loanee farmers","Voluntary for non-loanee farmers"],documents:["Land Records","Sowing Certificate","Bank Account Details"],deadline:"Season-based",amount:"Variable",category:"Insurance"},{id:"3",name:"Soil Health Card Scheme",ministry:"Department of Agriculture",benefit:"Free soil testing and nutrient-based recommendations",eligibility:["All farmers across India","Land ownership not mandatory","No income criteria"],documents:["Aadhaar Card","Land Details (if available)"],deadline:"Ongoing",amount:"Free Service",category:"Agricultural Support"},{id:"4",name:"Micro Irrigation Fund",ministry:"NABARD",benefit:"Subsidy on drip and sprinkler irrigation systems",eligibility:["Small and marginal farmers prioritized","Land suitable for micro irrigation","Valid land ownership documents"],documents:["Land Records","Quotation from empaneled vendor","Bank Account"],deadline:"31st March 2025",amount:"55-60% subsidy",category:"Irrigation"}],U8=["All","Income Support","Insurance","Irrigation","Agricultural Support"];function k8(){const[n,e]=j.useState(""),[t,i]=j.useState("All"),[r,s]=j.useState(null),[o,a]=j.useState(!1),l=F8.filter(u=>{const h=u.name.toLowerCase().includes(n.toLowerCase())||u.benefit.toLowerCase().includes(n.toLowerCase()),f=t==="All"||u.category===t;return h&&f});return T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[T.jsxs(Dt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[T.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[T.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center",children:T.jsx(yu,{className:"w-6 h-6 text-white"})}),T.jsxs("h1",{className:"text-4xl font-bold",children:["Government ",T.jsx("span",{className:"hologram-text",children:"Schemes"})]})]}),T.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Navigate agricultural subsidies and government programs with voice assistance. Find schemes you're eligible for."})]}),T.jsx(Dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-4xl mx-auto mb-8",children:T.jsxs(gn,{variant:"strong",hover:!1,children:[T.jsxs("div",{className:"flex gap-4 mb-6",children:[T.jsxs("div",{className:"flex-1 relative",children:[T.jsx(hM,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),T.jsx("input",{type:"text",value:n,onChange:u=>e(u.target.value),placeholder:"Search schemes (e.g., irrigation subsidy, PM-KISAN)",className:"w-full pl-12 pr-4 py-4 rounded-xl bg-muted/50 border border-border focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all"})]}),T.jsxs(Sr,{variant:o?"primary":"secondary",onClick:()=>a(!o),children:[T.jsx(gg,{className:`w-5 h-5 ${o?"animate-pulse":""}`}),o?"Listening...":"Ask"]})]}),T.jsx("div",{className:"flex flex-wrap gap-2",children:U8.map(u=>T.jsx("button",{onClick:()=>i(u),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${t===u?"bg-primary text-primary-foreground neon-border":"glass hover:neon-border"}`,children:u},u))})]})}),T.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[T.jsxs(Dt.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.3},className:"space-y-4",children:[T.jsxs("h2",{className:"text-xl font-bold mb-4",children:[l.length," Schemes Available"]}),l.map((u,h)=>T.jsx(Dt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*h},children:T.jsx(gn,{className:`cursor-pointer ${(r==null?void 0:r.id)===u.id?"neon-border":""}`,onClick:()=>s(u),children:T.jsxs("div",{className:"flex items-start justify-between",children:[T.jsxs("div",{className:"flex-1",children:[T.jsx("div",{className:"flex items-center gap-2 mb-2",children:T.jsx(Pa,{variant:"info",children:u.category})}),T.jsx("h3",{className:"font-bold mb-1 group-hover:text-primary transition-colors",children:u.name}),T.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:u.benefit}),T.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm",children:[T.jsxs("div",{className:"flex items-center gap-1 text-primary",children:[T.jsx(Qh,{className:"w-4 h-4"}),T.jsx("span",{children:u.amount})]}),T.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[T.jsx(Ca,{className:"w-4 h-4"}),T.jsx("span",{children:u.deadline})]})]})]}),T.jsx(M6,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"})]})})},u.id))]}),T.jsx(Dt.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{delay:.4},children:T.jsx(lM,{mode:"wait",children:r?T.jsxs(Dt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"space-y-6",children:[T.jsxs(gn,{variant:"neon",hover:!1,children:[T.jsxs("div",{className:"flex justify-between items-start mb-4",children:[T.jsxs("div",{children:[T.jsx(Pa,{variant:"success",className:"mb-2",children:r.category}),T.jsx("h2",{className:"text-2xl font-bold",children:r.name})]}),T.jsxs(Sr,{variant:"secondary",size:"sm",children:[T.jsx(gv,{className:"w-4 h-4"}),"Listen"]})]}),T.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-4",children:[T.jsx(S6,{className:"w-4 h-4"}),T.jsx("span",{children:r.ministry})]}),T.jsx("p",{className:"text-lg mb-6",children:r.benefit}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"p-4 rounded-xl bg-primary/10",children:[T.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[T.jsx(Qh,{className:"w-4 h-4"}),"Benefit Amount"]}),T.jsx("span",{className:"text-xl font-bold text-primary",children:r.amount})]}),T.jsxs("div",{className:"p-4 rounded-xl bg-secondary/10",children:[T.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[T.jsx(Ca,{className:"w-4 h-4"}),"Deadline"]}),T.jsx("span",{className:"text-xl font-bold text-secondary",children:r.deadline})]})]})]}),T.jsxs(gn,{hover:!1,children:[T.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[T.jsx(O6,{className:"w-5 h-5 text-primary"}),"Eligibility Criteria"]}),T.jsx("ul",{className:"space-y-3",children:r.eligibility.map((u,h)=>T.jsxs("li",{className:"flex items-start gap-2 text-muted-foreground",children:[T.jsx(dM,{className:"w-4 h-4 text-primary mt-1 flex-shrink-0"}),u]},h))})]}),T.jsxs(gn,{hover:!1,children:[T.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[T.jsx(yu,{className:"w-5 h-5 text-secondary"}),"Required Documents"]}),T.jsx("div",{className:"flex flex-wrap gap-2",children:r.documents.map(u=>T.jsx("span",{className:"px-3 py-2 rounded-xl text-sm bg-muted/50",children:u},u))})]}),T.jsxs(Sr,{className:"w-full",size:"lg",children:["Apply Now",T.jsx(b6,{className:"w-5 h-5"})]})]},r.id):T.jsx(Dt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:T.jsx(gn,{hover:!1,className:"h-full min-h-[500px] flex items-center justify-center",children:T.jsxs("div",{className:"text-center",children:[T.jsx(Dt.div,{animate:{y:[0,-10,0]},transition:{duration:2,repeat:1/0},className:"w-24 h-24 mx-auto mb-6 rounded-2xl glass flex items-center justify-center",children:T.jsx(yu,{className:"w-12 h-12 text-primary/50"})}),T.jsx("h3",{className:"text-xl font-semibold mb-2 text-muted-foreground",children:"Select a Scheme"}),T.jsx("p",{className:"text-muted-foreground max-w-xs mx-auto",children:"Click on any scheme to view detailed eligibility, documents required, and how to apply."})]})})},"placeholder")})})]})]})}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Nf="182",vl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},yl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},WN=0,pS=1,jN=2,O8=3,XN=0,_u=1,xh=2,Tl=3,Io=0,ir=1,ws=2,Ts=0,Ul=1,mS=2,gS=3,vS=4,YN=5,oa=100,qN=101,ZN=102,$N=103,KN=104,JN=200,QN=201,eL=202,tL=203,n0=204,i0=205,nL=206,iL=207,rL=208,sL=209,oL=210,aL=211,lL=212,cL=213,uL=214,r0=0,s0=1,o0=2,Xl=3,a0=4,l0=5,c0=6,u0=7,Lf=0,dL=1,hL=2,ns=0,pM=1,mM=2,gM=3,vv=4,vM=5,yM=6,xM=7,yS="attached",fL="detached",Ra=300,Cs=301,Ia=302,Lu=303,ef=304,Ju=306,tf=1e3,Wn=1001,nf=1002,$n=1003,_M=1004,B8=1004,au=1005,z8=1005,nn=1006,_h=1007,V8=1007,js=1008,xS=1008,_i=1009,yv=1010,xv=1011,Du=1012,Df=1013,Fr=1014,Cn=1015,Un=1016,_v=1017,Sv=1018,Fu=1020,SM=35902,wM=35899,MM=1021,EM=1022,Kn=1023,Qs=1026,da=1027,Ff=1028,Uf=1029,Yl=1030,wv=1031,H8=1032,Mv=1033,Sh=33776,wh=33777,Mh=33778,Eh=33779,d0=35840,h0=35841,f0=35842,p0=35843,m0=36196,g0=37492,v0=37496,y0=37488,x0=37489,_0=37490,S0=37491,w0=37808,M0=37809,E0=37810,b0=37811,T0=37812,A0=37813,C0=37814,P0=37815,R0=37816,I0=37817,N0=37818,L0=37819,D0=37820,F0=37821,U0=36492,k0=36494,O0=36495,B0=36283,z0=36284,V0=36285,H0=36286,pL=2200,mL=2201,gL=2202,rf=2300,G0=2301,yg=2302,Al=2400,Cl=2401,sf=2402,Ev=2500,bM=2501,G8=0,W8=1,j8=2,vL=3200,X8=3201,Y8=3202,q8=3203,Oa=0,yL=1,_o="",Ji="srgb",eo="srgb-linear",of="linear",fn="srgb",Z8="",$8="rg",K8="ga",J8=0,xl=7680,Q8=7681,eH=7682,tH=7683,nH=34055,iH=34056,rH=5386,sH=512,oH=513,aH=514,lH=515,cH=516,uH=517,dH=518,_S=519,xL=512,_L=513,SL=514,bv=515,wL=516,ML=517,Tv=518,EL=519,af=35044,hH=35048,fH=35040,pH=35045,mH=35049,gH=35041,vH=35046,yH=35050,xH=35042,_H="100",SS="300 es",Rr=2e3,Uu=2001,SH={COMPUTE:"compute",RENDER:"render"},wH={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},MH={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function bL(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const EH={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function lu(n,e){return new EH[n](e)}function TL(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function lf(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function AL(){const n=lf("canvas");return n.style.display="block",n}const NC={};let Na=null;function bH(n){Na=n}function TH(){return Na}function cf(...n){const e="THREE."+n.shift();Na?Na("log",e,...n):console.log(e,...n)}function nt(...n){const e="THREE."+n.shift();Na?Na("warn",e,...n):console.warn(e,...n)}function At(...n){const e="THREE."+n.shift();Na?Na("error",e,...n):console.error(e,...n)}function ku(...n){const e=n.join(" ");e in NC||(NC[e]=!0,nt(...n))}function AH(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}let to=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const ki=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let LC=1234567;const kl=Math.PI/180,Ou=180/Math.PI;function Nr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ki[n&255]+ki[n>>8&255]+ki[n>>16&255]+ki[n>>24&255]+"-"+ki[e&255]+ki[e>>8&255]+"-"+ki[e>>16&15|64]+ki[e>>24&255]+"-"+ki[t&63|128]+ki[t>>8&255]+"-"+ki[t>>16&255]+ki[t>>24&255]+ki[i&255]+ki[i>>8&255]+ki[i>>16&255]+ki[i>>24&255]).toLowerCase()}function Ut(n,e,t){return Math.max(e,Math.min(t,n))}function TM(n,e){return(n%e+e)%e}function CH(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function PH(n,e,t){return n!==e?(t-n)/(e-n):0}function bh(n,e,t){return(1-t)*n+t*e}function RH(n,e,t,i){return bh(n,e,1-Math.exp(-t*i))}function IH(n,e=1){return e-Math.abs(TM(n,e*2)-e)}function NH(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function LH(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function DH(n,e){return n+Math.floor(Math.random()*(e-n+1))}function FH(n,e){return n+Math.random()*(e-n)}function UH(n){return n*(.5-Math.random())}function kH(n){n!==void 0&&(LC=n);let e=LC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function OH(n){return n*kl}function BH(n){return n*Ou}function zH(n){return(n&n-1)===0&&n!==0}function VH(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function HH(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function GH(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+i)/2),h=o((e+i)/2),f=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),y=o((i-e)/2);switch(r){case"XYX":n.set(a*h,l*f,l*p,a*u);break;case"YZY":n.set(l*p,a*h,l*f,a*u);break;case"ZXZ":n.set(l*f,l*p,a*h,a*u);break;case"XZX":n.set(a*h,l*y,l*m,a*u);break;case"YXY":n.set(l*m,a*h,l*y,a*u);break;case"ZYZ":n.set(l*y,l*m,a*h,a*u);break;default:nt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Qi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function jt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const WH={DEG2RAD:kl,RAD2DEG:Ou,generateUUID:Nr,clamp:Ut,euclideanModulo:TM,mapLinear:CH,inverseLerp:PH,lerp:bh,damp:RH,pingpong:IH,smoothstep:NH,smootherstep:LH,randInt:DH,randFloat:FH,randFloatSpread:UH,seededRandom:kH,degToRad:OH,radToDeg:BH,isPowerOfTwo:zH,ceilPowerOfTwo:VH,floorPowerOfTwo:HH,setQuaternionFromProperEuler:GH,normalize:jt,denormalize:Qi};class Ee{constructor(e=0,t=0){Ee.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Ut(this.x,e.x,t.x),this.y=Ut(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Ut(this.x,e,t),this.y=Ut(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ut(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ut(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Hi{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],u=i[r+1],h=i[r+2],f=i[r+3],p=s[o+0],m=s[o+1],y=s[o+2],S=s[o+3];if(a<=0){e[t+0]=l,e[t+1]=u,e[t+2]=h,e[t+3]=f;return}if(a>=1){e[t+0]=p,e[t+1]=m,e[t+2]=y,e[t+3]=S;return}if(f!==S||l!==p||u!==m||h!==y){let x=l*p+u*m+h*y+f*S;x<0&&(p=-p,m=-m,y=-y,S=-S,x=-x);let g=1-a;if(x<.9995){const _=Math.acos(x),M=Math.sin(_);g=Math.sin(g*_)/M,a=Math.sin(a*_)/M,l=l*g+p*a,u=u*g+m*a,h=h*g+y*a,f=f*g+S*a}else{l=l*g+p*a,u=u*g+m*a,h=h*g+y*a,f=f*g+S*a;const _=1/Math.sqrt(l*l+u*u+h*h+f*f);l*=_,u*=_,h*=_,f*=_}}e[t]=l,e[t+1]=u,e[t+2]=h,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],u=i[r+2],h=i[r+3],f=s[o],p=s[o+1],m=s[o+2],y=s[o+3];return e[t]=a*y+h*f+l*m-u*p,e[t+1]=l*y+h*p+u*f-a*m,e[t+2]=u*y+h*m+a*p-l*f,e[t+3]=h*y-a*f-l*p-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(i/2),h=a(r/2),f=a(s/2),p=l(i/2),m=l(r/2),y=l(s/2);switch(o){case"XYZ":this._x=p*h*f+u*m*y,this._y=u*m*f-p*h*y,this._z=u*h*y+p*m*f,this._w=u*h*f-p*m*y;break;case"YXZ":this._x=p*h*f+u*m*y,this._y=u*m*f-p*h*y,this._z=u*h*y-p*m*f,this._w=u*h*f+p*m*y;break;case"ZXY":this._x=p*h*f-u*m*y,this._y=u*m*f+p*h*y,this._z=u*h*y+p*m*f,this._w=u*h*f-p*m*y;break;case"ZYX":this._x=p*h*f-u*m*y,this._y=u*m*f+p*h*y,this._z=u*h*y-p*m*f,this._w=u*h*f+p*m*y;break;case"YZX":this._x=p*h*f+u*m*y,this._y=u*m*f+p*h*y,this._z=u*h*y-p*m*f,this._w=u*h*f-p*m*y;break;case"XZY":this._x=p*h*f-u*m*y,this._y=u*m*f-p*h*y,this._z=u*h*y+p*m*f,this._w=u*h*f+p*m*y;break;default:nt("Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],h=t[6],f=t[10],p=i+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(s-u)*m,this._z=(o-r)*m}else if(i>a&&i>f){const m=2*Math.sqrt(1+i-a-f);this._w=(h-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+u)/m}else if(a>f){const m=2*Math.sqrt(1+a-i-f);this._w=(s-u)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+f-i-a);this._w=(o-r)/m,this._x=(s+u)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ut(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,h=t._w;return this._x=i*h+o*a+r*u-s*l,this._y=r*h+o*l+s*a-i*u,this._z=s*h+o*u+i*l-r*a,this._w=o*h-i*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,r=e._y,s=e._z,o=e._w,a=this.dot(e);a<0&&(i=-i,r=-r,s=-s,o=-o,a=-a);let l=1-t;if(a<.9995){const u=Math.acos(a),h=Math.sin(u);l=Math.sin(l*u)/h,t=Math.sin(t*u)/h,this._x=this._x*l+i*t,this._y=this._y*l+r*t,this._z=this._z*l+s*t,this._w=this._w*l+o*t,this._onChangeCallback()}else this._x=this._x*l+i*t,this._y=this._y*l+r*t,this._z=this._z*l+s*t,this._w=this._w*l+o*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class V{constructor(e=0,t=0,i=0){V.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(DC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(DC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*r-a*i),h=2*(a*t-s*r),f=2*(s*i-o*t);return this.x=t+l*u+o*f-a*h,this.y=i+l*h+a*u-s*f,this.z=r+l*f+s*h-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Ut(this.x,e.x,t.x),this.y=Ut(this.y,e.y,t.y),this.z=Ut(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Ut(this.x,e,t),this.y=Ut(this.y,e,t),this.z=Ut(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ut(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Yx.copy(this).projectOnVector(e),this.sub(Yx)}reflect(e){return this.sub(Yx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ut(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Yx=new V,DC=new Hi;class Wt{constructor(e,t,i,r,s,o,a,l,u){Wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u)}set(e,t,i,r,s,o,a,l,u){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],u=i[1],h=i[4],f=i[7],p=i[2],m=i[5],y=i[8],S=r[0],x=r[3],g=r[6],_=r[1],M=r[4],E=r[7],A=r[2],P=r[5],L=r[8];return s[0]=o*S+a*_+l*A,s[3]=o*x+a*M+l*P,s[6]=o*g+a*E+l*L,s[1]=u*S+h*_+f*A,s[4]=u*x+h*M+f*P,s[7]=u*g+h*E+f*L,s[2]=p*S+m*_+y*A,s[5]=p*x+m*M+y*P,s[8]=p*g+m*E+y*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return t*o*h-t*a*u-i*s*h+i*a*l+r*s*u-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],f=h*o-a*u,p=a*l-h*s,m=u*s-o*l,y=t*f+i*p+r*m;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/y;return e[0]=f*S,e[1]=(r*u-h*i)*S,e[2]=(a*i-r*o)*S,e[3]=p*S,e[4]=(h*t-r*l)*S,e[5]=(r*s-a*t)*S,e[6]=m*S,e[7]=(i*l-u*t)*S,e[8]=(o*t-i*s)*S,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(qx.makeScale(e,t)),this}rotate(e){return this.premultiply(qx.makeRotation(-e)),this}translate(e,t){return this.premultiply(qx.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const qx=new Wt,FC=new Wt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),UC=new Wt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function jH(){const n={enabled:!0,workingColorSpace:eo,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===fn&&(r.r=bo(r.r),r.g=bo(r.g),r.b=bo(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===fn&&(r.r=Su(r.r),r.g=Su(r.g),r.b=Su(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===_o?of:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return ku("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return ku("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[eo]:{primaries:e,whitePoint:i,transfer:of,toXYZ:FC,fromXYZ:UC,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Ji},outputColorSpaceConfig:{drawingBufferColorSpace:Ji}},[Ji]:{primaries:e,whitePoint:i,transfer:fn,toXYZ:FC,fromXYZ:UC,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Ji}}}),n}const sn=jH();function bo(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Su(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Sc;class CL{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Sc===void 0&&(Sc=lf("canvas")),Sc.width=e.width,Sc.height=e.height;const r=Sc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Sc}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=lf("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=bo(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(bo(t[i]/255)*255):t[i]=bo(t[i]);return{data:t,width:e.width,height:e.height}}else return nt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let XH=0;class ha{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:XH++}),this.uuid=Nr(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(Zx(r[o].image)):s.push(Zx(r[o]))}else s=Zx(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function Zx(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?CL.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(nt("Texture: Unable to serialize Texture."),{})}let YH=0;const $x=new V;class vn extends to{constructor(e=vn.DEFAULT_IMAGE,t=vn.DEFAULT_MAPPING,i=Wn,r=Wn,s=nn,o=js,a=Kn,l=_i,u=vn.DEFAULT_ANISOTROPY,h=_o){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:YH++}),this.uuid=Nr(),this.name="",this.source=new ha(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ee(0,0),this.repeat=new Ee(1,1),this.center=new Ee(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize($x).x}get height(){return this.source.getSize($x).y}get depth(){return this.source.getSize($x).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){nt(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){nt(`Texture.setValues(): property '${t}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Ra)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case tf:e.x=e.x-Math.floor(e.x);break;case Wn:e.x=e.x<0?0:1;break;case nf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case tf:e.y=e.y-Math.floor(e.y);break;case Wn:e.y=e.y<0?0:1;break;case nf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}vn.DEFAULT_IMAGE=null;vn.DEFAULT_MAPPING=Ra;vn.DEFAULT_ANISOTROPY=1;class _n{constructor(e=0,t=0,i=0,r=1){_n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,u=l[0],h=l[4],f=l[8],p=l[1],m=l[5],y=l[9],S=l[2],x=l[6],g=l[10];if(Math.abs(h-p)<.01&&Math.abs(f-S)<.01&&Math.abs(y-x)<.01){if(Math.abs(h+p)<.1&&Math.abs(f+S)<.1&&Math.abs(y+x)<.1&&Math.abs(u+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(u+1)/2,E=(m+1)/2,A=(g+1)/2,P=(h+p)/4,L=(f+S)/4,N=(y+x)/4;return M>E&&M>A?M<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(M),r=P/i,s=L/i):E>A?E<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(E),i=P/r,s=N/r):A<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(A),i=L/s,r=N/s),this.set(i,r,s,t),this}let _=Math.sqrt((x-y)*(x-y)+(f-S)*(f-S)+(p-h)*(p-h));return Math.abs(_)<.001&&(_=1),this.x=(x-y)/_,this.y=(f-S)/_,this.z=(p-h)/_,this.w=Math.acos((u+m+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Ut(this.x,e.x,t.x),this.y=Ut(this.y,e.y,t.y),this.z=Ut(this.z,e.z,t.z),this.w=Ut(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Ut(this.x,e,t),this.y=Ut(this.y,e,t),this.z=Ut(this.z,e,t),this.w=Ut(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ut(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class AM extends to{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:nn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new _n(0,0,e,t),this.scissorTest=!1,this.viewport=new _n(0,0,e,t);const r={width:e,height:t,depth:i.depth},s=new vn(r);this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:nn,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new ha(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Gi extends AM{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Av extends vn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=$n,this.minFilter=$n,this.wrapR=Wn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class qH extends Gi{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Av(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Cv extends vn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=$n,this.minFilter=$n,this.wrapR=Wn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ZH extends Gi{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Cv(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Wi{constructor(e=new V(1/0,1/0,1/0),t=new V(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(fs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(fs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=fs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,fs):fs.fromBufferAttribute(s,o),fs.applyMatrix4(e.matrixWorld),this.expandByPoint(fs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),sm.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),sm.copy(i.boundingBox)),sm.applyMatrix4(e.matrixWorld),this.union(sm)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,fs),fs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ld),om.subVectors(this.max,Ld),wc.subVectors(e.a,Ld),Mc.subVectors(e.b,Ld),Ec.subVectors(e.c,Ld),Xo.subVectors(Mc,wc),Yo.subVectors(Ec,Mc),Qa.subVectors(wc,Ec);let t=[0,-Xo.z,Xo.y,0,-Yo.z,Yo.y,0,-Qa.z,Qa.y,Xo.z,0,-Xo.x,Yo.z,0,-Yo.x,Qa.z,0,-Qa.x,-Xo.y,Xo.x,0,-Yo.y,Yo.x,0,-Qa.y,Qa.x,0];return!Kx(t,wc,Mc,Ec,om)||(t=[1,0,0,0,1,0,0,0,1],!Kx(t,wc,Mc,Ec,om))?!1:(am.crossVectors(Xo,Yo),t=[am.x,am.y,am.z],Kx(t,wc,Mc,Ec,om))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,fs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(fs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(uo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),uo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),uo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),uo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),uo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),uo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),uo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),uo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(uo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const uo=[new V,new V,new V,new V,new V,new V,new V,new V],fs=new V,sm=new Wi,wc=new V,Mc=new V,Ec=new V,Xo=new V,Yo=new V,Qa=new V,Ld=new V,om=new V,am=new V,el=new V;function Kx(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){el.fromArray(n,s);const a=r.x*Math.abs(el.x)+r.y*Math.abs(el.y)+r.z*Math.abs(el.z),l=e.dot(el),u=t.dot(el),h=i.dot(el);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>a)return!1}return!0}const $H=new Wi,Dd=new V,Jx=new V;class Ti{constructor(e=new V,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):$H.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Dd.subVectors(e,this.center);const t=Dd.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Dd,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Jx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Dd.copy(e.center).add(Jx)),this.expandByPoint(Dd.copy(e.center).sub(Jx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const ho=new V,Qx=new V,lm=new V,qo=new V,e_=new V,cm=new V,t_=new V;class tc{constructor(e=new V,t=new V(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ho)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ho.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ho.copy(this.origin).addScaledVector(this.direction,t),ho.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Qx.copy(e).add(t).multiplyScalar(.5),lm.copy(t).sub(e).normalize(),qo.copy(this.origin).sub(Qx);const s=e.distanceTo(t)*.5,o=-this.direction.dot(lm),a=qo.dot(this.direction),l=-qo.dot(lm),u=qo.lengthSq(),h=Math.abs(1-o*o);let f,p,m,y;if(h>0)if(f=o*l-a,p=o*a-l,y=s*h,f>=0)if(p>=-y)if(p<=y){const S=1/h;f*=S,p*=S,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+u}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+u;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+u;else p<=-y?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+u):p<=y?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+u):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+u);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(Qx).addScaledVector(lm,p),m}intersectSphere(e,t){ho.subVectors(e.center,this.origin);const i=ho.dot(this.direction),r=ho.dot(ho)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const u=1/this.direction.x,h=1/this.direction.y,f=1/this.direction.z,p=this.origin;return u>=0?(i=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(i=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,ho)!==null}intersectTriangle(e,t,i,r,s){e_.subVectors(t,e),cm.subVectors(i,e),t_.crossVectors(e_,cm);let o=this.direction.dot(t_),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;qo.subVectors(this.origin,e);const l=a*this.direction.dot(cm.crossVectors(qo,cm));if(l<0)return null;const u=a*this.direction.dot(e_.cross(qo));if(u<0||l+u>o)return null;const h=-a*qo.dot(t_);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class kt{constructor(e,t,i,r,s,o,a,l,u,h,f,p,m,y,S,x){kt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u,h,f,p,m,y,S,x)}set(e,t,i,r,s,o,a,l,u,h,f,p,m,y,S,x){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=u,g[6]=h,g[10]=f,g[14]=p,g[3]=m,g[7]=y,g[11]=S,g[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new kt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,i=e.elements,r=1/bc.setFromMatrixColumn(e,0).length(),s=1/bc.setFromMatrixColumn(e,1).length(),o=1/bc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),h=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*h,m=o*f,y=a*h,S=a*f;t[0]=l*h,t[4]=-l*f,t[8]=u,t[1]=m+y*u,t[5]=p-S*u,t[9]=-a*l,t[2]=S-p*u,t[6]=y+m*u,t[10]=o*l}else if(e.order==="YXZ"){const p=l*h,m=l*f,y=u*h,S=u*f;t[0]=p+S*a,t[4]=y*a-m,t[8]=o*u,t[1]=o*f,t[5]=o*h,t[9]=-a,t[2]=m*a-y,t[6]=S+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*h,m=l*f,y=u*h,S=u*f;t[0]=p-S*a,t[4]=-o*f,t[8]=y+m*a,t[1]=m+y*a,t[5]=o*h,t[9]=S-p*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*h,m=o*f,y=a*h,S=a*f;t[0]=l*h,t[4]=y*u-m,t[8]=p*u+S,t[1]=l*f,t[5]=S*u+p,t[9]=m*u-y,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*u,y=a*l,S=a*u;t[0]=l*h,t[4]=S-p*f,t[8]=y*f+m,t[1]=f,t[5]=o*h,t[9]=-a*h,t[2]=-u*h,t[6]=m*f+y,t[10]=p-S*f}else if(e.order==="XZY"){const p=o*l,m=o*u,y=a*l,S=a*u;t[0]=l*h,t[4]=-f,t[8]=u*h,t[1]=p*f+S,t[5]=o*h,t[9]=m*f-y,t[2]=y*f-m,t[6]=a*h,t[10]=S*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(KH,e,JH)}lookAt(e,t,i){const r=this.elements;return Tr.subVectors(e,t),Tr.lengthSq()===0&&(Tr.z=1),Tr.normalize(),Zo.crossVectors(i,Tr),Zo.lengthSq()===0&&(Math.abs(i.z)===1?Tr.x+=1e-4:Tr.z+=1e-4,Tr.normalize(),Zo.crossVectors(i,Tr)),Zo.normalize(),um.crossVectors(Tr,Zo),r[0]=Zo.x,r[4]=um.x,r[8]=Tr.x,r[1]=Zo.y,r[5]=um.y,r[9]=Tr.y,r[2]=Zo.z,r[6]=um.z,r[10]=Tr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],u=i[12],h=i[1],f=i[5],p=i[9],m=i[13],y=i[2],S=i[6],x=i[10],g=i[14],_=i[3],M=i[7],E=i[11],A=i[15],P=r[0],L=r[4],N=r[8],C=r[12],R=r[1],k=r[5],H=r[9],$=r[13],ne=r[2],le=r[6],ee=r[10],Q=r[14],O=r[3],Y=r[7],X=r[11],se=r[15];return s[0]=o*P+a*R+l*ne+u*O,s[4]=o*L+a*k+l*le+u*Y,s[8]=o*N+a*H+l*ee+u*X,s[12]=o*C+a*$+l*Q+u*se,s[1]=h*P+f*R+p*ne+m*O,s[5]=h*L+f*k+p*le+m*Y,s[9]=h*N+f*H+p*ee+m*X,s[13]=h*C+f*$+p*Q+m*se,s[2]=y*P+S*R+x*ne+g*O,s[6]=y*L+S*k+x*le+g*Y,s[10]=y*N+S*H+x*ee+g*X,s[14]=y*C+S*$+x*Q+g*se,s[3]=_*P+M*R+E*ne+A*O,s[7]=_*L+M*k+E*le+A*Y,s[11]=_*N+M*H+E*ee+A*X,s[15]=_*C+M*$+E*Q+A*se,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],h=e[2],f=e[6],p=e[10],m=e[14],y=e[3],S=e[7],x=e[11],g=e[15],_=l*m-u*p,M=a*m-u*f,E=a*p-l*f,A=o*m-u*h,P=o*p-l*h,L=o*f-a*h;return t*(S*_-x*M+g*E)-i*(y*_-x*A+g*P)+r*(y*M-S*A+g*L)-s*(y*E-S*P+x*L)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],f=e[9],p=e[10],m=e[11],y=e[12],S=e[13],x=e[14],g=e[15],_=f*x*u-S*p*u+S*l*m-a*x*m-f*l*g+a*p*g,M=y*p*u-h*x*u-y*l*m+o*x*m+h*l*g-o*p*g,E=h*S*u-y*f*u+y*a*m-o*S*m-h*a*g+o*f*g,A=y*f*l-h*S*l-y*a*p+o*S*p+h*a*x-o*f*x,P=t*_+i*M+r*E+s*A;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/P;return e[0]=_*L,e[1]=(S*p*s-f*x*s-S*r*m+i*x*m+f*r*g-i*p*g)*L,e[2]=(a*x*s-S*l*s+S*r*u-i*x*u-a*r*g+i*l*g)*L,e[3]=(f*l*s-a*p*s-f*r*u+i*p*u+a*r*m-i*l*m)*L,e[4]=M*L,e[5]=(h*x*s-y*p*s+y*r*m-t*x*m-h*r*g+t*p*g)*L,e[6]=(y*l*s-o*x*s-y*r*u+t*x*u+o*r*g-t*l*g)*L,e[7]=(o*p*s-h*l*s+h*r*u-t*p*u-o*r*m+t*l*m)*L,e[8]=E*L,e[9]=(y*f*s-h*S*s-y*i*m+t*S*m+h*i*g-t*f*g)*L,e[10]=(o*S*s-y*a*s+y*i*u-t*S*u-o*i*g+t*a*g)*L,e[11]=(h*a*s-o*f*s-h*i*u+t*f*u+o*i*m-t*a*m)*L,e[12]=A*L,e[13]=(h*S*r-y*f*r+y*i*p-t*S*p-h*i*x+t*f*x)*L,e[14]=(y*a*r-o*S*r-y*i*l+t*S*l+o*i*x-t*a*x)*L,e[15]=(o*f*r-h*a*r+h*i*l-t*f*l-o*i*p+t*a*p)*L,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,u=s*o,h=s*a;return this.set(u*o+i,u*a-r*l,u*l+r*a,0,u*a+r*l,h*a+i,h*l-r*o,0,u*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,h=o+o,f=a+a,p=s*u,m=s*h,y=s*f,S=o*h,x=o*f,g=a*f,_=l*u,M=l*h,E=l*f,A=i.x,P=i.y,L=i.z;return r[0]=(1-(S+g))*A,r[1]=(m+E)*A,r[2]=(y-M)*A,r[3]=0,r[4]=(m-E)*P,r[5]=(1-(p+g))*P,r[6]=(x+_)*P,r[7]=0,r[8]=(y+M)*L,r[9]=(x-_)*L,r[10]=(1-(p+S))*L,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;if(e.x=r[12],e.y=r[13],e.z=r[14],this.determinant()===0)return i.set(1,1,1),t.identity(),this;let s=bc.set(r[0],r[1],r[2]).length();const o=bc.set(r[4],r[5],r[6]).length(),a=bc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),ps.copy(this);const u=1/s,h=1/o,f=1/a;return ps.elements[0]*=u,ps.elements[1]*=u,ps.elements[2]*=u,ps.elements[4]*=h,ps.elements[5]*=h,ps.elements[6]*=h,ps.elements[8]*=f,ps.elements[9]*=f,ps.elements[10]*=f,t.setFromRotationMatrix(ps),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Rr,l=!1){const u=this.elements,h=2*s/(t-e),f=2*s/(i-r),p=(t+e)/(t-e),m=(i+r)/(i-r);let y,S;if(l)y=s/(o-s),S=o*s/(o-s);else if(a===Rr)y=-(o+s)/(o-s),S=-2*o*s/(o-s);else if(a===Uu)y=-o/(o-s),S=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return u[0]=h,u[4]=0,u[8]=p,u[12]=0,u[1]=0,u[5]=f,u[9]=m,u[13]=0,u[2]=0,u[6]=0,u[10]=y,u[14]=S,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Rr,l=!1){const u=this.elements,h=2/(t-e),f=2/(i-r),p=-(t+e)/(t-e),m=-(i+r)/(i-r);let y,S;if(l)y=1/(o-s),S=o/(o-s);else if(a===Rr)y=-2/(o-s),S=-(o+s)/(o-s);else if(a===Uu)y=-1/(o-s),S=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return u[0]=h,u[4]=0,u[8]=0,u[12]=p,u[1]=0,u[5]=f,u[9]=0,u[13]=m,u[2]=0,u[6]=0,u[10]=y,u[14]=S,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const bc=new V,ps=new kt,KH=new V(0,0,0),JH=new V(1,1,1),Zo=new V,um=new V,Tr=new V,kC=new kt,OC=new Hi;class Ur{constructor(e=0,t=0,i=0,r=Ur.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],h=r[9],f=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(Ut(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Ut(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ut(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ut(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Ut(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Ut(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:nt("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return kC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(kC,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return OC.setFromEuler(this),this.setFromQuaternion(OC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ur.DEFAULT_ORDER="XYZ";class Ol{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let QH=0;const BC=new V,Tc=new Hi,fo=new kt,dm=new V,Fd=new V,eG=new V,tG=new Hi,zC=new V(1,0,0),VC=new V(0,1,0),HC=new V(0,0,1),GC={type:"added"},nG={type:"removed"},Ac={type:"childadded",child:null},n_={type:"childremoved",child:null};class ln extends to{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:QH++}),this.uuid=Nr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ln.DEFAULT_UP.clone();const e=new V,t=new Ur,i=new Hi,r=new V(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new kt},normalMatrix:{value:new Wt}}),this.matrix=new kt,this.matrixWorld=new kt,this.matrixAutoUpdate=ln.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ln.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ol,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Tc.setFromAxisAngle(e,t),this.quaternion.multiply(Tc),this}rotateOnWorldAxis(e,t){return Tc.setFromAxisAngle(e,t),this.quaternion.premultiply(Tc),this}rotateX(e){return this.rotateOnAxis(zC,e)}rotateY(e){return this.rotateOnAxis(VC,e)}rotateZ(e){return this.rotateOnAxis(HC,e)}translateOnAxis(e,t){return BC.copy(e).applyQuaternion(this.quaternion),this.position.add(BC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(zC,e)}translateY(e){return this.translateOnAxis(VC,e)}translateZ(e){return this.translateOnAxis(HC,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(fo.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?dm.copy(e):dm.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Fd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?fo.lookAt(Fd,dm,this.up):fo.lookAt(dm,Fd,this.up),this.quaternion.setFromRotationMatrix(fo),r&&(fo.extractRotation(r.matrixWorld),Tc.setFromRotationMatrix(fo),this.quaternion.premultiply(Tc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(At("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(GC),Ac.child=e,this.dispatchEvent(Ac),Ac.child=null):At("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(nG),n_.child=e,this.dispatchEvent(n_),n_.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),fo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),fo.multiply(e.parent.matrixWorld)),e.applyMatrix4(fo),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(GC),Ac.child=e,this.dispatchEvent(Ac),Ac.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fd,e,eG),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fd,tG,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(a=>({...a})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++){const f=l[u];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),h=o(e.images),f=o(e.shapes),p=o(e.skeletons),m=o(e.animations),y=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),h.length>0&&(i.images=h),f.length>0&&(i.shapes=f),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),y.length>0&&(i.nodes=y)}return i.object=r,i;function o(a){const l=[];for(const u in a){const h=a[u];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}ln.DEFAULT_UP=new V(0,1,0);ln.DEFAULT_MATRIX_AUTO_UPDATE=!0;ln.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ms=new V,po=new V,i_=new V,mo=new V,Cc=new V,Pc=new V,WC=new V,r_=new V,s_=new V,o_=new V,a_=new _n,l_=new _n,c_=new _n;class gr{constructor(e=new V,t=new V,i=new V){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ms.subVectors(e,t),r.cross(ms);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ms.subVectors(r,t),po.subVectors(i,t),i_.subVectors(e,t);const o=ms.dot(ms),a=ms.dot(po),l=ms.dot(i_),u=po.dot(po),h=po.dot(i_),f=o*u-a*a;if(f===0)return s.set(0,0,0),null;const p=1/f,m=(u*l-a*h)*p,y=(o*h-a*l)*p;return s.set(1-m-y,y,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,mo)===null?!1:mo.x>=0&&mo.y>=0&&mo.x+mo.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,mo)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,mo.x),l.addScaledVector(o,mo.y),l.addScaledVector(a,mo.z),l)}static getInterpolatedAttribute(e,t,i,r,s,o){return a_.setScalar(0),l_.setScalar(0),c_.setScalar(0),a_.fromBufferAttribute(e,t),l_.fromBufferAttribute(e,i),c_.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(a_,s.x),o.addScaledVector(l_,s.y),o.addScaledVector(c_,s.z),o}static isFrontFacing(e,t,i,r){return ms.subVectors(i,t),po.subVectors(e,t),ms.cross(po).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ms.subVectors(this.c,this.b),po.subVectors(this.a,this.b),ms.cross(po).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return gr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return gr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return gr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return gr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return gr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Cc.subVectors(r,i),Pc.subVectors(s,i),r_.subVectors(e,i);const l=Cc.dot(r_),u=Pc.dot(r_);if(l<=0&&u<=0)return t.copy(i);s_.subVectors(e,r);const h=Cc.dot(s_),f=Pc.dot(s_);if(h>=0&&f<=h)return t.copy(r);const p=l*f-h*u;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(i).addScaledVector(Cc,o);o_.subVectors(e,s);const m=Cc.dot(o_),y=Pc.dot(o_);if(y>=0&&m<=y)return t.copy(s);const S=m*u-l*y;if(S<=0&&u>=0&&y<=0)return a=u/(u-y),t.copy(i).addScaledVector(Pc,a);const x=h*y-m*f;if(x<=0&&f-h>=0&&m-y>=0)return WC.subVectors(s,r),a=(f-h)/(f-h+(m-y)),t.copy(r).addScaledVector(WC,a);const g=1/(x+S+p);return o=S*g,a=p*g,t.copy(i).addScaledVector(Cc,o).addScaledVector(Pc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const PL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},$o={h:0,s:0,l:0},hm={h:0,s:0,l:0};function u_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class ft{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ji){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,sn.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=sn.workingColorSpace){return this.r=e,this.g=t,this.b=i,sn.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=sn.workingColorSpace){if(e=TM(e,1),t=Ut(t,0,1),i=Ut(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=u_(o,s,e+1/3),this.g=u_(o,s,e),this.b=u_(o,s,e-1/3)}return sn.colorSpaceToWorking(this,r),this}setStyle(e,t=Ji){function i(s){s!==void 0&&parseFloat(s)<1&&nt("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:nt("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);nt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ji){const i=PL[e.toLowerCase()];return i!==void 0?this.setHex(i,t):nt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=bo(e.r),this.g=bo(e.g),this.b=bo(e.b),this}copyLinearToSRGB(e){return this.r=Su(e.r),this.g=Su(e.g),this.b=Su(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ji){return sn.workingToColorSpace(Oi.copy(this),e),Math.round(Ut(Oi.r*255,0,255))*65536+Math.round(Ut(Oi.g*255,0,255))*256+Math.round(Ut(Oi.b*255,0,255))}getHexString(e=Ji){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=sn.workingColorSpace){sn.workingToColorSpace(Oi.copy(this),t);const i=Oi.r,r=Oi.g,s=Oi.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,u;const h=(a+o)/2;if(a===o)l=0,u=0;else{const f=o-a;switch(u=h<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=h,e}getRGB(e,t=sn.workingColorSpace){return sn.workingToColorSpace(Oi.copy(this),t),e.r=Oi.r,e.g=Oi.g,e.b=Oi.b,e}getStyle(e=Ji){sn.workingToColorSpace(Oi.copy(this),e);const t=Oi.r,i=Oi.g,r=Oi.b;return e!==Ji?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL($o),this.setHSL($o.h+e,$o.s+t,$o.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL($o),e.getHSL(hm);const i=bh($o.h,hm.h,t),r=bh($o.s,hm.s,t),s=bh($o.l,hm.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Oi=new ft;ft.NAMES=PL;let iG=0;class Xi extends to{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iG++}),this.uuid=Nr(),this.name="",this.type="Material",this.blending=Ul,this.side=Io,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=n0,this.blendDst=i0,this.blendEquation=oa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ft(0,0,0),this.blendAlpha=0,this.depthFunc=Xl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=_S,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=xl,this.stencilZFail=xl,this.stencilZPass=xl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){nt(`Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){nt(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ul&&(i.blending=this.blending),this.side!==Io&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==n0&&(i.blendSrc=this.blendSrc),this.blendDst!==i0&&(i.blendDst=this.blendDst),this.blendEquation!==oa&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Xl&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==_S&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==xl&&(i.stencilFail=this.stencilFail),this.stencilZFail!==xl&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==xl&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Lo extends Xi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ft(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ur,this.combine=Lf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const So=rG();function rG(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,h=0;for(;!(u&8388608);)u<<=1,h-=8388608;u&=-8388609,h+=947912704,s[l]=u|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function pr(n){Math.abs(n)>65504&&nt("DataUtils.toHalfFloat(): Value out of range."),n=Ut(n,-65504,65504),So.floatView[0]=n;const e=So.uint32View[0],t=e>>23&511;return So.baseTable[t]+((e&8388607)>>So.shiftTable[t])}function nh(n){const e=n>>10;return So.uint32View[0]=So.mantissaTable[So.offsetTable[e]+(n&1023)]+So.exponentTable[e],So.floatView[0]}class Pl{static toHalfFloat(e){return pr(e)}static fromHalfFloat(e){return nh(e)}}const ti=new V,fm=new Ee;let sG=0;class yn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:sG++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=af,this.updateRanges=[],this.gpuType=Cn,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)fm.fromBufferAttribute(this,t),fm.applyMatrix3(e),this.setXY(t,fm.x,fm.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)ti.fromBufferAttribute(this,t),ti.applyMatrix3(e),this.setXYZ(t,ti.x,ti.y,ti.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ti.fromBufferAttribute(this,t),ti.applyMatrix4(e),this.setXYZ(t,ti.x,ti.y,ti.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ti.fromBufferAttribute(this,t),ti.applyNormalMatrix(e),this.setXYZ(t,ti.x,ti.y,ti.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ti.fromBufferAttribute(this,t),ti.transformDirection(e),this.setXYZ(t,ti.x,ti.y,ti.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Qi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=jt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Qi(t,this.array)),t}setX(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Qi(t,this.array)),t}setY(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Qi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Qi(t,this.array)),t}setW(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array),s=jt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==af&&(e.usage=this.usage),e}}class oG extends yn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class aG extends yn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class lG extends yn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class cG extends yn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class CM extends yn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class uG extends yn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class PM extends yn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class dG extends yn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=nh(this.array[e*this.itemSize]);return this.normalized&&(t=Qi(t,this.array)),t}setX(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize]=pr(t),this}getY(e){let t=nh(this.array[e*this.itemSize+1]);return this.normalized&&(t=Qi(t,this.array)),t}setY(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+1]=pr(t),this}getZ(e){let t=nh(this.array[e*this.itemSize+2]);return this.normalized&&(t=Qi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+2]=pr(t),this}getW(e){let t=nh(this.array[e*this.itemSize+3]);return this.normalized&&(t=Qi(t,this.array)),t}setW(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+3]=pr(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array)),this.array[e+0]=pr(t),this.array[e+1]=pr(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array)),this.array[e+0]=pr(t),this.array[e+1]=pr(i),this.array[e+2]=pr(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array),s=jt(s,this.array)),this.array[e+0]=pr(t),this.array[e+1]=pr(i),this.array[e+2]=pr(r),this.array[e+3]=pr(s),this}}class gt extends yn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let hG=0;const Yr=new kt,d_=new ln,Rc=new V,Ar=new Wi,Ud=new Wi,vi=new V;class zt extends to{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:hG++}),this.uuid=Nr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(bL(e)?PM:CM)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Wt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Yr.makeRotationFromQuaternion(e),this.applyMatrix4(Yr),this}rotateX(e){return Yr.makeRotationX(e),this.applyMatrix4(Yr),this}rotateY(e){return Yr.makeRotationY(e),this.applyMatrix4(Yr),this}rotateZ(e){return Yr.makeRotationZ(e),this.applyMatrix4(Yr),this}translate(e,t,i){return Yr.makeTranslation(e,t,i),this.applyMatrix4(Yr),this}scale(e,t,i){return Yr.makeScale(e,t,i),this.applyMatrix4(Yr),this}lookAt(e){return d_.lookAt(e),d_.updateMatrix(),this.applyMatrix4(d_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Rc).negate(),this.translate(Rc.x,Rc.y,Rc.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new gt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&nt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){At("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new V(-1/0,-1/0,-1/0),new V(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Ar.setFromBufferAttribute(s),this.morphTargetsRelative?(vi.addVectors(this.boundingBox.min,Ar.min),this.boundingBox.expandByPoint(vi),vi.addVectors(this.boundingBox.max,Ar.max),this.boundingBox.expandByPoint(vi)):(this.boundingBox.expandByPoint(Ar.min),this.boundingBox.expandByPoint(Ar.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&At('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ti);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){At("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new V,1/0);return}if(e){const i=this.boundingSphere.center;if(Ar.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Ud.setFromBufferAttribute(a),this.morphTargetsRelative?(vi.addVectors(Ar.min,Ud.min),Ar.expandByPoint(vi),vi.addVectors(Ar.max,Ud.max),Ar.expandByPoint(vi)):(Ar.expandByPoint(Ud.min),Ar.expandByPoint(Ud.max))}Ar.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)vi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(vi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,h=a.count;u<h;u++)vi.fromBufferAttribute(a,u),l&&(Rc.fromBufferAttribute(e,u),vi.add(Rc)),r=Math.max(r,i.distanceToSquared(vi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&At('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){At("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new yn(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let N=0;N<i.count;N++)a[N]=new V,l[N]=new V;const u=new V,h=new V,f=new V,p=new Ee,m=new Ee,y=new Ee,S=new V,x=new V;function g(N,C,R){u.fromBufferAttribute(i,N),h.fromBufferAttribute(i,C),f.fromBufferAttribute(i,R),p.fromBufferAttribute(s,N),m.fromBufferAttribute(s,C),y.fromBufferAttribute(s,R),h.sub(u),f.sub(u),m.sub(p),y.sub(p);const k=1/(m.x*y.y-y.x*m.y);isFinite(k)&&(S.copy(h).multiplyScalar(y.y).addScaledVector(f,-m.y).multiplyScalar(k),x.copy(f).multiplyScalar(m.x).addScaledVector(h,-y.x).multiplyScalar(k),a[N].add(S),a[C].add(S),a[R].add(S),l[N].add(x),l[C].add(x),l[R].add(x))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let N=0,C=_.length;N<C;++N){const R=_[N],k=R.start,H=R.count;for(let $=k,ne=k+H;$<ne;$+=3)g(e.getX($+0),e.getX($+1),e.getX($+2))}const M=new V,E=new V,A=new V,P=new V;function L(N){A.fromBufferAttribute(r,N),P.copy(A);const C=a[N];M.copy(C),M.sub(A.multiplyScalar(A.dot(C))).normalize(),E.crossVectors(P,C);const k=E.dot(l[N])<0?-1:1;o.setXYZW(N,M.x,M.y,M.z,k)}for(let N=0,C=_.length;N<C;++N){const R=_[N],k=R.start,H=R.count;for(let $=k,ne=k+H;$<ne;$+=3)L(e.getX($+0)),L(e.getX($+1)),L(e.getX($+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new yn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new V,s=new V,o=new V,a=new V,l=new V,u=new V,h=new V,f=new V;if(e)for(let p=0,m=e.count;p<m;p+=3){const y=e.getX(p+0),S=e.getX(p+1),x=e.getX(p+2);r.fromBufferAttribute(t,y),s.fromBufferAttribute(t,S),o.fromBufferAttribute(t,x),h.subVectors(o,s),f.subVectors(r,s),h.cross(f),a.fromBufferAttribute(i,y),l.fromBufferAttribute(i,S),u.fromBufferAttribute(i,x),a.add(h),l.add(h),u.add(h),i.setXYZ(y,a.x,a.y,a.z),i.setXYZ(S,l.x,l.y,l.z),i.setXYZ(x,u.x,u.y,u.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),h.subVectors(o,s),f.subVectors(r,s),h.cross(f),i.setXYZ(p+0,h.x,h.y,h.z),i.setXYZ(p+1,h.x,h.y,h.z),i.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)vi.fromBufferAttribute(e,t),vi.normalize(),e.setXYZ(t,vi.x,vi.y,vi.z)}toNonIndexed(){function e(a,l){const u=a.array,h=a.itemSize,f=a.normalized,p=new u.constructor(l.length*h);let m=0,y=0;for(let S=0,x=l.length;S<x;S++){a.isInterleavedBufferAttribute?m=l[S]*a.data.stride+a.offset:m=l[S]*h;for(let g=0;g<h;g++)p[y++]=u[m++]}return new yn(p,h,f)}if(this.index===null)return nt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new zt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,i);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let h=0,f=u.length;h<f;h++){const p=u[h],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],h=[];for(let f=0,p=u.length;f<p;f++){const m=u[f];h.push(m.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const u in r){const h=r[u];this.setAttribute(u,h.clone(t))}const s=e.morphAttributes;for(const u in s){const h=[],f=s[u];for(let p=0,m=f.length;p<m;p++)h.push(f[p].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,h=o.length;u<h;u++){const f=o[u];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const jC=new kt,tl=new tc,pm=new Ti,XC=new V,mm=new V,gm=new V,vm=new V,h_=new V,ym=new V,YC=new V,xm=new V;class Bn extends ln{constructor(e=new zt,t=new Lo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){ym.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const h=a[l],f=s[l];h!==0&&(h_.fromBufferAttribute(f,e),o?ym.addScaledVector(h_,h):ym.addScaledVector(h_.sub(t),h))}t.add(ym)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),pm.copy(i.boundingSphere),pm.applyMatrix4(s),tl.copy(e.ray).recast(e.near),!(pm.containsPoint(tl.origin)===!1&&(tl.intersectSphere(pm,XC)===null||tl.origin.distanceToSquared(XC)>(e.far-e.near)**2))&&(jC.copy(s).invert(),tl.copy(e.ray).applyMatrix4(jC),!(i.boundingBox!==null&&tl.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,tl)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,h=s.attributes.uv1,f=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let y=0,S=p.length;y<S;y++){const x=p[y],g=o[x.materialIndex],_=Math.max(x.start,m.start),M=Math.min(a.count,Math.min(x.start+x.count,m.start+m.count));for(let E=_,A=M;E<A;E+=3){const P=a.getX(E),L=a.getX(E+1),N=a.getX(E+2);r=_m(this,g,e,i,u,h,f,P,L,N),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const y=Math.max(0,m.start),S=Math.min(a.count,m.start+m.count);for(let x=y,g=S;x<g;x+=3){const _=a.getX(x),M=a.getX(x+1),E=a.getX(x+2);r=_m(this,o,e,i,u,h,f,_,M,E),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let y=0,S=p.length;y<S;y++){const x=p[y],g=o[x.materialIndex],_=Math.max(x.start,m.start),M=Math.min(l.count,Math.min(x.start+x.count,m.start+m.count));for(let E=_,A=M;E<A;E+=3){const P=E,L=E+1,N=E+2;r=_m(this,g,e,i,u,h,f,P,L,N),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const y=Math.max(0,m.start),S=Math.min(l.count,m.start+m.count);for(let x=y,g=S;x<g;x+=3){const _=x,M=x+1,E=x+2;r=_m(this,o,e,i,u,h,f,_,M,E),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}}}function fG(n,e,t,i,r,s,o,a){let l;if(e.side===ir?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Io,a),l===null)return null;xm.copy(a),xm.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(xm);return u<t.near||u>t.far?null:{distance:u,point:xm.clone(),object:n}}function _m(n,e,t,i,r,s,o,a,l,u){n.getVertexPosition(a,mm),n.getVertexPosition(l,gm),n.getVertexPosition(u,vm);const h=fG(n,e,t,i,mm,gm,vm,YC);if(h){const f=new V;gr.getBarycoord(YC,mm,gm,vm,f),r&&(h.uv=gr.getInterpolatedAttribute(r,a,l,u,f,new Ee)),s&&(h.uv1=gr.getInterpolatedAttribute(s,a,l,u,f,new Ee)),o&&(h.normal=gr.getInterpolatedAttribute(o,a,l,u,f,new V),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const p={a,b:l,c:u,normal:new V,materialIndex:0};gr.getNormal(mm,gm,vm,p.normal),h.face=p,h.barycoord=f}return h}class nc extends zt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],h=[],f=[];let p=0,m=0;y("z","y","x",-1,-1,i,t,e,o,s,0),y("z","y","x",1,-1,i,t,-e,o,s,1),y("x","z","y",1,1,e,i,t,r,o,2),y("x","z","y",1,-1,e,i,-t,r,o,3),y("x","y","z",1,-1,e,t,i,r,s,4),y("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new gt(u,3)),this.setAttribute("normal",new gt(h,3)),this.setAttribute("uv",new gt(f,2));function y(S,x,g,_,M,E,A,P,L,N,C){const R=E/L,k=A/N,H=E/2,$=A/2,ne=P/2,le=L+1,ee=N+1;let Q=0,O=0;const Y=new V;for(let X=0;X<ee;X++){const se=X*k-$;for(let me=0;me<le;me++){const Re=me*R-H;Y[S]=Re*_,Y[x]=se*M,Y[g]=ne,u.push(Y.x,Y.y,Y.z),Y[S]=0,Y[x]=0,Y[g]=P>0?1:-1,h.push(Y.x,Y.y,Y.z),f.push(me/L),f.push(1-X/N),Q+=1}}for(let X=0;X<N;X++)for(let se=0;se<L;se++){const me=p+se+le*X,Re=p+se+le*(X+1),at=p+(se+1)+le*(X+1),Ct=p+(se+1)+le*X;l.push(me,Re,Ct),l.push(Re,at,Ct),O+=6}a.addGroup(m,O,C),m+=O,p+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Bu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(nt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function $i(n){const e={};for(let t=0;t<n.length;t++){const i=Bu(n[t]);for(const r in i)e[r]=i[r]}return e}function pG(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function RL(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:sn.workingColorSpace}const IL={clone:Bu,merge:$i};var mG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,gG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class rr extends Xi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=mG,this.fragmentShader=gG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Bu(e.uniforms),this.uniformsGroups=pG(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class kf extends ln{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new kt,this.projectionMatrix=new kt,this.projectionMatrixInverse=new kt,this.coordinateSystem=Rr,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ko=new V,qC=new Ee,ZC=new Ee;let Zn=class extends kf{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ou*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(kl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ou*2*Math.atan(Math.tan(kl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Ko.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ko.x,Ko.y).multiplyScalar(-e/Ko.z),Ko.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Ko.x,Ko.y).multiplyScalar(-e/Ko.z)}getViewSize(e,t){return this.getViewBounds(e,qC,ZC),t.subVectors(ZC,qC)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(kl*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/u,r*=o.width/l,i*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Ic=-90,Nc=1;class NL extends ln{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Zn(Ic,Nc,e,t);r.layers=this.layers,this.add(r);const s=new Zn(Ic,Nc,e,t);s.layers=this.layers,this.add(s);const o=new Zn(Ic,Nc,e,t);o.layers=this.layers,this.add(o);const a=new Zn(Ic,Nc,e,t);a.layers=this.layers,this.add(a);const l=new Zn(Ic,Nc,e,t);l.layers=this.layers,this.add(l);const u=new Zn(Ic,Nc,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===Rr)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Uu)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,h]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const S=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=S,e.setRenderTarget(i,5,r),e.render(t,h),e.setRenderTarget(f,p,m),e.xr.enabled=y,i.texture.needsPMREMUpdate=!0}}class Of extends vn{constructor(e=[],t=Cs,i,r,s,o,a,l,u,h){super(e,t,i,r,s,o,a,l,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Pv extends Gi{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Of(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new nc(5,5,5),s=new rr({name:"CubemapFromEquirect",uniforms:Bu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ir,blending:Ts});s.uniforms.tEquirect.value=t;const o=new Bn(r,s),a=t.minFilter;return t.minFilter===js&&(t.minFilter=nn),new NL(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}class cu extends ln{constructor(){super(),this.isGroup=!0,this.type="Group"}}const vG={type:"move"};class xg{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new cu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new cu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new V,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new V),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new cu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new V,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new V),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const S of e.hand.values()){const x=t.getJointPose(S,i),g=this._getHandJoint(u,S);x!==null&&(g.matrix.fromArray(x.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=x.radius),g.visible=x!==null}const h=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],p=h.position.distanceTo(f.position),m=.02,y=.005;u.inputState.pinching&&p>m+y?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=m-y&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(vG)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new cu;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Rv{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ft(e),this.density=t}clone(){return new Rv(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Iv{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new ft(e),this.near=t,this.far=i}clone(){return new Iv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let Bf=class extends ln{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ur,this.environmentIntensity=1,this.environmentRotation=new Ur,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class Nv{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=af,this.updateRanges=[],this.version=0,this.uuid=Nr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Nr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Nr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Zi=new V;class ql{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Zi.fromBufferAttribute(this,t),Zi.applyMatrix4(e),this.setXYZ(t,Zi.x,Zi.y,Zi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Zi.fromBufferAttribute(this,t),Zi.applyNormalMatrix(e),this.setXYZ(t,Zi.x,Zi.y,Zi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Zi.fromBufferAttribute(this,t),Zi.transformDirection(e),this.setXYZ(t,Zi.x,Zi.y,Zi.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Qi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=jt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Qi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Qi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Qi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Qi(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array),s=jt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){cf("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new yn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ql(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){cf("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class RM extends Xi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ft(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Lc;const kd=new V,Dc=new V,Fc=new V,Uc=new Ee,Od=new Ee,LL=new kt,Sm=new V,Bd=new V,wm=new V,$C=new Ee,f_=new Ee,KC=new Ee;class DL extends ln{constructor(e=new RM){if(super(),this.isSprite=!0,this.type="Sprite",Lc===void 0){Lc=new zt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Nv(t,5);Lc.setIndex([0,1,2,0,2,3]),Lc.setAttribute("position",new ql(i,3,0,!1)),Lc.setAttribute("uv",new ql(i,2,3,!1))}this.geometry=Lc,this.material=e,this.center=new Ee(.5,.5),this.count=1}raycast(e,t){e.camera===null&&At('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Dc.setFromMatrixScale(this.matrixWorld),LL.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Fc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Dc.multiplyScalar(-Fc.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Mm(Sm.set(-.5,-.5,0),Fc,o,Dc,r,s),Mm(Bd.set(.5,-.5,0),Fc,o,Dc,r,s),Mm(wm.set(.5,.5,0),Fc,o,Dc,r,s),$C.set(0,0),f_.set(1,0),KC.set(1,1);let a=e.ray.intersectTriangle(Sm,Bd,wm,!1,kd);if(a===null&&(Mm(Bd.set(-.5,.5,0),Fc,o,Dc,r,s),f_.set(0,1),a=e.ray.intersectTriangle(Sm,wm,Bd,!1,kd),a===null))return;const l=e.ray.origin.distanceTo(kd);l<e.near||l>e.far||t.push({distance:l,point:kd.clone(),uv:gr.getInterpolation(kd,Sm,Bd,wm,$C,f_,KC,new Ee),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Mm(n,e,t,i,r,s){Uc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Od.x=s*Uc.x-r*Uc.y,Od.y=r*Uc.x+s*Uc.y):Od.copy(Uc),n.copy(e),n.x+=Od.x,n.y+=Od.y,n.applyMatrix4(LL)}const Em=new V,JC=new V;class FL extends ln{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Em.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Em);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Em.setFromMatrixPosition(e.matrixWorld),JC.setFromMatrixPosition(this.matrixWorld);const i=Em.distanceTo(JC)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const QC=new V,e2=new _n,t2=new _n,yG=new V,n2=new kt,bm=new V,p_=new Ti,i2=new kt,m_=new tc;class UL extends Bn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=yS,this.bindMatrix=new kt,this.bindMatrixInverse=new kt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Wi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,bm),this.boundingBox.expandByPoint(bm)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ti),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,bm),this.boundingSphere.expandByPoint(bm)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),p_.copy(this.boundingSphere),p_.applyMatrix4(r),e.ray.intersectsSphere(p_)!==!1&&(i2.copy(r).invert(),m_.copy(e.ray).applyMatrix4(i2),!(this.boundingBox!==null&&m_.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,m_)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new _n,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===yS?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===fL?this.bindMatrixInverse.copy(this.bindMatrix).invert():nt("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;e2.fromBufferAttribute(r.attributes.skinIndex,e),t2.fromBufferAttribute(r.attributes.skinWeight,e),QC.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=t2.getComponent(s);if(o!==0){const a=e2.getComponent(s);n2.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(yG.copy(QC).applyMatrix4(n2),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class IM extends ln{constructor(){super(),this.isBone=!0,this.type="Bone"}}class is extends vn{constructor(e=null,t=1,i=1,r,s,o,a,l,u=$n,h=$n,f,p){super(null,o,a,l,u,h,r,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const r2=new kt,xG=new kt;class Lv{constructor(e=[],t=[]){this.uuid=Nr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){nt("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new kt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new kt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:xG;r2.multiplyMatrices(a,t[s]),r2.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Lv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new is(t,e,e,Kn,Cn);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(nt("Skeleton: No bone found with UUID:",s),o=new IM),this.bones.push(o),this.boneInverses.push(new kt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class zu extends yn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const kc=new kt,s2=new kt,Tm=[],o2=new Wi,_G=new kt,zd=new Bn,Vd=new Ti;class kL extends Bn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new zu(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,_G)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Wi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,kc),o2.copy(e.boundingBox).applyMatrix4(kc),this.boundingBox.union(o2)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ti),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,kc),Vd.copy(e.boundingSphere).applyMatrix4(kc),this.boundingSphere.union(Vd)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(zd.geometry=this.geometry,zd.material=this.material,zd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Vd.copy(this.boundingSphere),Vd.applyMatrix4(i),e.ray.intersectsSphere(Vd)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,kc),s2.multiplyMatrices(i,kc),zd.matrixWorld=s2,zd.raycast(e,Tm);for(let o=0,a=Tm.length;o<a;o++){const l=Tm[o];l.instanceId=s,l.object=this,t.push(l)}Tm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new zu(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new is(new Float32Array(r*this.count),r,this.count,Ff,Cn));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<i.length;u++)o+=i[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const g_=new V,SG=new V,wG=new Wt;class xo{constructor(e=new V(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=g_.subVectors(i,t).cross(SG.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(g_),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||wG.getNormalMatrix(e),r=this.coplanarPoint(g_).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const nl=new Ti,MG=new Ee(.5,.5),Am=new V;class Qu{constructor(e=new xo,t=new xo,i=new xo,r=new xo,s=new xo,o=new xo){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Rr,i=!1){const r=this.planes,s=e.elements,o=s[0],a=s[1],l=s[2],u=s[3],h=s[4],f=s[5],p=s[6],m=s[7],y=s[8],S=s[9],x=s[10],g=s[11],_=s[12],M=s[13],E=s[14],A=s[15];if(r[0].setComponents(u-o,m-h,g-y,A-_).normalize(),r[1].setComponents(u+o,m+h,g+y,A+_).normalize(),r[2].setComponents(u+a,m+f,g+S,A+M).normalize(),r[3].setComponents(u-a,m-f,g-S,A-M).normalize(),i)r[4].setComponents(l,p,x,E).normalize(),r[5].setComponents(u-l,m-p,g-x,A-E).normalize();else if(r[4].setComponents(u-l,m-p,g-x,A-E).normalize(),t===Rr)r[5].setComponents(u+l,m+p,g+x,A+E).normalize();else if(t===Uu)r[5].setComponents(l,p,x,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),nl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),nl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(nl)}intersectsSprite(e){nl.center.set(0,0,0);const t=MG.distanceTo(e.center);return nl.radius=.7071067811865476+t,nl.applyMatrix4(e.matrixWorld),this.intersectsSphere(nl)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Am.x=r.normal.x>0?e.max.x:e.min.x,Am.y=r.normal.y>0?e.max.y:e.min.y,Am.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Am)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Bs=new kt,zs=new Qu;class Dv{constructor(){this.coordinateSystem=Rr}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Bs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),zs.setFromProjectionMatrix(Bs,r.coordinateSystem,r.reversedDepth),zs.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Bs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),zs.setFromProjectionMatrix(Bs,r.coordinateSystem,r.reversedDepth),zs.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Bs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),zs.setFromProjectionMatrix(Bs,r.coordinateSystem,r.reversedDepth),zs.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Bs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),zs.setFromProjectionMatrix(Bs,r.coordinateSystem,r.reversedDepth),zs.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Bs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),zs.setFromProjectionMatrix(Bs,r.coordinateSystem,r.reversedDepth),zs.containsPoint(e))return!0}return!1}clone(){return new Dv}}function v_(n,e){return n-e}function EG(n,e){return n.z-e.z}function bG(n,e){return e.z-n.z}class TG{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=i,a.index=r}reset(){this.list.length=0,this.index=0}}const fr=new kt,AG=new ft(1,1,1),a2=new Qu,CG=new Dv,Cm=new Wi,il=new Ti,Hd=new V,l2=new V,PG=new V,y_=new TG,Bi=new Bn,Pm=[];function RG(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function rl(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class OL extends Bn{constructor(e,t,i=t*2,r){super(new zt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new is(t,e,e,Kn,Cn);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new is(t,e,e,Uf,Fr);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new is(t,e,e,Kn,Cn);i.colorSpace=sn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:u}=o,h=new a.constructor(i*l),f=new yn(h,l,u);t.setAttribute(s,f)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new yn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wi);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,fr),this.getBoundingBoxAt(s,Cm).applyMatrix4(fr),e.union(Cm)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ti);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,fr),this.getBoundingSphereAt(s,il).applyMatrix4(fr),e.union(il)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(v_),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;fr.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(AG.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(v_),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(r&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const h in i.attributes){const f=t.getAttribute(h),p=i.getAttribute(h);RG(f,p,l);const m=f.itemSize;for(let y=f.count,S=u;y<S;y++){const x=l+y;for(let g=0;g<m;g++)p.setComponent(x,g,0)}p.needsUpdate=!0,p.addUpdateRange(l*m,u*m)}if(r){const h=a.indexStart,f=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let p=0;p<o.count;p++)s.setX(h+p,l+o.getX(p));for(let p=o.count,m=f;p<m;p++)s.setX(h+p,l);s.needsUpdate=!0,s.addUpdateRange(h,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,a)=>a).sort((o,a)=>i[o].vertexStart-i[a].vertexStart),s=this.geometry;for(let o=0,a=i.length;o<a;o++){const l=r[o],u=i[l];if(u.active!==!1){if(s.index!==null){if(u.indexStart!==t){const{indexStart:h,vertexStart:f,reservedIndexCount:p}=u,m=s.index,y=m.array,S=e-f;for(let x=h;x<h+p;x++)y[x]=y[x]+S;m.array.copyWithin(t,h,h+p),m.addUpdateRange(t,p),m.needsUpdate=!0,u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:h,reservedVertexCount:f}=u,p=s.attributes;for(const m in p){const y=p[m],{array:S,itemSize:x}=y;S.copyWithin(e*x,h*x,(h+f)*x),y.addUpdateRange(e*x,f*x),y.needsUpdate=!0}u.vertexStart=e}e+=u.reservedVertexCount,u.start=s.index?u.indexStart:u.vertexStart,this._nextIndexStart=s.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Wi,o=i.index,a=i.attributes.position;for(let l=r.start,u=r.start+r.count;l<u;l++){let h=l;o&&(h=o.getX(h)),s.expandByPoint(Hd.fromBufferAttribute(a,h))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new Ti;this.getBoundingBoxAt(e,Cm),Cm.getCenter(s.center);const o=i.index,a=i.attributes.position;let l=0;for(let u=r.start,h=r.start+r.count;u<h;u++){let f=u;o&&(f=o.getX(f)),Hd.fromBufferAttribute(a,f),l=Math.max(l,s.center.distanceToSquared(Hd))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(v_);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);rl(this._multiDrawCounts,r),rl(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),rl(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),rl(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),rl(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...i.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new zt,this._initializeGeometry(s));const o=this.geometry;s.index&&rl(s.index.array,o.index.array);for(const a in s.attributes)rl(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Bi.material=this.material,Bi.geometry.index=o.index,Bi.geometry.attributes=o.attributes,Bi.geometry.boundingBox===null&&(Bi.geometry.boundingBox=new Wi),Bi.geometry.boundingSphere===null&&(Bi.geometry.boundingSphere=new Ti);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const u=i[a].geometryIndex,h=r[u];Bi.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(a,Bi.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,Bi.geometry.boundingBox),this.getBoundingSphereAt(u,Bi.geometry.boundingSphere),Bi.raycast(e,Pm);for(let f=0,p=Pm.length;f<p;f++){const m=Pm[f];m.object=this,m.batchId=a,t.push(m)}Pm.length=0}Bi.material=null,Bi.geometry.index=null,Bi.geometry.attributes={},Bi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,h=this._multiDrawCounts,f=this._geometryInfo,p=this.perObjectFrustumCulled,m=this._indirectTexture,y=m.image.data,S=i.isArrayCamera?CG:a2;p&&!i.isArrayCamera&&(fr.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),a2.setFromProjectionMatrix(fr,i.coordinateSystem,i.reversedDepth));let x=0;if(this.sortObjects){fr.copy(this.matrixWorld).invert(),Hd.setFromMatrixPosition(i.matrixWorld).applyMatrix4(fr),l2.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(fr);for(let M=0,E=l.length;M<E;M++)if(l[M].visible&&l[M].active){const A=l[M].geometryIndex;this.getMatrixAt(M,fr),this.getBoundingSphereAt(A,il).applyMatrix4(fr);let P=!1;if(p&&(P=!S.intersectsSphere(il,i)),!P){const L=f[A],N=PG.subVectors(il.center,Hd).dot(l2);y_.push(L.start,L.count,N,M)}}const g=y_.list,_=this.customSort;_===null?g.sort(s.transparent?bG:EG):_.call(this,g,i);for(let M=0,E=g.length;M<E;M++){const A=g[M];u[x]=A.start*a,h[x]=A.count,y[x]=A.index,x++}y_.reset()}else for(let g=0,_=l.length;g<_;g++)if(l[g].visible&&l[g].active){const M=l[g].geometryIndex;let E=!1;if(p&&(this.getMatrixAt(g,fr),this.getBoundingSphereAt(M,il).applyMatrix4(fr),E=!S.intersectsSphere(il,i)),!E){const A=f[M];u[x]=A.start*a,h[x]=A.count,y[x]=g,x++}}m.needsUpdate=!0,this._multiDrawCount=x,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class ar extends Xi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ft(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const W0=new V,j0=new V,c2=new kt,Gd=new tc,Rm=new Ti,x_=new V,u2=new V;class La extends ln{constructor(e=new zt,t=new ar){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)W0.fromBufferAttribute(t,r-1),j0.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=W0.distanceTo(j0);e.setAttribute("lineDistance",new gt(i,1))}else nt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Rm.copy(i.boundingSphere),Rm.applyMatrix4(r),Rm.radius+=s,e.ray.intersectsSphere(Rm)===!1)return;c2.copy(r).invert(),Gd.copy(e.ray).applyMatrix4(c2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,h=i.index,p=i.attributes.position;if(h!==null){const m=Math.max(0,o.start),y=Math.min(h.count,o.start+o.count);for(let S=m,x=y-1;S<x;S+=u){const g=h.getX(S),_=h.getX(S+1),M=Im(this,e,Gd,l,g,_,S);M&&t.push(M)}if(this.isLineLoop){const S=h.getX(y-1),x=h.getX(m),g=Im(this,e,Gd,l,S,x,y-1);g&&t.push(g)}}else{const m=Math.max(0,o.start),y=Math.min(p.count,o.start+o.count);for(let S=m,x=y-1;S<x;S+=u){const g=Im(this,e,Gd,l,S,S+1,S);g&&t.push(g)}if(this.isLineLoop){const S=Im(this,e,Gd,l,y-1,m,y-1);S&&t.push(S)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Im(n,e,t,i,r,s,o){const a=n.geometry.attributes.position;if(W0.fromBufferAttribute(a,r),j0.fromBufferAttribute(a,s),t.distanceSqToSegment(W0,j0,x_,u2)>i)return;x_.applyMatrix4(n.matrixWorld);const u=e.ray.origin.distanceTo(x_);if(!(u<e.near||u>e.far))return{distance:u,point:u2.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const d2=new V,h2=new V;class no extends La{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)d2.fromBufferAttribute(t,r),h2.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+d2.distanceTo(h2);e.setAttribute("lineDistance",new gt(i,1))}else nt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class BL extends La{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class NM extends Xi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ft(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const f2=new kt,wS=new tc,Nm=new Ti,Lm=new V;class zL extends ln{constructor(e=new zt,t=new NM){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Nm.copy(i.boundingSphere),Nm.applyMatrix4(r),Nm.radius+=s,e.ray.intersectsSphere(Nm)===!1)return;f2.copy(r).invert(),wS.copy(e.ray).applyMatrix4(f2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,f=i.attributes.position;if(u!==null){const p=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let y=p,S=m;y<S;y++){const x=u.getX(y);Lm.fromBufferAttribute(f,x),p2(Lm,x,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let y=p,S=m;y<S;y++)Lm.fromBufferAttribute(f,y),p2(Lm,y,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function p2(n,e,t,i,r,s,o){const a=wS.distanceSqToPoint(n);if(a<t){const l=new V;wS.closestPointToPoint(n,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class VL extends vn{constructor(e,t,i,r,s=nn,o=nn,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const h=this;function f(){h.needsUpdate=!0,h._requestVideoFrameCallbackId=e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(f))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class IG extends VL{constructor(e,t,i,r,s,o,a,l){super({},e,t,i,r,s,o,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class NG extends vn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=$n,this.minFilter=$n,this.generateMipmaps=!1,this.needsUpdate=!0}}class Fv extends vn{constructor(e,t,i,r,s,o,a,l,u,h,f,p){super(null,o,a,l,u,h,r,s,f,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class LG extends Fv{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Wn,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class DG extends Fv{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Cs),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class FG extends vn{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Zl extends vn{constructor(e,t,i=Fr,r,s,o,a=$n,l=$n,u,h=Qs,f=1){if(h!==Qs&&h!==da)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const p={width:e,height:t,depth:f};super(p,r,s,o,a,l,h,i,u),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new ha(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class HL extends Zl{constructor(e,t=Fr,i=Cs,r,s,o=$n,a=$n,l,u=Qs){const h={width:e,height:e,depth:1},f=[h,h,h,h,h,h];super(e,e,t,i,r,s,o,a,l,u),this.image=f,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class LM extends vn{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Uv extends zt{constructor(e=1,t=1,i=4,r=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:s},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const o=[],a=[],l=[],u=[],h=t/2,f=Math.PI/2*e,p=t,m=2*f+p,y=i*2+s,S=r+1,x=new V,g=new V;for(let _=0;_<=y;_++){let M=0,E=0,A=0,P=0;if(_<=i){const C=_/i,R=C*Math.PI/2;E=-h-e*Math.cos(R),A=e*Math.sin(R),P=-e*Math.cos(R),M=C*f}else if(_<=i+s){const C=(_-i)/s;E=-h+C*t,A=e,P=0,M=f+C*p}else{const C=(_-i-s)/i,R=C*Math.PI/2;E=h+e*Math.sin(R),A=e*Math.cos(R),P=e*Math.sin(R),M=f+p+C*f}const L=Math.max(0,Math.min(1,M/m));let N=0;_===0?N=.5/r:_===y&&(N=-.5/r);for(let C=0;C<=r;C++){const R=C/r,k=R*Math.PI*2,H=Math.sin(k),$=Math.cos(k);g.x=-A*$,g.y=E,g.z=A*H,a.push(g.x,g.y,g.z),x.set(-A*$,P,A*H),x.normalize(),l.push(x.x,x.y,x.z),u.push(R+N,L)}if(_>0){const C=(_-1)*S;for(let R=0;R<r;R++){const k=C+R,H=C+R+1,$=_*S+R,ne=_*S+R+1;o.push(k,H,$),o.push(H,ne,$)}}}this.setIndex(o),this.setAttribute("position",new gt(a,3)),this.setAttribute("normal",new gt(l,3)),this.setAttribute("uv",new gt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Uv(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class kv extends zt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new V,h=new Ee;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=t;f++,p+=3){const m=i+f/t*r;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new gt(o,3)),this.setAttribute("normal",new gt(a,3)),this.setAttribute("uv",new gt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kv(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class zf extends zt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const h=[],f=[],p=[],m=[];let y=0;const S=[],x=i/2;let g=0;_(),o===!1&&(e>0&&M(!0),t>0&&M(!1)),this.setIndex(h),this.setAttribute("position",new gt(f,3)),this.setAttribute("normal",new gt(p,3)),this.setAttribute("uv",new gt(m,2));function _(){const E=new V,A=new V;let P=0;const L=(t-e)/i;for(let N=0;N<=s;N++){const C=[],R=N/s,k=R*(t-e)+e;for(let H=0;H<=r;H++){const $=H/r,ne=$*l+a,le=Math.sin(ne),ee=Math.cos(ne);A.x=k*le,A.y=-R*i+x,A.z=k*ee,f.push(A.x,A.y,A.z),E.set(le,L,ee).normalize(),p.push(E.x,E.y,E.z),m.push($,1-R),C.push(y++)}S.push(C)}for(let N=0;N<r;N++)for(let C=0;C<s;C++){const R=S[C][N],k=S[C+1][N],H=S[C+1][N+1],$=S[C][N+1];(e>0||C!==0)&&(h.push(R,k,$),P+=3),(t>0||C!==s-1)&&(h.push(k,H,$),P+=3)}u.addGroup(g,P,0),g+=P}function M(E){const A=y,P=new Ee,L=new V;let N=0;const C=E===!0?e:t,R=E===!0?1:-1;for(let H=1;H<=r;H++)f.push(0,x*R,0),p.push(0,R,0),m.push(.5,.5),y++;const k=y;for(let H=0;H<=r;H++){const ne=H/r*l+a,le=Math.cos(ne),ee=Math.sin(ne);L.x=C*ee,L.y=x*R,L.z=C*le,f.push(L.x,L.y,L.z),p.push(0,R,0),P.x=le*.5+.5,P.y=ee*.5*R+.5,m.push(P.x,P.y),y++}for(let H=0;H<r;H++){const $=A+H,ne=k+H;E===!0?h.push(ne,ne+1,$):h.push(ne+1,ne,$),N+=3}u.addGroup(g,N,E===!0?1:2),g+=N}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Vf extends zf{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Vf(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ba extends zt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),u(i),h(),this.setAttribute("position",new gt(s,3)),this.setAttribute("normal",new gt(s.slice(),3)),this.setAttribute("uv",new gt(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const M=new V,E=new V,A=new V;for(let P=0;P<t.length;P+=3)m(t[P+0],M),m(t[P+1],E),m(t[P+2],A),l(M,E,A,_)}function l(_,M,E,A){const P=A+1,L=[];for(let N=0;N<=P;N++){L[N]=[];const C=_.clone().lerp(E,N/P),R=M.clone().lerp(E,N/P),k=P-N;for(let H=0;H<=k;H++)H===0&&N===P?L[N][H]=C:L[N][H]=C.clone().lerp(R,H/k)}for(let N=0;N<P;N++)for(let C=0;C<2*(P-N)-1;C++){const R=Math.floor(C/2);C%2===0?(p(L[N][R+1]),p(L[N+1][R]),p(L[N][R])):(p(L[N][R+1]),p(L[N+1][R+1]),p(L[N+1][R]))}}function u(_){const M=new V;for(let E=0;E<s.length;E+=3)M.x=s[E+0],M.y=s[E+1],M.z=s[E+2],M.normalize().multiplyScalar(_),s[E+0]=M.x,s[E+1]=M.y,s[E+2]=M.z}function h(){const _=new V;for(let M=0;M<s.length;M+=3){_.x=s[M+0],_.y=s[M+1],_.z=s[M+2];const E=x(_)/2/Math.PI+.5,A=g(_)/Math.PI+.5;o.push(E,1-A)}y(),f()}function f(){for(let _=0;_<o.length;_+=6){const M=o[_+0],E=o[_+2],A=o[_+4],P=Math.max(M,E,A),L=Math.min(M,E,A);P>.9&&L<.1&&(M<.2&&(o[_+0]+=1),E<.2&&(o[_+2]+=1),A<.2&&(o[_+4]+=1))}}function p(_){s.push(_.x,_.y,_.z)}function m(_,M){const E=_*3;M.x=e[E+0],M.y=e[E+1],M.z=e[E+2]}function y(){const _=new V,M=new V,E=new V,A=new V,P=new Ee,L=new Ee,N=new Ee;for(let C=0,R=0;C<s.length;C+=9,R+=6){_.set(s[C+0],s[C+1],s[C+2]),M.set(s[C+3],s[C+4],s[C+5]),E.set(s[C+6],s[C+7],s[C+8]),P.set(o[R+0],o[R+1]),L.set(o[R+2],o[R+3]),N.set(o[R+4],o[R+5]),A.copy(_).add(M).add(E).divideScalar(3);const k=x(A);S(P,R+0,_,k),S(L,R+2,M,k),S(N,R+4,E,k)}}function S(_,M,E,A){A<0&&_.x===1&&(o[M]=_.x-1),E.x===0&&E.z===0&&(o[M]=A/2/Math.PI+.5)}function x(_){return Math.atan2(_.z,-_.x)}function g(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ba(e.vertices,e.indices,e.radius,e.detail)}}class Ov extends Ba{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ov(e.radius,e.detail)}}const Dm=new V,Fm=new V,__=new V,Um=new gr;class GL extends zt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(kl*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],h=["a","b","c"],f=new Array(3),p={},m=[];for(let y=0;y<l;y+=3){o?(u[0]=o.getX(y),u[1]=o.getX(y+1),u[2]=o.getX(y+2)):(u[0]=y,u[1]=y+1,u[2]=y+2);const{a:S,b:x,c:g}=Um;if(S.fromBufferAttribute(a,u[0]),x.fromBufferAttribute(a,u[1]),g.fromBufferAttribute(a,u[2]),Um.getNormal(__),f[0]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,f[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,f[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let _=0;_<3;_++){const M=(_+1)%3,E=f[_],A=f[M],P=Um[h[_]],L=Um[h[M]],N=`${E}_${A}`,C=`${A}_${E}`;C in p&&p[C]?(__.dot(p[C].normal)<=s&&(m.push(P.x,P.y,P.z),m.push(L.x,L.y,L.z)),p[C]=null):N in p||(p[N]={index0:u[_],index1:u[M],normal:__.clone()})}}for(const y in p)if(p[y]){const{index0:S,index1:x}=p[y];Dm.fromBufferAttribute(a,S),Fm.fromBufferAttribute(a,x),m.push(Dm.x,Dm.y,Dm.z),m.push(Fm.x,Fm.y,Fm.z)}this.setAttribute("position",new gt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Ps{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){nt("Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const h=i[r],p=i[r+1]-h,m=(o-h)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Ee:new V);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new V,r=[],s=[],o=[],a=new V,l=new kt;for(let m=0;m<=e;m++){const y=m/e;r[m]=this.getTangentAt(y,new V)}s[0]=new V,o[0]=new V;let u=Number.MAX_VALUE;const h=Math.abs(r[0].x),f=Math.abs(r[0].y),p=Math.abs(r[0].z);h<=u&&(u=h,i.set(1,0,0)),f<=u&&(u=f,i.set(0,1,0)),p<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(Ut(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,y))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(Ut(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(r[y],m*y)),o[y].crossVectors(r[y],s[y])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Bv extends Ps{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Ee){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=u-this.aY;l=p*h-m*f+this.aX,u=p*f+m*h+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class WL extends Bv{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function DM(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,h,f){let p=(o-s)/u-(a-s)/(u+h)+(a-o)/h,m=(a-o)/h-(l-o)/(h+f)+(l-a)/f;p*=h,m*=h,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const km=new V,S_=new DM,w_=new DM,M_=new DM;class jL extends Ps{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new V){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,h;this.closed||a>0?u=r[(a-1)%s]:(km.subVectors(r[0],r[1]).add(r[0]),u=km);const f=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(km.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=km),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let y=Math.pow(u.distanceToSquared(f),m),S=Math.pow(f.distanceToSquared(p),m),x=Math.pow(p.distanceToSquared(h),m);S<1e-4&&(S=1),y<1e-4&&(y=S),x<1e-4&&(x=S),S_.initNonuniformCatmullRom(u.x,f.x,p.x,h.x,y,S,x),w_.initNonuniformCatmullRom(u.y,f.y,p.y,h.y,y,S,x),M_.initNonuniformCatmullRom(u.z,f.z,p.z,h.z,y,S,x)}else this.curveType==="catmullrom"&&(S_.initCatmullRom(u.x,f.x,p.x,h.x,this.tension),w_.initCatmullRom(u.y,f.y,p.y,h.y,this.tension),M_.initCatmullRom(u.z,f.z,p.z,h.z,this.tension));return i.set(S_.calc(l),w_.calc(l),M_.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new V().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function m2(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function UG(n,e){const t=1-n;return t*t*e}function kG(n,e){return 2*(1-n)*n*e}function OG(n,e){return n*n*e}function Th(n,e,t,i){return UG(n,e)+kG(n,t)+OG(n,i)}function BG(n,e){const t=1-n;return t*t*t*e}function zG(n,e){const t=1-n;return 3*t*t*n*e}function VG(n,e){return 3*(1-n)*n*n*e}function HG(n,e){return n*n*n*e}function Ah(n,e,t,i,r){return BG(n,e)+zG(n,t)+VG(n,i)+HG(n,r)}class FM extends Ps{constructor(e=new Ee,t=new Ee,i=new Ee,r=new Ee){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ee){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ah(e,r.x,s.x,o.x,a.x),Ah(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class XL extends Ps{constructor(e=new V,t=new V,i=new V,r=new V){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new V){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ah(e,r.x,s.x,o.x,a.x),Ah(e,r.y,s.y,o.y,a.y),Ah(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class UM extends Ps{constructor(e=new Ee,t=new Ee){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ee){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ee){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class YL extends Ps{constructor(e=new V,t=new V){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new V){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new V){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kM extends Ps{constructor(e=new Ee,t=new Ee,i=new Ee){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ee){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Th(e,r.x,s.x,o.x),Th(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class OM extends Ps{constructor(e=new V,t=new V,i=new V){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new V){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Th(e,r.x,s.x,o.x),Th(e,r.y,s.y,o.y),Th(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class BM extends Ps{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ee){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],h=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(m2(a,l.x,u.x,h.x,f.x),m2(a,l.y,u.y,h.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Ee().fromArray(r))}return this}}var X0=Object.freeze({__proto__:null,ArcCurve:WL,CatmullRomCurve3:jL,CubicBezierCurve:FM,CubicBezierCurve3:XL,EllipseCurve:Bv,LineCurve:UM,LineCurve3:YL,QuadraticBezierCurve:kM,QuadraticBezierCurve3:OM,SplineCurve:BM});class qL extends Ps{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new X0[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const h=l[u];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new X0[r.type]().fromJSON(r))}return this}}class Y0 extends qL{constructor(e){super(),this.type="Path",this.currentPoint=new Ee,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new UM(this.currentPoint.clone(),new Ee(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new kM(this.currentPoint.clone(),new Ee(e,t),new Ee(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new FM(this.currentPoint.clone(),new Ee(e,t),new Ee(i,r),new Ee(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new BM(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,t+h,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const u=new Bv(e,t,i,r,s,o,a,l);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Bl extends Y0{constructor(e){super(e),this.uuid=Nr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Y0().fromJSON(r))}return this}}function GG(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=ZL(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u;if(i&&(s=qG(n,e,s,t)),n.length>80*t){a=n[0],l=n[1];let h=a,f=l;for(let p=t;p<r;p+=t){const m=n[p],y=n[p+1];m<a&&(a=m),y<l&&(l=y),m>h&&(h=m),y>f&&(f=y)}u=Math.max(h-a,f-l),u=u!==0?32767/u:0}return uf(s,o,t,a,l,u,0),o}function ZL(n,e,t,i,r){let s;if(r===sW(n,e,t,i)>0)for(let o=e;o<t;o+=i)s=g2(o/i|0,n[o],n[o+1],s);else for(let o=t-i;o>=e;o-=i)s=g2(o/i|0,n[o],n[o+1],s);return s&&Vu(s,s.next)&&(hf(s),s=s.next),s}function $l(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Vu(t,t.next)||Fn(t.prev,t,t.next)===0)){if(hf(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function uf(n,e,t,i,r,s,o){if(!n)return;!o&&s&&QG(n,i,r,s);let a=n;for(;n.prev!==n.next;){const l=n.prev,u=n.next;if(s?jG(n,i,r,s):WG(n)){e.push(l.i,n.i,u.i),hf(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=XG($l(n),e),uf(n,e,t,i,r,s,2)):o===2&&YG(n,e,t,i,r,s):uf($l(n),e,t,i,r,s,1);break}}}function WG(n){const e=n.prev,t=n,i=n.next;if(Fn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,u=i.y,h=Math.min(r,s,o),f=Math.min(a,l,u),p=Math.max(r,s,o),m=Math.max(a,l,u);let y=i.next;for(;y!==e;){if(y.x>=h&&y.x<=p&&y.y>=f&&y.y<=m&&ih(r,a,s,l,o,u,y.x,y.y)&&Fn(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function jG(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Fn(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,h=r.y,f=s.y,p=o.y,m=Math.min(a,l,u),y=Math.min(h,f,p),S=Math.max(a,l,u),x=Math.max(h,f,p),g=MS(m,y,e,t,i),_=MS(S,x,e,t,i);let M=n.prevZ,E=n.nextZ;for(;M&&M.z>=g&&E&&E.z<=_;){if(M.x>=m&&M.x<=S&&M.y>=y&&M.y<=x&&M!==r&&M!==o&&ih(a,h,l,f,u,p,M.x,M.y)&&Fn(M.prev,M,M.next)>=0||(M=M.prevZ,E.x>=m&&E.x<=S&&E.y>=y&&E.y<=x&&E!==r&&E!==o&&ih(a,h,l,f,u,p,E.x,E.y)&&Fn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;M&&M.z>=g;){if(M.x>=m&&M.x<=S&&M.y>=y&&M.y<=x&&M!==r&&M!==o&&ih(a,h,l,f,u,p,M.x,M.y)&&Fn(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;E&&E.z<=_;){if(E.x>=m&&E.x<=S&&E.y>=y&&E.y<=x&&E!==r&&E!==o&&ih(a,h,l,f,u,p,E.x,E.y)&&Fn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function XG(n,e){let t=n;do{const i=t.prev,r=t.next.next;!Vu(i,r)&&KL(i,t,t.next,r)&&df(i,r)&&df(r,i)&&(e.push(i.i,t.i,r.i),hf(t),hf(t.next),t=n=r),t=t.next}while(t!==n);return $l(t)}function YG(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&nW(o,a)){let l=JL(o,a);o=$l(o,o.next),l=$l(l,l.next),uf(o,e,t,i,r,s,0),uf(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function qG(n,e,t,i){const r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,u=ZL(n,a,l,i,!1);u===u.next&&(u.steiner=!0),r.push(tW(u))}r.sort(ZG);for(let s=0;s<r.length;s++)t=$G(r[s],t);return t}function ZG(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function $G(n,e){const t=KG(n,e);if(!t)return e;const i=JL(t,n);return $l(i,i.next),$l(t,t.next)}function KG(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;if(Vu(n,t))return t;do{if(Vu(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const f=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=i&&f>s&&(s=f,o=t.x<t.next.x?t:t.next,f===i))return o}t=t.next}while(t!==e);if(!o)return null;const a=o,l=o.x,u=o.y;let h=1/0;t=o;do{if(i>=t.x&&t.x>=l&&i!==t.x&&$L(r<u?i:s,r,l,u,r<u?s:i,r,t.x,t.y)){const f=Math.abs(r-t.y)/(i-t.x);df(t,n)&&(f<h||f===h&&(t.x>o.x||t.x===o.x&&JG(o,t)))&&(o=t,h=f)}t=t.next}while(t!==a);return o}function JG(n,e){return Fn(n.prev,n,e.prev)<0&&Fn(e.next,n,n.next)<0}function QG(n,e,t,i){let r=n;do r.z===0&&(r.z=MS(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,eW(r)}function eW(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let o=i,a=0;for(let u=0;u<t&&(a++,o=o.nextZ,!!o);u++);let l=t;for(;a>0||l>0&&o;)a!==0&&(l===0||!o||i.z<=o.z)?(r=i,i=i.nextZ,a--):(r=o,o=o.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=o}s.nextZ=null,t*=2}while(e>1);return n}function MS(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function tW(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function $L(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function ih(n,e,t,i,r,s,o,a){return!(n===o&&e===a)&&$L(n,e,t,i,r,s,o,a)}function nW(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!iW(n,e)&&(df(n,e)&&df(e,n)&&rW(n,e)&&(Fn(n.prev,n,e.prev)||Fn(n,e.prev,e))||Vu(n,e)&&Fn(n.prev,n,n.next)>0&&Fn(e.prev,e,e.next)>0)}function Fn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Vu(n,e){return n.x===e.x&&n.y===e.y}function KL(n,e,t,i){const r=Bm(Fn(n,e,t)),s=Bm(Fn(n,e,i)),o=Bm(Fn(t,i,n)),a=Bm(Fn(t,i,e));return!!(r!==s&&o!==a||r===0&&Om(n,t,e)||s===0&&Om(n,i,e)||o===0&&Om(t,n,i)||a===0&&Om(t,e,i))}function Om(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Bm(n){return n>0?1:n<0?-1:0}function iW(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&KL(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function df(n,e){return Fn(n.prev,n,n.next)<0?Fn(n,e,n.next)>=0&&Fn(n,n.prev,e)>=0:Fn(n,e,n.prev)<0||Fn(n,n.next,e)<0}function rW(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function JL(n,e){const t=ES(n.i,n.x,n.y),i=ES(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function g2(n,e,t,i){const r=ES(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function hf(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function ES(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function sW(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class oW{static triangulate(e,t,i=2){return GG(e,t,i)}}class Ms{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Ms.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];v2(e),y2(i,e);let o=e.length;t.forEach(v2);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,y2(i,t[l]);const a=oW.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function v2(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function y2(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class zv extends zt{constructor(e=new Bl([new Ee(.5,.5),new Ee(-.5,.5),new Ee(-.5,-.5),new Ee(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new gt(r,3)),this.setAttribute("uv",new gt(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:m-.1,S=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,_=t.UVGenerator!==void 0?t.UVGenerator:aW;let M,E=!1,A,P,L,N;if(g){M=g.getSpacedPoints(h),E=!0,p=!1;const Te=g.isCatmullRomCurve3?g.closed:!1;A=g.computeFrenetFrames(h,Te),P=new V,L=new V,N=new V}p||(x=0,m=0,y=0,S=0);const C=a.extractPoints(u);let R=C.shape;const k=C.holes;if(!Ms.isClockWise(R)){R=R.reverse();for(let Te=0,Ue=k.length;Te<Ue;Te++){const Pe=k[Te];Ms.isClockWise(Pe)&&(k[Te]=Pe.reverse())}}function $(Te){const Pe=10000000000000001e-36;let Je=Te[0];for(let G=1;G<=Te.length;G++){const St=G%Te.length,tt=Te[St],Pt=tt.x-Je.x,je=tt.y-Je.y,z=Pt*Pt+je*je,D=Math.max(Math.abs(tt.x),Math.abs(tt.y),Math.abs(Je.x),Math.abs(Je.y)),ie=Pe*D*D;if(z<=ie){Te.splice(St,1),G--;continue}Je=tt}}$(R),k.forEach($);const ne=k.length,le=R;for(let Te=0;Te<ne;Te++){const Ue=k[Te];R=R.concat(Ue)}function ee(Te,Ue,Pe){return Ue||At("ExtrudeGeometry: vec does not exist"),Te.clone().addScaledVector(Ue,Pe)}const Q=R.length;function O(Te,Ue,Pe){let Je,G,St;const tt=Te.x-Ue.x,Pt=Te.y-Ue.y,je=Pe.x-Te.x,z=Pe.y-Te.y,D=tt*tt+Pt*Pt,ie=tt*z-Pt*je;if(Math.abs(ie)>Number.EPSILON){const ge=Math.sqrt(D),Ae=Math.sqrt(je*je+z*z),ve=Ue.x-Pt/ge,dt=Ue.y+tt/ge,qe=Pe.x-z/Ae,ht=Pe.y+je/Ae,It=((qe-ve)*z-(ht-dt)*je)/(tt*z-Pt*je);Je=ve+tt*It-Te.x,G=dt+Pt*It-Te.y;const Ne=Je*Je+G*G;if(Ne<=2)return new Ee(Je,G);St=Math.sqrt(Ne/2)}else{let ge=!1;tt>Number.EPSILON?je>Number.EPSILON&&(ge=!0):tt<-Number.EPSILON?je<-Number.EPSILON&&(ge=!0):Math.sign(Pt)===Math.sign(z)&&(ge=!0),ge?(Je=-Pt,G=tt,St=Math.sqrt(D)):(Je=tt,G=Pt,St=Math.sqrt(D/2))}return new Ee(Je/St,G/St)}const Y=[];for(let Te=0,Ue=le.length,Pe=Ue-1,Je=Te+1;Te<Ue;Te++,Pe++,Je++)Pe===Ue&&(Pe=0),Je===Ue&&(Je=0),Y[Te]=O(le[Te],le[Pe],le[Je]);const X=[];let se,me=Y.concat();for(let Te=0,Ue=ne;Te<Ue;Te++){const Pe=k[Te];se=[];for(let Je=0,G=Pe.length,St=G-1,tt=Je+1;Je<G;Je++,St++,tt++)St===G&&(St=0),tt===G&&(tt=0),se[Je]=O(Pe[Je],Pe[St],Pe[tt]);X.push(se),me=me.concat(se)}let Re;if(x===0)Re=Ms.triangulateShape(le,k);else{const Te=[],Ue=[];for(let Pe=0;Pe<x;Pe++){const Je=Pe/x,G=m*Math.cos(Je*Math.PI/2),St=y*Math.sin(Je*Math.PI/2)+S;for(let tt=0,Pt=le.length;tt<Pt;tt++){const je=ee(le[tt],Y[tt],St);wt(je.x,je.y,-G),Je===0&&Te.push(je)}for(let tt=0,Pt=ne;tt<Pt;tt++){const je=k[tt];se=X[tt];const z=[];for(let D=0,ie=je.length;D<ie;D++){const ge=ee(je[D],se[D],St);wt(ge.x,ge.y,-G),Je===0&&z.push(ge)}Je===0&&Ue.push(z)}}Re=Ms.triangulateShape(Te,Ue)}const at=Re.length,Ct=y+S;for(let Te=0;Te<Q;Te++){const Ue=p?ee(R[Te],me[Te],Ct):R[Te];E?(L.copy(A.normals[0]).multiplyScalar(Ue.x),P.copy(A.binormals[0]).multiplyScalar(Ue.y),N.copy(M[0]).add(L).add(P),wt(N.x,N.y,N.z)):wt(Ue.x,Ue.y,0)}for(let Te=1;Te<=h;Te++)for(let Ue=0;Ue<Q;Ue++){const Pe=p?ee(R[Ue],me[Ue],Ct):R[Ue];E?(L.copy(A.normals[Te]).multiplyScalar(Pe.x),P.copy(A.binormals[Te]).multiplyScalar(Pe.y),N.copy(M[Te]).add(L).add(P),wt(N.x,N.y,N.z)):wt(Pe.x,Pe.y,f/h*Te)}for(let Te=x-1;Te>=0;Te--){const Ue=Te/x,Pe=m*Math.cos(Ue*Math.PI/2),Je=y*Math.sin(Ue*Math.PI/2)+S;for(let G=0,St=le.length;G<St;G++){const tt=ee(le[G],Y[G],Je);wt(tt.x,tt.y,f+Pe)}for(let G=0,St=k.length;G<St;G++){const tt=k[G];se=X[G];for(let Pt=0,je=tt.length;Pt<je;Pt++){const z=ee(tt[Pt],se[Pt],Je);E?wt(z.x,z.y+M[h-1].y,M[h-1].x+Pe):wt(z.x,z.y,f+Pe)}}}ue(),Se();function ue(){const Te=r.length/3;if(p){let Ue=0,Pe=Q*Ue;for(let Je=0;Je<at;Je++){const G=Re[Je];st(G[2]+Pe,G[1]+Pe,G[0]+Pe)}Ue=h+x*2,Pe=Q*Ue;for(let Je=0;Je<at;Je++){const G=Re[Je];st(G[0]+Pe,G[1]+Pe,G[2]+Pe)}}else{for(let Ue=0;Ue<at;Ue++){const Pe=Re[Ue];st(Pe[2],Pe[1],Pe[0])}for(let Ue=0;Ue<at;Ue++){const Pe=Re[Ue];st(Pe[0]+Q*h,Pe[1]+Q*h,Pe[2]+Q*h)}}i.addGroup(Te,r.length/3-Te,0)}function Se(){const Te=r.length/3;let Ue=0;et(le,Ue),Ue+=le.length;for(let Pe=0,Je=k.length;Pe<Je;Pe++){const G=k[Pe];et(G,Ue),Ue+=G.length}i.addGroup(Te,r.length/3-Te,1)}function et(Te,Ue){let Pe=Te.length;for(;--Pe>=0;){const Je=Pe;let G=Pe-1;G<0&&(G=Te.length-1);for(let St=0,tt=h+x*2;St<tt;St++){const Pt=Q*St,je=Q*(St+1),z=Ue+Je+Pt,D=Ue+G+Pt,ie=Ue+G+je,ge=Ue+Je+je;Ft(z,D,ie,ge)}}}function wt(Te,Ue,Pe){l.push(Te),l.push(Ue),l.push(Pe)}function st(Te,Ue,Pe){Qt(Te),Qt(Ue),Qt(Pe);const Je=r.length/3,G=_.generateTopUV(i,r,Je-3,Je-2,Je-1);_t(G[0]),_t(G[1]),_t(G[2])}function Ft(Te,Ue,Pe,Je){Qt(Te),Qt(Ue),Qt(Je),Qt(Ue),Qt(Pe),Qt(Je);const G=r.length/3,St=_.generateSideWallUV(i,r,G-6,G-3,G-2,G-1);_t(St[0]),_t(St[1]),_t(St[3]),_t(St[1]),_t(St[2]),_t(St[3])}function Qt(Te){r.push(l[Te*3+0]),r.push(l[Te*3+1]),r.push(l[Te*3+2])}function _t(Te){s.push(Te.x),s.push(Te.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return lW(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new X0[r.type]().fromJSON(r)),new zv(i,e.options)}}const aW={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],u=e[r*3],h=e[r*3+1];return[new Ee(s,o),new Ee(a,l),new Ee(u,h)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[i*3],h=e[i*3+1],f=e[i*3+2],p=e[r*3],m=e[r*3+1],y=e[r*3+2],S=e[s*3],x=e[s*3+1],g=e[s*3+2];return Math.abs(a-h)<Math.abs(o-u)?[new Ee(o,1-l),new Ee(u,1-f),new Ee(p,1-y),new Ee(S,1-g)]:[new Ee(a,1-l),new Ee(h,1-f),new Ee(m,1-y),new Ee(x,1-g)]}};function lW(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Hf extends Ba{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Hf(e.radius,e.detail)}}class Vv extends zt{constructor(e=[new Ee(0,-.5),new Ee(.5,0),new Ee(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Ut(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],h=1/t,f=new V,p=new Ee,m=new V,y=new V,S=new V;let x=0,g=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:x=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-x,m.z=g*0,S.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(S.x,S.y,S.z);break;default:x=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-x,m.z=g*0,y.copy(m),m.x+=S.x,m.y+=S.y,m.z+=S.z,m.normalize(),l.push(m.x,m.y,m.z),S.copy(y)}for(let _=0;_<=t;_++){const M=i+_*h*r,E=Math.sin(M),A=Math.cos(M);for(let P=0;P<=e.length-1;P++){f.x=e[P].x*E,f.y=e[P].y,f.z=e[P].x*A,o.push(f.x,f.y,f.z),p.x=_/t,p.y=P/(e.length-1),a.push(p.x,p.y);const L=l[3*P+0]*E,N=l[3*P+1],C=l[3*P+0]*A;u.push(L,N,C)}}for(let _=0;_<t;_++)for(let M=0;M<e.length-1;M++){const E=M+_*e.length,A=E,P=E+e.length,L=E+e.length+1,N=E+1;s.push(A,P,N),s.push(L,N,P)}this.setIndex(s),this.setAttribute("position",new gt(o,3)),this.setAttribute("uv",new gt(a,2)),this.setAttribute("normal",new gt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vv(e.points,e.segments,e.phiStart,e.phiLength)}}class Gf extends Ba{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Gf(e.radius,e.detail)}}class za extends zt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),u=a+1,h=l+1,f=e/a,p=t/l,m=[],y=[],S=[],x=[];for(let g=0;g<h;g++){const _=g*p-o;for(let M=0;M<u;M++){const E=M*f-s;y.push(E,-_,0),S.push(0,0,1),x.push(M/a),x.push(1-g/l)}}for(let g=0;g<l;g++)for(let _=0;_<a;_++){const M=_+u*g,E=_+u*(g+1),A=_+1+u*(g+1),P=_+1+u*g;m.push(M,E,P),m.push(E,A,P)}this.setIndex(m),this.setAttribute("position",new gt(y,3)),this.setAttribute("normal",new gt(S,3)),this.setAttribute("uv",new gt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new za(e.width,e.height,e.widthSegments,e.heightSegments)}}class Hv extends zt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],u=[],h=[];let f=e;const p=(t-e)/r,m=new V,y=new Ee;for(let S=0;S<=r;S++){for(let x=0;x<=i;x++){const g=s+x/i*o;m.x=f*Math.cos(g),m.y=f*Math.sin(g),l.push(m.x,m.y,m.z),u.push(0,0,1),y.x=(m.x/t+1)/2,y.y=(m.y/t+1)/2,h.push(y.x,y.y)}f+=p}for(let S=0;S<r;S++){const x=S*(i+1);for(let g=0;g<i;g++){const _=g+x,M=_,E=_+i+1,A=_+i+2,P=_+1;a.push(M,E,P),a.push(E,A,P)}}this.setIndex(a),this.setAttribute("position",new gt(l,3)),this.setAttribute("normal",new gt(u,3)),this.setAttribute("uv",new gt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hv(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Gv extends zt{constructor(e=new Bl([new Ee(0,.5),new Ee(-.5,-.5),new Ee(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new gt(r,3)),this.setAttribute("normal",new gt(s,3)),this.setAttribute("uv",new gt(o,2));function u(h){const f=r.length/3,p=h.extractPoints(t);let m=p.shape;const y=p.holes;Ms.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,g=y.length;x<g;x++){const _=y[x];Ms.isClockWise(_)===!0&&(y[x]=_.reverse())}const S=Ms.triangulateShape(m,y);for(let x=0,g=y.length;x<g;x++){const _=y[x];m=m.concat(_)}for(let x=0,g=m.length;x<g;x++){const _=m[x];r.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let x=0,g=S.length;x<g;x++){const _=S[x],M=_[0]+f,E=_[1]+f,A=_[2]+f;i.push(M,E,A),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return cW(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new Gv(i,e.curveSegments)}}function cW(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Wf extends zt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let u=0;const h=[],f=new V,p=new V,m=[],y=[],S=[],x=[];for(let g=0;g<=i;g++){const _=[],M=g/i;let E=0;g===0&&o===0?E=.5/t:g===i&&l===Math.PI&&(E=-.5/t);for(let A=0;A<=t;A++){const P=A/t;f.x=-e*Math.cos(r+P*s)*Math.sin(o+M*a),f.y=e*Math.cos(o+M*a),f.z=e*Math.sin(r+P*s)*Math.sin(o+M*a),y.push(f.x,f.y,f.z),p.copy(f).normalize(),S.push(p.x,p.y,p.z),x.push(P+E,1-M),_.push(u++)}h.push(_)}for(let g=0;g<i;g++)for(let _=0;_<t;_++){const M=h[g][_+1],E=h[g][_],A=h[g+1][_],P=h[g+1][_+1];(g!==0||o>0)&&m.push(M,E,P),(g!==i-1||l<Math.PI)&&m.push(E,A,P)}this.setIndex(m),this.setAttribute("position",new gt(y,3)),this.setAttribute("normal",new gt(S,3)),this.setAttribute("uv",new gt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Wv extends Ba{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Wv(e.radius,e.detail)}}class jv extends zt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],u=[],h=new V,f=new V,p=new V;for(let m=0;m<=i;m++)for(let y=0;y<=r;y++){const S=y/r*s,x=m/i*Math.PI*2;f.x=(e+t*Math.cos(x))*Math.cos(S),f.y=(e+t*Math.cos(x))*Math.sin(S),f.z=t*Math.sin(x),a.push(f.x,f.y,f.z),h.x=e*Math.cos(S),h.y=e*Math.sin(S),p.subVectors(f,h).normalize(),l.push(p.x,p.y,p.z),u.push(y/r),u.push(m/i)}for(let m=1;m<=i;m++)for(let y=1;y<=r;y++){const S=(r+1)*m+y-1,x=(r+1)*(m-1)+y-1,g=(r+1)*(m-1)+y,_=(r+1)*m+y;o.push(S,x,_),o.push(x,g,_)}this.setIndex(o),this.setAttribute("position",new gt(a,3)),this.setAttribute("normal",new gt(l,3)),this.setAttribute("uv",new gt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jv(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Xv extends zt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],h=[],f=new V,p=new V,m=new V,y=new V,S=new V,x=new V,g=new V;for(let M=0;M<=i;++M){const E=M/i*s*Math.PI*2;_(E,s,o,e,m),_(E+.01,s,o,e,y),x.subVectors(y,m),g.addVectors(y,m),S.crossVectors(x,g),g.crossVectors(S,x),S.normalize(),g.normalize();for(let A=0;A<=r;++A){const P=A/r*Math.PI*2,L=-t*Math.cos(P),N=t*Math.sin(P);f.x=m.x+(L*g.x+N*S.x),f.y=m.y+(L*g.y+N*S.y),f.z=m.z+(L*g.z+N*S.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),u.push(p.x,p.y,p.z),h.push(M/i),h.push(A/r)}}for(let M=1;M<=i;M++)for(let E=1;E<=r;E++){const A=(r+1)*(M-1)+(E-1),P=(r+1)*M+(E-1),L=(r+1)*M+E,N=(r+1)*(M-1)+E;a.push(A,P,N),a.push(P,L,N)}this.setIndex(a),this.setAttribute("position",new gt(l,3)),this.setAttribute("normal",new gt(u,3)),this.setAttribute("uv",new gt(h,2));function _(M,E,A,P,L){const N=Math.cos(M),C=Math.sin(M),R=A/E*M,k=Math.cos(R);L.x=P*(2+k)*.5*N,L.y=P*(2+k)*C*.5,L.z=P*Math.sin(R)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xv(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Yv extends zt{constructor(e=new OM(new V(-1,-1,0),new V(-1,1,0),new V(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new V,l=new V,u=new Ee;let h=new V;const f=[],p=[],m=[],y=[];S(),this.setIndex(y),this.setAttribute("position",new gt(f,3)),this.setAttribute("normal",new gt(p,3)),this.setAttribute("uv",new gt(m,2));function S(){for(let M=0;M<t;M++)x(M);x(s===!1?t:0),_(),g()}function x(M){h=e.getPointAt(M/t,h);const E=o.normals[M],A=o.binormals[M];for(let P=0;P<=r;P++){const L=P/r*Math.PI*2,N=Math.sin(L),C=-Math.cos(L);l.x=C*E.x+N*A.x,l.y=C*E.y+N*A.y,l.z=C*E.z+N*A.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,f.push(a.x,a.y,a.z)}}function g(){for(let M=1;M<=t;M++)for(let E=1;E<=r;E++){const A=(r+1)*(M-1)+(E-1),P=(r+1)*M+(E-1),L=(r+1)*M+E,N=(r+1)*(M-1)+E;y.push(A,P,N),y.push(P,L,N)}}function _(){for(let M=0;M<=t;M++)for(let E=0;E<=r;E++)u.x=M/t,u.y=E/r,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Yv(new X0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class QL extends zt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new V,s=new V;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,h=l.length;u<h;++u){const f=l[u],p=f.start,m=f.count;for(let y=p,S=p+m;y<S;y+=3)for(let x=0;x<3;x++){const g=a.getX(y+x),_=a.getX(y+(x+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,_),x2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const h=3*a+u,f=3*a+(u+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,f),x2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new gt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function x2(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var _2=Object.freeze({__proto__:null,BoxGeometry:nc,CapsuleGeometry:Uv,CircleGeometry:kv,ConeGeometry:Vf,CylinderGeometry:zf,DodecahedronGeometry:Ov,EdgesGeometry:GL,ExtrudeGeometry:zv,IcosahedronGeometry:Hf,LatheGeometry:Vv,OctahedronGeometry:Gf,PlaneGeometry:za,PolyhedronGeometry:Ba,RingGeometry:Hv,ShapeGeometry:Gv,SphereGeometry:Wf,TetrahedronGeometry:Wv,TorusGeometry:jv,TorusKnotGeometry:Xv,TubeGeometry:Yv,WireframeGeometry:QL});class eD extends Xi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ft(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class zM extends rr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class VM extends Xi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ft(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ur,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class tD extends VM{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ee(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ut(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ft(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ft(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ft(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class nD extends Xi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ft(16777215),this.specular=new ft(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ur,this.combine=Lf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class iD extends Xi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ft(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class rD extends Xi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class sD extends Xi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ft(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ur,this.combine=Lf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class HM extends Xi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=vL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class GM extends Xi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class oD extends Xi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ft(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class aD extends ar{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Rl(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function lD(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function bS(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function WM(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push(...o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function uW(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],h=u.getValueSize(),f=[],p=[];for(let m=0;m<u.times.length;++m){const y=u.times[m]*r;if(!(y<t||y>=i)){f.push(u.times[m]);for(let S=0;S<h;++S)p.push(u.values[m*h+S])}}f.length!==0&&(u.times=Rl(f,u.times.constructor),u.values=Rl(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function dW(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(u===void 0)continue;let h=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);let p=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const y=a.times.length-1;let S;if(s<=a.times[0]){const g=h,_=f-h;S=a.values.slice(g,_)}else if(s>=a.times[y]){const g=y*f+h,_=g+f-h;S=a.values.slice(g,_)}else{const g=a.createInterpolant(),_=h,M=f-h;g.evaluate(s),S=g.resultBuffer.slice(_,M)}l==="quaternion"&&new Hi().fromArray(S).normalize().conjugate().toArray(S);const x=u.times.length;for(let g=0;g<x;++g){const _=g*m+p;if(l==="quaternion")Hi.multiplyQuaternionsFlat(u.values,_,S,0,u.values,_);else{const M=m-p*2;for(let E=0;E<M;++E)u.values[_+E]-=S[E]}}}return n.blendMode=bM,n}class hW{static convertArray(e,t){return Rl(e,t)}static isTypedArray(e){return TL(e)}static getKeyframeOrder(e){return lD(e)}static sortedArray(e,t,i){return bS(e,t,i)}static flattenJSON(e,t,i,r){WM(e,t,i,r)}static subclip(e,t,i,r,s=30){return uW(e,t,i,r,s)}static makeClipAdditive(e,t=0,i=e,r=30){return dW(e,t,i,r)}}class jf{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class cD extends jf{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Al,endingEnd:Al}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Cl:s=e,a=2*t-i;break;case sf:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Cl:o=e,l=2*i-t;break;case sf:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const u=(i-t)*.5,h=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,y=(i-t)/(r-t),S=y*y,x=S*y,g=-p*x+2*p*S-p*y,_=(1+p)*x+(-1.5-2*p)*S+(-.5+p)*y+1,M=(-1-m)*x+(1.5+m)*S+.5*y,E=m*x-m*S;for(let A=0;A!==a;++A)s[A]=g*o[h+A]+_*o[u+A]+M*o[l+A]+E*o[f+A];return s}}class jM extends jf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=(i-t)/(r-t),f=1-h;for(let p=0;p!==a;++p)s[p]=o[u+p]*f+o[l+p]*h;return s}}class uD extends jf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class os{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Rl(t,this.TimeBufferType),this.values=Rl(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Rl(e.times,Array),values:Rl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new uD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new jM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new cD(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case rf:t=this.InterpolantFactoryMethodDiscrete;break;case G0:t=this.InterpolantFactoryMethodLinear;break;case yg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return nt("KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return rf;case this.InterpolantFactoryMethodLinear:return G0;case this.InterpolantFactoryMethodSmooth:return yg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(At("KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(At("KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){At("KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){At("KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&TL(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){At("KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===yg,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],h=e[a+1];if(u!==h&&(a!==1||u!==e[0]))if(r)l=!0;else{const f=a*i,p=f-i,m=f+i;for(let y=0;y!==i;++y){const S=t[f+y];if(S!==t[p+y]||S!==t[m+y]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,u=0;u!==i;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}os.prototype.ValueTypeName="";os.prototype.TimeBufferType=Float32Array;os.prototype.ValueBufferType=Float32Array;os.prototype.DefaultInterpolation=G0;class ic extends os{constructor(e,t,i){super(e,t,i)}}ic.prototype.ValueTypeName="bool";ic.prototype.ValueBufferType=Array;ic.prototype.DefaultInterpolation=rf;ic.prototype.InterpolantFactoryMethodLinear=void 0;ic.prototype.InterpolantFactoryMethodSmooth=void 0;class XM extends os{constructor(e,t,i,r){super(e,t,i,r)}}XM.prototype.ValueTypeName="color";class ff extends os{constructor(e,t,i,r){super(e,t,i,r)}}ff.prototype.ValueTypeName="number";class dD extends jf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let u=e*a;for(let h=u+a;u!==h;u+=4)Hi.slerpFlat(s,0,o,u-a,o,u,l);return s}}class Xf extends os{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new dD(this.times,this.values,this.getValueSize(),e)}}Xf.prototype.ValueTypeName="quaternion";Xf.prototype.InterpolantFactoryMethodSmooth=void 0;class rc extends os{constructor(e,t,i){super(e,t,i)}}rc.prototype.ValueTypeName="string";rc.prototype.ValueBufferType=Array;rc.prototype.DefaultInterpolation=rf;rc.prototype.InterpolantFactoryMethodLinear=void 0;rc.prototype.InterpolantFactoryMethodSmooth=void 0;class pf extends os{constructor(e,t,i,r){super(e,t,i,r)}}pf.prototype.ValueTypeName="vector";class mf{constructor(e="",t=-1,i=[],r=Ev){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Nr(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(pW(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s.userData=JSON.parse(e.userData||"{}"),s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let s=0,o=i.length;s!==o;++s)t.push(os.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const h=lD(l);l=bS(l,1,h),u=bS(u,1,h),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new ff(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.name.match(s);if(h&&h.length>1){const f=h[1];let p=r[f];p||(r[f]=p=[]),p.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(nt("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return At("AnimationClip: No animation in JSONLoader data."),null;const i=function(f,p,m,y,S){if(m.length!==0){const x=[],g=[];WM(m,x,g,y),x.length!==0&&S.push(new f(p,x,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const p=u[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let y;for(y=0;y<p.length;y++)if(p[y].morphTargets)for(let S=0;S<p[y].morphTargets.length;S++)m[p[y].morphTargets[S]]=-1;for(const S in m){const x=[],g=[];for(let _=0;_!==p[y].morphTargets.length;++_){const M=p[y];x.push(M.time),g.push(M.morphTarget===S?1:0)}r.push(new ff(".morphTargetInfluence["+S+"]",x,g))}l=m.length*o}else{const m=".bones["+t[f].name+"]";i(pf,m+".position",p,"pos",r),i(Xf,m+".quaternion",p,"rot",r),i(pf,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function fW(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ff;case"vector":case"vector2":case"vector3":case"vector4":return pf;case"color":return XM;case"quaternion":return Xf;case"bool":case"boolean":return ic;case"string":return rc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function pW(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=fW(n.type);if(n.times===void 0){const t=[],i=[];WM(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Xs={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class qv{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this._abortController=null,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,f){return u.push(h,f),this},this.removeHandler=function(h){const f=u.indexOf(h);return f!==-1&&u.splice(f,2),this},this.getHandler=function(h){for(let f=0,p=u.length;f<p;f+=2){const m=u[f],y=u[f+1];if(m.global&&(m.lastIndex=0),m.test(h))return y}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const hD=new qv;class lr{constructor(e){this.manager=e!==void 0?e:hD,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}lr.DEFAULT_MATERIAL_NAME="__DEFAULT";const go={};class mW extends Error{constructor(e,t){super(e),this.response=t}}class Lr extends lr{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Xs.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(go[e]!==void 0){go[e].push({onLoad:t,onProgress:i,onError:r});return}go[e]=[],go[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&nt("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=go[e],f=u.body.getReader(),p=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),m=p?parseInt(p):0,y=m!==0;let S=0;const x=new ReadableStream({start(g){_();function _(){f.read().then(({done:M,value:E})=>{if(M)g.close();else{S+=E.byteLength;const A=new ProgressEvent("progress",{lengthComputable:y,loaded:S,total:m});for(let P=0,L=h.length;P<L;P++){const N=h[P];N.onProgress&&N.onProgress(A)}g.enqueue(E),_()}},M=>{g.error(M)})}}});return new Response(x)}else throw new mW(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return u.json();default:if(a==="")return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return u.arrayBuffer().then(y=>m.decode(y))}}}).then(u=>{Xs.add(`file:${e}`,u);const h=go[e];delete go[e];for(let f=0,p=h.length;f<p;f++){const m=h[f];m.onLoad&&m.onLoad(u)}}).catch(u=>{const h=go[e];if(h===void 0)throw this.manager.itemError(e),u;delete go[e];for(let f=0,p=h.length;f<p;f++){const m=h[f];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class gW extends lr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Lr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):At(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=mf.parse(e[i]);t.push(r)}return t}}class vW extends lr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new Fv,l=new Lr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function h(f){l.load(e[f],function(p){const m=s.parse(p,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=nn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)h(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let y=0;y<m;y++){o[y]={mipmaps:[]};for(let S=0;S<p.mipmapCount;S++)o[y].mipmaps.push(p.mipmaps[y*p.mipmapCount+S]),o[y].format=p.format,o[y].width=p.width,o[y].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=nn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}const Oc=new WeakMap;class gf extends lr{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Xs.get(`image:${e}`);if(o!==void 0){if(o.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0);else{let f=Oc.get(o);f===void 0&&(f=[],Oc.set(o,f)),f.push({onLoad:t,onError:r})}return o}const a=lf("img");function l(){h(),t&&t(this);const f=Oc.get(this)||[];for(let p=0;p<f.length;p++){const m=f[p];m.onLoad&&m.onLoad(this)}Oc.delete(this),s.manager.itemEnd(e)}function u(f){h(),r&&r(f),Xs.remove(`image:${e}`);const p=Oc.get(this)||[];for(let m=0;m<p.length;m++){const y=p[m];y.onError&&y.onError(f)}Oc.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),Xs.add(`image:${e}`,a),s.manager.itemStart(e),a.src=e,a}}class fD extends lr{constructor(e){super(e)}load(e,t,i,r){const s=new Of;s.colorSpace=Ji;const o=new gf(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(h){s.images[u]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class YM extends lr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new is,a=new Lr(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(h){if(r!==void 0)r(h);else{h(h);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Wn,o.wrapT=u.wrapT!==void 0?u.wrapT:Wn,o.magFilter=u.magFilter!==void 0?u.magFilter:nn,o.minFilter=u.minFilter!==void 0?u.minFilter:nn,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=js),u.mipmapCount===1&&(o.minFilter=nn),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},i,r),o}}class yW extends lr{constructor(e){super(e)}load(e,t,i,r){const s=new vn,o=new gf(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Va extends ln{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ft(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class pD extends Va{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ln.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ft(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const E_=new kt,S2=new V,w2=new V;class qM{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ee(512,512),this.mapType=_i,this.map=null,this.mapPass=null,this.matrix=new kt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Qu,this._frameExtents=new Ee(1,1),this._viewportCount=1,this._viewports=[new _n(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;S2.setFromMatrixPosition(e.matrixWorld),t.position.copy(S2),w2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(w2),t.updateMatrixWorld(),E_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(E_,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(E_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class xW extends qM{constructor(){super(new Zn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=Ou*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class mD extends Va{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ln.DEFAULT_UP),this.updateMatrix(),this.target=new ln,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new xW}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class _W extends qM{constructor(){super(new Zn(90,1,.5,500)),this.isPointLightShadow=!0}}class gD extends Va{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new _W}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class Ks extends kf{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class SW extends qM{constructor(){super(new Ks(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class vD extends Va{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ln.DEFAULT_UP),this.updateMatrix(),this.target=new ln,this.shadow=new SW}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class yD extends Va{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class xD extends Va{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class ZM{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new V)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class _D extends Va{constructor(e=new ZM,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Zv extends lr{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Lr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):At(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&nt("MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ft().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(r.allowOverride=e.allowOverride),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new ft().setHex(o.value);break;case"v2":r.uniforms[s].value=new Ee().fromArray(o.value);break;case"v3":r.uniforms[s].value=new V().fromArray(o.value);break;case"v4":r.uniforms[s].value=new _n().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Wt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new kt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ee().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ee().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Zv.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:eD,SpriteMaterial:RM,RawShaderMaterial:zM,ShaderMaterial:rr,PointsMaterial:NM,MeshPhysicalMaterial:tD,MeshStandardMaterial:VM,MeshPhongMaterial:nD,MeshToonMaterial:iD,MeshNormalMaterial:rD,MeshLambertMaterial:sD,MeshDepthMaterial:HM,MeshDistanceMaterial:GM,MeshBasicMaterial:Lo,MeshMatcapMaterial:oD,LineDashedMaterial:aD,LineBasicMaterial:ar,Material:Xi};return new t[e]}}class TS{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class SD extends zt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class wD extends lr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Lr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):At(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,y){if(t[y]!==void 0)return t[y];const x=m.interleavedBuffers[y],g=s(m,x.buffer),_=lu(x.type,g),M=new Nv(_,x.stride);return M.uuid=x.uuid,t[y]=M,M}function s(m,y){if(i[y]!==void 0)return i[y];const x=m.arrayBuffers[y],g=new Uint32Array(x).buffer;return i[y]=g,g}const o=e.isInstancedBufferGeometry?new SD:new zt,a=e.data.index;if(a!==void 0){const m=lu(a.type,a.array);o.setIndex(new yn(m,1))}const l=e.data.attributes;for(const m in l){const y=l[m];let S;if(y.isInterleavedBufferAttribute){const x=r(e.data,y.data);S=new ql(x,y.itemSize,y.offset,y.normalized)}else{const x=lu(y.type,y.array),g=y.isInstancedBufferAttribute?zu:yn;S=new g(x,y.itemSize,y.normalized)}y.name!==void 0&&(S.name=y.name),y.usage!==void 0&&S.setUsage(y.usage),o.setAttribute(m,S)}const u=e.data.morphAttributes;if(u)for(const m in u){const y=u[m],S=[];for(let x=0,g=y.length;x<g;x++){const _=y[x];let M;if(_.isInterleavedBufferAttribute){const E=r(e.data,_.data);M=new ql(E,_.itemSize,_.offset,_.normalized)}else{const E=lu(_.type,_.array);M=new yn(E,_.itemSize,_.normalized)}_.name!==void 0&&(M.name=_.name),S.push(M)}o.morphAttributes[m]=S}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,y=f.length;m!==y;++m){const S=f[m];o.addGroup(S.start,S.count,S.materialIndex)}const p=e.data.boundingSphere;return p!==void 0&&(o.boundingSphere=new Ti().fromJSON(p)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class wW extends lr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?TS.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Lr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(f){r!==void 0&&r(f),f("ObjectLoader: Can't parse "+e+".",f.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),At("ObjectLoader: Can't load "+e);return}s.parse(u,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?TS.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Lr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,i),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),this.bindLightTargets(u),t!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Bl().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Lv().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new wD;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in _2?a=_2[l.type].fromJSON(l,t):nt(`ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new Zv;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=mf.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return o(h)}else return l.data?{data:lu(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new qv(t);s=new gf(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const f=e[u],p=f.url;if(Array.isArray(p)){const m=[];for(let y=0,S=p.length;y<S;y++){const x=p[y],g=a(x);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new is(g.data,g.width,g.height)))}r[f.uuid]=new ha(m)}else{const m=a(f.url);r[f.uuid]=new ha(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:lu(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new gf(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const h=[];for(let f=0,p=u.length;f<p;f++){const m=u[f],y=await s(m);y!==null&&(y instanceof HTMLImageElement?h.push(y):h.push(new is(y.data,y.width,y.height)))}i[l.uuid]=new ha(h)}else{const h=await s(l.url);i[l.uuid]=new ha(h)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(nt("ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&nt('ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&nt("ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let h;Array.isArray(u)?(h=new Of,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new is:h=new vn,u&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=i(a.mapping,MW)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=i(a.wrap[0],M2),h.wrapT=i(a.wrap[1],M2)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.minFilter!==void 0&&(h.minFilter=i(a.minFilter,E2)),a.magFilter!==void 0&&(h.magFilter=i(a.magFilter,E2)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),r[a.uuid]=h}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&nt("ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let y=0,S=p.length;y<S;y++){const x=p[y];i[x]===void 0&&nt("ObjectLoader: Undefined material",x),m.push(i[x])}return m}return i[p]===void 0&&nt("ObjectLoader: Undefined material",p),i[p]}}function u(p){return r[p]===void 0&&nt("ObjectLoader: Undefined texture",p),r[p]}let h,f;switch(e.type){case"Scene":o=new Bf,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ft(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Iv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Rv(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Zn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ks(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new yD(e.color,e.intensity);break;case"DirectionalLight":o=new vD(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new gD(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new xD(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new mD(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new pD(e.color,e.groundColor,e.intensity);break;case"LightProbe":const p=new ZM().fromArray(e.sh);o=new _D(p,e.intensity);break;case"SkinnedMesh":h=a(e.geometry),f=l(e.material),o=new UL(h,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),f=l(e.material),o=new Bn(h,f);break;case"InstancedMesh":h=a(e.geometry),f=l(e.material);const m=e.count,y=e.instanceMatrix,S=e.instanceColor;o=new kL(h,f,m),o.instanceMatrix=new zu(new Float32Array(y.array),16),S!==void 0&&(o.instanceColor=new zu(new Float32Array(S.array),S.itemSize));break;case"BatchedMesh":h=a(e.geometry),f=l(e.material),o=new OL(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=h,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(x=>{let g=null,_=null;return x.boundingBox!==void 0&&(g=new Wi().fromJSON(x.boundingBox)),x.boundingSphere!==void 0&&(_=new Ti().fromJSON(x.boundingSphere)),{...x,boundingBox:g,boundingSphere:_}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=u(e.matricesTexture.uuid),o._indirectTexture=u(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=u(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new Ti().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new Wi().fromJSON(e.boundingBox));break;case"LOD":o=new FL;break;case"Line":o=new La(a(e.geometry),l(e.material));break;case"LineLoop":o=new BL(a(e.geometry),l(e.material));break;case"LineSegments":o=new no(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new zL(a(e.geometry),l(e.material));break;case"Sprite":o=new DL(l(e.material));break;case"Group":o=new cu;break;case"Bone":o=new IM;break;default:o=new ln}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const y=p[m];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const y=p[m],S=o.getObjectByProperty("uuid",y.object);S!==void 0&&o.addLevel(S,y.distance,y.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?nt("ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new ln}})}}const MW={UVMapping:Ra,CubeReflectionMapping:Cs,CubeRefractionMapping:Ia,EquirectangularReflectionMapping:Lu,EquirectangularRefractionMapping:ef,CubeUVReflectionMapping:Ju},M2={RepeatWrapping:tf,ClampToEdgeWrapping:Wn,MirroredRepeatWrapping:nf},E2={NearestFilter:$n,NearestMipmapNearestFilter:_M,NearestMipmapLinearFilter:au,LinearFilter:nn,LinearMipmapNearestFilter:_h,LinearMipmapLinearFilter:js},b_=new WeakMap;class EW extends lr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&nt("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&nt("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Xs.get(`image-bitmap:${e}`);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{if(b_.has(o)===!0)r&&r(b_.get(o)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(u),s.manager.itemEnd(e),u});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,a.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return Xs.add(`image-bitmap:${e}`,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),b_.set(l,u),Xs.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});Xs.add(`image-bitmap:${e}`,l),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let zm;class $M{static getContext(){return zm===void 0&&(zm=new(window.AudioContext||window.webkitAudioContext)),zm}static setContext(e){zm=e}}class bW extends lr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Lr(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);$M.getContext().decodeAudioData(u,function(f){t(f)}).catch(a)}catch(u){a(u)}},i,r);function a(l){r?r(l):At(l),s.manager.itemError(e)}}}const b2=new kt,T2=new kt,sl=new kt;class TW{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Zn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Zn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,sl.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(kl*t.fov*.5)/t.zoom;let a,l;T2.elements[12]=-r,b2.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,sl.elements[0]=2*t.near/(l-a),sl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(sl),a=-o*t.aspect-s,l=o*t.aspect-s,sl.elements[0]=2*t.near/(l-a),sl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(sl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(T2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(b2)}}class MD extends Zn{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class KM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const ol=new V,T_=new Hi,AW=new V,al=new V,ll=new V;class CW extends ln{constructor(){super(),this.type="AudioListener",this.context=$M.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new KM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ol,T_,AW),al.set(0,0,-1).applyQuaternion(T_),ll.set(0,1,0).applyQuaternion(T_),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ol.x,i),t.positionY.linearRampToValueAtTime(ol.y,i),t.positionZ.linearRampToValueAtTime(ol.z,i),t.forwardX.linearRampToValueAtTime(al.x,i),t.forwardY.linearRampToValueAtTime(al.y,i),t.forwardZ.linearRampToValueAtTime(al.z,i),t.upX.linearRampToValueAtTime(ll.x,i),t.upY.linearRampToValueAtTime(ll.y,i),t.upZ.linearRampToValueAtTime(ll.z,i)}else t.setPosition(ol.x,ol.y,ol.z),t.setOrientation(al.x,al.y,al.z,ll.x,ll.y,ll.z)}}class ED extends ln{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){nt("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){nt("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){nt("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){nt("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){nt("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(nt("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){nt("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(nt("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const cl=new V,A2=new Hi,PW=new V,ul=new V;class RW extends ED{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(cl,A2,PW),ul.set(0,0,1).applyQuaternion(A2);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(cl.x,i),t.positionY.linearRampToValueAtTime(cl.y,i),t.positionZ.linearRampToValueAtTime(cl.z,i),t.orientationX.linearRampToValueAtTime(ul.x,i),t.orientationY.linearRampToValueAtTime(ul.y,i),t.orientationZ.linearRampToValueAtTime(ul.z,i)}else t.setPosition(cl.x,cl.y,cl.z),t.setOrientation(ul.x,ul.y,ul.z)}}class IW{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class bD{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Hi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Hi.multiplyQuaternionsFlat(e,o,e,t,e,i),Hi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const JM="\\[\\]\\.:\\/",NW=new RegExp("["+JM+"]","g"),QM="[^"+JM+"]",LW="[^"+JM.replace("\\.","")+"]",DW=/((?:WC+[\/:])*)/.source.replace("WC",QM),FW=/(WCOD+)?/.source.replace("WCOD",LW),UW=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",QM),kW=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",QM),OW=new RegExp("^"+DW+FW+UW+kW+"$"),BW=["material","materials","bones","map"];class zW{constructor(e,t,i){const r=i||on.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class on{constructor(e,t,i){this.path=t,this.parsedPath=i||on.parseTrackName(t),this.node=on.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new on.Composite(e,t,i):new on(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(NW,"")}static parseTrackName(e){const t=OW.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);BW.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=on.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){nt("PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let u=t.objectIndex;switch(i){case"materials":if(!e.material){At("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){At("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){At("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){At("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){At("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){At("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){At("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=t.nodeName;At("PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){At("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){At("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}on.Composite=zW;on.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};on.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};on.prototype.GetterByBindingType=[on.prototype._getValue_direct,on.prototype._getValue_array,on.prototype._getValue_arrayElement,on.prototype._getValue_toArray];on.prototype.SetterByBindingTypeAndVersioning=[[on.prototype._setValue_direct,on.prototype._setValue_direct_setNeedsUpdate,on.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[on.prototype._setValue_array,on.prototype._setValue_array_setNeedsUpdate,on.prototype._setValue_array_setMatrixWorldNeedsUpdate],[on.prototype._setValue_arrayElement,on.prototype._setValue_arrayElement_setNeedsUpdate,on.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[on.prototype._setValue_fromArray,on.prototype._setValue_fromArray_setNeedsUpdate,on.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class VW{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Nr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let h=0,f=arguments.length;h!==f;++h){const p=arguments[h],m=p.uuid;let y=t[m];if(y===void 0){y=l++,t[m]=y,e.push(p);for(let S=0,x=o;S!==x;++S)s[S].push(new on(p,i[S],r[S]))}else if(y<u){a=e[y];const S=--u,x=e[S];t[x.uuid]=y,e[y]=x,t[m]=S,e[S]=p;for(let g=0,_=o;g!==_;++g){const M=s[g],E=M[S];let A=M[y];M[y]=E,A===void 0&&(A=new on(p,i[g],r[g])),M[S]=A}}else e[y]!==a&&At("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,h=t[u];if(h!==void 0&&h>=s){const f=s++,p=e[f];t[p.uuid]=h,e[h]=p,t[u]=f,e[f]=l;for(let m=0,y=r;m!==y;++m){const S=i[m],x=S[f],g=S[h];S[h]=x,S[f]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],h=u.uuid,f=t[h];if(f!==void 0)if(delete t[h],f<s){const p=--s,m=e[p],y=--o,S=e[y];t[m.uuid]=f,e[f]=m,t[S.uuid]=p,e[p]=S,e.pop();for(let x=0,g=r;x!==g;++x){const _=i[x],M=_[p],E=_[y];_[f]=M,_[p]=E,_.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let y=0,S=r;y!==S;++y){const x=i[y];x[f]=x[p],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,h=this.nCachedObjects_,f=new Array(u);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(f);for(let p=h,m=l.length;p!==m;++p){const y=l[p];f[p]=new on(y,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class TD{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Al,endingEnd:Al};for(let u=0;u!==o;++u){const h=s[u].createInterpolant(null);a[u]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=mL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case bM:for(let h=0,f=l.length;h!==f;++h)l[h].evaluate(o),u[h].accumulateAdditive(a);break;case Ev:default:for(let h=0,f=l.length;h!==f;++h)l[h].evaluate(o),u[h].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===gL;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===pL){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Cl,r.endingEnd=Cl):(e?r.endingStart=this.zeroSlopeAtStart?Cl:Al:r.endingStart=sf,t?r.endingEnd=this.zeroSlopeAtEnd?Cl:Al:r.endingEnd=sf)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const HW=new Float32Array(1);class GW extends to{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let h=u[l];h===void 0&&(h={},u[l]=h);for(let f=0;f!==s;++f){const p=r[f],m=p.name;let y=h[m];if(y!==void 0)++y.referenceCount,o[f]=y;else{if(y=o[f],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,m));continue}const S=t&&t._propertyBindings[f].binding.parsedPath;y=new bD(on.create(i,m,S),p.ValueTypeName,p.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,m),o[f]=y}a[f].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,l[h]=u,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new jM(new Float32Array(2),new Float32Array(2),1,HW),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?mf.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Ev),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const h=new TD(this,o,t,i);return this._bindAction(h,u),this._addInactiveAction(h,a,s),h}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?mf.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==i;++u)t[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const h=u._cacheIndex,f=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=h,t[h]=f,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class WW extends AM{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new Cv(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class eE{constructor(e){this.value=e}clone(){return new eE(this.value.clone===void 0?this.value:this.value.clone())}}let jW=0;class XW extends to{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:jW++}),this.name="",this.usage=af,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class YW extends Nv{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class qW{constructor(e,t,i,r,s,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const C2=new kt;class tE{constructor(e,t,i=0,r=1/0){this.ray=new tc(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Ol,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):At("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return C2.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(C2),this}intersectObject(e,t=!0,i=[]){return AS(e,this,i,t),i.sort(P2),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)AS(e[r],this,i,t);return i.sort(P2),i}}function P2(n,e){return n.distance-e.distance}function AS(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)AS(s[o],e,t,!0)}}class ZW{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=$W.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function $W(){this._document.hidden===!1&&this.reset()}class CS{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Ut(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ut(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class KW{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class nE{constructor(e,t,i,r){nE.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const R2=new Ee;class JW{constructor(e=new Ee(1/0,1/0),t=new Ee(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=R2.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,R2).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const I2=new V,Vm=new V,Bc=new V,zc=new V,A_=new V,QW=new V,ej=new V;class tj{constructor(e=new V,t=new V){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){I2.subVectors(e,this.start),Vm.subVectors(this.end,this.start);const i=Vm.dot(Vm);let s=Vm.dot(I2)/i;return t&&(s=Ut(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=QW,i=ej){const r=10000000000000001e-32;let s,o;const a=this.start,l=e.start,u=this.end,h=e.end;Bc.subVectors(u,a),zc.subVectors(h,l),A_.subVectors(a,l);const f=Bc.dot(Bc),p=zc.dot(zc),m=zc.dot(A_);if(f<=r&&p<=r)return t.copy(a),i.copy(l),t.sub(i),t.dot(t);if(f<=r)s=0,o=m/p,o=Ut(o,0,1);else{const y=Bc.dot(A_);if(p<=r)o=0,s=Ut(-y/f,0,1);else{const S=Bc.dot(zc),x=f*p-S*S;x!==0?s=Ut((S*m-y*p)/x,0,1):s=0,o=(S*s+m)/p,o<0?(o=0,s=Ut(-y/f,0,1)):o>1&&(o=1,s=Ut((S-y)/f,0,1))}}return t.copy(a).add(Bc.multiplyScalar(s)),i.copy(l).add(zc.multiplyScalar(o)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const N2=new V;class nj extends ln{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new zt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new gt(r,3));const s=new ar({fog:!1,toneMapped:!1});this.cone=new no(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),N2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(N2),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Jo=new V,Hm=new kt,C_=new kt;class ij extends no{constructor(e){const t=AD(e),i=new zt,r=[],s=[];for(let u=0;u<t.length;u++){const h=t[u];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}i.setAttribute("position",new gt(r,3)),i.setAttribute("color",new gt(s,3));const o=new ar({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const a=new ft(255),l=new ft(65280);this.setColors(a,l)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");C_.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Hm.multiplyMatrices(C_,a.matrixWorld),Jo.setFromMatrixPosition(Hm),r.setXYZ(o,Jo.x,Jo.y,Jo.z),Hm.multiplyMatrices(C_,a.parent.matrixWorld),Jo.setFromMatrixPosition(Hm),r.setXYZ(o+1,Jo.x,Jo.y,Jo.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let s=0;s<r.count;s+=2)r.setXYZ(s,e.r,e.g,e.b),r.setXYZ(s+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function AD(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...AD(n.children[t]));return e}class rj extends Bn{constructor(e,t,i){const r=new Wf(t,4,2),s=new Lo({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const sj=new V,L2=new ft,D2=new ft;class oj extends ln{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Gf(t);r.rotateY(Math.PI*.5),this.material=new Lo({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new yn(o,3)),this.add(new Bn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");L2.copy(this.light.color),D2.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?L2:D2;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(sj.setFromMatrixPosition(this.light.matrixWorld).negate())}}class aj extends no{constructor(e=10,t=10,i=4473924,r=8947848){i=new ft(i),r=new ft(r);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let p=0,m=0,y=-a;p<=t;p++,y+=o){l.push(-a,0,y,a,0,y),l.push(y,0,-a,y,0,a);const S=p===s?i:r;S.toArray(u,m),m+=3,S.toArray(u,m),m+=3,S.toArray(u,m),m+=3,S.toArray(u,m),m+=3}const h=new zt;h.setAttribute("position",new gt(l,3)),h.setAttribute("color",new gt(u,3));const f=new ar({vertexColors:!0,toneMapped:!1});super(h,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class lj extends no{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new ft(s),o=new ft(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const p=f/t*(Math.PI*2),m=Math.sin(p)*e,y=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,y);const S=f&1?s:o;l.push(S.r,S.g,S.b),l.push(S.r,S.g,S.b)}for(let f=0;f<i;f++){const p=f&1?s:o,m=e-e/i*f;for(let y=0;y<r;y++){let S=y/r*(Math.PI*2),x=Math.sin(S)*m,g=Math.cos(S)*m;a.push(x,0,g),l.push(p.r,p.g,p.b),S=(y+1)/r*(Math.PI*2),x=Math.sin(S)*m,g=Math.cos(S)*m,a.push(x,0,g),l.push(p.r,p.g,p.b)}}const u=new zt;u.setAttribute("position",new gt(a,3)),u.setAttribute("color",new gt(l,3));const h=new ar({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const F2=new V,Gm=new V,U2=new V;class cj extends ln{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new zt;r.setAttribute("position",new gt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new ar({fog:!1,toneMapped:!1});this.lightPlane=new La(r,s),this.add(this.lightPlane),r=new zt,r.setAttribute("position",new gt([0,0,0,0,0,1],3)),this.targetLine=new La(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),F2.setFromMatrixPosition(this.light.matrixWorld),Gm.setFromMatrixPosition(this.light.target.matrixWorld),U2.subVectors(Gm,F2),this.lightPlane.lookAt(Gm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Gm),this.targetLine.scale.z=U2.length()}}const Wm=new V,Hn=new kf;class uj extends no{constructor(e){const t=new zt,i=new ar({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(y,S){l(y),l(S)}function l(y){r.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(r.length/3-1)}t.setAttribute("position",new gt(r,3)),t.setAttribute("color",new gt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new ft(16755200),h=new ft(16711680),f=new ft(43775),p=new ft(16777215),m=new ft(3355443);this.setColors(u,h,f,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");return a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;let s,o;if(Hn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,o=0;else if(this.camera.coordinateSystem===Rr)s=-1,o=1;else if(this.camera.coordinateSystem===Uu)s=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Yn("c",t,e,Hn,0,0,s),Yn("t",t,e,Hn,0,0,o),Yn("n1",t,e,Hn,-i,-r,s),Yn("n2",t,e,Hn,i,-r,s),Yn("n3",t,e,Hn,-i,r,s),Yn("n4",t,e,Hn,i,r,s),Yn("f1",t,e,Hn,-i,-r,o),Yn("f2",t,e,Hn,i,-r,o),Yn("f3",t,e,Hn,-i,r,o),Yn("f4",t,e,Hn,i,r,o),Yn("u1",t,e,Hn,i*.7,r*1.1,s),Yn("u2",t,e,Hn,-i*.7,r*1.1,s),Yn("u3",t,e,Hn,0,r*2,s),Yn("cf1",t,e,Hn,-i,0,o),Yn("cf2",t,e,Hn,i,0,o),Yn("cf3",t,e,Hn,0,-r,o),Yn("cf4",t,e,Hn,0,r,o),Yn("cn1",t,e,Hn,-i,0,s),Yn("cn2",t,e,Hn,i,0,s),Yn("cn3",t,e,Hn,0,-r,s),Yn("cn4",t,e,Hn,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Yn(n,e,t,i,r,s,o){Wm.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,h=a.length;u<h;u++)l.setXYZ(a[u],Wm.x,Wm.y,Wm.z)}}const jm=new Wi;class dj extends no{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new zt;s.setIndex(new yn(i,1)),s.setAttribute("position",new yn(r,3)),super(s,new ar({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&jm.setFromObject(this.object),jm.isEmpty())return;const e=jm.min,t=jm.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class hj extends no{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new zt;s.setIndex(new yn(i,1)),s.setAttribute("position",new gt(r,3)),super(s,new ar({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class fj extends La{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new zt;o.setAttribute("position",new gt(s,3)),o.computeBoundingSphere(),super(o,new ar({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new zt;l.setAttribute("position",new gt(a,3)),l.computeBoundingSphere(),this.add(new Bn(l,new Lo({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const k2=new V;let Xm,P_;class pj extends ln{constructor(e=new V(0,0,1),t=new V(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Xm===void 0&&(Xm=new zt,Xm.setAttribute("position",new gt([0,0,0,0,1,0],3)),P_=new Vf(.5,1,5,1),P_.translate(0,-.5,0)),this.position.copy(t),this.line=new La(Xm,new ar({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Bn(P_,new Lo({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{k2.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(k2,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class mj extends no{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new zt;r.setAttribute("position",new gt(t,3)),r.setAttribute("color",new gt(i,3));const s=new ar({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new ft,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class gj{constructor(){this.type="ShapePath",this.color=new ft,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Y0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const _=[];for(let M=0,E=g.length;M<E;M++){const A=g[M],P=new Bl;P.curves=A.curves,_.push(P)}return _}function i(g,_){const M=_.length;let E=!1;for(let A=M-1,P=0;P<M;A=P++){let L=_[A],N=_[P],C=N.x-L.x,R=N.y-L.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(L=_[P],C=-C,N=_[A],R=-R),g.y<L.y||g.y>N.y)continue;if(g.y===L.y){if(g.x===L.x)return!0}else{const k=R*(g.x-L.x)-C*(g.y-L.y);if(k===0)return!0;if(k<0)continue;E=!E}}else{if(g.y!==L.y)continue;if(N.x<=g.x&&g.x<=L.x||L.x<=g.x&&g.x<=N.x)return!0}}return E}const r=Ms.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new Bl,l.curves=a.curves,u.push(l),u;let h=!r(s[0].getPoints());h=e?!h:h;const f=[],p=[];let m=[],y=0,S;p[y]=void 0,m[y]=[];for(let g=0,_=s.length;g<_;g++)a=s[g],S=a.getPoints(),o=r(S),o=e?!o:o,o?(!h&&p[y]&&y++,p[y]={s:new Bl,p:S},p[y].s.curves=a.curves,h&&y++,m[y]=[]):m[y].push({h:a,p:S[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,_=0;for(let M=0,E=p.length;M<E;M++)f[M]=[];for(let M=0,E=p.length;M<E;M++){const A=m[M];for(let P=0;P<A.length;P++){const L=A[P];let N=!0;for(let C=0;C<p.length;C++)i(L.p,p[C].p)&&(M!==C&&_++,N?(N=!1,f[C].push(L)):g=!0);N&&f[M].push(L)}}_>0&&g===!1&&(m=f)}let x;for(let g=0,_=p.length;g<_;g++){l=p[g].s,u.push(l),x=m[g];for(let M=0,E=x.length;M<E;M++)l.holes.push(x[M].h)}return u}}class vj extends to{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){nt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function yj(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function xj(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function _j(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function PS(n,e,t,i){const r=Sj(i);switch(t){case MM:return n*e;case Ff:return n*e/r.components*r.byteLength;case Uf:return n*e/r.components*r.byteLength;case Yl:return n*e*2/r.components*r.byteLength;case wv:return n*e*2/r.components*r.byteLength;case EM:return n*e*3/r.components*r.byteLength;case Kn:return n*e*4/r.components*r.byteLength;case Mv:return n*e*4/r.components*r.byteLength;case Sh:case wh:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Mh:case Eh:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case h0:case p0:return Math.max(n,16)*Math.max(e,8)/4;case d0:case f0:return Math.max(n,8)*Math.max(e,8)/2;case m0:case g0:case y0:case x0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case v0:case _0:case S0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case w0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case M0:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case E0:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case b0:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case T0:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case A0:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case C0:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case P0:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case R0:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case I0:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case N0:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case L0:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case D0:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case F0:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case U0:case k0:case O0:return Math.ceil(n/4)*Math.ceil(e/4)*16;case B0:case z0:return Math.ceil(n/4)*Math.ceil(e/4)*8;case V0:case H0:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Sj(n){switch(n){case _i:case yv:return{byteLength:1,components:1};case Du:case xv:case Un:return{byteLength:2,components:1};case _v:case Sv:return{byteLength:2,components:4};case Fr:case Df:case Cn:return{byteLength:4,components:1};case SM:case wM:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class wj{static contain(e,t){return yj(e,t)}static cover(e,t){return xj(e,t)}static fill(e){return _j(e)}static getByteLength(e,t,i,r){return PS(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Nf}}));typeof window<"u"&&(window.__THREE__?nt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Nf);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function CD(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Mj(n){const e=new WeakMap;function t(a,l){const u=a.array,h=a.usage,f=u.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,u,h),a.onUploadCallback();let m;if(u instanceof Float32Array)m=n.FLOAT;else if(typeof Float16Array<"u"&&u instanceof Float16Array)m=n.HALF_FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)m=n.SHORT;else if(u instanceof Uint32Array)m=n.UNSIGNED_INT;else if(u instanceof Int32Array)m=n.INT;else if(u instanceof Int8Array)m=n.BYTE;else if(u instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:p,type:m,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:f}}function i(a,l,u){const h=l.array,f=l.updateRanges;if(n.bindBuffer(u,a),f.length===0)n.bufferSubData(u,0,h);else{f.sort((m,y)=>m.start-y.start);let p=0;for(let m=1;m<f.length;m++){const y=f[p],S=f[m];S.start<=y.start+y.count+1?y.count=Math.max(y.count,S.start+S.count-y.start):(++p,f[p]=S)}f.length=p+1;for(let m=0,y=f.length;m<y;m++){const S=f[m];n.bufferSubData(u,S.start*h.BYTES_PER_ELEMENT,h,S.start,S.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const h=e.get(a);(!h||h.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,a,l),u.version=a.version}}return{get:r,remove:s,update:o}}var Ej=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,bj=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Tj=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Aj=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Cj=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Pj=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Rj=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Ij=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Nj=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Lj=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Dj=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Fj=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Uj=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,kj=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Oj=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Bj=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,zj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Vj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Hj=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Gj=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Wj=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,jj=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Xj=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Yj=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,qj=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Zj=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,$j=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Kj=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Jj=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Qj=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,e9="gl_FragColor = linearToOutputTexel( gl_FragColor );",t9=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,n9=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,i9=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,r9=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,s9=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,o9=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,a9=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,l9=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,c9=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,u9=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,d9=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,h9=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,f9=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,p9=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,m9=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,g9=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,v9=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,y9=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,x9=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,_9=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,S9=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,w9=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,M9=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,E9=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,b9=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,T9=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,A9=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,C9=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,P9=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,R9=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,I9=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,N9=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,L9=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,D9=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,F9=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,U9=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,k9=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,O9=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,B9=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,z9=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,V9=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,H9=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,G9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,W9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,j9=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,X9=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Y9=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,q9=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Z9=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,$9=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,K9=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,J9=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Q9=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,e7=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,t7=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,n7=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,i7=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,r7=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,s7=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,o7=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,a7=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,l7=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,c7=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,u7=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,d7=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,h7=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,f7=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,p7=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,m7=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,g7=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,v7=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,y7=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,x7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,S7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,w7=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const M7=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,E7=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,b7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,T7=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,A7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,C7=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,P7=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,R7=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,I7=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,N7=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,L7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,D7=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,F7=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,U7=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,k7=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,O7=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,B7=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,z7=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,V7=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,H7=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,G7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,W7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,j7=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,X7=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y7=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,q7=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Z7=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$7=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,K7=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,J7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Q7=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eX=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,tX=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,nX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,qt={alphahash_fragment:Ej,alphahash_pars_fragment:bj,alphamap_fragment:Tj,alphamap_pars_fragment:Aj,alphatest_fragment:Cj,alphatest_pars_fragment:Pj,aomap_fragment:Rj,aomap_pars_fragment:Ij,batching_pars_vertex:Nj,batching_vertex:Lj,begin_vertex:Dj,beginnormal_vertex:Fj,bsdfs:Uj,iridescence_fragment:kj,bumpmap_pars_fragment:Oj,clipping_planes_fragment:Bj,clipping_planes_pars_fragment:zj,clipping_planes_pars_vertex:Vj,clipping_planes_vertex:Hj,color_fragment:Gj,color_pars_fragment:Wj,color_pars_vertex:jj,color_vertex:Xj,common:Yj,cube_uv_reflection_fragment:qj,defaultnormal_vertex:Zj,displacementmap_pars_vertex:$j,displacementmap_vertex:Kj,emissivemap_fragment:Jj,emissivemap_pars_fragment:Qj,colorspace_fragment:e9,colorspace_pars_fragment:t9,envmap_fragment:n9,envmap_common_pars_fragment:i9,envmap_pars_fragment:r9,envmap_pars_vertex:s9,envmap_physical_pars_fragment:g9,envmap_vertex:o9,fog_vertex:a9,fog_pars_vertex:l9,fog_fragment:c9,fog_pars_fragment:u9,gradientmap_pars_fragment:d9,lightmap_pars_fragment:h9,lights_lambert_fragment:f9,lights_lambert_pars_fragment:p9,lights_pars_begin:m9,lights_toon_fragment:v9,lights_toon_pars_fragment:y9,lights_phong_fragment:x9,lights_phong_pars_fragment:_9,lights_physical_fragment:S9,lights_physical_pars_fragment:w9,lights_fragment_begin:M9,lights_fragment_maps:E9,lights_fragment_end:b9,logdepthbuf_fragment:T9,logdepthbuf_pars_fragment:A9,logdepthbuf_pars_vertex:C9,logdepthbuf_vertex:P9,map_fragment:R9,map_pars_fragment:I9,map_particle_fragment:N9,map_particle_pars_fragment:L9,metalnessmap_fragment:D9,metalnessmap_pars_fragment:F9,morphinstance_vertex:U9,morphcolor_vertex:k9,morphnormal_vertex:O9,morphtarget_pars_vertex:B9,morphtarget_vertex:z9,normal_fragment_begin:V9,normal_fragment_maps:H9,normal_pars_fragment:G9,normal_pars_vertex:W9,normal_vertex:j9,normalmap_pars_fragment:X9,clearcoat_normal_fragment_begin:Y9,clearcoat_normal_fragment_maps:q9,clearcoat_pars_fragment:Z9,iridescence_pars_fragment:$9,opaque_fragment:K9,packing:J9,premultiplied_alpha_fragment:Q9,project_vertex:e7,dithering_fragment:t7,dithering_pars_fragment:n7,roughnessmap_fragment:i7,roughnessmap_pars_fragment:r7,shadowmap_pars_fragment:s7,shadowmap_pars_vertex:o7,shadowmap_vertex:a7,shadowmask_pars_fragment:l7,skinbase_vertex:c7,skinning_pars_vertex:u7,skinning_vertex:d7,skinnormal_vertex:h7,specularmap_fragment:f7,specularmap_pars_fragment:p7,tonemapping_fragment:m7,tonemapping_pars_fragment:g7,transmission_fragment:v7,transmission_pars_fragment:y7,uv_pars_fragment:x7,uv_pars_vertex:_7,uv_vertex:S7,worldpos_vertex:w7,background_vert:M7,background_frag:E7,backgroundCube_vert:b7,backgroundCube_frag:T7,cube_vert:A7,cube_frag:C7,depth_vert:P7,depth_frag:R7,distance_vert:I7,distance_frag:N7,equirect_vert:L7,equirect_frag:D7,linedashed_vert:F7,linedashed_frag:U7,meshbasic_vert:k7,meshbasic_frag:O7,meshlambert_vert:B7,meshlambert_frag:z7,meshmatcap_vert:V7,meshmatcap_frag:H7,meshnormal_vert:G7,meshnormal_frag:W7,meshphong_vert:j7,meshphong_frag:X7,meshphysical_vert:Y7,meshphysical_frag:q7,meshtoon_vert:Z7,meshtoon_frag:$7,points_vert:K7,points_frag:J7,shadow_vert:Q7,shadow_frag:eX,sprite_vert:tX,sprite_frag:nX},rt={common:{diffuse:{value:new ft(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Wt}},envmap:{envMap:{value:null},envMapRotation:{value:new Wt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Wt},normalScale:{value:new Ee(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ft(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ft(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0},uvTransform:{value:new Wt}},sprite:{diffuse:{value:new ft(16777215)},opacity:{value:1},center:{value:new Ee(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}}},Ss={basic:{uniforms:$i([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.fog]),vertexShader:qt.meshbasic_vert,fragmentShader:qt.meshbasic_frag},lambert:{uniforms:$i([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,rt.lights,{emissive:{value:new ft(0)}}]),vertexShader:qt.meshlambert_vert,fragmentShader:qt.meshlambert_frag},phong:{uniforms:$i([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,rt.lights,{emissive:{value:new ft(0)},specular:{value:new ft(1118481)},shininess:{value:30}}]),vertexShader:qt.meshphong_vert,fragmentShader:qt.meshphong_frag},standard:{uniforms:$i([rt.common,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.roughnessmap,rt.metalnessmap,rt.fog,rt.lights,{emissive:{value:new ft(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:qt.meshphysical_vert,fragmentShader:qt.meshphysical_frag},toon:{uniforms:$i([rt.common,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.gradientmap,rt.fog,rt.lights,{emissive:{value:new ft(0)}}]),vertexShader:qt.meshtoon_vert,fragmentShader:qt.meshtoon_frag},matcap:{uniforms:$i([rt.common,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,{matcap:{value:null}}]),vertexShader:qt.meshmatcap_vert,fragmentShader:qt.meshmatcap_frag},points:{uniforms:$i([rt.points,rt.fog]),vertexShader:qt.points_vert,fragmentShader:qt.points_frag},dashed:{uniforms:$i([rt.common,rt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:qt.linedashed_vert,fragmentShader:qt.linedashed_frag},depth:{uniforms:$i([rt.common,rt.displacementmap]),vertexShader:qt.depth_vert,fragmentShader:qt.depth_frag},normal:{uniforms:$i([rt.common,rt.bumpmap,rt.normalmap,rt.displacementmap,{opacity:{value:1}}]),vertexShader:qt.meshnormal_vert,fragmentShader:qt.meshnormal_frag},sprite:{uniforms:$i([rt.sprite,rt.fog]),vertexShader:qt.sprite_vert,fragmentShader:qt.sprite_frag},background:{uniforms:{uvTransform:{value:new Wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:qt.background_vert,fragmentShader:qt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Wt}},vertexShader:qt.backgroundCube_vert,fragmentShader:qt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:qt.cube_vert,fragmentShader:qt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:qt.equirect_vert,fragmentShader:qt.equirect_frag},distance:{uniforms:$i([rt.common,rt.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:qt.distance_vert,fragmentShader:qt.distance_frag},shadow:{uniforms:$i([rt.lights,rt.fog,{color:{value:new ft(0)},opacity:{value:1}}]),vertexShader:qt.shadow_vert,fragmentShader:qt.shadow_frag}};Ss.physical={uniforms:$i([Ss.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Wt},clearcoatNormalScale:{value:new Ee(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Wt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Wt},sheen:{value:0},sheenColor:{value:new ft(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Wt},transmissionSamplerSize:{value:new Ee},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Wt},attenuationDistance:{value:0},attenuationColor:{value:new ft(0)},specularColor:{value:new ft(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Wt},anisotropyVector:{value:new Ee},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Wt}}]),vertexShader:qt.meshphysical_vert,fragmentShader:qt.meshphysical_frag};const Ym={r:0,b:0,g:0},dl=new Ur,iX=new kt;function rX(n,e,t,i,r,s,o){const a=new ft(0);let l=s===!0?0:1,u,h,f=null,p=0,m=null;function y(M){let E=M.isScene===!0?M.background:null;return E&&E.isTexture&&(E=(M.backgroundBlurriness>0?t:e).get(E)),E}function S(M){let E=!1;const A=y(M);A===null?g(a,l):A&&A.isColor&&(g(A,1),E=!0);const P=n.xr.getEnvironmentBlendMode();P==="additive"?i.buffers.color.setClear(0,0,0,1,o):P==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||E)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function x(M,E){const A=y(E);A&&(A.isCubeTexture||A.mapping===Ju)?(h===void 0&&(h=new Bn(new nc(1,1,1),new rr({name:"BackgroundCubeMaterial",uniforms:Bu(Ss.backgroundCube.uniforms),vertexShader:Ss.backgroundCube.vertexShader,fragmentShader:Ss.backgroundCube.fragmentShader,side:ir,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(P,L,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),dl.copy(E.backgroundRotation),dl.x*=-1,dl.y*=-1,dl.z*=-1,A.isCubeTexture&&A.isRenderTargetTexture===!1&&(dl.y*=-1,dl.z*=-1),h.material.uniforms.envMap.value=A,h.material.uniforms.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(iX.makeRotationFromEuler(dl)),h.material.toneMapped=sn.getTransfer(A.colorSpace)!==fn,(f!==A||p!==A.version||m!==n.toneMapping)&&(h.material.needsUpdate=!0,f=A,p=A.version,m=n.toneMapping),h.layers.enableAll(),M.unshift(h,h.geometry,h.material,0,0,null)):A&&A.isTexture&&(u===void 0&&(u=new Bn(new za(2,2),new rr({name:"BackgroundMaterial",uniforms:Bu(Ss.background.uniforms),vertexShader:Ss.background.vertexShader,fragmentShader:Ss.background.fragmentShader,side:Io,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=A,u.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,u.material.toneMapped=sn.getTransfer(A.colorSpace)!==fn,A.matrixAutoUpdate===!0&&A.updateMatrix(),u.material.uniforms.uvTransform.value.copy(A.matrix),(f!==A||p!==A.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,f=A,p=A.version,m=n.toneMapping),u.layers.enableAll(),M.unshift(u,u.geometry,u.material,0,0,null))}function g(M,E){M.getRGB(Ym,RL(n)),i.buffers.color.setClear(Ym.r,Ym.g,Ym.b,E,o)}function _(){h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return a},setClearColor:function(M,E=1){a.set(M),l=E,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(M){l=M,g(a,l)},render:S,addToRenderList:x,dispose:_}}function sX(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null);let s=r,o=!1;function a(R,k,H,$,ne){let le=!1;const ee=f($,H,k);s!==ee&&(s=ee,u(s.object)),le=m(R,$,H,ne),le&&y(R,$,H,ne),ne!==null&&e.update(ne,n.ELEMENT_ARRAY_BUFFER),(le||o)&&(o=!1,E(R,k,H,$),ne!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ne).buffer))}function l(){return n.createVertexArray()}function u(R){return n.bindVertexArray(R)}function h(R){return n.deleteVertexArray(R)}function f(R,k,H){const $=H.wireframe===!0;let ne=i[R.id];ne===void 0&&(ne={},i[R.id]=ne);let le=ne[k.id];le===void 0&&(le={},ne[k.id]=le);let ee=le[$];return ee===void 0&&(ee=p(l()),le[$]=ee),ee}function p(R){const k=[],H=[],$=[];for(let ne=0;ne<t;ne++)k[ne]=0,H[ne]=0,$[ne]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:H,attributeDivisors:$,object:R,attributes:{},index:null}}function m(R,k,H,$){const ne=s.attributes,le=k.attributes;let ee=0;const Q=H.getAttributes();for(const O in Q)if(Q[O].location>=0){const X=ne[O];let se=le[O];if(se===void 0&&(O==="instanceMatrix"&&R.instanceMatrix&&(se=R.instanceMatrix),O==="instanceColor"&&R.instanceColor&&(se=R.instanceColor)),X===void 0||X.attribute!==se||se&&X.data!==se.data)return!0;ee++}return s.attributesNum!==ee||s.index!==$}function y(R,k,H,$){const ne={},le=k.attributes;let ee=0;const Q=H.getAttributes();for(const O in Q)if(Q[O].location>=0){let X=le[O];X===void 0&&(O==="instanceMatrix"&&R.instanceMatrix&&(X=R.instanceMatrix),O==="instanceColor"&&R.instanceColor&&(X=R.instanceColor));const se={};se.attribute=X,X&&X.data&&(se.data=X.data),ne[O]=se,ee++}s.attributes=ne,s.attributesNum=ee,s.index=$}function S(){const R=s.newAttributes;for(let k=0,H=R.length;k<H;k++)R[k]=0}function x(R){g(R,0)}function g(R,k){const H=s.newAttributes,$=s.enabledAttributes,ne=s.attributeDivisors;H[R]=1,$[R]===0&&(n.enableVertexAttribArray(R),$[R]=1),ne[R]!==k&&(n.vertexAttribDivisor(R,k),ne[R]=k)}function _(){const R=s.newAttributes,k=s.enabledAttributes;for(let H=0,$=k.length;H<$;H++)k[H]!==R[H]&&(n.disableVertexAttribArray(H),k[H]=0)}function M(R,k,H,$,ne,le,ee){ee===!0?n.vertexAttribIPointer(R,k,H,ne,le):n.vertexAttribPointer(R,k,H,$,ne,le)}function E(R,k,H,$){S();const ne=$.attributes,le=H.getAttributes(),ee=k.defaultAttributeValues;for(const Q in le){const O=le[Q];if(O.location>=0){let Y=ne[Q];if(Y===void 0&&(Q==="instanceMatrix"&&R.instanceMatrix&&(Y=R.instanceMatrix),Q==="instanceColor"&&R.instanceColor&&(Y=R.instanceColor)),Y!==void 0){const X=Y.normalized,se=Y.itemSize,me=e.get(Y);if(me===void 0)continue;const Re=me.buffer,at=me.type,Ct=me.bytesPerElement,ue=at===n.INT||at===n.UNSIGNED_INT||Y.gpuType===Df;if(Y.isInterleavedBufferAttribute){const Se=Y.data,et=Se.stride,wt=Y.offset;if(Se.isInstancedInterleavedBuffer){for(let st=0;st<O.locationSize;st++)g(O.location+st,Se.meshPerAttribute);R.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=Se.meshPerAttribute*Se.count)}else for(let st=0;st<O.locationSize;st++)x(O.location+st);n.bindBuffer(n.ARRAY_BUFFER,Re);for(let st=0;st<O.locationSize;st++)M(O.location+st,se/O.locationSize,at,X,et*Ct,(wt+se/O.locationSize*st)*Ct,ue)}else{if(Y.isInstancedBufferAttribute){for(let Se=0;Se<O.locationSize;Se++)g(O.location+Se,Y.meshPerAttribute);R.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let Se=0;Se<O.locationSize;Se++)x(O.location+Se);n.bindBuffer(n.ARRAY_BUFFER,Re);for(let Se=0;Se<O.locationSize;Se++)M(O.location+Se,se/O.locationSize,at,X,se*Ct,se/O.locationSize*Se*Ct,ue)}}else if(ee!==void 0){const X=ee[Q];if(X!==void 0)switch(X.length){case 2:n.vertexAttrib2fv(O.location,X);break;case 3:n.vertexAttrib3fv(O.location,X);break;case 4:n.vertexAttrib4fv(O.location,X);break;default:n.vertexAttrib1fv(O.location,X)}}}}_()}function A(){N();for(const R in i){const k=i[R];for(const H in k){const $=k[H];for(const ne in $)h($[ne].object),delete $[ne];delete k[H]}delete i[R]}}function P(R){if(i[R.id]===void 0)return;const k=i[R.id];for(const H in k){const $=k[H];for(const ne in $)h($[ne].object),delete $[ne];delete k[H]}delete i[R.id]}function L(R){for(const k in i){const H=i[k];if(H[R.id]===void 0)continue;const $=H[R.id];for(const ne in $)h($[ne].object),delete $[ne];delete H[R.id]}}function N(){C(),o=!0,s!==r&&(s=r,u(s.object))}function C(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:N,resetDefaultState:C,dispose:A,releaseStatesOfGeometry:P,releaseStatesOfProgram:L,initAttributes:S,enableAttribute:x,disableUnusedAttributes:_}}function oX(n,e,t){let i;function r(u){i=u}function s(u,h){n.drawArrays(i,u,h),t.update(h,i,1)}function o(u,h,f){f!==0&&(n.drawArraysInstanced(i,u,h,f),t.update(h,i,f))}function a(u,h,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,h,0,f);let m=0;for(let y=0;y<f;y++)m+=h[y];t.update(m,i,1)}function l(u,h,f,p){if(f===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let y=0;y<u.length;y++)o(u[y],h[y],p[y]);else{m.multiDrawArraysInstancedWEBGL(i,u,0,h,0,p,0,f);let y=0;for(let S=0;S<f;S++)y+=h[S]*p[S];t.update(y,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function aX(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const L=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(L){return!(L!==Kn&&i.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(L){const N=L===Un&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(L!==_i&&i.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&L!==Cn&&!N)}function l(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const h=l(u);h!==u&&(nt("WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const f=t.logarithmicDepthBuffer===!0,p=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),S=n.getParameter(n.MAX_TEXTURE_SIZE),x=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),M=n.getParameter(n.MAX_VARYING_VECTORS),E=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),A=n.getParameter(n.MAX_SAMPLES),P=n.getParameter(n.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:f,reversedDepthBuffer:p,maxTextures:m,maxVertexTextures:y,maxTextureSize:S,maxCubemapSize:x,maxAttributes:g,maxVertexUniforms:_,maxVaryings:M,maxFragmentUniforms:E,maxSamples:A,samples:P}}function lX(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new xo,a=new Wt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||i!==0||r;return r=p,i=f.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){t=h(f,p,0)},this.setState=function(f,p,m){const y=f.clippingPlanes,S=f.clipIntersection,x=f.clipShadows,g=n.get(f);if(!r||y===null||y.length===0||s&&!x)s?h(null):u();else{const _=s?0:i,M=_*4;let E=g.clippingState||null;l.value=E,E=h(y,p,M,m);for(let A=0;A!==M;++A)E[A]=t[A];g.clippingState=E,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=_}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(f,p,m,y){const S=f!==null?f.length:0;let x=null;if(S!==0){if(x=l.value,y!==!0||x===null){const g=m+S*4,_=p.matrixWorldInverse;a.getNormalMatrix(_),(x===null||x.length<g)&&(x=new Float32Array(g));for(let M=0,E=m;M!==S;++M,E+=4)o.copy(f[M]).applyMatrix4(_,a),o.normal.toArray(x,E),x[E+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,x}}function cX(n){let e=new WeakMap;function t(o,a){return a===Lu?o.mapping=Cs:a===ef&&(o.mapping=Ia),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Lu||a===ef)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new Pv(l.height);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const fa=4,O2=[.125,.215,.35,.446,.526,.582],_l=20,uX=256,Wd=new Ks,B2=new ft;let R_=null,I_=0,N_=0,L_=!1;const dX=new V;class RS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,i=.1,r=100,s={}){const{size:o=256,position:a=dX}=s;R_=this._renderer.getRenderTarget(),I_=this._renderer.getActiveCubeFace(),N_=this._renderer.getActiveMipmapLevel(),L_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=H2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=V2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(R_,I_,N_),this._renderer.xr.enabled=L_,e.scissorTest=!1,Vc(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Cs||e.mapping===Ia?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),R_=this._renderer.getRenderTarget(),I_=this._renderer.getActiveCubeFace(),N_=this._renderer.getActiveMipmapLevel(),L_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:nn,minFilter:nn,generateMipmaps:!1,type:Un,format:Kn,colorSpace:eo,depthBuffer:!1},r=z2(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=z2(e,t,i);const{_lodMax:s}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=hX(s)),this._blurMaterial=pX(s,e,t),this._ggxMaterial=fX(s,e,t)}return r}_compileMaterial(e){const t=new Bn(new zt,e);this._renderer.compile(t,Wd)}_sceneToCubeUV(e,t,i,r,s){const l=new Zn(90,1,t,i),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],f=this._renderer,p=f.autoClear,m=f.toneMapping;f.getClearColor(B2),f.toneMapping=ns,f.autoClear=!1,f.state.buffers.depth.getReversed()&&(f.setRenderTarget(r),f.clearDepth(),f.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Bn(new nc,new Lo({name:"PMREM.Background",side:ir,depthWrite:!1,depthTest:!1})));const S=this._backgroundBox,x=S.material;let g=!1;const _=e.background;_?_.isColor&&(x.color.copy(_),e.background=null,g=!0):(x.color.copy(B2),g=!0);for(let M=0;M<6;M++){const E=M%3;E===0?(l.up.set(0,u[M],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+h[M],s.y,s.z)):E===1?(l.up.set(0,0,u[M]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+h[M],s.z)):(l.up.set(0,u[M],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+h[M]));const A=this._cubeSize;Vc(r,E*A,M>2?A:0,A,A),f.setRenderTarget(r),g&&f.render(S,l),f.render(e,l)}f.toneMapping=m,f.autoClear=p,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Cs||e.mapping===Ia;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=H2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=V2());const s=r?this._cubemapMaterial:this._equirectMaterial,o=this._lodMeshes[0];o.material=s;const a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Vc(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,Wd)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodMeshes.length;for(let s=1;s<r;s++)this._applyGGXFilter(e,s-1,s);t.autoClear=i}_applyGGXFilter(e,t,i){const r=this._renderer,s=this._pingPongRenderTarget,o=this._ggxMaterial,a=this._lodMeshes[i];a.material=o;const l=o.uniforms,u=i/(this._lodMeshes.length-1),h=t/(this._lodMeshes.length-1),f=Math.sqrt(u*u-h*h),p=0+u*1.25,m=f*p,{_lodMax:y}=this,S=this._sizeLods[i],x=3*S*(i>y-fa?i-y+fa:0),g=4*(this._cubeSize-S);l.envMap.value=e.texture,l.roughness.value=m,l.mipInt.value=y-t,Vc(s,x,g,3*S,2*S),r.setRenderTarget(s),r.render(a,Wd),l.envMap.value=s.texture,l.roughness.value=0,l.mipInt.value=y-i,Vc(e,x,g,3*S,2*S),r.setRenderTarget(e),r.render(a,Wd)}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&At("blur direction must be either latitudinal or longitudinal!");const h=3,f=this._lodMeshes[r];f.material=u;const p=u.uniforms,m=this._sizeLods[i]-1,y=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*_l-1),S=s/y,x=isFinite(s)?1+Math.floor(h*S):_l;x>_l&&nt(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${_l}`);const g=[];let _=0;for(let L=0;L<_l;++L){const N=L/S,C=Math.exp(-N*N/2);g.push(C),L===0?_+=C:L<x&&(_+=2*C)}for(let L=0;L<g.length;L++)g[L]=g[L]/_;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:M}=this;p.dTheta.value=y,p.mipInt.value=M-i;const E=this._sizeLods[r],A=3*E*(r>M-fa?r-M+fa:0),P=4*(this._cubeSize-E);Vc(t,A,P,3*E,2*E),l.setRenderTarget(t),l.render(f,Wd)}}function hX(n){const e=[],t=[],i=[];let r=n;const s=n-fa+1+O2.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);e.push(a);let l=1/a;o>n-fa?l=O2[o-n+fa-1]:o===0&&(l=0),t.push(l);const u=1/(a-2),h=-u,f=1+u,p=[h,h,f,h,f,f,h,h,f,f,h,f],m=6,y=6,S=3,x=2,g=1,_=new Float32Array(S*y*m),M=new Float32Array(x*y*m),E=new Float32Array(g*y*m);for(let P=0;P<m;P++){const L=P%3*2/3-1,N=P>2?0:-1,C=[L,N,0,L+2/3,N,0,L+2/3,N+1,0,L,N,0,L+2/3,N+1,0,L,N+1,0];_.set(C,S*y*P),M.set(p,x*y*P);const R=[P,P,P,P,P,P];E.set(R,g*y*P)}const A=new zt;A.setAttribute("position",new yn(_,S)),A.setAttribute("uv",new yn(M,x)),A.setAttribute("faceIndex",new yn(E,g)),i.push(new Bn(A,null)),r>fa&&r--}return{lodMeshes:i,sizeLods:e,sigmas:t}}function z2(n,e,t){const i=new Gi(n,e,t);return i.texture.mapping=Ju,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Vc(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function fX(n,e,t){return new rr({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:uX,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:$v(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Ts,depthTest:!1,depthWrite:!1})}function pX(n,e,t){const i=new Float32Array(_l),r=new V(0,1,0);return new rr({name:"SphericalGaussianBlur",defines:{n:_l,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:$v(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ts,depthTest:!1,depthWrite:!1})}function V2(){return new rr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:$v(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ts,depthTest:!1,depthWrite:!1})}function H2(){return new rr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:$v(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ts,depthTest:!1,depthWrite:!1})}function $v(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function mX(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,u=l===Lu||l===ef,h=l===Cs||l===Ia;if(u||h){let f=e.get(a);const p=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new RS(n)),f=u?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const m=a.image;return u&&m&&m.height>0||h&&m&&r(m)?(t===null&&(t=new RS(n)),f=u?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function r(a){let l=0;const u=6;for(let h=0;h<u;h++)a[h]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function gX(n){const e={};function t(i){if(e[i]!==void 0)return e[i];const r=n.getExtension(i);return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&ku("WebGLRenderer: "+i+" extension not supported."),r}}}function vX(n,e,t,i){const r={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const y in p.attributes)e.remove(p.attributes[y]);p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(f,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(f){const p=f.attributes;for(const m in p)e.update(p[m],n.ARRAY_BUFFER)}function u(f){const p=[],m=f.index,y=f.attributes.position;let S=0;if(m!==null){const _=m.array;S=m.version;for(let M=0,E=_.length;M<E;M+=3){const A=_[M+0],P=_[M+1],L=_[M+2];p.push(A,P,P,L,L,A)}}else if(y!==void 0){const _=y.array;S=y.version;for(let M=0,E=_.length/3-1;M<E;M+=3){const A=M+0,P=M+1,L=M+2;p.push(A,P,P,L,L,A)}}else return;const x=new(bL(p)?PM:CM)(p,1);x.version=S;const g=s.get(f);g&&e.remove(g),s.set(f,x)}function h(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&u(f)}else u(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:h}}function yX(n,e,t){let i;function r(p){i=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){n.drawElements(i,m,s,p*o),t.update(m,i,1)}function u(p,m,y){y!==0&&(n.drawElementsInstanced(i,m,s,p*o,y),t.update(m,i,y))}function h(p,m,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,m,0,s,p,0,y);let x=0;for(let g=0;g<y;g++)x+=m[g];t.update(x,i,1)}function f(p,m,y,S){if(y===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let g=0;g<p.length;g++)u(p[g]/o,m[g],S[g]);else{x.multiDrawElementsInstancedWEBGL(i,m,0,s,p,0,S,0,y);let g=0;for(let _=0;_<y;_++)g+=m[_]*S[_];t.update(g,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=f}function xX(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:At("WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function _X(n,e,t){const i=new WeakMap,r=new _n;function s(o,a,l){const u=o.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=h!==void 0?h.length:0;let p=i.get(a);if(p===void 0||p.count!==f){let R=function(){N.dispose(),i.delete(a),a.removeEventListener("dispose",R)};var m=R;p!==void 0&&p.texture.dispose();const y=a.morphAttributes.position!==void 0,S=a.morphAttributes.normal!==void 0,x=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],_=a.morphAttributes.normal||[],M=a.morphAttributes.color||[];let E=0;y===!0&&(E=1),S===!0&&(E=2),x===!0&&(E=3);let A=a.attributes.position.count*E,P=1;A>e.maxTextureSize&&(P=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const L=new Float32Array(A*P*4*f),N=new Av(L,A,P,f);N.type=Cn,N.needsUpdate=!0;const C=E*4;for(let k=0;k<f;k++){const H=g[k],$=_[k],ne=M[k],le=A*P*4*k;for(let ee=0;ee<H.count;ee++){const Q=ee*C;y===!0&&(r.fromBufferAttribute(H,ee),L[le+Q+0]=r.x,L[le+Q+1]=r.y,L[le+Q+2]=r.z,L[le+Q+3]=0),S===!0&&(r.fromBufferAttribute($,ee),L[le+Q+4]=r.x,L[le+Q+5]=r.y,L[le+Q+6]=r.z,L[le+Q+7]=0),x===!0&&(r.fromBufferAttribute(ne,ee),L[le+Q+8]=r.x,L[le+Q+9]=r.y,L[le+Q+10]=r.z,L[le+Q+11]=ne.itemSize===4?r.w:1)}}p={count:f,texture:N,size:new Ee(A,P)},i.set(a,p),a.addEventListener("dispose",R)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let y=0;for(let x=0;x<u.length;x++)y+=u[x];const S=a.morphTargetsRelative?1:1-y;l.getUniforms().setValue(n,"morphTargetBaseInfluence",S),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:s}}function SX(n,e,t,i){let r=new WeakMap;function s(l){const u=i.render.frame,h=l.geometry,f=e.get(l,h);if(r.get(f)!==u&&(e.update(f),r.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==u&&(p.update(),r.set(p,u))}return f}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const wX={[pM]:"LINEAR_TONE_MAPPING",[mM]:"REINHARD_TONE_MAPPING",[gM]:"CINEON_TONE_MAPPING",[vv]:"ACES_FILMIC_TONE_MAPPING",[yM]:"AGX_TONE_MAPPING",[xM]:"NEUTRAL_TONE_MAPPING",[vM]:"CUSTOM_TONE_MAPPING"};function MX(n,e,t,i,r){const s=new Gi(e,t,{type:n,depthBuffer:i,stencilBuffer:r}),o=new Gi(e,t,{type:Un,depthBuffer:!1,stencilBuffer:!1}),a=new zt;a.setAttribute("position",new gt([-1,3,0,-1,-1,0,3,-1,0],3)),a.setAttribute("uv",new gt([0,2,0,0,2,0],2));const l=new zM({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),u=new Bn(a,l),h=new Ks(-1,1,1,-1,0,1);let f=null,p=null,m=!1,y,S=null,x=[],g=!1;this.setSize=function(_,M){s.setSize(_,M),o.setSize(_,M);for(let E=0;E<x.length;E++){const A=x[E];A.setSize&&A.setSize(_,M)}},this.setEffects=function(_){x=_,g=x.length>0&&x[0].isRenderPass===!0;const M=s.width,E=s.height;for(let A=0;A<x.length;A++){const P=x[A];P.setSize&&P.setSize(M,E)}},this.begin=function(_,M){if(m||_.toneMapping===ns&&x.length===0)return!1;if(S=M,M!==null){const E=M.width,A=M.height;(s.width!==E||s.height!==A)&&this.setSize(E,A)}return g===!1&&_.setRenderTarget(s),y=_.toneMapping,_.toneMapping=ns,!0},this.hasRenderPass=function(){return g},this.end=function(_,M){_.toneMapping=y,m=!0;let E=s,A=o;for(let P=0;P<x.length;P++){const L=x[P];if(L.enabled!==!1&&(L.render(_,A,E,M),L.needsSwap!==!1)){const N=E;E=A,A=N}}if(f!==_.outputColorSpace||p!==_.toneMapping){f=_.outputColorSpace,p=_.toneMapping,l.defines={},sn.getTransfer(f)===fn&&(l.defines.SRGB_TRANSFER="");const P=wX[p];P&&(l.defines[P]=""),l.needsUpdate=!0}l.uniforms.tDiffuse.value=E.texture,_.setRenderTarget(S),_.render(u,h),S=null,m=!1},this.isCompositing=function(){return m},this.dispose=function(){s.dispose(),o.dispose(),a.dispose(),l.dispose()}}const PD=new vn,IS=new Zl(1,1),RD=new Av,ID=new Cv,ND=new Of,G2=[],W2=[],j2=new Float32Array(16),X2=new Float32Array(9),Y2=new Float32Array(4);function ed(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=G2[r];if(s===void 0&&(s=new Float32Array(r),G2[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function ui(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function di(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Kv(n,e){let t=W2[e];t===void 0&&(t=new Int32Array(e),W2[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function EX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function bX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ui(t,e))return;n.uniform2fv(this.addr,e),di(t,e)}}function TX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ui(t,e))return;n.uniform3fv(this.addr,e),di(t,e)}}function AX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ui(t,e))return;n.uniform4fv(this.addr,e),di(t,e)}}function CX(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ui(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),di(t,e)}else{if(ui(t,i))return;Y2.set(i),n.uniformMatrix2fv(this.addr,!1,Y2),di(t,i)}}function PX(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ui(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),di(t,e)}else{if(ui(t,i))return;X2.set(i),n.uniformMatrix3fv(this.addr,!1,X2),di(t,i)}}function RX(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ui(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),di(t,e)}else{if(ui(t,i))return;j2.set(i),n.uniformMatrix4fv(this.addr,!1,j2),di(t,i)}}function IX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function NX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ui(t,e))return;n.uniform2iv(this.addr,e),di(t,e)}}function LX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ui(t,e))return;n.uniform3iv(this.addr,e),di(t,e)}}function DX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ui(t,e))return;n.uniform4iv(this.addr,e),di(t,e)}}function FX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function UX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ui(t,e))return;n.uniform2uiv(this.addr,e),di(t,e)}}function kX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ui(t,e))return;n.uniform3uiv(this.addr,e),di(t,e)}}function OX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ui(t,e))return;n.uniform4uiv(this.addr,e),di(t,e)}}function BX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(IS.compareFunction=t.isReversedDepthBuffer()?Tv:bv,s=IS):s=PD,t.setTexture2D(e||s,r)}function zX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||ID,r)}function VX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||ND,r)}function HX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||RD,r)}function GX(n){switch(n){case 5126:return EX;case 35664:return bX;case 35665:return TX;case 35666:return AX;case 35674:return CX;case 35675:return PX;case 35676:return RX;case 5124:case 35670:return IX;case 35667:case 35671:return NX;case 35668:case 35672:return LX;case 35669:case 35673:return DX;case 5125:return FX;case 36294:return UX;case 36295:return kX;case 36296:return OX;case 35678:case 36198:case 36298:case 36306:case 35682:return BX;case 35679:case 36299:case 36307:return zX;case 35680:case 36300:case 36308:case 36293:return VX;case 36289:case 36303:case 36311:case 36292:return HX}}function WX(n,e){n.uniform1fv(this.addr,e)}function jX(n,e){const t=ed(e,this.size,2);n.uniform2fv(this.addr,t)}function XX(n,e){const t=ed(e,this.size,3);n.uniform3fv(this.addr,t)}function YX(n,e){const t=ed(e,this.size,4);n.uniform4fv(this.addr,t)}function qX(n,e){const t=ed(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function ZX(n,e){const t=ed(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function $X(n,e){const t=ed(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function KX(n,e){n.uniform1iv(this.addr,e)}function JX(n,e){n.uniform2iv(this.addr,e)}function QX(n,e){n.uniform3iv(this.addr,e)}function eY(n,e){n.uniform4iv(this.addr,e)}function tY(n,e){n.uniform1uiv(this.addr,e)}function nY(n,e){n.uniform2uiv(this.addr,e)}function iY(n,e){n.uniform3uiv(this.addr,e)}function rY(n,e){n.uniform4uiv(this.addr,e)}function sY(n,e,t){const i=this.cache,r=e.length,s=Kv(t,r);ui(i,s)||(n.uniform1iv(this.addr,s),di(i,s));let o;this.type===n.SAMPLER_2D_SHADOW?o=IS:o=PD;for(let a=0;a!==r;++a)t.setTexture2D(e[a]||o,s[a])}function oY(n,e,t){const i=this.cache,r=e.length,s=Kv(t,r);ui(i,s)||(n.uniform1iv(this.addr,s),di(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||ID,s[o])}function aY(n,e,t){const i=this.cache,r=e.length,s=Kv(t,r);ui(i,s)||(n.uniform1iv(this.addr,s),di(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||ND,s[o])}function lY(n,e,t){const i=this.cache,r=e.length,s=Kv(t,r);ui(i,s)||(n.uniform1iv(this.addr,s),di(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||RD,s[o])}function cY(n){switch(n){case 5126:return WX;case 35664:return jX;case 35665:return XX;case 35666:return YX;case 35674:return qX;case 35675:return ZX;case 35676:return $X;case 5124:case 35670:return KX;case 35667:case 35671:return JX;case 35668:case 35672:return QX;case 35669:case 35673:return eY;case 5125:return tY;case 36294:return nY;case 36295:return iY;case 36296:return rY;case 35678:case 36198:case 36298:case 36306:case 35682:return sY;case 35679:case 36299:case 36307:return oY;case 35680:case 36300:case 36308:case 36293:return aY;case 36289:case 36303:case 36311:case 36292:return lY}}class uY{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=GX(t.type)}}class dY{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=cY(t.type)}}class hY{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const D_=/(\w+)(\])?(\[|\.)?/g;function q2(n,e){n.seq.push(e),n.map[e.id]=e}function fY(n,e,t){const i=n.name,r=i.length;for(D_.lastIndex=0;;){const s=D_.exec(i),o=D_.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){q2(t,u===void 0?new uY(a,n,e):new dY(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new hY(a),q2(t,f)),t=f}}}class _g{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let o=0;o<i;++o){const a=e.getActiveUniform(t,o),l=e.getUniformLocation(t,a.name);fY(a,l,this)}const r=[],s=[];for(const o of this.seq)o.type===e.SAMPLER_2D_SHADOW||o.type===e.SAMPLER_CUBE_SHADOW||o.type===e.SAMPLER_2D_ARRAY_SHADOW?r.push(o):s.push(o);r.length>0&&(this.seq=r.concat(s))}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function Z2(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const pY=37297;let mY=0;function gY(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}const $2=new Wt;function vY(n){sn._getMatrix($2,sn.workingColorSpace,n);const e=`mat3( ${$2.elements.map(t=>t.toFixed(4))} )`;switch(sn.getTransfer(n)){case of:return[e,"LinearTransferOETF"];case fn:return[e,"sRGBTransferOETF"];default:return nt("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function K2(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=(n.getShaderInfoLog(e)||"").trim();if(i&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+gY(n.getShaderSource(e),a)}else return s}function yY(n,e){const t=vY(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const xY={[pM]:"Linear",[mM]:"Reinhard",[gM]:"Cineon",[vv]:"ACESFilmic",[yM]:"AgX",[xM]:"Neutral",[vM]:"Custom"};function _Y(n,e){const t=xY[e];return t===void 0?(nt("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+n+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const qm=new V;function SY(){sn.getLuminanceCoefficients(qm);const n=qm.x.toFixed(4),e=qm.y.toFixed(4),t=qm.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function wY(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(rh).join(`
`)}function MY(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function EY(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function rh(n){return n!==""}function J2(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Q2(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const bY=/^[ \t]*#include +<([\w\d./]+)>/gm;function NS(n){return n.replace(bY,AY)}const TY=new Map;function AY(n,e){let t=qt[e];if(t===void 0){const i=TY.get(e);if(i!==void 0)t=qt[i],nt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return NS(t)}const CY=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function eP(n){return n.replace(CY,PY)}function PY(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function tP(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const RY={[_u]:"SHADOWMAP_TYPE_PCF",[Tl]:"SHADOWMAP_TYPE_VSM"};function IY(n){return RY[n.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const NY={[Cs]:"ENVMAP_TYPE_CUBE",[Ia]:"ENVMAP_TYPE_CUBE",[Ju]:"ENVMAP_TYPE_CUBE_UV"};function LY(n){return n.envMap===!1?"ENVMAP_TYPE_CUBE":NY[n.envMapMode]||"ENVMAP_TYPE_CUBE"}const DY={[Ia]:"ENVMAP_MODE_REFRACTION"};function FY(n){return n.envMap===!1?"ENVMAP_MODE_REFLECTION":DY[n.envMapMode]||"ENVMAP_MODE_REFLECTION"}const UY={[Lf]:"ENVMAP_BLENDING_MULTIPLY",[dL]:"ENVMAP_BLENDING_MIX",[hL]:"ENVMAP_BLENDING_ADD"};function kY(n){return n.envMap===!1?"ENVMAP_BLENDING_NONE":UY[n.combine]||"ENVMAP_BLENDING_NONE"}function OY(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function BY(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=IY(t),u=LY(t),h=FY(t),f=kY(t),p=OY(t),m=wY(t),y=MY(s),S=r.createProgram();let x,g,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(rh).join(`
`),x.length>0&&(x+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(rh).join(`
`),g.length>0&&(g+=`
`)):(x=[tP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(rh).join(`
`),g=[tP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ns?"#define TONE_MAPPING":"",t.toneMapping!==ns?qt.tonemapping_pars_fragment:"",t.toneMapping!==ns?_Y("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",qt.colorspace_pars_fragment,yY("linearToOutputTexel",t.outputColorSpace),SY(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(rh).join(`
`)),o=NS(o),o=J2(o,t),o=Q2(o,t),a=NS(a),a=J2(a,t),a=Q2(a,t),o=eP(o),a=eP(a),t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,x=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,g=["#define varying in",t.glslVersion===SS?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===SS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const M=_+x+o,E=_+g+a,A=Z2(r,r.VERTEX_SHADER,M),P=Z2(r,r.FRAGMENT_SHADER,E);r.attachShader(S,A),r.attachShader(S,P),t.index0AttributeName!==void 0?r.bindAttribLocation(S,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(S,0,"position"),r.linkProgram(S);function L(k){if(n.debug.checkShaderErrors){const H=r.getProgramInfoLog(S)||"",$=r.getShaderInfoLog(A)||"",ne=r.getShaderInfoLog(P)||"",le=H.trim(),ee=$.trim(),Q=ne.trim();let O=!0,Y=!0;if(r.getProgramParameter(S,r.LINK_STATUS)===!1)if(O=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,S,A,P);else{const X=K2(r,A,"vertex"),se=K2(r,P,"fragment");At("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(S,r.VALIDATE_STATUS)+`

Material Name: `+k.name+`
Material Type: `+k.type+`

Program Info Log: `+le+`
`+X+`
`+se)}else le!==""?nt("WebGLProgram: Program Info Log:",le):(ee===""||Q==="")&&(Y=!1);Y&&(k.diagnostics={runnable:O,programLog:le,vertexShader:{log:ee,prefix:x},fragmentShader:{log:Q,prefix:g}})}r.deleteShader(A),r.deleteShader(P),N=new _g(r,S),C=EY(r,S)}let N;this.getUniforms=function(){return N===void 0&&L(this),N};let C;this.getAttributes=function(){return C===void 0&&L(this),C};let R=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=r.getProgramParameter(S,pY)),R},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(S),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=mY++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=A,this.fragmentShader=P,this}let zY=0;class VY{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new HY(e),t.set(e,i)),i}}class HY{constructor(e){this.id=zY++,this.code=e,this.usedTimes=0}}function GY(n,e,t,i,r,s,o){const a=new Ol,l=new VY,u=new Set,h=[],f=new Map,p=r.logarithmicDepthBuffer;let m=r.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(C){return u.add(C),C===0?"uv":`uv${C}`}function x(C,R,k,H,$){const ne=H.fog,le=$.geometry,ee=C.isMeshStandardMaterial?H.environment:null,Q=(C.isMeshStandardMaterial?t:e).get(C.envMap||ee),O=Q&&Q.mapping===Ju?Q.image.height:null,Y=y[C.type];C.precision!==null&&(m=r.getMaxPrecision(C.precision),m!==C.precision&&nt("WebGLProgram.getParameters:",C.precision,"not supported, using",m,"instead."));const X=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,se=X!==void 0?X.length:0;let me=0;le.morphAttributes.position!==void 0&&(me=1),le.morphAttributes.normal!==void 0&&(me=2),le.morphAttributes.color!==void 0&&(me=3);let Re,at,Ct,ue;if(Y){const Zt=Ss[Y];Re=Zt.vertexShader,at=Zt.fragmentShader}else Re=C.vertexShader,at=C.fragmentShader,l.update(C),Ct=l.getVertexShaderID(C),ue=l.getFragmentShaderID(C);const Se=n.getRenderTarget(),et=n.state.buffers.depth.getReversed(),wt=$.isInstancedMesh===!0,st=$.isBatchedMesh===!0,Ft=!!C.map,Qt=!!C.matcap,_t=!!Q,Te=!!C.aoMap,Ue=!!C.lightMap,Pe=!!C.bumpMap,Je=!!C.normalMap,G=!!C.displacementMap,St=!!C.emissiveMap,tt=!!C.metalnessMap,Pt=!!C.roughnessMap,je=C.anisotropy>0,z=C.clearcoat>0,D=C.dispersion>0,ie=C.iridescence>0,ge=C.sheen>0,Ae=C.transmission>0,ve=je&&!!C.anisotropyMap,dt=z&&!!C.clearcoatMap,qe=z&&!!C.clearcoatNormalMap,ht=z&&!!C.clearcoatRoughnessMap,It=ie&&!!C.iridescenceMap,Ne=ie&&!!C.iridescenceThicknessMap,Be=ge&&!!C.sheenColorMap,ut=ge&&!!C.sheenRoughnessMap,Z=!!C.specularMap,de=!!C.specularColorMap,Le=!!C.specularIntensityMap,K=Ae&&!!C.transmissionMap,he=Ae&&!!C.thicknessMap,De=!!C.gradientMap,Qe=!!C.alphaMap,Oe=C.alphaTest>0,be=!!C.alphaHash,ze=!!C.extensions;let Et=ns;C.toneMapped&&(Se===null||Se.isXRRenderTarget===!0)&&(Et=n.toneMapping);const tn={shaderID:Y,shaderType:C.type,shaderName:C.name,vertexShader:Re,fragmentShader:at,defines:C.defines,customVertexShaderID:Ct,customFragmentShaderID:ue,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:m,batching:st,batchingColor:st&&$._colorsTexture!==null,instancing:wt,instancingColor:wt&&$.instanceColor!==null,instancingMorph:wt&&$.morphTexture!==null,outputColorSpace:Se===null?n.outputColorSpace:Se.isXRRenderTarget===!0?Se.texture.colorSpace:eo,alphaToCoverage:!!C.alphaToCoverage,map:Ft,matcap:Qt,envMap:_t,envMapMode:_t&&Q.mapping,envMapCubeUVHeight:O,aoMap:Te,lightMap:Ue,bumpMap:Pe,normalMap:Je,displacementMap:G,emissiveMap:St,normalMapObjectSpace:Je&&C.normalMapType===yL,normalMapTangentSpace:Je&&C.normalMapType===Oa,metalnessMap:tt,roughnessMap:Pt,anisotropy:je,anisotropyMap:ve,clearcoat:z,clearcoatMap:dt,clearcoatNormalMap:qe,clearcoatRoughnessMap:ht,dispersion:D,iridescence:ie,iridescenceMap:It,iridescenceThicknessMap:Ne,sheen:ge,sheenColorMap:Be,sheenRoughnessMap:ut,specularMap:Z,specularColorMap:de,specularIntensityMap:Le,transmission:Ae,transmissionMap:K,thicknessMap:he,gradientMap:De,opaque:C.transparent===!1&&C.blending===Ul&&C.alphaToCoverage===!1,alphaMap:Qe,alphaTest:Oe,alphaHash:be,combine:C.combine,mapUv:Ft&&S(C.map.channel),aoMapUv:Te&&S(C.aoMap.channel),lightMapUv:Ue&&S(C.lightMap.channel),bumpMapUv:Pe&&S(C.bumpMap.channel),normalMapUv:Je&&S(C.normalMap.channel),displacementMapUv:G&&S(C.displacementMap.channel),emissiveMapUv:St&&S(C.emissiveMap.channel),metalnessMapUv:tt&&S(C.metalnessMap.channel),roughnessMapUv:Pt&&S(C.roughnessMap.channel),anisotropyMapUv:ve&&S(C.anisotropyMap.channel),clearcoatMapUv:dt&&S(C.clearcoatMap.channel),clearcoatNormalMapUv:qe&&S(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ht&&S(C.clearcoatRoughnessMap.channel),iridescenceMapUv:It&&S(C.iridescenceMap.channel),iridescenceThicknessMapUv:Ne&&S(C.iridescenceThicknessMap.channel),sheenColorMapUv:Be&&S(C.sheenColorMap.channel),sheenRoughnessMapUv:ut&&S(C.sheenRoughnessMap.channel),specularMapUv:Z&&S(C.specularMap.channel),specularColorMapUv:de&&S(C.specularColorMap.channel),specularIntensityMapUv:Le&&S(C.specularIntensityMap.channel),transmissionMapUv:K&&S(C.transmissionMap.channel),thicknessMapUv:he&&S(C.thicknessMap.channel),alphaMapUv:Qe&&S(C.alphaMap.channel),vertexTangents:!!le.attributes.tangent&&(Je||je),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,pointsUvs:$.isPoints===!0&&!!le.attributes.uv&&(Ft||Qe),fog:!!ne,useFog:C.fog===!0,fogExp2:!!ne&&ne.isFogExp2,flatShading:C.flatShading===!0&&C.wireframe===!1,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:p,reversedDepthBuffer:et,skinning:$.isSkinnedMesh===!0,morphTargets:le.morphAttributes.position!==void 0,morphNormals:le.morphAttributes.normal!==void 0,morphColors:le.morphAttributes.color!==void 0,morphTargetsCount:se,morphTextureStride:me,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&k.length>0,shadowMapType:n.shadowMap.type,toneMapping:Et,decodeVideoTexture:Ft&&C.map.isVideoTexture===!0&&sn.getTransfer(C.map.colorSpace)===fn,decodeVideoTextureEmissive:St&&C.emissiveMap.isVideoTexture===!0&&sn.getTransfer(C.emissiveMap.colorSpace)===fn,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===ws,flipSided:C.side===ir,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:ze&&C.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ze&&C.extensions.multiDraw===!0||st)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return tn.vertexUv1s=u.has(1),tn.vertexUv2s=u.has(2),tn.vertexUv3s=u.has(3),u.clear(),tn}function g(C){const R=[];if(C.shaderID?R.push(C.shaderID):(R.push(C.customVertexShaderID),R.push(C.customFragmentShaderID)),C.defines!==void 0)for(const k in C.defines)R.push(k),R.push(C.defines[k]);return C.isRawShaderMaterial===!1&&(_(R,C),M(R,C),R.push(n.outputColorSpace)),R.push(C.customProgramCacheKey),R.join()}function _(C,R){C.push(R.precision),C.push(R.outputColorSpace),C.push(R.envMapMode),C.push(R.envMapCubeUVHeight),C.push(R.mapUv),C.push(R.alphaMapUv),C.push(R.lightMapUv),C.push(R.aoMapUv),C.push(R.bumpMapUv),C.push(R.normalMapUv),C.push(R.displacementMapUv),C.push(R.emissiveMapUv),C.push(R.metalnessMapUv),C.push(R.roughnessMapUv),C.push(R.anisotropyMapUv),C.push(R.clearcoatMapUv),C.push(R.clearcoatNormalMapUv),C.push(R.clearcoatRoughnessMapUv),C.push(R.iridescenceMapUv),C.push(R.iridescenceThicknessMapUv),C.push(R.sheenColorMapUv),C.push(R.sheenRoughnessMapUv),C.push(R.specularMapUv),C.push(R.specularColorMapUv),C.push(R.specularIntensityMapUv),C.push(R.transmissionMapUv),C.push(R.thicknessMapUv),C.push(R.combine),C.push(R.fogExp2),C.push(R.sizeAttenuation),C.push(R.morphTargetsCount),C.push(R.morphAttributeCount),C.push(R.numDirLights),C.push(R.numPointLights),C.push(R.numSpotLights),C.push(R.numSpotLightMaps),C.push(R.numHemiLights),C.push(R.numRectAreaLights),C.push(R.numDirLightShadows),C.push(R.numPointLightShadows),C.push(R.numSpotLightShadows),C.push(R.numSpotLightShadowsWithMaps),C.push(R.numLightProbes),C.push(R.shadowMapType),C.push(R.toneMapping),C.push(R.numClippingPlanes),C.push(R.numClipIntersection),C.push(R.depthPacking)}function M(C,R){a.disableAll(),R.instancing&&a.enable(0),R.instancingColor&&a.enable(1),R.instancingMorph&&a.enable(2),R.matcap&&a.enable(3),R.envMap&&a.enable(4),R.normalMapObjectSpace&&a.enable(5),R.normalMapTangentSpace&&a.enable(6),R.clearcoat&&a.enable(7),R.iridescence&&a.enable(8),R.alphaTest&&a.enable(9),R.vertexColors&&a.enable(10),R.vertexAlphas&&a.enable(11),R.vertexUv1s&&a.enable(12),R.vertexUv2s&&a.enable(13),R.vertexUv3s&&a.enable(14),R.vertexTangents&&a.enable(15),R.anisotropy&&a.enable(16),R.alphaHash&&a.enable(17),R.batching&&a.enable(18),R.dispersion&&a.enable(19),R.batchingColor&&a.enable(20),R.gradientMap&&a.enable(21),C.push(a.mask),a.disableAll(),R.fog&&a.enable(0),R.useFog&&a.enable(1),R.flatShading&&a.enable(2),R.logarithmicDepthBuffer&&a.enable(3),R.reversedDepthBuffer&&a.enable(4),R.skinning&&a.enable(5),R.morphTargets&&a.enable(6),R.morphNormals&&a.enable(7),R.morphColors&&a.enable(8),R.premultipliedAlpha&&a.enable(9),R.shadowMapEnabled&&a.enable(10),R.doubleSided&&a.enable(11),R.flipSided&&a.enable(12),R.useDepthPacking&&a.enable(13),R.dithering&&a.enable(14),R.transmission&&a.enable(15),R.sheen&&a.enable(16),R.opaque&&a.enable(17),R.pointsUvs&&a.enable(18),R.decodeVideoTexture&&a.enable(19),R.decodeVideoTextureEmissive&&a.enable(20),R.alphaToCoverage&&a.enable(21),C.push(a.mask)}function E(C){const R=y[C.type];let k;if(R){const H=Ss[R];k=IL.clone(H.uniforms)}else k=C.uniforms;return k}function A(C,R){let k=f.get(R);return k!==void 0?++k.usedTimes:(k=new BY(n,R,C,s),h.push(k),f.set(R,k)),k}function P(C){if(--C.usedTimes===0){const R=h.indexOf(C);h[R]=h[h.length-1],h.pop(),f.delete(C.cacheKey),C.destroy()}}function L(C){l.remove(C)}function N(){l.dispose()}return{getParameters:x,getProgramCacheKey:g,getUniforms:E,acquireProgram:A,releaseProgram:P,releaseShaderCache:L,programs:h,dispose:N}}function WY(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function jY(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function nP(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function iP(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(f,p,m,y,S,x){let g=n[e];return g===void 0?(g={id:f.id,object:f,geometry:p,material:m,groupOrder:y,renderOrder:f.renderOrder,z:S,group:x},n[e]=g):(g.id=f.id,g.object=f,g.geometry=p,g.material=m,g.groupOrder=y,g.renderOrder=f.renderOrder,g.z=S,g.group=x),e++,g}function a(f,p,m,y,S,x){const g=o(f,p,m,y,S,x);m.transmission>0?i.push(g):m.transparent===!0?r.push(g):t.push(g)}function l(f,p,m,y,S,x){const g=o(f,p,m,y,S,x);m.transmission>0?i.unshift(g):m.transparent===!0?r.unshift(g):t.unshift(g)}function u(f,p){t.length>1&&t.sort(f||jY),i.length>1&&i.sort(p||nP),r.length>1&&r.sort(p||nP)}function h(){for(let f=e,p=n.length;f<p;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:u}}function XY(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new iP,n.set(i,[o])):r>=s.length?(o=new iP,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function YY(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new V,color:new ft};break;case"SpotLight":t={position:new V,direction:new V,color:new ft,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new V,color:new ft,distance:0,decay:0};break;case"HemisphereLight":t={direction:new V,skyColor:new ft,groundColor:new ft};break;case"RectAreaLight":t={color:new ft,position:new V,halfWidth:new V,halfHeight:new V};break}return n[e.id]=t,t}}}function qY(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let ZY=0;function $Y(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function KY(n){const e=new YY,t=qY(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new V);const r=new V,s=new kt,o=new kt;function a(u){let h=0,f=0,p=0;for(let C=0;C<9;C++)i.probe[C].set(0,0,0);let m=0,y=0,S=0,x=0,g=0,_=0,M=0,E=0,A=0,P=0,L=0;u.sort($Y);for(let C=0,R=u.length;C<R;C++){const k=u[C],H=k.color,$=k.intensity,ne=k.distance;let le=null;if(k.shadow&&k.shadow.map&&(k.shadow.map.texture.format===Yl?le=k.shadow.map.texture:le=k.shadow.map.depthTexture||k.shadow.map.texture),k.isAmbientLight)h+=H.r*$,f+=H.g*$,p+=H.b*$;else if(k.isLightProbe){for(let ee=0;ee<9;ee++)i.probe[ee].addScaledVector(k.sh.coefficients[ee],$);L++}else if(k.isDirectionalLight){const ee=e.get(k);if(ee.color.copy(k.color).multiplyScalar(k.intensity),k.castShadow){const Q=k.shadow,O=t.get(k);O.shadowIntensity=Q.intensity,O.shadowBias=Q.bias,O.shadowNormalBias=Q.normalBias,O.shadowRadius=Q.radius,O.shadowMapSize=Q.mapSize,i.directionalShadow[m]=O,i.directionalShadowMap[m]=le,i.directionalShadowMatrix[m]=k.shadow.matrix,_++}i.directional[m]=ee,m++}else if(k.isSpotLight){const ee=e.get(k);ee.position.setFromMatrixPosition(k.matrixWorld),ee.color.copy(H).multiplyScalar($),ee.distance=ne,ee.coneCos=Math.cos(k.angle),ee.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),ee.decay=k.decay,i.spot[S]=ee;const Q=k.shadow;if(k.map&&(i.spotLightMap[A]=k.map,A++,Q.updateMatrices(k),k.castShadow&&P++),i.spotLightMatrix[S]=Q.matrix,k.castShadow){const O=t.get(k);O.shadowIntensity=Q.intensity,O.shadowBias=Q.bias,O.shadowNormalBias=Q.normalBias,O.shadowRadius=Q.radius,O.shadowMapSize=Q.mapSize,i.spotShadow[S]=O,i.spotShadowMap[S]=le,E++}S++}else if(k.isRectAreaLight){const ee=e.get(k);ee.color.copy(H).multiplyScalar($),ee.halfWidth.set(k.width*.5,0,0),ee.halfHeight.set(0,k.height*.5,0),i.rectArea[x]=ee,x++}else if(k.isPointLight){const ee=e.get(k);if(ee.color.copy(k.color).multiplyScalar(k.intensity),ee.distance=k.distance,ee.decay=k.decay,k.castShadow){const Q=k.shadow,O=t.get(k);O.shadowIntensity=Q.intensity,O.shadowBias=Q.bias,O.shadowNormalBias=Q.normalBias,O.shadowRadius=Q.radius,O.shadowMapSize=Q.mapSize,O.shadowCameraNear=Q.camera.near,O.shadowCameraFar=Q.camera.far,i.pointShadow[y]=O,i.pointShadowMap[y]=le,i.pointShadowMatrix[y]=k.shadow.matrix,M++}i.point[y]=ee,y++}else if(k.isHemisphereLight){const ee=e.get(k);ee.skyColor.copy(k.color).multiplyScalar($),ee.groundColor.copy(k.groundColor).multiplyScalar($),i.hemi[g]=ee,g++}}x>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=rt.LTC_FLOAT_1,i.rectAreaLTC2=rt.LTC_FLOAT_2):(i.rectAreaLTC1=rt.LTC_HALF_1,i.rectAreaLTC2=rt.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=p;const N=i.hash;(N.directionalLength!==m||N.pointLength!==y||N.spotLength!==S||N.rectAreaLength!==x||N.hemiLength!==g||N.numDirectionalShadows!==_||N.numPointShadows!==M||N.numSpotShadows!==E||N.numSpotMaps!==A||N.numLightProbes!==L)&&(i.directional.length=m,i.spot.length=S,i.rectArea.length=x,i.point.length=y,i.hemi.length=g,i.directionalShadow.length=_,i.directionalShadowMap.length=_,i.pointShadow.length=M,i.pointShadowMap.length=M,i.spotShadow.length=E,i.spotShadowMap.length=E,i.directionalShadowMatrix.length=_,i.pointShadowMatrix.length=M,i.spotLightMatrix.length=E+A-P,i.spotLightMap.length=A,i.numSpotLightShadowsWithMaps=P,i.numLightProbes=L,N.directionalLength=m,N.pointLength=y,N.spotLength=S,N.rectAreaLength=x,N.hemiLength=g,N.numDirectionalShadows=_,N.numPointShadows=M,N.numSpotShadows=E,N.numSpotMaps=A,N.numLightProbes=L,i.version=ZY++)}function l(u,h){let f=0,p=0,m=0,y=0,S=0;const x=h.matrixWorldInverse;for(let g=0,_=u.length;g<_;g++){const M=u[g];if(M.isDirectionalLight){const E=i.directional[f];E.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(x),f++}else if(M.isSpotLight){const E=i.spot[m];E.position.setFromMatrixPosition(M.matrixWorld),E.position.applyMatrix4(x),E.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(x),m++}else if(M.isRectAreaLight){const E=i.rectArea[y];E.position.setFromMatrixPosition(M.matrixWorld),E.position.applyMatrix4(x),o.identity(),s.copy(M.matrixWorld),s.premultiply(x),o.extractRotation(s),E.halfWidth.set(M.width*.5,0,0),E.halfHeight.set(0,M.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),y++}else if(M.isPointLight){const E=i.point[p];E.position.setFromMatrixPosition(M.matrixWorld),E.position.applyMatrix4(x),p++}else if(M.isHemisphereLight){const E=i.hemi[S];E.direction.setFromMatrixPosition(M.matrixWorld),E.direction.transformDirection(x),S++}}}return{setup:a,setupView:l,state:i}}function rP(n){const e=new KY(n),t=[],i=[];function r(h){u.camera=h,t.length=0,i.length=0}function s(h){t.push(h)}function o(h){i.push(h)}function a(){e.setup(t)}function l(h){e.setupView(t,h)}const u={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function JY(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new rP(n),e.set(r,[a])):s>=o.length?(a=new rP(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}const QY=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,eq=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,tq=[new V(1,0,0),new V(-1,0,0),new V(0,1,0),new V(0,-1,0),new V(0,0,1),new V(0,0,-1)],nq=[new V(0,-1,0),new V(0,-1,0),new V(0,0,1),new V(0,0,-1),new V(0,-1,0),new V(0,-1,0)],sP=new kt,jd=new V,F_=new V;function iq(n,e,t){let i=new Qu;const r=new Ee,s=new Ee,o=new _n,a=new HM,l=new GM,u={},h=t.maxTextureSize,f={[Io]:ir,[ir]:Io,[ws]:ws},p=new rr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ee},radius:{value:4}},vertexShader:QY,fragmentShader:eq}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const y=new zt;y.setAttribute("position",new yn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new Bn(y,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=_u;let g=this.type;this.render=function(P,L,N){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||P.length===0)return;P.type===xh&&(nt("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),P.type=_u);const C=n.getRenderTarget(),R=n.getActiveCubeFace(),k=n.getActiveMipmapLevel(),H=n.state;H.setBlending(Ts),H.buffers.depth.getReversed()===!0?H.buffers.color.setClear(0,0,0,0):H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const $=g!==this.type;$&&L.traverse(function(ne){ne.material&&(Array.isArray(ne.material)?ne.material.forEach(le=>le.needsUpdate=!0):ne.material.needsUpdate=!0)});for(let ne=0,le=P.length;ne<le;ne++){const ee=P[ne],Q=ee.shadow;if(Q===void 0){nt("WebGLShadowMap:",ee,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;r.copy(Q.mapSize);const O=Q.getFrameExtents();if(r.multiply(O),s.copy(Q.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/O.x),r.x=s.x*O.x,Q.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/O.y),r.y=s.y*O.y,Q.mapSize.y=s.y)),Q.map===null||$===!0){if(Q.map!==null&&(Q.map.depthTexture!==null&&(Q.map.depthTexture.dispose(),Q.map.depthTexture=null),Q.map.dispose()),this.type===Tl){if(ee.isPointLight){nt("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}Q.map=new Gi(r.x,r.y,{format:Yl,type:Un,minFilter:nn,magFilter:nn,generateMipmaps:!1}),Q.map.texture.name=ee.name+".shadowMap",Q.map.depthTexture=new Zl(r.x,r.y,Cn),Q.map.depthTexture.name=ee.name+".shadowMapDepth",Q.map.depthTexture.format=Qs,Q.map.depthTexture.compareFunction=null,Q.map.depthTexture.minFilter=$n,Q.map.depthTexture.magFilter=$n}else{ee.isPointLight?(Q.map=new Pv(r.x),Q.map.depthTexture=new HL(r.x,Fr)):(Q.map=new Gi(r.x,r.y),Q.map.depthTexture=new Zl(r.x,r.y,Fr)),Q.map.depthTexture.name=ee.name+".shadowMap",Q.map.depthTexture.format=Qs;const X=n.state.buffers.depth.getReversed();this.type===_u?(Q.map.depthTexture.compareFunction=X?Tv:bv,Q.map.depthTexture.minFilter=nn,Q.map.depthTexture.magFilter=nn):(Q.map.depthTexture.compareFunction=null,Q.map.depthTexture.minFilter=$n,Q.map.depthTexture.magFilter=$n)}Q.camera.updateProjectionMatrix()}const Y=Q.map.isWebGLCubeRenderTarget?6:1;for(let X=0;X<Y;X++){if(Q.map.isWebGLCubeRenderTarget)n.setRenderTarget(Q.map,X),n.clear();else{X===0&&(n.setRenderTarget(Q.map),n.clear());const se=Q.getViewport(X);o.set(s.x*se.x,s.y*se.y,s.x*se.z,s.y*se.w),H.viewport(o)}if(ee.isPointLight){const se=Q.camera,me=Q.matrix,Re=ee.distance||se.far;Re!==se.far&&(se.far=Re,se.updateProjectionMatrix()),jd.setFromMatrixPosition(ee.matrixWorld),se.position.copy(jd),F_.copy(se.position),F_.add(tq[X]),se.up.copy(nq[X]),se.lookAt(F_),se.updateMatrixWorld(),me.makeTranslation(-jd.x,-jd.y,-jd.z),sP.multiplyMatrices(se.projectionMatrix,se.matrixWorldInverse),Q._frustum.setFromProjectionMatrix(sP,se.coordinateSystem,se.reversedDepth)}else Q.updateMatrices(ee);i=Q.getFrustum(),E(L,N,Q.camera,ee,this.type)}Q.isPointLightShadow!==!0&&this.type===Tl&&_(Q,N),Q.needsUpdate=!1}g=this.type,x.needsUpdate=!1,n.setRenderTarget(C,R,k)};function _(P,L){const N=e.update(S);p.defines.VSM_SAMPLES!==P.blurSamples&&(p.defines.VSM_SAMPLES=P.blurSamples,m.defines.VSM_SAMPLES=P.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new Gi(r.x,r.y,{format:Yl,type:Un})),p.uniforms.shadow_pass.value=P.map.depthTexture,p.uniforms.resolution.value=P.mapSize,p.uniforms.radius.value=P.radius,n.setRenderTarget(P.mapPass),n.clear(),n.renderBufferDirect(L,null,N,p,S,null),m.uniforms.shadow_pass.value=P.mapPass.texture,m.uniforms.resolution.value=P.mapSize,m.uniforms.radius.value=P.radius,n.setRenderTarget(P.map),n.clear(),n.renderBufferDirect(L,null,N,m,S,null)}function M(P,L,N,C){let R=null;const k=N.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(k!==void 0)R=k;else if(R=N.isPointLight===!0?l:a,n.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0||L.alphaToCoverage===!0){const H=R.uuid,$=L.uuid;let ne=u[H];ne===void 0&&(ne={},u[H]=ne);let le=ne[$];le===void 0&&(le=R.clone(),ne[$]=le,L.addEventListener("dispose",A)),R=le}if(R.visible=L.visible,R.wireframe=L.wireframe,C===Tl?R.side=L.shadowSide!==null?L.shadowSide:L.side:R.side=L.shadowSide!==null?L.shadowSide:f[L.side],R.alphaMap=L.alphaMap,R.alphaTest=L.alphaToCoverage===!0?.5:L.alphaTest,R.map=L.map,R.clipShadows=L.clipShadows,R.clippingPlanes=L.clippingPlanes,R.clipIntersection=L.clipIntersection,R.displacementMap=L.displacementMap,R.displacementScale=L.displacementScale,R.displacementBias=L.displacementBias,R.wireframeLinewidth=L.wireframeLinewidth,R.linewidth=L.linewidth,N.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const H=n.properties.get(R);H.light=N}return R}function E(P,L,N,C,R){if(P.visible===!1)return;if(P.layers.test(L.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&R===Tl)&&(!P.frustumCulled||i.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,P.matrixWorld);const $=e.update(P),ne=P.material;if(Array.isArray(ne)){const le=$.groups;for(let ee=0,Q=le.length;ee<Q;ee++){const O=le[ee],Y=ne[O.materialIndex];if(Y&&Y.visible){const X=M(P,Y,C,R);P.onBeforeShadow(n,P,L,N,$,X,O),n.renderBufferDirect(N,null,$,X,P,O),P.onAfterShadow(n,P,L,N,$,X,O)}}}else if(ne.visible){const le=M(P,ne,C,R);P.onBeforeShadow(n,P,L,N,$,le,null),n.renderBufferDirect(N,null,$,le,P,null),P.onAfterShadow(n,P,L,N,$,le,null)}}const H=P.children;for(let $=0,ne=H.length;$<ne;$++)E(H[$],L,N,C,R)}function A(P){P.target.removeEventListener("dispose",A);for(const N in u){const C=u[N],R=P.target.uuid;R in C&&(C[R].dispose(),delete C[R])}}}const rq={[r0]:s0,[o0]:c0,[a0]:u0,[Xl]:l0,[s0]:r0,[c0]:o0,[u0]:a0,[l0]:Xl};function sq(n,e){function t(){let K=!1;const he=new _n;let De=null;const Qe=new _n(0,0,0,0);return{setMask:function(Oe){De!==Oe&&!K&&(n.colorMask(Oe,Oe,Oe,Oe),De=Oe)},setLocked:function(Oe){K=Oe},setClear:function(Oe,be,ze,Et,tn){tn===!0&&(Oe*=Et,be*=Et,ze*=Et),he.set(Oe,be,ze,Et),Qe.equals(he)===!1&&(n.clearColor(Oe,be,ze,Et),Qe.copy(he))},reset:function(){K=!1,De=null,Qe.set(-1,0,0,0)}}}function i(){let K=!1,he=!1,De=null,Qe=null,Oe=null;return{setReversed:function(be){if(he!==be){const ze=e.get("EXT_clip_control");be?ze.clipControlEXT(ze.LOWER_LEFT_EXT,ze.ZERO_TO_ONE_EXT):ze.clipControlEXT(ze.LOWER_LEFT_EXT,ze.NEGATIVE_ONE_TO_ONE_EXT),he=be;const Et=Oe;Oe=null,this.setClear(Et)}},getReversed:function(){return he},setTest:function(be){be?Se(n.DEPTH_TEST):et(n.DEPTH_TEST)},setMask:function(be){De!==be&&!K&&(n.depthMask(be),De=be)},setFunc:function(be){if(he&&(be=rq[be]),Qe!==be){switch(be){case r0:n.depthFunc(n.NEVER);break;case s0:n.depthFunc(n.ALWAYS);break;case o0:n.depthFunc(n.LESS);break;case Xl:n.depthFunc(n.LEQUAL);break;case a0:n.depthFunc(n.EQUAL);break;case l0:n.depthFunc(n.GEQUAL);break;case c0:n.depthFunc(n.GREATER);break;case u0:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Qe=be}},setLocked:function(be){K=be},setClear:function(be){Oe!==be&&(he&&(be=1-be),n.clearDepth(be),Oe=be)},reset:function(){K=!1,De=null,Qe=null,Oe=null,he=!1}}}function r(){let K=!1,he=null,De=null,Qe=null,Oe=null,be=null,ze=null,Et=null,tn=null;return{setTest:function(Zt){K||(Zt?Se(n.STENCIL_TEST):et(n.STENCIL_TEST))},setMask:function(Zt){he!==Zt&&!K&&(n.stencilMask(Zt),he=Zt)},setFunc:function(Zt,jn,hi){(De!==Zt||Qe!==jn||Oe!==hi)&&(n.stencilFunc(Zt,jn,hi),De=Zt,Qe=jn,Oe=hi)},setOp:function(Zt,jn,hi){(be!==Zt||ze!==jn||Et!==hi)&&(n.stencilOp(Zt,jn,hi),be=Zt,ze=jn,Et=hi)},setLocked:function(Zt){K=Zt},setClear:function(Zt){tn!==Zt&&(n.clearStencil(Zt),tn=Zt)},reset:function(){K=!1,he=null,De=null,Qe=null,Oe=null,be=null,ze=null,Et=null,tn=null}}}const s=new t,o=new i,a=new r,l=new WeakMap,u=new WeakMap;let h={},f={},p=new WeakMap,m=[],y=null,S=!1,x=null,g=null,_=null,M=null,E=null,A=null,P=null,L=new ft(0,0,0),N=0,C=!1,R=null,k=null,H=null,$=null,ne=null;const le=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ee=!1,Q=0;const O=n.getParameter(n.VERSION);O.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(O)[1]),ee=Q>=1):O.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),ee=Q>=2);let Y=null,X={};const se=n.getParameter(n.SCISSOR_BOX),me=n.getParameter(n.VIEWPORT),Re=new _n().fromArray(se),at=new _n().fromArray(me);function Ct(K,he,De,Qe){const Oe=new Uint8Array(4),be=n.createTexture();n.bindTexture(K,be),n.texParameteri(K,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(K,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let ze=0;ze<De;ze++)K===n.TEXTURE_3D||K===n.TEXTURE_2D_ARRAY?n.texImage3D(he,0,n.RGBA,1,1,Qe,0,n.RGBA,n.UNSIGNED_BYTE,Oe):n.texImage2D(he+ze,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Oe);return be}const ue={};ue[n.TEXTURE_2D]=Ct(n.TEXTURE_2D,n.TEXTURE_2D,1),ue[n.TEXTURE_CUBE_MAP]=Ct(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ue[n.TEXTURE_2D_ARRAY]=Ct(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ue[n.TEXTURE_3D]=Ct(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),Se(n.DEPTH_TEST),o.setFunc(Xl),Pe(!1),Je(pS),Se(n.CULL_FACE),Te(Ts);function Se(K){h[K]!==!0&&(n.enable(K),h[K]=!0)}function et(K){h[K]!==!1&&(n.disable(K),h[K]=!1)}function wt(K,he){return f[K]!==he?(n.bindFramebuffer(K,he),f[K]=he,K===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=he),K===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=he),!0):!1}function st(K,he){let De=m,Qe=!1;if(K){De=p.get(he),De===void 0&&(De=[],p.set(he,De));const Oe=K.textures;if(De.length!==Oe.length||De[0]!==n.COLOR_ATTACHMENT0){for(let be=0,ze=Oe.length;be<ze;be++)De[be]=n.COLOR_ATTACHMENT0+be;De.length=Oe.length,Qe=!0}}else De[0]!==n.BACK&&(De[0]=n.BACK,Qe=!0);Qe&&n.drawBuffers(De)}function Ft(K){return y!==K?(n.useProgram(K),y=K,!0):!1}const Qt={[oa]:n.FUNC_ADD,[qN]:n.FUNC_SUBTRACT,[ZN]:n.FUNC_REVERSE_SUBTRACT};Qt[$N]=n.MIN,Qt[KN]=n.MAX;const _t={[JN]:n.ZERO,[QN]:n.ONE,[eL]:n.SRC_COLOR,[n0]:n.SRC_ALPHA,[oL]:n.SRC_ALPHA_SATURATE,[rL]:n.DST_COLOR,[nL]:n.DST_ALPHA,[tL]:n.ONE_MINUS_SRC_COLOR,[i0]:n.ONE_MINUS_SRC_ALPHA,[sL]:n.ONE_MINUS_DST_COLOR,[iL]:n.ONE_MINUS_DST_ALPHA,[aL]:n.CONSTANT_COLOR,[lL]:n.ONE_MINUS_CONSTANT_COLOR,[cL]:n.CONSTANT_ALPHA,[uL]:n.ONE_MINUS_CONSTANT_ALPHA};function Te(K,he,De,Qe,Oe,be,ze,Et,tn,Zt){if(K===Ts){S===!0&&(et(n.BLEND),S=!1);return}if(S===!1&&(Se(n.BLEND),S=!0),K!==YN){if(K!==x||Zt!==C){if((g!==oa||E!==oa)&&(n.blendEquation(n.FUNC_ADD),g=oa,E=oa),Zt)switch(K){case Ul:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case mS:n.blendFunc(n.ONE,n.ONE);break;case gS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case vS:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:At("WebGLState: Invalid blending: ",K);break}else switch(K){case Ul:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case mS:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case gS:At("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case vS:At("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:At("WebGLState: Invalid blending: ",K);break}_=null,M=null,A=null,P=null,L.set(0,0,0),N=0,x=K,C=Zt}return}Oe=Oe||he,be=be||De,ze=ze||Qe,(he!==g||Oe!==E)&&(n.blendEquationSeparate(Qt[he],Qt[Oe]),g=he,E=Oe),(De!==_||Qe!==M||be!==A||ze!==P)&&(n.blendFuncSeparate(_t[De],_t[Qe],_t[be],_t[ze]),_=De,M=Qe,A=be,P=ze),(Et.equals(L)===!1||tn!==N)&&(n.blendColor(Et.r,Et.g,Et.b,tn),L.copy(Et),N=tn),x=K,C=!1}function Ue(K,he){K.side===ws?et(n.CULL_FACE):Se(n.CULL_FACE);let De=K.side===ir;he&&(De=!De),Pe(De),K.blending===Ul&&K.transparent===!1?Te(Ts):Te(K.blending,K.blendEquation,K.blendSrc,K.blendDst,K.blendEquationAlpha,K.blendSrcAlpha,K.blendDstAlpha,K.blendColor,K.blendAlpha,K.premultipliedAlpha),o.setFunc(K.depthFunc),o.setTest(K.depthTest),o.setMask(K.depthWrite),s.setMask(K.colorWrite);const Qe=K.stencilWrite;a.setTest(Qe),Qe&&(a.setMask(K.stencilWriteMask),a.setFunc(K.stencilFunc,K.stencilRef,K.stencilFuncMask),a.setOp(K.stencilFail,K.stencilZFail,K.stencilZPass)),St(K.polygonOffset,K.polygonOffsetFactor,K.polygonOffsetUnits),K.alphaToCoverage===!0?Se(n.SAMPLE_ALPHA_TO_COVERAGE):et(n.SAMPLE_ALPHA_TO_COVERAGE)}function Pe(K){R!==K&&(K?n.frontFace(n.CW):n.frontFace(n.CCW),R=K)}function Je(K){K!==WN?(Se(n.CULL_FACE),K!==k&&(K===pS?n.cullFace(n.BACK):K===jN?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):et(n.CULL_FACE),k=K}function G(K){K!==H&&(ee&&n.lineWidth(K),H=K)}function St(K,he,De){K?(Se(n.POLYGON_OFFSET_FILL),($!==he||ne!==De)&&(n.polygonOffset(he,De),$=he,ne=De)):et(n.POLYGON_OFFSET_FILL)}function tt(K){K?Se(n.SCISSOR_TEST):et(n.SCISSOR_TEST)}function Pt(K){K===void 0&&(K=n.TEXTURE0+le-1),Y!==K&&(n.activeTexture(K),Y=K)}function je(K,he,De){De===void 0&&(Y===null?De=n.TEXTURE0+le-1:De=Y);let Qe=X[De];Qe===void 0&&(Qe={type:void 0,texture:void 0},X[De]=Qe),(Qe.type!==K||Qe.texture!==he)&&(Y!==De&&(n.activeTexture(De),Y=De),n.bindTexture(K,he||ue[K]),Qe.type=K,Qe.texture=he)}function z(){const K=X[Y];K!==void 0&&K.type!==void 0&&(n.bindTexture(K.type,null),K.type=void 0,K.texture=void 0)}function D(){try{n.compressedTexImage2D(...arguments)}catch(K){At("WebGLState:",K)}}function ie(){try{n.compressedTexImage3D(...arguments)}catch(K){At("WebGLState:",K)}}function ge(){try{n.texSubImage2D(...arguments)}catch(K){At("WebGLState:",K)}}function Ae(){try{n.texSubImage3D(...arguments)}catch(K){At("WebGLState:",K)}}function ve(){try{n.compressedTexSubImage2D(...arguments)}catch(K){At("WebGLState:",K)}}function dt(){try{n.compressedTexSubImage3D(...arguments)}catch(K){At("WebGLState:",K)}}function qe(){try{n.texStorage2D(...arguments)}catch(K){At("WebGLState:",K)}}function ht(){try{n.texStorage3D(...arguments)}catch(K){At("WebGLState:",K)}}function It(){try{n.texImage2D(...arguments)}catch(K){At("WebGLState:",K)}}function Ne(){try{n.texImage3D(...arguments)}catch(K){At("WebGLState:",K)}}function Be(K){Re.equals(K)===!1&&(n.scissor(K.x,K.y,K.z,K.w),Re.copy(K))}function ut(K){at.equals(K)===!1&&(n.viewport(K.x,K.y,K.z,K.w),at.copy(K))}function Z(K,he){let De=u.get(he);De===void 0&&(De=new WeakMap,u.set(he,De));let Qe=De.get(K);Qe===void 0&&(Qe=n.getUniformBlockIndex(he,K.name),De.set(K,Qe))}function de(K,he){const Qe=u.get(he).get(K);l.get(he)!==Qe&&(n.uniformBlockBinding(he,Qe,K.__bindingPointIndex),l.set(he,Qe))}function Le(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},Y=null,X={},f={},p=new WeakMap,m=[],y=null,S=!1,x=null,g=null,_=null,M=null,E=null,A=null,P=null,L=new ft(0,0,0),N=0,C=!1,R=null,k=null,H=null,$=null,ne=null,Re.set(0,0,n.canvas.width,n.canvas.height),at.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:Se,disable:et,bindFramebuffer:wt,drawBuffers:st,useProgram:Ft,setBlending:Te,setMaterial:Ue,setFlipSided:Pe,setCullFace:Je,setLineWidth:G,setPolygonOffset:St,setScissorTest:tt,activeTexture:Pt,bindTexture:je,unbindTexture:z,compressedTexImage2D:D,compressedTexImage3D:ie,texImage2D:It,texImage3D:Ne,updateUBOMapping:Z,uniformBlockBinding:de,texStorage2D:qe,texStorage3D:ht,texSubImage2D:ge,texSubImage3D:Ae,compressedTexSubImage2D:ve,compressedTexSubImage3D:dt,scissor:Be,viewport:ut,reset:Le}}function oq(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Ee,h=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(z,D){return m?new OffscreenCanvas(z,D):lf("canvas")}function S(z,D,ie){let ge=1;const Ae=je(z);if((Ae.width>ie||Ae.height>ie)&&(ge=ie/Math.max(Ae.width,Ae.height)),ge<1)if(typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&z instanceof ImageBitmap||typeof VideoFrame<"u"&&z instanceof VideoFrame){const ve=Math.floor(ge*Ae.width),dt=Math.floor(ge*Ae.height);f===void 0&&(f=y(ve,dt));const qe=D?y(ve,dt):f;return qe.width=ve,qe.height=dt,qe.getContext("2d").drawImage(z,0,0,ve,dt),nt("WebGLRenderer: Texture has been resized from ("+Ae.width+"x"+Ae.height+") to ("+ve+"x"+dt+")."),qe}else return"data"in z&&nt("WebGLRenderer: Image in DataTexture is too big ("+Ae.width+"x"+Ae.height+")."),z;return z}function x(z){return z.generateMipmaps}function g(z){n.generateMipmap(z)}function _(z){return z.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:z.isWebGL3DRenderTarget?n.TEXTURE_3D:z.isWebGLArrayRenderTarget||z.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function M(z,D,ie,ge,Ae=!1){if(z!==null){if(n[z]!==void 0)return n[z];nt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+z+"'")}let ve=D;if(D===n.RED&&(ie===n.FLOAT&&(ve=n.R32F),ie===n.HALF_FLOAT&&(ve=n.R16F),ie===n.UNSIGNED_BYTE&&(ve=n.R8)),D===n.RED_INTEGER&&(ie===n.UNSIGNED_BYTE&&(ve=n.R8UI),ie===n.UNSIGNED_SHORT&&(ve=n.R16UI),ie===n.UNSIGNED_INT&&(ve=n.R32UI),ie===n.BYTE&&(ve=n.R8I),ie===n.SHORT&&(ve=n.R16I),ie===n.INT&&(ve=n.R32I)),D===n.RG&&(ie===n.FLOAT&&(ve=n.RG32F),ie===n.HALF_FLOAT&&(ve=n.RG16F),ie===n.UNSIGNED_BYTE&&(ve=n.RG8)),D===n.RG_INTEGER&&(ie===n.UNSIGNED_BYTE&&(ve=n.RG8UI),ie===n.UNSIGNED_SHORT&&(ve=n.RG16UI),ie===n.UNSIGNED_INT&&(ve=n.RG32UI),ie===n.BYTE&&(ve=n.RG8I),ie===n.SHORT&&(ve=n.RG16I),ie===n.INT&&(ve=n.RG32I)),D===n.RGB_INTEGER&&(ie===n.UNSIGNED_BYTE&&(ve=n.RGB8UI),ie===n.UNSIGNED_SHORT&&(ve=n.RGB16UI),ie===n.UNSIGNED_INT&&(ve=n.RGB32UI),ie===n.BYTE&&(ve=n.RGB8I),ie===n.SHORT&&(ve=n.RGB16I),ie===n.INT&&(ve=n.RGB32I)),D===n.RGBA_INTEGER&&(ie===n.UNSIGNED_BYTE&&(ve=n.RGBA8UI),ie===n.UNSIGNED_SHORT&&(ve=n.RGBA16UI),ie===n.UNSIGNED_INT&&(ve=n.RGBA32UI),ie===n.BYTE&&(ve=n.RGBA8I),ie===n.SHORT&&(ve=n.RGBA16I),ie===n.INT&&(ve=n.RGBA32I)),D===n.RGB&&(ie===n.UNSIGNED_INT_5_9_9_9_REV&&(ve=n.RGB9_E5),ie===n.UNSIGNED_INT_10F_11F_11F_REV&&(ve=n.R11F_G11F_B10F)),D===n.RGBA){const dt=Ae?of:sn.getTransfer(ge);ie===n.FLOAT&&(ve=n.RGBA32F),ie===n.HALF_FLOAT&&(ve=n.RGBA16F),ie===n.UNSIGNED_BYTE&&(ve=dt===fn?n.SRGB8_ALPHA8:n.RGBA8),ie===n.UNSIGNED_SHORT_4_4_4_4&&(ve=n.RGBA4),ie===n.UNSIGNED_SHORT_5_5_5_1&&(ve=n.RGB5_A1)}return(ve===n.R16F||ve===n.R32F||ve===n.RG16F||ve===n.RG32F||ve===n.RGBA16F||ve===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ve}function E(z,D){let ie;return z?D===null||D===Fr||D===Fu?ie=n.DEPTH24_STENCIL8:D===Cn?ie=n.DEPTH32F_STENCIL8:D===Du&&(ie=n.DEPTH24_STENCIL8,nt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):D===null||D===Fr||D===Fu?ie=n.DEPTH_COMPONENT24:D===Cn?ie=n.DEPTH_COMPONENT32F:D===Du&&(ie=n.DEPTH_COMPONENT16),ie}function A(z,D){return x(z)===!0||z.isFramebufferTexture&&z.minFilter!==$n&&z.minFilter!==nn?Math.log2(Math.max(D.width,D.height))+1:z.mipmaps!==void 0&&z.mipmaps.length>0?z.mipmaps.length:z.isCompressedTexture&&Array.isArray(z.image)?D.mipmaps.length:1}function P(z){const D=z.target;D.removeEventListener("dispose",P),N(D),D.isVideoTexture&&h.delete(D)}function L(z){const D=z.target;D.removeEventListener("dispose",L),R(D)}function N(z){const D=i.get(z);if(D.__webglInit===void 0)return;const ie=z.source,ge=p.get(ie);if(ge){const Ae=ge[D.__cacheKey];Ae.usedTimes--,Ae.usedTimes===0&&C(z),Object.keys(ge).length===0&&p.delete(ie)}i.remove(z)}function C(z){const D=i.get(z);n.deleteTexture(D.__webglTexture);const ie=z.source,ge=p.get(ie);delete ge[D.__cacheKey],o.memory.textures--}function R(z){const D=i.get(z);if(z.depthTexture&&(z.depthTexture.dispose(),i.remove(z.depthTexture)),z.isWebGLCubeRenderTarget)for(let ge=0;ge<6;ge++){if(Array.isArray(D.__webglFramebuffer[ge]))for(let Ae=0;Ae<D.__webglFramebuffer[ge].length;Ae++)n.deleteFramebuffer(D.__webglFramebuffer[ge][Ae]);else n.deleteFramebuffer(D.__webglFramebuffer[ge]);D.__webglDepthbuffer&&n.deleteRenderbuffer(D.__webglDepthbuffer[ge])}else{if(Array.isArray(D.__webglFramebuffer))for(let ge=0;ge<D.__webglFramebuffer.length;ge++)n.deleteFramebuffer(D.__webglFramebuffer[ge]);else n.deleteFramebuffer(D.__webglFramebuffer);if(D.__webglDepthbuffer&&n.deleteRenderbuffer(D.__webglDepthbuffer),D.__webglMultisampledFramebuffer&&n.deleteFramebuffer(D.__webglMultisampledFramebuffer),D.__webglColorRenderbuffer)for(let ge=0;ge<D.__webglColorRenderbuffer.length;ge++)D.__webglColorRenderbuffer[ge]&&n.deleteRenderbuffer(D.__webglColorRenderbuffer[ge]);D.__webglDepthRenderbuffer&&n.deleteRenderbuffer(D.__webglDepthRenderbuffer)}const ie=z.textures;for(let ge=0,Ae=ie.length;ge<Ae;ge++){const ve=i.get(ie[ge]);ve.__webglTexture&&(n.deleteTexture(ve.__webglTexture),o.memory.textures--),i.remove(ie[ge])}i.remove(z)}let k=0;function H(){k=0}function $(){const z=k;return z>=r.maxTextures&&nt("WebGLTextures: Trying to use "+z+" texture units while this GPU supports only "+r.maxTextures),k+=1,z}function ne(z){const D=[];return D.push(z.wrapS),D.push(z.wrapT),D.push(z.wrapR||0),D.push(z.magFilter),D.push(z.minFilter),D.push(z.anisotropy),D.push(z.internalFormat),D.push(z.format),D.push(z.type),D.push(z.generateMipmaps),D.push(z.premultiplyAlpha),D.push(z.flipY),D.push(z.unpackAlignment),D.push(z.colorSpace),D.join()}function le(z,D){const ie=i.get(z);if(z.isVideoTexture&&tt(z),z.isRenderTargetTexture===!1&&z.isExternalTexture!==!0&&z.version>0&&ie.__version!==z.version){const ge=z.image;if(ge===null)nt("WebGLRenderer: Texture marked for update but no image data found.");else if(ge.complete===!1)nt("WebGLRenderer: Texture marked for update but image is incomplete");else{ue(ie,z,D);return}}else z.isExternalTexture&&(ie.__webglTexture=z.sourceTexture?z.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,ie.__webglTexture,n.TEXTURE0+D)}function ee(z,D){const ie=i.get(z);if(z.isRenderTargetTexture===!1&&z.version>0&&ie.__version!==z.version){ue(ie,z,D);return}else z.isExternalTexture&&(ie.__webglTexture=z.sourceTexture?z.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,ie.__webglTexture,n.TEXTURE0+D)}function Q(z,D){const ie=i.get(z);if(z.isRenderTargetTexture===!1&&z.version>0&&ie.__version!==z.version){ue(ie,z,D);return}t.bindTexture(n.TEXTURE_3D,ie.__webglTexture,n.TEXTURE0+D)}function O(z,D){const ie=i.get(z);if(z.isCubeDepthTexture!==!0&&z.version>0&&ie.__version!==z.version){Se(ie,z,D);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ie.__webglTexture,n.TEXTURE0+D)}const Y={[tf]:n.REPEAT,[Wn]:n.CLAMP_TO_EDGE,[nf]:n.MIRRORED_REPEAT},X={[$n]:n.NEAREST,[_M]:n.NEAREST_MIPMAP_NEAREST,[au]:n.NEAREST_MIPMAP_LINEAR,[nn]:n.LINEAR,[_h]:n.LINEAR_MIPMAP_NEAREST,[js]:n.LINEAR_MIPMAP_LINEAR},se={[xL]:n.NEVER,[EL]:n.ALWAYS,[_L]:n.LESS,[bv]:n.LEQUAL,[SL]:n.EQUAL,[Tv]:n.GEQUAL,[wL]:n.GREATER,[ML]:n.NOTEQUAL};function me(z,D){if(D.type===Cn&&e.has("OES_texture_float_linear")===!1&&(D.magFilter===nn||D.magFilter===_h||D.magFilter===au||D.magFilter===js||D.minFilter===nn||D.minFilter===_h||D.minFilter===au||D.minFilter===js)&&nt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(z,n.TEXTURE_WRAP_S,Y[D.wrapS]),n.texParameteri(z,n.TEXTURE_WRAP_T,Y[D.wrapT]),(z===n.TEXTURE_3D||z===n.TEXTURE_2D_ARRAY)&&n.texParameteri(z,n.TEXTURE_WRAP_R,Y[D.wrapR]),n.texParameteri(z,n.TEXTURE_MAG_FILTER,X[D.magFilter]),n.texParameteri(z,n.TEXTURE_MIN_FILTER,X[D.minFilter]),D.compareFunction&&(n.texParameteri(z,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(z,n.TEXTURE_COMPARE_FUNC,se[D.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(D.magFilter===$n||D.minFilter!==au&&D.minFilter!==js||D.type===Cn&&e.has("OES_texture_float_linear")===!1)return;if(D.anisotropy>1||i.get(D).__currentAnisotropy){const ie=e.get("EXT_texture_filter_anisotropic");n.texParameterf(z,ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,r.getMaxAnisotropy())),i.get(D).__currentAnisotropy=D.anisotropy}}}function Re(z,D){let ie=!1;z.__webglInit===void 0&&(z.__webglInit=!0,D.addEventListener("dispose",P));const ge=D.source;let Ae=p.get(ge);Ae===void 0&&(Ae={},p.set(ge,Ae));const ve=ne(D);if(ve!==z.__cacheKey){Ae[ve]===void 0&&(Ae[ve]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ie=!0),Ae[ve].usedTimes++;const dt=Ae[z.__cacheKey];dt!==void 0&&(Ae[z.__cacheKey].usedTimes--,dt.usedTimes===0&&C(D)),z.__cacheKey=ve,z.__webglTexture=Ae[ve].texture}return ie}function at(z,D,ie){return Math.floor(Math.floor(z/ie)/D)}function Ct(z,D,ie,ge){const ve=z.updateRanges;if(ve.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,D.width,D.height,ie,ge,D.data);else{ve.sort((Ne,Be)=>Ne.start-Be.start);let dt=0;for(let Ne=1;Ne<ve.length;Ne++){const Be=ve[dt],ut=ve[Ne],Z=Be.start+Be.count,de=at(ut.start,D.width,4),Le=at(Be.start,D.width,4);ut.start<=Z+1&&de===Le&&at(ut.start+ut.count-1,D.width,4)===de?Be.count=Math.max(Be.count,ut.start+ut.count-Be.start):(++dt,ve[dt]=ut)}ve.length=dt+1;const qe=n.getParameter(n.UNPACK_ROW_LENGTH),ht=n.getParameter(n.UNPACK_SKIP_PIXELS),It=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,D.width);for(let Ne=0,Be=ve.length;Ne<Be;Ne++){const ut=ve[Ne],Z=Math.floor(ut.start/4),de=Math.ceil(ut.count/4),Le=Z%D.width,K=Math.floor(Z/D.width),he=de,De=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Le),n.pixelStorei(n.UNPACK_SKIP_ROWS,K),t.texSubImage2D(n.TEXTURE_2D,0,Le,K,he,De,ie,ge,D.data)}z.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,qe),n.pixelStorei(n.UNPACK_SKIP_PIXELS,ht),n.pixelStorei(n.UNPACK_SKIP_ROWS,It)}}function ue(z,D,ie){let ge=n.TEXTURE_2D;(D.isDataArrayTexture||D.isCompressedArrayTexture)&&(ge=n.TEXTURE_2D_ARRAY),D.isData3DTexture&&(ge=n.TEXTURE_3D);const Ae=Re(z,D),ve=D.source;t.bindTexture(ge,z.__webglTexture,n.TEXTURE0+ie);const dt=i.get(ve);if(ve.version!==dt.__version||Ae===!0){t.activeTexture(n.TEXTURE0+ie);const qe=sn.getPrimaries(sn.workingColorSpace),ht=D.colorSpace===_o?null:sn.getPrimaries(D.colorSpace),It=D.colorSpace===_o||qe===ht?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,D.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,D.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,It);let Ne=S(D.image,!1,r.maxTextureSize);Ne=Pt(D,Ne);const Be=s.convert(D.format,D.colorSpace),ut=s.convert(D.type);let Z=M(D.internalFormat,Be,ut,D.colorSpace,D.isVideoTexture);me(ge,D);let de;const Le=D.mipmaps,K=D.isVideoTexture!==!0,he=dt.__version===void 0||Ae===!0,De=ve.dataReady,Qe=A(D,Ne);if(D.isDepthTexture)Z=E(D.format===da,D.type),he&&(K?t.texStorage2D(n.TEXTURE_2D,1,Z,Ne.width,Ne.height):t.texImage2D(n.TEXTURE_2D,0,Z,Ne.width,Ne.height,0,Be,ut,null));else if(D.isDataTexture)if(Le.length>0){K&&he&&t.texStorage2D(n.TEXTURE_2D,Qe,Z,Le[0].width,Le[0].height);for(let Oe=0,be=Le.length;Oe<be;Oe++)de=Le[Oe],K?De&&t.texSubImage2D(n.TEXTURE_2D,Oe,0,0,de.width,de.height,Be,ut,de.data):t.texImage2D(n.TEXTURE_2D,Oe,Z,de.width,de.height,0,Be,ut,de.data);D.generateMipmaps=!1}else K?(he&&t.texStorage2D(n.TEXTURE_2D,Qe,Z,Ne.width,Ne.height),De&&Ct(D,Ne,Be,ut)):t.texImage2D(n.TEXTURE_2D,0,Z,Ne.width,Ne.height,0,Be,ut,Ne.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){K&&he&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Qe,Z,Le[0].width,Le[0].height,Ne.depth);for(let Oe=0,be=Le.length;Oe<be;Oe++)if(de=Le[Oe],D.format!==Kn)if(Be!==null)if(K){if(De)if(D.layerUpdates.size>0){const ze=PS(de.width,de.height,D.format,D.type);for(const Et of D.layerUpdates){const tn=de.data.subarray(Et*ze/de.data.BYTES_PER_ELEMENT,(Et+1)*ze/de.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Oe,0,0,Et,de.width,de.height,1,Be,tn)}D.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Oe,0,0,0,de.width,de.height,Ne.depth,Be,de.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Oe,Z,de.width,de.height,Ne.depth,0,de.data,0,0);else nt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else K?De&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Oe,0,0,0,de.width,de.height,Ne.depth,Be,ut,de.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Oe,Z,de.width,de.height,Ne.depth,0,Be,ut,de.data)}else{K&&he&&t.texStorage2D(n.TEXTURE_2D,Qe,Z,Le[0].width,Le[0].height);for(let Oe=0,be=Le.length;Oe<be;Oe++)de=Le[Oe],D.format!==Kn?Be!==null?K?De&&t.compressedTexSubImage2D(n.TEXTURE_2D,Oe,0,0,de.width,de.height,Be,de.data):t.compressedTexImage2D(n.TEXTURE_2D,Oe,Z,de.width,de.height,0,de.data):nt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):K?De&&t.texSubImage2D(n.TEXTURE_2D,Oe,0,0,de.width,de.height,Be,ut,de.data):t.texImage2D(n.TEXTURE_2D,Oe,Z,de.width,de.height,0,Be,ut,de.data)}else if(D.isDataArrayTexture)if(K){if(he&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Qe,Z,Ne.width,Ne.height,Ne.depth),De)if(D.layerUpdates.size>0){const Oe=PS(Ne.width,Ne.height,D.format,D.type);for(const be of D.layerUpdates){const ze=Ne.data.subarray(be*Oe/Ne.data.BYTES_PER_ELEMENT,(be+1)*Oe/Ne.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,be,Ne.width,Ne.height,1,Be,ut,ze)}D.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ne.width,Ne.height,Ne.depth,Be,ut,Ne.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Z,Ne.width,Ne.height,Ne.depth,0,Be,ut,Ne.data);else if(D.isData3DTexture)K?(he&&t.texStorage3D(n.TEXTURE_3D,Qe,Z,Ne.width,Ne.height,Ne.depth),De&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ne.width,Ne.height,Ne.depth,Be,ut,Ne.data)):t.texImage3D(n.TEXTURE_3D,0,Z,Ne.width,Ne.height,Ne.depth,0,Be,ut,Ne.data);else if(D.isFramebufferTexture){if(he)if(K)t.texStorage2D(n.TEXTURE_2D,Qe,Z,Ne.width,Ne.height);else{let Oe=Ne.width,be=Ne.height;for(let ze=0;ze<Qe;ze++)t.texImage2D(n.TEXTURE_2D,ze,Z,Oe,be,0,Be,ut,null),Oe>>=1,be>>=1}}else if(Le.length>0){if(K&&he){const Oe=je(Le[0]);t.texStorage2D(n.TEXTURE_2D,Qe,Z,Oe.width,Oe.height)}for(let Oe=0,be=Le.length;Oe<be;Oe++)de=Le[Oe],K?De&&t.texSubImage2D(n.TEXTURE_2D,Oe,0,0,Be,ut,de):t.texImage2D(n.TEXTURE_2D,Oe,Z,Be,ut,de);D.generateMipmaps=!1}else if(K){if(he){const Oe=je(Ne);t.texStorage2D(n.TEXTURE_2D,Qe,Z,Oe.width,Oe.height)}De&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Be,ut,Ne)}else t.texImage2D(n.TEXTURE_2D,0,Z,Be,ut,Ne);x(D)&&g(ge),dt.__version=ve.version,D.onUpdate&&D.onUpdate(D)}z.__version=D.version}function Se(z,D,ie){if(D.image.length!==6)return;const ge=Re(z,D),Ae=D.source;t.bindTexture(n.TEXTURE_CUBE_MAP,z.__webglTexture,n.TEXTURE0+ie);const ve=i.get(Ae);if(Ae.version!==ve.__version||ge===!0){t.activeTexture(n.TEXTURE0+ie);const dt=sn.getPrimaries(sn.workingColorSpace),qe=D.colorSpace===_o?null:sn.getPrimaries(D.colorSpace),ht=D.colorSpace===_o||dt===qe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,D.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,D.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ht);const It=D.isCompressedTexture||D.image[0].isCompressedTexture,Ne=D.image[0]&&D.image[0].isDataTexture,Be=[];for(let be=0;be<6;be++)!It&&!Ne?Be[be]=S(D.image[be],!0,r.maxCubemapSize):Be[be]=Ne?D.image[be].image:D.image[be],Be[be]=Pt(D,Be[be]);const ut=Be[0],Z=s.convert(D.format,D.colorSpace),de=s.convert(D.type),Le=M(D.internalFormat,Z,de,D.colorSpace),K=D.isVideoTexture!==!0,he=ve.__version===void 0||ge===!0,De=Ae.dataReady;let Qe=A(D,ut);me(n.TEXTURE_CUBE_MAP,D);let Oe;if(It){K&&he&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Qe,Le,ut.width,ut.height);for(let be=0;be<6;be++){Oe=Be[be].mipmaps;for(let ze=0;ze<Oe.length;ze++){const Et=Oe[ze];D.format!==Kn?Z!==null?K?De&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,ze,0,0,Et.width,Et.height,Z,Et.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,ze,Le,Et.width,Et.height,0,Et.data):nt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):K?De&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,ze,0,0,Et.width,Et.height,Z,de,Et.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,ze,Le,Et.width,Et.height,0,Z,de,Et.data)}}}else{if(Oe=D.mipmaps,K&&he){Oe.length>0&&Qe++;const be=je(Be[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Qe,Le,be.width,be.height)}for(let be=0;be<6;be++)if(Ne){K?De&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,0,0,0,Be[be].width,Be[be].height,Z,de,Be[be].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,0,Le,Be[be].width,Be[be].height,0,Z,de,Be[be].data);for(let ze=0;ze<Oe.length;ze++){const tn=Oe[ze].image[be].image;K?De&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,ze+1,0,0,tn.width,tn.height,Z,de,tn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,ze+1,Le,tn.width,tn.height,0,Z,de,tn.data)}}else{K?De&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,0,0,0,Z,de,Be[be]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,0,Le,Z,de,Be[be]);for(let ze=0;ze<Oe.length;ze++){const Et=Oe[ze];K?De&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,ze+1,0,0,Z,de,Et.image[be]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,ze+1,Le,Z,de,Et.image[be])}}}x(D)&&g(n.TEXTURE_CUBE_MAP),ve.__version=Ae.version,D.onUpdate&&D.onUpdate(D)}z.__version=D.version}function et(z,D,ie,ge,Ae,ve){const dt=s.convert(ie.format,ie.colorSpace),qe=s.convert(ie.type),ht=M(ie.internalFormat,dt,qe,ie.colorSpace),It=i.get(D),Ne=i.get(ie);if(Ne.__renderTarget=D,!It.__hasExternalTextures){const Be=Math.max(1,D.width>>ve),ut=Math.max(1,D.height>>ve);Ae===n.TEXTURE_3D||Ae===n.TEXTURE_2D_ARRAY?t.texImage3D(Ae,ve,ht,Be,ut,D.depth,0,dt,qe,null):t.texImage2D(Ae,ve,ht,Be,ut,0,dt,qe,null)}t.bindFramebuffer(n.FRAMEBUFFER,z),St(D)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ge,Ae,Ne.__webglTexture,0,G(D)):(Ae===n.TEXTURE_2D||Ae>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ae<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ge,Ae,Ne.__webglTexture,ve),t.bindFramebuffer(n.FRAMEBUFFER,null)}function wt(z,D,ie){if(n.bindRenderbuffer(n.RENDERBUFFER,z),D.depthBuffer){const ge=D.depthTexture,Ae=ge&&ge.isDepthTexture?ge.type:null,ve=E(D.stencilBuffer,Ae),dt=D.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;St(D)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,G(D),ve,D.width,D.height):ie?n.renderbufferStorageMultisample(n.RENDERBUFFER,G(D),ve,D.width,D.height):n.renderbufferStorage(n.RENDERBUFFER,ve,D.width,D.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,dt,n.RENDERBUFFER,z)}else{const ge=D.textures;for(let Ae=0;Ae<ge.length;Ae++){const ve=ge[Ae],dt=s.convert(ve.format,ve.colorSpace),qe=s.convert(ve.type),ht=M(ve.internalFormat,dt,qe,ve.colorSpace);St(D)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,G(D),ht,D.width,D.height):ie?n.renderbufferStorageMultisample(n.RENDERBUFFER,G(D),ht,D.width,D.height):n.renderbufferStorage(n.RENDERBUFFER,ht,D.width,D.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function st(z,D,ie){const ge=D.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(n.FRAMEBUFFER,z),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ae=i.get(D.depthTexture);if(Ae.__renderTarget=D,(!Ae.__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),ge){if(Ae.__webglInit===void 0&&(Ae.__webglInit=!0,D.depthTexture.addEventListener("dispose",P)),Ae.__webglTexture===void 0){Ae.__webglTexture=n.createTexture(),t.bindTexture(n.TEXTURE_CUBE_MAP,Ae.__webglTexture),me(n.TEXTURE_CUBE_MAP,D.depthTexture);const It=s.convert(D.depthTexture.format),Ne=s.convert(D.depthTexture.type);let Be;D.depthTexture.format===Qs?Be=n.DEPTH_COMPONENT24:D.depthTexture.format===da&&(Be=n.DEPTH24_STENCIL8);for(let ut=0;ut<6;ut++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ut,0,Be,D.width,D.height,0,It,Ne,null)}}else le(D.depthTexture,0);const ve=Ae.__webglTexture,dt=G(D),qe=ge?n.TEXTURE_CUBE_MAP_POSITIVE_X+ie:n.TEXTURE_2D,ht=D.depthTexture.format===da?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(D.depthTexture.format===Qs)St(D)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ht,qe,ve,0,dt):n.framebufferTexture2D(n.FRAMEBUFFER,ht,qe,ve,0);else if(D.depthTexture.format===da)St(D)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ht,qe,ve,0,dt):n.framebufferTexture2D(n.FRAMEBUFFER,ht,qe,ve,0);else throw new Error("Unknown depthTexture format")}function Ft(z){const D=i.get(z),ie=z.isWebGLCubeRenderTarget===!0;if(D.__boundDepthTexture!==z.depthTexture){const ge=z.depthTexture;if(D.__depthDisposeCallback&&D.__depthDisposeCallback(),ge){const Ae=()=>{delete D.__boundDepthTexture,delete D.__depthDisposeCallback,ge.removeEventListener("dispose",Ae)};ge.addEventListener("dispose",Ae),D.__depthDisposeCallback=Ae}D.__boundDepthTexture=ge}if(z.depthTexture&&!D.__autoAllocateDepthBuffer)if(ie)for(let ge=0;ge<6;ge++)st(D.__webglFramebuffer[ge],z,ge);else{const ge=z.texture.mipmaps;ge&&ge.length>0?st(D.__webglFramebuffer[0],z,0):st(D.__webglFramebuffer,z,0)}else if(ie){D.__webglDepthbuffer=[];for(let ge=0;ge<6;ge++)if(t.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer[ge]),D.__webglDepthbuffer[ge]===void 0)D.__webglDepthbuffer[ge]=n.createRenderbuffer(),wt(D.__webglDepthbuffer[ge],z,!1);else{const Ae=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ve=D.__webglDepthbuffer[ge];n.bindRenderbuffer(n.RENDERBUFFER,ve),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ae,n.RENDERBUFFER,ve)}}else{const ge=z.texture.mipmaps;if(ge&&ge.length>0?t.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer),D.__webglDepthbuffer===void 0)D.__webglDepthbuffer=n.createRenderbuffer(),wt(D.__webglDepthbuffer,z,!1);else{const Ae=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ve=D.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ve),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ae,n.RENDERBUFFER,ve)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Qt(z,D,ie){const ge=i.get(z);D!==void 0&&et(ge.__webglFramebuffer,z,z.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ie!==void 0&&Ft(z)}function _t(z){const D=z.texture,ie=i.get(z),ge=i.get(D);z.addEventListener("dispose",L);const Ae=z.textures,ve=z.isWebGLCubeRenderTarget===!0,dt=Ae.length>1;if(dt||(ge.__webglTexture===void 0&&(ge.__webglTexture=n.createTexture()),ge.__version=D.version,o.memory.textures++),ve){ie.__webglFramebuffer=[];for(let qe=0;qe<6;qe++)if(D.mipmaps&&D.mipmaps.length>0){ie.__webglFramebuffer[qe]=[];for(let ht=0;ht<D.mipmaps.length;ht++)ie.__webglFramebuffer[qe][ht]=n.createFramebuffer()}else ie.__webglFramebuffer[qe]=n.createFramebuffer()}else{if(D.mipmaps&&D.mipmaps.length>0){ie.__webglFramebuffer=[];for(let qe=0;qe<D.mipmaps.length;qe++)ie.__webglFramebuffer[qe]=n.createFramebuffer()}else ie.__webglFramebuffer=n.createFramebuffer();if(dt)for(let qe=0,ht=Ae.length;qe<ht;qe++){const It=i.get(Ae[qe]);It.__webglTexture===void 0&&(It.__webglTexture=n.createTexture(),o.memory.textures++)}if(z.samples>0&&St(z)===!1){ie.__webglMultisampledFramebuffer=n.createFramebuffer(),ie.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ie.__webglMultisampledFramebuffer);for(let qe=0;qe<Ae.length;qe++){const ht=Ae[qe];ie.__webglColorRenderbuffer[qe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ie.__webglColorRenderbuffer[qe]);const It=s.convert(ht.format,ht.colorSpace),Ne=s.convert(ht.type),Be=M(ht.internalFormat,It,Ne,ht.colorSpace,z.isXRRenderTarget===!0),ut=G(z);n.renderbufferStorageMultisample(n.RENDERBUFFER,ut,Be,z.width,z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,ie.__webglColorRenderbuffer[qe])}n.bindRenderbuffer(n.RENDERBUFFER,null),z.depthBuffer&&(ie.__webglDepthRenderbuffer=n.createRenderbuffer(),wt(ie.__webglDepthRenderbuffer,z,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ve){t.bindTexture(n.TEXTURE_CUBE_MAP,ge.__webglTexture),me(n.TEXTURE_CUBE_MAP,D);for(let qe=0;qe<6;qe++)if(D.mipmaps&&D.mipmaps.length>0)for(let ht=0;ht<D.mipmaps.length;ht++)et(ie.__webglFramebuffer[qe][ht],z,D,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,ht);else et(ie.__webglFramebuffer[qe],z,D,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0);x(D)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(dt){for(let qe=0,ht=Ae.length;qe<ht;qe++){const It=Ae[qe],Ne=i.get(It);let Be=n.TEXTURE_2D;(z.isWebGL3DRenderTarget||z.isWebGLArrayRenderTarget)&&(Be=z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Be,Ne.__webglTexture),me(Be,It),et(ie.__webglFramebuffer,z,It,n.COLOR_ATTACHMENT0+qe,Be,0),x(It)&&g(Be)}t.unbindTexture()}else{let qe=n.TEXTURE_2D;if((z.isWebGL3DRenderTarget||z.isWebGLArrayRenderTarget)&&(qe=z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(qe,ge.__webglTexture),me(qe,D),D.mipmaps&&D.mipmaps.length>0)for(let ht=0;ht<D.mipmaps.length;ht++)et(ie.__webglFramebuffer[ht],z,D,n.COLOR_ATTACHMENT0,qe,ht);else et(ie.__webglFramebuffer,z,D,n.COLOR_ATTACHMENT0,qe,0);x(D)&&g(qe),t.unbindTexture()}z.depthBuffer&&Ft(z)}function Te(z){const D=z.textures;for(let ie=0,ge=D.length;ie<ge;ie++){const Ae=D[ie];if(x(Ae)){const ve=_(z),dt=i.get(Ae).__webglTexture;t.bindTexture(ve,dt),g(ve),t.unbindTexture()}}}const Ue=[],Pe=[];function Je(z){if(z.samples>0){if(St(z)===!1){const D=z.textures,ie=z.width,ge=z.height;let Ae=n.COLOR_BUFFER_BIT;const ve=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,dt=i.get(z),qe=D.length>1;if(qe)for(let It=0;It<D.length;It++)t.bindFramebuffer(n.FRAMEBUFFER,dt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+It,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,dt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+It,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,dt.__webglMultisampledFramebuffer);const ht=z.texture.mipmaps;ht&&ht.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,dt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,dt.__webglFramebuffer);for(let It=0;It<D.length;It++){if(z.resolveDepthBuffer&&(z.depthBuffer&&(Ae|=n.DEPTH_BUFFER_BIT),z.stencilBuffer&&z.resolveStencilBuffer&&(Ae|=n.STENCIL_BUFFER_BIT)),qe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,dt.__webglColorRenderbuffer[It]);const Ne=i.get(D[It]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ne,0)}n.blitFramebuffer(0,0,ie,ge,0,0,ie,ge,Ae,n.NEAREST),l===!0&&(Ue.length=0,Pe.length=0,Ue.push(n.COLOR_ATTACHMENT0+It),z.depthBuffer&&z.resolveDepthBuffer===!1&&(Ue.push(ve),Pe.push(ve),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Pe)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ue))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),qe)for(let It=0;It<D.length;It++){t.bindFramebuffer(n.FRAMEBUFFER,dt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+It,n.RENDERBUFFER,dt.__webglColorRenderbuffer[It]);const Ne=i.get(D[It]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,dt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+It,n.TEXTURE_2D,Ne,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,dt.__webglMultisampledFramebuffer)}else if(z.depthBuffer&&z.resolveDepthBuffer===!1&&l){const D=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[D])}}}function G(z){return Math.min(r.maxSamples,z.samples)}function St(z){const D=i.get(z);return z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&D.__useRenderToTexture!==!1}function tt(z){const D=o.render.frame;h.get(z)!==D&&(h.set(z,D),z.update())}function Pt(z,D){const ie=z.colorSpace,ge=z.format,Ae=z.type;return z.isCompressedTexture===!0||z.isVideoTexture===!0||ie!==eo&&ie!==_o&&(sn.getTransfer(ie)===fn?(ge!==Kn||Ae!==_i)&&nt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):At("WebGLTextures: Unsupported texture color space:",ie)),D}function je(z){return typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement?(u.width=z.naturalWidth||z.width,u.height=z.naturalHeight||z.height):typeof VideoFrame<"u"&&z instanceof VideoFrame?(u.width=z.displayWidth,u.height=z.displayHeight):(u.width=z.width,u.height=z.height),u}this.allocateTextureUnit=$,this.resetTextureUnits=H,this.setTexture2D=le,this.setTexture2DArray=ee,this.setTexture3D=Q,this.setTextureCube=O,this.rebindTextures=Qt,this.setupRenderTarget=_t,this.updateRenderTargetMipmap=Te,this.updateMultisampleRenderTarget=Je,this.setupDepthRenderbuffer=Ft,this.setupFrameBufferTexture=et,this.useMultisampledRTT=St,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function LD(n,e){function t(i,r=_o){let s;const o=sn.getTransfer(r);if(i===_i)return n.UNSIGNED_BYTE;if(i===_v)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Sv)return n.UNSIGNED_SHORT_5_5_5_1;if(i===SM)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===wM)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===yv)return n.BYTE;if(i===xv)return n.SHORT;if(i===Du)return n.UNSIGNED_SHORT;if(i===Df)return n.INT;if(i===Fr)return n.UNSIGNED_INT;if(i===Cn)return n.FLOAT;if(i===Un)return n.HALF_FLOAT;if(i===MM)return n.ALPHA;if(i===EM)return n.RGB;if(i===Kn)return n.RGBA;if(i===Qs)return n.DEPTH_COMPONENT;if(i===da)return n.DEPTH_STENCIL;if(i===Ff)return n.RED;if(i===Uf)return n.RED_INTEGER;if(i===Yl)return n.RG;if(i===wv)return n.RG_INTEGER;if(i===Mv)return n.RGBA_INTEGER;if(i===Sh||i===wh||i===Mh||i===Eh)if(o===fn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Sh)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===wh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Mh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Eh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Sh)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===wh)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Mh)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Eh)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===d0||i===h0||i===f0||i===p0)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===d0)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===h0)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===f0)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===p0)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===m0||i===g0||i===v0||i===y0||i===x0||i===_0||i===S0)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===m0||i===g0)return o===fn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===v0)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC;if(i===y0)return s.COMPRESSED_R11_EAC;if(i===x0)return s.COMPRESSED_SIGNED_R11_EAC;if(i===_0)return s.COMPRESSED_RG11_EAC;if(i===S0)return s.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===w0||i===M0||i===E0||i===b0||i===T0||i===A0||i===C0||i===P0||i===R0||i===I0||i===N0||i===L0||i===D0||i===F0)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===w0)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===M0)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===E0)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===b0)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===T0)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===A0)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===C0)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===P0)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===R0)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===I0)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===N0)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===L0)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===D0)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===F0)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===U0||i===k0||i===O0)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===U0)return o===fn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===k0)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===O0)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===B0||i===z0||i===V0||i===H0)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===B0)return s.COMPRESSED_RED_RGTC1_EXT;if(i===z0)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===V0)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===H0)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Fu?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const aq=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,lq=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class cq{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new LM(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new rr({vertexShader:aq,fragmentShader:lq,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Bn(new za(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class uq extends to{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,h=null,f=null,p=null,m=null,y=null;const S=typeof XRWebGLBinding<"u",x=new cq,g={},_=t.getContextAttributes();let M=null,E=null;const A=[],P=[],L=new Ee;let N=null;const C=new Zn;C.viewport=new _n;const R=new Zn;R.viewport=new _n;const k=[C,R],H=new MD;let $=null,ne=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ue){let Se=A[ue];return Se===void 0&&(Se=new xg,A[ue]=Se),Se.getTargetRaySpace()},this.getControllerGrip=function(ue){let Se=A[ue];return Se===void 0&&(Se=new xg,A[ue]=Se),Se.getGripSpace()},this.getHand=function(ue){let Se=A[ue];return Se===void 0&&(Se=new xg,A[ue]=Se),Se.getHandSpace()};function le(ue){const Se=P.indexOf(ue.inputSource);if(Se===-1)return;const et=A[Se];et!==void 0&&(et.update(ue.inputSource,ue.frame,u||o),et.dispatchEvent({type:ue.type,data:ue.inputSource}))}function ee(){r.removeEventListener("select",le),r.removeEventListener("selectstart",le),r.removeEventListener("selectend",le),r.removeEventListener("squeeze",le),r.removeEventListener("squeezestart",le),r.removeEventListener("squeezeend",le),r.removeEventListener("end",ee),r.removeEventListener("inputsourceschange",Q);for(let ue=0;ue<A.length;ue++){const Se=P[ue];Se!==null&&(P[ue]=null,A[ue].disconnect(Se))}$=null,ne=null,x.reset();for(const ue in g)delete g[ue];e.setRenderTarget(M),m=null,p=null,f=null,r=null,E=null,Ct.stop(),i.isPresenting=!1,e.setPixelRatio(N),e.setSize(L.width,L.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ue){s=ue,i.isPresenting===!0&&nt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ue){a=ue,i.isPresenting===!0&&nt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(ue){u=ue},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f===null&&S&&(f=new XRWebGLBinding(r,t)),f},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(ue){if(r=ue,r!==null){if(M=e.getRenderTarget(),r.addEventListener("select",le),r.addEventListener("selectstart",le),r.addEventListener("selectend",le),r.addEventListener("squeeze",le),r.addEventListener("squeezestart",le),r.addEventListener("squeezeend",le),r.addEventListener("end",ee),r.addEventListener("inputsourceschange",Q),_.xrCompatible!==!0&&await t.makeXRCompatible(),N=e.getPixelRatio(),e.getSize(L),S&&"createProjectionLayer"in XRWebGLBinding.prototype){let et=null,wt=null,st=null;_.depth&&(st=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,et=_.stencil?da:Qs,wt=_.stencil?Fu:Fr);const Ft={colorFormat:t.RGBA8,depthFormat:st,scaleFactor:s};f=this.getBinding(),p=f.createProjectionLayer(Ft),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),E=new Gi(p.textureWidth,p.textureHeight,{format:Kn,type:_i,depthTexture:new Zl(p.textureWidth,p.textureHeight,wt,void 0,void 0,void 0,void 0,void 0,void 0,et),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}else{const et={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,et),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),E=new Gi(m.framebufferWidth,m.framebufferHeight,{format:Kn,type:_i,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}E.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),Ct.setContext(r),Ct.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function Q(ue){for(let Se=0;Se<ue.removed.length;Se++){const et=ue.removed[Se],wt=P.indexOf(et);wt>=0&&(P[wt]=null,A[wt].disconnect(et))}for(let Se=0;Se<ue.added.length;Se++){const et=ue.added[Se];let wt=P.indexOf(et);if(wt===-1){for(let Ft=0;Ft<A.length;Ft++)if(Ft>=P.length){P.push(et),wt=Ft;break}else if(P[Ft]===null){P[Ft]=et,wt=Ft;break}if(wt===-1)break}const st=A[wt];st&&st.connect(et)}}const O=new V,Y=new V;function X(ue,Se,et){O.setFromMatrixPosition(Se.matrixWorld),Y.setFromMatrixPosition(et.matrixWorld);const wt=O.distanceTo(Y),st=Se.projectionMatrix.elements,Ft=et.projectionMatrix.elements,Qt=st[14]/(st[10]-1),_t=st[14]/(st[10]+1),Te=(st[9]+1)/st[5],Ue=(st[9]-1)/st[5],Pe=(st[8]-1)/st[0],Je=(Ft[8]+1)/Ft[0],G=Qt*Pe,St=Qt*Je,tt=wt/(-Pe+Je),Pt=tt*-Pe;if(Se.matrixWorld.decompose(ue.position,ue.quaternion,ue.scale),ue.translateX(Pt),ue.translateZ(tt),ue.matrixWorld.compose(ue.position,ue.quaternion,ue.scale),ue.matrixWorldInverse.copy(ue.matrixWorld).invert(),st[10]===-1)ue.projectionMatrix.copy(Se.projectionMatrix),ue.projectionMatrixInverse.copy(Se.projectionMatrixInverse);else{const je=Qt+tt,z=_t+tt,D=G-Pt,ie=St+(wt-Pt),ge=Te*_t/z*je,Ae=Ue*_t/z*je;ue.projectionMatrix.makePerspective(D,ie,ge,Ae,je,z),ue.projectionMatrixInverse.copy(ue.projectionMatrix).invert()}}function se(ue,Se){Se===null?ue.matrixWorld.copy(ue.matrix):ue.matrixWorld.multiplyMatrices(Se.matrixWorld,ue.matrix),ue.matrixWorldInverse.copy(ue.matrixWorld).invert()}this.updateCamera=function(ue){if(r===null)return;let Se=ue.near,et=ue.far;x.texture!==null&&(x.depthNear>0&&(Se=x.depthNear),x.depthFar>0&&(et=x.depthFar)),H.near=R.near=C.near=Se,H.far=R.far=C.far=et,($!==H.near||ne!==H.far)&&(r.updateRenderState({depthNear:H.near,depthFar:H.far}),$=H.near,ne=H.far),H.layers.mask=ue.layers.mask|6,C.layers.mask=H.layers.mask&3,R.layers.mask=H.layers.mask&5;const wt=ue.parent,st=H.cameras;se(H,wt);for(let Ft=0;Ft<st.length;Ft++)se(st[Ft],wt);st.length===2?X(H,C,R):H.projectionMatrix.copy(C.projectionMatrix),me(ue,H,wt)};function me(ue,Se,et){et===null?ue.matrix.copy(Se.matrixWorld):(ue.matrix.copy(et.matrixWorld),ue.matrix.invert(),ue.matrix.multiply(Se.matrixWorld)),ue.matrix.decompose(ue.position,ue.quaternion,ue.scale),ue.updateMatrixWorld(!0),ue.projectionMatrix.copy(Se.projectionMatrix),ue.projectionMatrixInverse.copy(Se.projectionMatrixInverse),ue.isPerspectiveCamera&&(ue.fov=Ou*2*Math.atan(1/ue.projectionMatrix.elements[5]),ue.zoom=1)}this.getCamera=function(){return H},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(ue){l=ue,p!==null&&(p.fixedFoveation=ue),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ue)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(H)},this.getCameraTexture=function(ue){return g[ue]};let Re=null;function at(ue,Se){if(h=Se.getViewerPose(u||o),y=Se,h!==null){const et=h.views;m!==null&&(e.setRenderTargetFramebuffer(E,m.framebuffer),e.setRenderTarget(E));let wt=!1;et.length!==H.cameras.length&&(H.cameras.length=0,wt=!0);for(let _t=0;_t<et.length;_t++){const Te=et[_t];let Ue=null;if(m!==null)Ue=m.getViewport(Te);else{const Je=f.getViewSubImage(p,Te);Ue=Je.viewport,_t===0&&(e.setRenderTargetTextures(E,Je.colorTexture,Je.depthStencilTexture),e.setRenderTarget(E))}let Pe=k[_t];Pe===void 0&&(Pe=new Zn,Pe.layers.enable(_t),Pe.viewport=new _n,k[_t]=Pe),Pe.matrix.fromArray(Te.transform.matrix),Pe.matrix.decompose(Pe.position,Pe.quaternion,Pe.scale),Pe.projectionMatrix.fromArray(Te.projectionMatrix),Pe.projectionMatrixInverse.copy(Pe.projectionMatrix).invert(),Pe.viewport.set(Ue.x,Ue.y,Ue.width,Ue.height),_t===0&&(H.matrix.copy(Pe.matrix),H.matrix.decompose(H.position,H.quaternion,H.scale)),wt===!0&&H.cameras.push(Pe)}const st=r.enabledFeatures;if(st&&st.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&S){f=i.getBinding();const _t=f.getDepthInformation(et[0]);_t&&_t.isValid&&_t.texture&&x.init(_t,r.renderState)}if(st&&st.includes("camera-access")&&S){e.state.unbindTexture(),f=i.getBinding();for(let _t=0;_t<et.length;_t++){const Te=et[_t].camera;if(Te){let Ue=g[Te];Ue||(Ue=new LM,g[Te]=Ue);const Pe=f.getCameraImage(Te);Ue.sourceTexture=Pe}}}}for(let et=0;et<A.length;et++){const wt=P[et],st=A[et];wt!==null&&st!==void 0&&st.update(wt,Se,u||o)}Re&&Re(ue,Se),Se.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Se}),y=null}const Ct=new CD;Ct.setAnimationLoop(at),this.setAnimationLoop=function(ue){Re=ue},this.dispose=function(){}}}const hl=new Ur,dq=new kt;function hq(n,e){function t(x,g){x.matrixAutoUpdate===!0&&x.updateMatrix(),g.value.copy(x.matrix)}function i(x,g){g.color.getRGB(x.fogColor.value,RL(n)),g.isFog?(x.fogNear.value=g.near,x.fogFar.value=g.far):g.isFogExp2&&(x.fogDensity.value=g.density)}function r(x,g,_,M,E){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(x,g):g.isMeshToonMaterial?(s(x,g),f(x,g)):g.isMeshPhongMaterial?(s(x,g),h(x,g)):g.isMeshStandardMaterial?(s(x,g),p(x,g),g.isMeshPhysicalMaterial&&m(x,g,E)):g.isMeshMatcapMaterial?(s(x,g),y(x,g)):g.isMeshDepthMaterial?s(x,g):g.isMeshDistanceMaterial?(s(x,g),S(x,g)):g.isMeshNormalMaterial?s(x,g):g.isLineBasicMaterial?(o(x,g),g.isLineDashedMaterial&&a(x,g)):g.isPointsMaterial?l(x,g,_,M):g.isSpriteMaterial?u(x,g):g.isShadowMaterial?(x.color.value.copy(g.color),x.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(x,g){x.opacity.value=g.opacity,g.color&&x.diffuse.value.copy(g.color),g.emissive&&x.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.bumpMap&&(x.bumpMap.value=g.bumpMap,t(g.bumpMap,x.bumpMapTransform),x.bumpScale.value=g.bumpScale,g.side===ir&&(x.bumpScale.value*=-1)),g.normalMap&&(x.normalMap.value=g.normalMap,t(g.normalMap,x.normalMapTransform),x.normalScale.value.copy(g.normalScale),g.side===ir&&x.normalScale.value.negate()),g.displacementMap&&(x.displacementMap.value=g.displacementMap,t(g.displacementMap,x.displacementMapTransform),x.displacementScale.value=g.displacementScale,x.displacementBias.value=g.displacementBias),g.emissiveMap&&(x.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,x.emissiveMapTransform)),g.specularMap&&(x.specularMap.value=g.specularMap,t(g.specularMap,x.specularMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest);const _=e.get(g),M=_.envMap,E=_.envMapRotation;M&&(x.envMap.value=M,hl.copy(E),hl.x*=-1,hl.y*=-1,hl.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(hl.y*=-1,hl.z*=-1),x.envMapRotation.value.setFromMatrix4(dq.makeRotationFromEuler(hl)),x.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=g.reflectivity,x.ior.value=g.ior,x.refractionRatio.value=g.refractionRatio),g.lightMap&&(x.lightMap.value=g.lightMap,x.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,x.lightMapTransform)),g.aoMap&&(x.aoMap.value=g.aoMap,x.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,x.aoMapTransform))}function o(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform))}function a(x,g){x.dashSize.value=g.dashSize,x.totalSize.value=g.dashSize+g.gapSize,x.scale.value=g.scale}function l(x,g,_,M){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.size.value=g.size*_,x.scale.value=M*.5,g.map&&(x.map.value=g.map,t(g.map,x.uvTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function u(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.rotation.value=g.rotation,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function h(x,g){x.specular.value.copy(g.specular),x.shininess.value=Math.max(g.shininess,1e-4)}function f(x,g){g.gradientMap&&(x.gradientMap.value=g.gradientMap)}function p(x,g){x.metalness.value=g.metalness,g.metalnessMap&&(x.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,x.metalnessMapTransform)),x.roughness.value=g.roughness,g.roughnessMap&&(x.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,x.roughnessMapTransform)),g.envMap&&(x.envMapIntensity.value=g.envMapIntensity)}function m(x,g,_){x.ior.value=g.ior,g.sheen>0&&(x.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),x.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(x.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,x.sheenColorMapTransform)),g.sheenRoughnessMap&&(x.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,x.sheenRoughnessMapTransform))),g.clearcoat>0&&(x.clearcoat.value=g.clearcoat,x.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(x.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,x.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(x.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===ir&&x.clearcoatNormalScale.value.negate())),g.dispersion>0&&(x.dispersion.value=g.dispersion),g.iridescence>0&&(x.iridescence.value=g.iridescence,x.iridescenceIOR.value=g.iridescenceIOR,x.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(x.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,x.iridescenceMapTransform)),g.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),g.transmission>0&&(x.transmission.value=g.transmission,x.transmissionSamplerMap.value=_.texture,x.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(x.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,x.transmissionMapTransform)),x.thickness.value=g.thickness,g.thicknessMap&&(x.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=g.attenuationDistance,x.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(x.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(x.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=g.specularIntensity,x.specularColor.value.copy(g.specularColor),g.specularColorMap&&(x.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,x.specularColorMapTransform)),g.specularIntensityMap&&(x.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,x.specularIntensityMapTransform))}function y(x,g){g.matcap&&(x.matcap.value=g.matcap)}function S(x,g){const _=e.get(g).light;x.referencePosition.value.setFromMatrixPosition(_.matrixWorld),x.nearDistance.value=_.shadow.camera.near,x.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function fq(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,M){const E=M.program;i.uniformBlockBinding(_,E)}function u(_,M){let E=r[_.id];E===void 0&&(y(_),E=h(_),r[_.id]=E,_.addEventListener("dispose",x));const A=M.program;i.updateUBOMapping(_,A);const P=e.render.frame;s[_.id]!==P&&(p(_),s[_.id]=P)}function h(_){const M=f();_.__bindingPointIndex=M;const E=n.createBuffer(),A=_.__size,P=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,A,P),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,M,E),E}function f(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return At("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(_){const M=r[_.id],E=_.uniforms,A=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,M);for(let P=0,L=E.length;P<L;P++){const N=Array.isArray(E[P])?E[P]:[E[P]];for(let C=0,R=N.length;C<R;C++){const k=N[C];if(m(k,P,C,A)===!0){const H=k.__offset,$=Array.isArray(k.value)?k.value:[k.value];let ne=0;for(let le=0;le<$.length;le++){const ee=$[le],Q=S(ee);typeof ee=="number"||typeof ee=="boolean"?(k.__data[0]=ee,n.bufferSubData(n.UNIFORM_BUFFER,H+ne,k.__data)):ee.isMatrix3?(k.__data[0]=ee.elements[0],k.__data[1]=ee.elements[1],k.__data[2]=ee.elements[2],k.__data[3]=0,k.__data[4]=ee.elements[3],k.__data[5]=ee.elements[4],k.__data[6]=ee.elements[5],k.__data[7]=0,k.__data[8]=ee.elements[6],k.__data[9]=ee.elements[7],k.__data[10]=ee.elements[8],k.__data[11]=0):(ee.toArray(k.__data,ne),ne+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,H,k.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(_,M,E,A){const P=_.value,L=M+"_"+E;if(A[L]===void 0)return typeof P=="number"||typeof P=="boolean"?A[L]=P:A[L]=P.clone(),!0;{const N=A[L];if(typeof P=="number"||typeof P=="boolean"){if(N!==P)return A[L]=P,!0}else if(N.equals(P)===!1)return N.copy(P),!0}return!1}function y(_){const M=_.uniforms;let E=0;const A=16;for(let L=0,N=M.length;L<N;L++){const C=Array.isArray(M[L])?M[L]:[M[L]];for(let R=0,k=C.length;R<k;R++){const H=C[R],$=Array.isArray(H.value)?H.value:[H.value];for(let ne=0,le=$.length;ne<le;ne++){const ee=$[ne],Q=S(ee),O=E%A,Y=O%Q.boundary,X=O+Y;E+=Y,X!==0&&A-X<Q.storage&&(E+=A-X),H.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=E,E+=Q.storage}}}const P=E%A;return P>0&&(E+=A-P),_.__size=E,_.__cache={},this}function S(_){const M={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(M.boundary=4,M.storage=4):_.isVector2?(M.boundary=8,M.storage=8):_.isVector3||_.isColor?(M.boundary=16,M.storage=12):_.isVector4?(M.boundary=16,M.storage=16):_.isMatrix3?(M.boundary=48,M.storage=48):_.isMatrix4?(M.boundary=64,M.storage=64):_.isTexture?nt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):nt("WebGLRenderer: Unsupported uniform value type.",_),M}function x(_){const M=_.target;M.removeEventListener("dispose",x);const E=o.indexOf(M.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(r[M.id]),delete r[M.id],delete s[M.id]}function g(){for(const _ in r)n.deleteBuffer(r[_]);o=[],r={},s={}}return{bind:l,update:u,dispose:g}}const pq=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let Vs=null;function mq(){return Vs===null&&(Vs=new is(pq,16,16,Yl,Un),Vs.name="DFG_LUT",Vs.minFilter=nn,Vs.magFilter=nn,Vs.wrapS=Wn,Vs.wrapT=Wn,Vs.generateMipmaps=!1,Vs.needsUpdate=!0),Vs}class iE{constructor(e={}){const{canvas:t=AL(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:f=!1,reversedDepthBuffer:p=!1,outputBufferType:m=_i}=e;this.isWebGLRenderer=!0;let y;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=i.getContextAttributes().alpha}else y=o;const S=m,x=new Set([Mv,wv,Uf]),g=new Set([_i,Fr,Du,Fu,_v,Sv]),_=new Uint32Array(4),M=new Int32Array(4);let E=null,A=null;const P=[],L=[];let N=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=ns,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const C=this;let R=!1;this._outputColorSpace=Ji;let k=0,H=0,$=null,ne=-1,le=null;const ee=new _n,Q=new _n;let O=null;const Y=new ft(0);let X=0,se=t.width,me=t.height,Re=1,at=null,Ct=null;const ue=new _n(0,0,se,me),Se=new _n(0,0,se,me);let et=!1;const wt=new Qu;let st=!1,Ft=!1;const Qt=new kt,_t=new V,Te=new _n,Ue={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Pe=!1;function Je(){return $===null?Re:1}let G=i;function St(U,q){return t.getContext(U,q)}try{const U={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Nf}`),t.addEventListener("webglcontextlost",Et,!1),t.addEventListener("webglcontextrestored",tn,!1),t.addEventListener("webglcontextcreationerror",Zt,!1),G===null){const q="webgl2";if(G=St(q,U),G===null)throw St(q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(U){throw At("WebGLRenderer: "+U.message),U}let tt,Pt,je,z,D,ie,ge,Ae,ve,dt,qe,ht,It,Ne,Be,ut,Z,de,Le,K,he,De,Qe,Oe;function be(){tt=new gX(G),tt.init(),De=new LD(G,tt),Pt=new aX(G,tt,e,De),je=new sq(G,tt),Pt.reversedDepthBuffer&&p&&je.buffers.depth.setReversed(!0),z=new xX(G),D=new WY,ie=new oq(G,tt,je,D,Pt,De,z),ge=new cX(C),Ae=new mX(C),ve=new Mj(G),Qe=new sX(G,ve),dt=new vX(G,ve,z,Qe),qe=new SX(G,dt,ve,z),Le=new _X(G,Pt,ie),ut=new lX(D),ht=new GY(C,ge,Ae,tt,Pt,Qe,ut),It=new hq(C,D),Ne=new XY,Be=new JY(tt),de=new rX(C,ge,Ae,je,qe,y,l),Z=new iq(C,qe,Pt),Oe=new fq(G,z,Pt,je),K=new oX(G,tt,z),he=new yX(G,tt,z),z.programs=ht.programs,C.capabilities=Pt,C.extensions=tt,C.properties=D,C.renderLists=Ne,C.shadowMap=Z,C.state=je,C.info=z}be(),S!==_i&&(N=new MX(S,t.width,t.height,r,s));const ze=new uq(C,G);this.xr=ze,this.getContext=function(){return G},this.getContextAttributes=function(){return G.getContextAttributes()},this.forceContextLoss=function(){const U=tt.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=tt.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return Re},this.setPixelRatio=function(U){U!==void 0&&(Re=U,this.setSize(se,me,!1))},this.getSize=function(U){return U.set(se,me)},this.setSize=function(U,q,re=!0){if(ze.isPresenting){nt("WebGLRenderer: Can't change size while VR device is presenting.");return}se=U,me=q,t.width=Math.floor(U*Re),t.height=Math.floor(q*Re),re===!0&&(t.style.width=U+"px",t.style.height=q+"px"),N!==null&&N.setSize(t.width,t.height),this.setViewport(0,0,U,q)},this.getDrawingBufferSize=function(U){return U.set(se*Re,me*Re).floor()},this.setDrawingBufferSize=function(U,q,re){se=U,me=q,Re=re,t.width=Math.floor(U*re),t.height=Math.floor(q*re),this.setViewport(0,0,U,q)},this.setEffects=function(U){if(S===_i){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(U){for(let q=0;q<U.length;q++)if(U[q].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}N.setEffects(U||[])},this.getCurrentViewport=function(U){return U.copy(ee)},this.getViewport=function(U){return U.copy(ue)},this.setViewport=function(U,q,re,oe){U.isVector4?ue.set(U.x,U.y,U.z,U.w):ue.set(U,q,re,oe),je.viewport(ee.copy(ue).multiplyScalar(Re).round())},this.getScissor=function(U){return U.copy(Se)},this.setScissor=function(U,q,re,oe){U.isVector4?Se.set(U.x,U.y,U.z,U.w):Se.set(U,q,re,oe),je.scissor(Q.copy(Se).multiplyScalar(Re).round())},this.getScissorTest=function(){return et},this.setScissorTest=function(U){je.setScissorTest(et=U)},this.setOpaqueSort=function(U){at=U},this.setTransparentSort=function(U){Ct=U},this.getClearColor=function(U){return U.copy(de.getClearColor())},this.setClearColor=function(){de.setClearColor(...arguments)},this.getClearAlpha=function(){return de.getClearAlpha()},this.setClearAlpha=function(){de.setClearAlpha(...arguments)},this.clear=function(U=!0,q=!0,re=!0){let oe=0;if(U){let te=!1;if($!==null){const Ce=$.texture.format;te=x.has(Ce)}if(te){const Ce=$.texture.type,Fe=g.has(Ce),Me=de.getClearColor(),Ie=de.getClearAlpha(),Ve=Me.r,it=Me.g,He=Me.b;Fe?(_[0]=Ve,_[1]=it,_[2]=He,_[3]=Ie,G.clearBufferuiv(G.COLOR,0,_)):(M[0]=Ve,M[1]=it,M[2]=He,M[3]=Ie,G.clearBufferiv(G.COLOR,0,M))}else oe|=G.COLOR_BUFFER_BIT}q&&(oe|=G.DEPTH_BUFFER_BIT),re&&(oe|=G.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),G.clear(oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Et,!1),t.removeEventListener("webglcontextrestored",tn,!1),t.removeEventListener("webglcontextcreationerror",Zt,!1),de.dispose(),Ne.dispose(),Be.dispose(),D.dispose(),ge.dispose(),Ae.dispose(),qe.dispose(),Qe.dispose(),Oe.dispose(),ht.dispose(),ze.dispose(),ze.removeEventListener("sessionstart",Rs),ze.removeEventListener("sessionend",cr),Ot.stop()};function Et(U){U.preventDefault(),cf("WebGLRenderer: Context Lost."),R=!0}function tn(){cf("WebGLRenderer: Context Restored."),R=!1;const U=z.autoReset,q=Z.enabled,re=Z.autoUpdate,oe=Z.needsUpdate,te=Z.type;be(),z.autoReset=U,Z.enabled=q,Z.autoUpdate=re,Z.needsUpdate=oe,Z.type=te}function Zt(U){At("WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function jn(U){const q=U.target;q.removeEventListener("dispose",jn),hi(q)}function hi(U){td(U),D.remove(U)}function td(U){const q=D.get(U).programs;q!==void 0&&(q.forEach(function(re){ht.releaseProgram(re)}),U.isShaderMaterial&&ht.releaseShaderCache(U))}this.renderBufferDirect=function(U,q,re,oe,te,Ce){q===null&&(q=Ue);const Fe=te.isMesh&&te.matrixWorld.determinant()<0,Me=We(U,q,re,oe,te);je.setMaterial(oe,Fe);let Ie=re.index,Ve=1;if(oe.wireframe===!0){if(Ie=dt.getWireframeAttribute(re),Ie===void 0)return;Ve=2}const it=re.drawRange,He=re.attributes.position;let vt=it.start*Ve,Bt=(it.start+it.count)*Ve;Ce!==null&&(vt=Math.max(vt,Ce.start*Ve),Bt=Math.min(Bt,(Ce.start+Ce.count)*Ve)),Ie!==null?(vt=Math.max(vt,0),Bt=Math.min(Bt,Ie.count)):He!=null&&(vt=Math.max(vt,0),Bt=Math.min(Bt,He.count));const Vt=Bt-vt;if(Vt<0||Vt===1/0)return;Qe.setup(te,oe,Me,re,Ie);let $t,bt=K;if(Ie!==null&&($t=ve.get(Ie),bt=he,bt.setIndex($t)),te.isMesh)oe.wireframe===!0?(je.setLineWidth(oe.wireframeLinewidth*Je()),bt.setMode(G.LINES)):bt.setMode(G.TRIANGLES);else if(te.isLine){let lt=oe.linewidth;lt===void 0&&(lt=1),je.setLineWidth(lt*Je()),te.isLineSegments?bt.setMode(G.LINES):te.isLineLoop?bt.setMode(G.LINE_LOOP):bt.setMode(G.LINE_STRIP)}else te.isPoints?bt.setMode(G.POINTS):te.isSprite&&bt.setMode(G.TRIANGLES);if(te.isBatchedMesh)if(te._multiDrawInstances!==null)ku("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),bt.renderMultiDrawInstances(te._multiDrawStarts,te._multiDrawCounts,te._multiDrawCount,te._multiDrawInstances);else if(tt.get("WEBGL_multi_draw"))bt.renderMultiDraw(te._multiDrawStarts,te._multiDrawCounts,te._multiDrawCount);else{const lt=te._multiDrawStarts,Mt=te._multiDrawCounts,yt=te._multiDrawCount,en=Ie?ve.get(Ie).bytesPerElement:1,Ci=D.get(oe).currentProgram.getUniforms();for(let pn=0;pn<yt;pn++)Ci.setValue(G,"_gl_DrawID",pn),bt.render(lt[pn]/en,Mt[pn])}else if(te.isInstancedMesh)bt.renderInstances(vt,Vt,te.count);else if(re.isInstancedBufferGeometry){const lt=re._maxInstanceCount!==void 0?re._maxInstanceCount:1/0,Mt=Math.min(re.instanceCount,lt);bt.renderInstances(vt,Vt,Mt)}else bt.render(vt,Vt)};function oc(U,q,re){U.transparent===!0&&U.side===ws&&U.forceSinglePass===!1?(U.side=ir,U.needsUpdate=!0,fe(U,q,re),U.side=Io,U.needsUpdate=!0,fe(U,q,re),U.side=ws):fe(U,q,re)}this.compile=function(U,q,re=null){re===null&&(re=U),A=Be.get(re),A.init(q),L.push(A),re.traverseVisible(function(te){te.isLight&&te.layers.test(q.layers)&&(A.pushLight(te),te.castShadow&&A.pushShadow(te))}),U!==re&&U.traverseVisible(function(te){te.isLight&&te.layers.test(q.layers)&&(A.pushLight(te),te.castShadow&&A.pushShadow(te))}),A.setupLights();const oe=new Set;return U.traverse(function(te){if(!(te.isMesh||te.isPoints||te.isLine||te.isSprite))return;const Ce=te.material;if(Ce)if(Array.isArray(Ce))for(let Fe=0;Fe<Ce.length;Fe++){const Me=Ce[Fe];oc(Me,re,te),oe.add(Me)}else oc(Ce,re,te),oe.add(Ce)}),A=L.pop(),oe},this.compileAsync=function(U,q,re=null){const oe=this.compile(U,q,re);return new Promise(te=>{function Ce(){if(oe.forEach(function(Fe){D.get(Fe).currentProgram.isReady()&&oe.delete(Fe)}),oe.size===0){te(U);return}setTimeout(Ce,10)}tt.get("KHR_parallel_shader_compile")!==null?Ce():setTimeout(Ce,10)})};let as=null;function Ha(U){as&&as(U)}function Rs(){Ot.stop()}function cr(){Ot.start()}const Ot=new CD;Ot.setAnimationLoop(Ha),typeof self<"u"&&Ot.setContext(self),this.setAnimationLoop=function(U){as=U,ze.setAnimationLoop(U),U===null?Ot.stop():Ot.start()},ze.addEventListener("sessionstart",Rs),ze.addEventListener("sessionend",cr),this.render=function(U,q){if(q!==void 0&&q.isCamera!==!0){At("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(R===!0)return;const re=ze.enabled===!0&&ze.isPresenting===!0,oe=N!==null&&($===null||re)&&N.begin(C,$);if(U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),q.parent===null&&q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),ze.enabled===!0&&ze.isPresenting===!0&&(N===null||N.isCompositing()===!1)&&(ze.cameraAutoUpdate===!0&&ze.updateCamera(q),q=ze.getCamera()),U.isScene===!0&&U.onBeforeRender(C,U,q,$),A=Be.get(U,L.length),A.init(q),L.push(A),Qt.multiplyMatrices(q.projectionMatrix,q.matrixWorldInverse),wt.setFromProjectionMatrix(Qt,Rr,q.reversedDepth),Ft=this.localClippingEnabled,st=ut.init(this.clippingPlanes,Ft),E=Ne.get(U,P.length),E.init(),P.push(E),ze.enabled===!0&&ze.isPresenting===!0){const Fe=C.xr.getDepthSensingMesh();Fe!==null&&Do(Fe,q,-1/0,C.sortObjects)}Do(U,q,0,C.sortObjects),E.finish(),C.sortObjects===!0&&E.sort(at,Ct),Pe=ze.enabled===!1||ze.isPresenting===!1||ze.hasDepthSensing()===!1,Pe&&de.addToRenderList(E,U),this.info.render.frame++,st===!0&&ut.beginShadows();const te=A.state.shadowsArray;if(Z.render(te,U,q),st===!0&&ut.endShadows(),this.info.autoReset===!0&&this.info.reset(),(oe&&N.hasRenderPass())===!1){const Fe=E.opaque,Me=E.transmissive;if(A.setupLights(),q.isArrayCamera){const Ie=q.cameras;if(Me.length>0)for(let Ve=0,it=Ie.length;Ve<it;Ve++){const He=Ie[Ve];F(Fe,Me,U,He)}Pe&&de.render(U);for(let Ve=0,it=Ie.length;Ve<it;Ve++){const He=Ie[Ve];ac(E,U,He,He.viewport)}}else Me.length>0&&F(Fe,Me,U,q),Pe&&de.render(U),ac(E,U,q)}$!==null&&H===0&&(ie.updateMultisampleRenderTarget($),ie.updateRenderTargetMipmap($)),oe&&N.end(C),U.isScene===!0&&U.onAfterRender(C,U,q),Qe.resetDefaultState(),ne=-1,le=null,L.pop(),L.length>0?(A=L[L.length-1],st===!0&&ut.setGlobalState(C.clippingPlanes,A.state.camera)):A=null,P.pop(),P.length>0?E=P[P.length-1]:E=null};function Do(U,q,re,oe){if(U.visible===!1)return;if(U.layers.test(q.layers)){if(U.isGroup)re=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(q);else if(U.isLight)A.pushLight(U),U.castShadow&&A.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||wt.intersectsSprite(U)){oe&&Te.setFromMatrixPosition(U.matrixWorld).applyMatrix4(Qt);const Fe=qe.update(U),Me=U.material;Me.visible&&E.push(U,Fe,Me,re,Te.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(!U.frustumCulled||wt.intersectsObject(U))){const Fe=qe.update(U),Me=U.material;if(oe&&(U.boundingSphere!==void 0?(U.boundingSphere===null&&U.computeBoundingSphere(),Te.copy(U.boundingSphere.center)):(Fe.boundingSphere===null&&Fe.computeBoundingSphere(),Te.copy(Fe.boundingSphere.center)),Te.applyMatrix4(U.matrixWorld).applyMatrix4(Qt)),Array.isArray(Me)){const Ie=Fe.groups;for(let Ve=0,it=Ie.length;Ve<it;Ve++){const He=Ie[Ve],vt=Me[He.materialIndex];vt&&vt.visible&&E.push(U,Fe,vt,re,Te.z,He)}}else Me.visible&&E.push(U,Fe,Me,re,Te.z,null)}}const Ce=U.children;for(let Fe=0,Me=Ce.length;Fe<Me;Fe++)Do(Ce[Fe],q,re,oe)}function ac(U,q,re,oe){const{opaque:te,transmissive:Ce,transparent:Fe}=U;A.setupLightsView(re),st===!0&&ut.setGlobalState(C.clippingPlanes,re),oe&&je.viewport(ee.copy(oe)),te.length>0&&B(te,q,re),Ce.length>0&&B(Ce,q,re),Fe.length>0&&B(Fe,q,re),je.buffers.depth.setTest(!0),je.buffers.depth.setMask(!0),je.buffers.color.setMask(!0),je.setPolygonOffset(!1)}function F(U,q,re,oe){if((re.isScene===!0?re.overrideMaterial:null)!==null)return;if(A.state.transmissionRenderTarget[oe.id]===void 0){const vt=tt.has("EXT_color_buffer_half_float")||tt.has("EXT_color_buffer_float");A.state.transmissionRenderTarget[oe.id]=new Gi(1,1,{generateMipmaps:!0,type:vt?Un:_i,minFilter:js,samples:Pt.samples,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:sn.workingColorSpace})}const Ce=A.state.transmissionRenderTarget[oe.id],Fe=oe.viewport||ee;Ce.setSize(Fe.z*C.transmissionResolutionScale,Fe.w*C.transmissionResolutionScale);const Me=C.getRenderTarget(),Ie=C.getActiveCubeFace(),Ve=C.getActiveMipmapLevel();C.setRenderTarget(Ce),C.getClearColor(Y),X=C.getClearAlpha(),X<1&&C.setClearColor(16777215,.5),C.clear(),Pe&&de.render(re);const it=C.toneMapping;C.toneMapping=ns;const He=oe.viewport;if(oe.viewport!==void 0&&(oe.viewport=void 0),A.setupLightsView(oe),st===!0&&ut.setGlobalState(C.clippingPlanes,oe),B(U,re,oe),ie.updateMultisampleRenderTarget(Ce),ie.updateRenderTargetMipmap(Ce),tt.has("WEBGL_multisampled_render_to_texture")===!1){let vt=!1;for(let Bt=0,Vt=q.length;Bt<Vt;Bt++){const $t=q[Bt],{object:bt,geometry:lt,material:Mt,group:yt}=$t;if(Mt.side===ws&&bt.layers.test(oe.layers)){const en=Mt.side;Mt.side=ir,Mt.needsUpdate=!0,J(bt,re,oe,lt,Mt,yt),Mt.side=en,Mt.needsUpdate=!0,vt=!0}}vt===!0&&(ie.updateMultisampleRenderTarget(Ce),ie.updateRenderTargetMipmap(Ce))}C.setRenderTarget(Me,Ie,Ve),C.setClearColor(Y,X),He!==void 0&&(oe.viewport=He),C.toneMapping=it}function B(U,q,re){const oe=q.isScene===!0?q.overrideMaterial:null;for(let te=0,Ce=U.length;te<Ce;te++){const Fe=U[te],{object:Me,geometry:Ie,group:Ve}=Fe;let it=Fe.material;it.allowOverride===!0&&oe!==null&&(it=oe),Me.layers.test(re.layers)&&J(Me,q,re,Ie,it,Ve)}}function J(U,q,re,oe,te,Ce){U.onBeforeRender(C,q,re,oe,te,Ce),U.modelViewMatrix.multiplyMatrices(re.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),te.onBeforeRender(C,q,re,oe,U,Ce),te.transparent===!0&&te.side===ws&&te.forceSinglePass===!1?(te.side=ir,te.needsUpdate=!0,C.renderBufferDirect(re,q,oe,te,U,Ce),te.side=Io,te.needsUpdate=!0,C.renderBufferDirect(re,q,oe,te,U,Ce),te.side=ws):C.renderBufferDirect(re,q,oe,te,U,Ce),U.onAfterRender(C,q,re,oe,te,Ce)}function fe(U,q,re){q.isScene!==!0&&(q=Ue);const oe=D.get(U),te=A.state.lights,Ce=A.state.shadowsArray,Fe=te.state.version,Me=ht.getParameters(U,te.state,Ce,q,re),Ie=ht.getProgramCacheKey(Me);let Ve=oe.programs;oe.environment=U.isMeshStandardMaterial?q.environment:null,oe.fog=q.fog,oe.envMap=(U.isMeshStandardMaterial?Ae:ge).get(U.envMap||oe.environment),oe.envMapRotation=oe.environment!==null&&U.envMap===null?q.environmentRotation:U.envMapRotation,Ve===void 0&&(U.addEventListener("dispose",jn),Ve=new Map,oe.programs=Ve);let it=Ve.get(Ie);if(it!==void 0){if(oe.currentProgram===it&&oe.lightsStateVersion===Fe)return _e(U,Me),it}else Me.uniforms=ht.getUniforms(U),U.onBeforeCompile(Me,C),it=ht.acquireProgram(Me,Ie),Ve.set(Ie,it),oe.uniforms=Me.uniforms;const He=oe.uniforms;return(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(He.clippingPlanes=ut.uniform),_e(U,Me),oe.needsLights=$e(U),oe.lightsStateVersion=Fe,oe.needsLights&&(He.ambientLightColor.value=te.state.ambient,He.lightProbe.value=te.state.probe,He.directionalLights.value=te.state.directional,He.directionalLightShadows.value=te.state.directionalShadow,He.spotLights.value=te.state.spot,He.spotLightShadows.value=te.state.spotShadow,He.rectAreaLights.value=te.state.rectArea,He.ltc_1.value=te.state.rectAreaLTC1,He.ltc_2.value=te.state.rectAreaLTC2,He.pointLights.value=te.state.point,He.pointLightShadows.value=te.state.pointShadow,He.hemisphereLights.value=te.state.hemi,He.directionalShadowMap.value=te.state.directionalShadowMap,He.directionalShadowMatrix.value=te.state.directionalShadowMatrix,He.spotShadowMap.value=te.state.spotShadowMap,He.spotLightMatrix.value=te.state.spotLightMatrix,He.spotLightMap.value=te.state.spotLightMap,He.pointShadowMap.value=te.state.pointShadowMap,He.pointShadowMatrix.value=te.state.pointShadowMatrix),oe.currentProgram=it,oe.uniformsList=null,it}function xe(U){if(U.uniformsList===null){const q=U.currentProgram.getUniforms();U.uniformsList=_g.seqWithValue(q.seq,U.uniforms)}return U.uniformsList}function _e(U,q){const re=D.get(U);re.outputColorSpace=q.outputColorSpace,re.batching=q.batching,re.batchingColor=q.batchingColor,re.instancing=q.instancing,re.instancingColor=q.instancingColor,re.instancingMorph=q.instancingMorph,re.skinning=q.skinning,re.morphTargets=q.morphTargets,re.morphNormals=q.morphNormals,re.morphColors=q.morphColors,re.morphTargetsCount=q.morphTargetsCount,re.numClippingPlanes=q.numClippingPlanes,re.numIntersection=q.numClipIntersection,re.vertexAlphas=q.vertexAlphas,re.vertexTangents=q.vertexTangents,re.toneMapping=q.toneMapping}function We(U,q,re,oe,te){q.isScene!==!0&&(q=Ue),ie.resetTextureUnits();const Ce=q.fog,Fe=oe.isMeshStandardMaterial?q.environment:null,Me=$===null?C.outputColorSpace:$.isXRRenderTarget===!0?$.texture.colorSpace:eo,Ie=(oe.isMeshStandardMaterial?Ae:ge).get(oe.envMap||Fe),Ve=oe.vertexColors===!0&&!!re.attributes.color&&re.attributes.color.itemSize===4,it=!!re.attributes.tangent&&(!!oe.normalMap||oe.anisotropy>0),He=!!re.morphAttributes.position,vt=!!re.morphAttributes.normal,Bt=!!re.morphAttributes.color;let Vt=ns;oe.toneMapped&&($===null||$.isXRRenderTarget===!0)&&(Vt=C.toneMapping);const $t=re.morphAttributes.position||re.morphAttributes.normal||re.morphAttributes.color,bt=$t!==void 0?$t.length:0,lt=D.get(oe),Mt=A.state.lights;if(st===!0&&(Ft===!0||U!==le)){const Jn=U===le&&oe.id===ne;ut.setState(oe,U,Jn)}let yt=!1;oe.version===lt.__version?(lt.needsLights&&lt.lightsStateVersion!==Mt.state.version||lt.outputColorSpace!==Me||te.isBatchedMesh&&lt.batching===!1||!te.isBatchedMesh&&lt.batching===!0||te.isBatchedMesh&&lt.batchingColor===!0&&te.colorTexture===null||te.isBatchedMesh&&lt.batchingColor===!1&&te.colorTexture!==null||te.isInstancedMesh&&lt.instancing===!1||!te.isInstancedMesh&&lt.instancing===!0||te.isSkinnedMesh&&lt.skinning===!1||!te.isSkinnedMesh&&lt.skinning===!0||te.isInstancedMesh&&lt.instancingColor===!0&&te.instanceColor===null||te.isInstancedMesh&&lt.instancingColor===!1&&te.instanceColor!==null||te.isInstancedMesh&&lt.instancingMorph===!0&&te.morphTexture===null||te.isInstancedMesh&&lt.instancingMorph===!1&&te.morphTexture!==null||lt.envMap!==Ie||oe.fog===!0&&lt.fog!==Ce||lt.numClippingPlanes!==void 0&&(lt.numClippingPlanes!==ut.numPlanes||lt.numIntersection!==ut.numIntersection)||lt.vertexAlphas!==Ve||lt.vertexTangents!==it||lt.morphTargets!==He||lt.morphNormals!==vt||lt.morphColors!==Bt||lt.toneMapping!==Vt||lt.morphTargetsCount!==bt)&&(yt=!0):(yt=!0,lt.__version=oe.version);let en=lt.currentProgram;yt===!0&&(en=fe(oe,q,te));let Ci=!1,pn=!1,Pi=!1;const hn=en.getUniforms(),si=lt.uniforms;if(je.useProgram(en.program)&&(Ci=!0,pn=!0,Pi=!0),oe.id!==ne&&(ne=oe.id,pn=!0),Ci||le!==U){je.buffers.depth.getReversed()&&U.reversedDepth!==!0&&(U._reversedDepth=!0,U.updateProjectionMatrix()),hn.setValue(G,"projectionMatrix",U.projectionMatrix),hn.setValue(G,"viewMatrix",U.matrixWorldInverse);const Ri=hn.map.cameraPosition;Ri!==void 0&&Ri.setValue(G,_t.setFromMatrixPosition(U.matrixWorld)),Pt.logarithmicDepthBuffer&&hn.setValue(G,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial)&&hn.setValue(G,"isOrthographic",U.isOrthographicCamera===!0),le!==U&&(le=U,pn=!0,Pi=!0)}if(lt.needsLights&&(Mt.state.directionalShadowMap.length>0&&hn.setValue(G,"directionalShadowMap",Mt.state.directionalShadowMap,ie),Mt.state.spotShadowMap.length>0&&hn.setValue(G,"spotShadowMap",Mt.state.spotShadowMap,ie),Mt.state.pointShadowMap.length>0&&hn.setValue(G,"pointShadowMap",Mt.state.pointShadowMap,ie)),te.isSkinnedMesh){hn.setOptional(G,te,"bindMatrix"),hn.setOptional(G,te,"bindMatrixInverse");const Jn=te.skeleton;Jn&&(Jn.boneTexture===null&&Jn.computeBoneTexture(),hn.setValue(G,"boneTexture",Jn.boneTexture,ie))}te.isBatchedMesh&&(hn.setOptional(G,te,"batchingTexture"),hn.setValue(G,"batchingTexture",te._matricesTexture,ie),hn.setOptional(G,te,"batchingIdTexture"),hn.setValue(G,"batchingIdTexture",te._indirectTexture,ie),hn.setOptional(G,te,"batchingColorTexture"),te._colorsTexture!==null&&hn.setValue(G,"batchingColorTexture",te._colorsTexture,ie));const fi=re.morphAttributes;if((fi.position!==void 0||fi.normal!==void 0||fi.color!==void 0)&&Le.update(te,re,en),(pn||lt.receiveShadow!==te.receiveShadow)&&(lt.receiveShadow=te.receiveShadow,hn.setValue(G,"receiveShadow",te.receiveShadow)),oe.isMeshGouraudMaterial&&oe.envMap!==null&&(si.envMap.value=Ie,si.flipEnvMap.value=Ie.isCubeTexture&&Ie.isRenderTargetTexture===!1?-1:1),oe.isMeshStandardMaterial&&oe.envMap===null&&q.environment!==null&&(si.envMapIntensity.value=q.environmentIntensity),si.dfgLUT!==void 0&&(si.dfgLUT.value=mq()),pn&&(hn.setValue(G,"toneMappingExposure",C.toneMappingExposure),lt.needsLights&&ke(si,Pi),Ce&&oe.fog===!0&&It.refreshFogUniforms(si,Ce),It.refreshMaterialUniforms(si,oe,Re,me,A.state.transmissionRenderTarget[U.id]),_g.upload(G,xe(lt),si,ie)),oe.isShaderMaterial&&oe.uniformsNeedUpdate===!0&&(_g.upload(G,xe(lt),si,ie),oe.uniformsNeedUpdate=!1),oe.isSpriteMaterial&&hn.setValue(G,"center",te.center),hn.setValue(G,"modelViewMatrix",te.modelViewMatrix),hn.setValue(G,"normalMatrix",te.normalMatrix),hn.setValue(G,"modelMatrix",te.matrixWorld),oe.isShaderMaterial||oe.isRawShaderMaterial){const Jn=oe.uniformsGroups;for(let Ri=0,nd=Jn.length;Ri<nd;Ri++){const ls=Jn[Ri];Oe.update(ls,en),Oe.bind(ls,en)}}return en}function ke(U,q){U.ambientLightColor.needsUpdate=q,U.lightProbe.needsUpdate=q,U.directionalLights.needsUpdate=q,U.directionalLightShadows.needsUpdate=q,U.pointLights.needsUpdate=q,U.pointLightShadows.needsUpdate=q,U.spotLights.needsUpdate=q,U.spotLightShadows.needsUpdate=q,U.rectAreaLights.needsUpdate=q,U.hemisphereLights.needsUpdate=q}function $e(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return H},this.getRenderTarget=function(){return $},this.setRenderTargetTextures=function(U,q,re){const oe=D.get(U);oe.__autoAllocateDepthBuffer=U.resolveDepthBuffer===!1,oe.__autoAllocateDepthBuffer===!1&&(oe.__useRenderToTexture=!1),D.get(U.texture).__webglTexture=q,D.get(U.depthTexture).__webglTexture=oe.__autoAllocateDepthBuffer?void 0:re,oe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(U,q){const re=D.get(U);re.__webglFramebuffer=q,re.__useDefaultFramebuffer=q===void 0};const Ze=G.createFramebuffer();this.setRenderTarget=function(U,q=0,re=0){$=U,k=q,H=re;let oe=null,te=!1,Ce=!1;if(U){const Me=D.get(U);if(Me.__useDefaultFramebuffer!==void 0){je.bindFramebuffer(G.FRAMEBUFFER,Me.__webglFramebuffer),ee.copy(U.viewport),Q.copy(U.scissor),O=U.scissorTest,je.viewport(ee),je.scissor(Q),je.setScissorTest(O),ne=-1;return}else if(Me.__webglFramebuffer===void 0)ie.setupRenderTarget(U);else if(Me.__hasExternalTextures)ie.rebindTextures(U,D.get(U.texture).__webglTexture,D.get(U.depthTexture).__webglTexture);else if(U.depthBuffer){const it=U.depthTexture;if(Me.__boundDepthTexture!==it){if(it!==null&&D.has(it)&&(U.width!==it.image.width||U.height!==it.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ie.setupDepthRenderbuffer(U)}}const Ie=U.texture;(Ie.isData3DTexture||Ie.isDataArrayTexture||Ie.isCompressedArrayTexture)&&(Ce=!0);const Ve=D.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Array.isArray(Ve[q])?oe=Ve[q][re]:oe=Ve[q],te=!0):U.samples>0&&ie.useMultisampledRTT(U)===!1?oe=D.get(U).__webglMultisampledFramebuffer:Array.isArray(Ve)?oe=Ve[re]:oe=Ve,ee.copy(U.viewport),Q.copy(U.scissor),O=U.scissorTest}else ee.copy(ue).multiplyScalar(Re).floor(),Q.copy(Se).multiplyScalar(Re).floor(),O=et;if(re!==0&&(oe=Ze),je.bindFramebuffer(G.FRAMEBUFFER,oe)&&je.drawBuffers(U,oe),je.viewport(ee),je.scissor(Q),je.setScissorTest(O),te){const Me=D.get(U.texture);G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+q,Me.__webglTexture,re)}else if(Ce){const Me=q;for(let Ie=0;Ie<U.textures.length;Ie++){const Ve=D.get(U.textures[Ie]);G.framebufferTextureLayer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0+Ie,Ve.__webglTexture,re,Me)}}else if(U!==null&&re!==0){const Me=D.get(U.texture);G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,Me.__webglTexture,re)}ne=-1},this.readRenderTargetPixels=function(U,q,re,oe,te,Ce,Fe,Me=0){if(!(U&&U.isWebGLRenderTarget)){At("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ie=D.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&Fe!==void 0&&(Ie=Ie[Fe]),Ie){je.bindFramebuffer(G.FRAMEBUFFER,Ie);try{const Ve=U.textures[Me],it=Ve.format,He=Ve.type;if(!Pt.textureFormatReadable(it)){At("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Pt.textureTypeReadable(He)){At("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}q>=0&&q<=U.width-oe&&re>=0&&re<=U.height-te&&(U.textures.length>1&&G.readBuffer(G.COLOR_ATTACHMENT0+Me),G.readPixels(q,re,oe,te,De.convert(it),De.convert(He),Ce))}finally{const Ve=$!==null?D.get($).__webglFramebuffer:null;je.bindFramebuffer(G.FRAMEBUFFER,Ve)}}},this.readRenderTargetPixelsAsync=async function(U,q,re,oe,te,Ce,Fe,Me=0){if(!(U&&U.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ie=D.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&Fe!==void 0&&(Ie=Ie[Fe]),Ie)if(q>=0&&q<=U.width-oe&&re>=0&&re<=U.height-te){je.bindFramebuffer(G.FRAMEBUFFER,Ie);const Ve=U.textures[Me],it=Ve.format,He=Ve.type;if(!Pt.textureFormatReadable(it))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Pt.textureTypeReadable(He))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const vt=G.createBuffer();G.bindBuffer(G.PIXEL_PACK_BUFFER,vt),G.bufferData(G.PIXEL_PACK_BUFFER,Ce.byteLength,G.STREAM_READ),U.textures.length>1&&G.readBuffer(G.COLOR_ATTACHMENT0+Me),G.readPixels(q,re,oe,te,De.convert(it),De.convert(He),0);const Bt=$!==null?D.get($).__webglFramebuffer:null;je.bindFramebuffer(G.FRAMEBUFFER,Bt);const Vt=G.fenceSync(G.SYNC_GPU_COMMANDS_COMPLETE,0);return G.flush(),await AH(G,Vt,4),G.bindBuffer(G.PIXEL_PACK_BUFFER,vt),G.getBufferSubData(G.PIXEL_PACK_BUFFER,0,Ce),G.deleteBuffer(vt),G.deleteSync(Vt),Ce}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(U,q=null,re=0){const oe=Math.pow(2,-re),te=Math.floor(U.image.width*oe),Ce=Math.floor(U.image.height*oe),Fe=q!==null?q.x:0,Me=q!==null?q.y:0;ie.setTexture2D(U,0),G.copyTexSubImage2D(G.TEXTURE_2D,re,0,0,Fe,Me,te,Ce),je.unbindTexture()};const Ke=G.createFramebuffer(),Xe=G.createFramebuffer();this.copyTextureToTexture=function(U,q,re=null,oe=null,te=0,Ce=null){Ce===null&&(te!==0?(ku("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ce=te,te=0):Ce=0);let Fe,Me,Ie,Ve,it,He,vt,Bt,Vt;const $t=U.isCompressedTexture?U.mipmaps[Ce]:U.image;if(re!==null)Fe=re.max.x-re.min.x,Me=re.max.y-re.min.y,Ie=re.isBox3?re.max.z-re.min.z:1,Ve=re.min.x,it=re.min.y,He=re.isBox3?re.min.z:0;else{const fi=Math.pow(2,-te);Fe=Math.floor($t.width*fi),Me=Math.floor($t.height*fi),U.isDataArrayTexture?Ie=$t.depth:U.isData3DTexture?Ie=Math.floor($t.depth*fi):Ie=1,Ve=0,it=0,He=0}oe!==null?(vt=oe.x,Bt=oe.y,Vt=oe.z):(vt=0,Bt=0,Vt=0);const bt=De.convert(q.format),lt=De.convert(q.type);let Mt;q.isData3DTexture?(ie.setTexture3D(q,0),Mt=G.TEXTURE_3D):q.isDataArrayTexture||q.isCompressedArrayTexture?(ie.setTexture2DArray(q,0),Mt=G.TEXTURE_2D_ARRAY):(ie.setTexture2D(q,0),Mt=G.TEXTURE_2D),G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,q.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,q.unpackAlignment);const yt=G.getParameter(G.UNPACK_ROW_LENGTH),en=G.getParameter(G.UNPACK_IMAGE_HEIGHT),Ci=G.getParameter(G.UNPACK_SKIP_PIXELS),pn=G.getParameter(G.UNPACK_SKIP_ROWS),Pi=G.getParameter(G.UNPACK_SKIP_IMAGES);G.pixelStorei(G.UNPACK_ROW_LENGTH,$t.width),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,$t.height),G.pixelStorei(G.UNPACK_SKIP_PIXELS,Ve),G.pixelStorei(G.UNPACK_SKIP_ROWS,it),G.pixelStorei(G.UNPACK_SKIP_IMAGES,He);const hn=U.isDataArrayTexture||U.isData3DTexture,si=q.isDataArrayTexture||q.isData3DTexture;if(U.isDepthTexture){const fi=D.get(U),Jn=D.get(q),Ri=D.get(fi.__renderTarget),nd=D.get(Jn.__renderTarget);je.bindFramebuffer(G.READ_FRAMEBUFFER,Ri.__webglFramebuffer),je.bindFramebuffer(G.DRAW_FRAMEBUFFER,nd.__webglFramebuffer);for(let ls=0;ls<Ie;ls++)hn&&(G.framebufferTextureLayer(G.READ_FRAMEBUFFER,G.COLOR_ATTACHMENT0,D.get(U).__webglTexture,te,He+ls),G.framebufferTextureLayer(G.DRAW_FRAMEBUFFER,G.COLOR_ATTACHMENT0,D.get(q).__webglTexture,Ce,Vt+ls)),G.blitFramebuffer(Ve,it,Fe,Me,vt,Bt,Fe,Me,G.DEPTH_BUFFER_BIT,G.NEAREST);je.bindFramebuffer(G.READ_FRAMEBUFFER,null),je.bindFramebuffer(G.DRAW_FRAMEBUFFER,null)}else if(te!==0||U.isRenderTargetTexture||D.has(U)){const fi=D.get(U),Jn=D.get(q);je.bindFramebuffer(G.READ_FRAMEBUFFER,Ke),je.bindFramebuffer(G.DRAW_FRAMEBUFFER,Xe);for(let Ri=0;Ri<Ie;Ri++)hn?G.framebufferTextureLayer(G.READ_FRAMEBUFFER,G.COLOR_ATTACHMENT0,fi.__webglTexture,te,He+Ri):G.framebufferTexture2D(G.READ_FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,fi.__webglTexture,te),si?G.framebufferTextureLayer(G.DRAW_FRAMEBUFFER,G.COLOR_ATTACHMENT0,Jn.__webglTexture,Ce,Vt+Ri):G.framebufferTexture2D(G.DRAW_FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,Jn.__webglTexture,Ce),te!==0?G.blitFramebuffer(Ve,it,Fe,Me,vt,Bt,Fe,Me,G.COLOR_BUFFER_BIT,G.NEAREST):si?G.copyTexSubImage3D(Mt,Ce,vt,Bt,Vt+Ri,Ve,it,Fe,Me):G.copyTexSubImage2D(Mt,Ce,vt,Bt,Ve,it,Fe,Me);je.bindFramebuffer(G.READ_FRAMEBUFFER,null),je.bindFramebuffer(G.DRAW_FRAMEBUFFER,null)}else si?U.isDataTexture||U.isData3DTexture?G.texSubImage3D(Mt,Ce,vt,Bt,Vt,Fe,Me,Ie,bt,lt,$t.data):q.isCompressedArrayTexture?G.compressedTexSubImage3D(Mt,Ce,vt,Bt,Vt,Fe,Me,Ie,bt,$t.data):G.texSubImage3D(Mt,Ce,vt,Bt,Vt,Fe,Me,Ie,bt,lt,$t):U.isDataTexture?G.texSubImage2D(G.TEXTURE_2D,Ce,vt,Bt,Fe,Me,bt,lt,$t.data):U.isCompressedTexture?G.compressedTexSubImage2D(G.TEXTURE_2D,Ce,vt,Bt,$t.width,$t.height,bt,$t.data):G.texSubImage2D(G.TEXTURE_2D,Ce,vt,Bt,Fe,Me,bt,lt,$t);G.pixelStorei(G.UNPACK_ROW_LENGTH,yt),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,en),G.pixelStorei(G.UNPACK_SKIP_PIXELS,Ci),G.pixelStorei(G.UNPACK_SKIP_ROWS,pn),G.pixelStorei(G.UNPACK_SKIP_IMAGES,Pi),Ce===0&&q.generateMipmaps&&G.generateMipmap(Mt),je.unbindTexture()},this.initRenderTarget=function(U){D.get(U).__webglFramebuffer===void 0&&ie.setupRenderTarget(U)},this.initTexture=function(U){U.isCubeTexture?ie.setTextureCube(U,0):U.isData3DTexture?ie.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?ie.setTexture2DArray(U,0):ie.setTexture2D(U,0),je.unbindTexture()},this.resetState=function(){k=0,H=0,$=null,je.reset(),Qe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Rr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=sn._getDrawingBufferColorSpace(e),t.unpackColorSpace=sn._getUnpackColorSpace()}}const gq=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:vv,AddEquation:oa,AddOperation:hL,AdditiveAnimationBlendMode:bM,AdditiveBlending:mS,AgXToneMapping:yM,AlphaFormat:MM,AlwaysCompare:EL,AlwaysDepth:s0,AlwaysStencilFunc:_S,AmbientLight:yD,AnimationAction:TD,AnimationClip:mf,AnimationLoader:gW,AnimationMixer:GW,AnimationObjectGroup:VW,AnimationUtils:hW,ArcCurve:WL,ArrayCamera:MD,ArrowHelper:pj,AttachedBindMode:yS,Audio:ED,AudioAnalyser:IW,AudioContext:$M,AudioListener:CW,AudioLoader:bW,AxesHelper:mj,BackSide:ir,BasicDepthPacking:vL,BasicShadowMap:XN,BatchedMesh:OL,Bone:IM,BooleanKeyframeTrack:ic,Box2:JW,Box3:Wi,Box3Helper:hj,BoxGeometry:nc,BoxHelper:dj,BufferAttribute:yn,BufferGeometry:zt,BufferGeometryLoader:wD,ByteType:yv,Cache:Xs,Camera:kf,CameraHelper:uj,CanvasTexture:FG,CapsuleGeometry:Uv,CatmullRomCurve3:jL,CineonToneMapping:gM,CircleGeometry:kv,ClampToEdgeWrapping:Wn,Clock:KM,Color:ft,ColorKeyframeTrack:XM,ColorManagement:sn,CompressedArrayTexture:LG,CompressedCubeTexture:DG,CompressedTexture:Fv,CompressedTextureLoader:vW,ConeGeometry:Vf,ConstantAlphaFactor:cL,ConstantColorFactor:aL,Controls:vj,CubeCamera:NL,CubeDepthTexture:HL,CubeReflectionMapping:Cs,CubeRefractionMapping:Ia,CubeTexture:Of,CubeTextureLoader:fD,CubeUVReflectionMapping:Ju,CubicBezierCurve:FM,CubicBezierCurve3:XL,CubicInterpolant:cD,CullFaceBack:pS,CullFaceFront:jN,CullFaceFrontBack:O8,CullFaceNone:WN,Curve:Ps,CurvePath:qL,CustomBlending:YN,CustomToneMapping:vM,CylinderGeometry:zf,Cylindrical:KW,Data3DTexture:Cv,DataArrayTexture:Av,DataTexture:is,DataTextureLoader:YM,DataUtils:Pl,DecrementStencilOp:tH,DecrementWrapStencilOp:iH,DefaultLoadingManager:hD,DepthFormat:Qs,DepthStencilFormat:da,DepthTexture:Zl,DetachedBindMode:fL,DirectionalLight:vD,DirectionalLightHelper:cj,DiscreteInterpolant:uD,DodecahedronGeometry:Ov,DoubleSide:ws,DstAlphaFactor:nL,DstColorFactor:rL,DynamicCopyUsage:yH,DynamicDrawUsage:hH,DynamicReadUsage:mH,EdgesGeometry:GL,EllipseCurve:Bv,EqualCompare:SL,EqualDepth:a0,EqualStencilFunc:aH,EquirectangularReflectionMapping:Lu,EquirectangularRefractionMapping:ef,Euler:Ur,EventDispatcher:to,ExternalTexture:LM,ExtrudeGeometry:zv,FileLoader:Lr,Float16BufferAttribute:dG,Float32BufferAttribute:gt,FloatType:Cn,Fog:Iv,FogExp2:Rv,FramebufferTexture:NG,FrontSide:Io,Frustum:Qu,FrustumArray:Dv,GLBufferAttribute:qW,GLSL1:_H,GLSL3:SS,GreaterCompare:wL,GreaterDepth:c0,GreaterEqualCompare:Tv,GreaterEqualDepth:l0,GreaterEqualStencilFunc:dH,GreaterStencilFunc:cH,GridHelper:aj,Group:cu,HalfFloatType:Un,HemisphereLight:pD,HemisphereLightHelper:oj,IcosahedronGeometry:Hf,ImageBitmapLoader:EW,ImageLoader:gf,ImageUtils:CL,IncrementStencilOp:eH,IncrementWrapStencilOp:nH,InstancedBufferAttribute:zu,InstancedBufferGeometry:SD,InstancedInterleavedBuffer:YW,InstancedMesh:kL,Int16BufferAttribute:cG,Int32BufferAttribute:uG,Int8BufferAttribute:oG,IntType:Df,InterleavedBuffer:Nv,InterleavedBufferAttribute:ql,Interpolant:jf,InterpolateDiscrete:rf,InterpolateLinear:G0,InterpolateSmooth:yg,InterpolationSamplingMode:MH,InterpolationSamplingType:wH,InvertStencilOp:rH,KeepStencilOp:xl,KeyframeTrack:os,LOD:FL,LatheGeometry:Vv,Layers:Ol,LessCompare:_L,LessDepth:o0,LessEqualCompare:bv,LessEqualDepth:Xl,LessEqualStencilFunc:lH,LessStencilFunc:oH,Light:Va,LightProbe:_D,Line:La,Line3:tj,LineBasicMaterial:ar,LineCurve:UM,LineCurve3:YL,LineDashedMaterial:aD,LineLoop:BL,LineSegments:no,LinearFilter:nn,LinearInterpolant:jM,LinearMipMapLinearFilter:xS,LinearMipMapNearestFilter:V8,LinearMipmapLinearFilter:js,LinearMipmapNearestFilter:_h,LinearSRGBColorSpace:eo,LinearToneMapping:pM,LinearTransfer:of,Loader:lr,LoaderUtils:TS,LoadingManager:qv,LoopOnce:pL,LoopPingPong:gL,LoopRepeat:mL,MOUSE:vl,Material:Xi,MaterialLoader:Zv,MathUtils:WH,Matrix2:nE,Matrix3:Wt,Matrix4:kt,MaxEquation:KN,Mesh:Bn,MeshBasicMaterial:Lo,MeshDepthMaterial:HM,MeshDistanceMaterial:GM,MeshLambertMaterial:sD,MeshMatcapMaterial:oD,MeshNormalMaterial:rD,MeshPhongMaterial:nD,MeshPhysicalMaterial:tD,MeshStandardMaterial:VM,MeshToonMaterial:iD,MinEquation:$N,MirroredRepeatWrapping:nf,MixOperation:dL,MultiplyBlending:vS,MultiplyOperation:Lf,NearestFilter:$n,NearestMipMapLinearFilter:z8,NearestMipMapNearestFilter:B8,NearestMipmapLinearFilter:au,NearestMipmapNearestFilter:_M,NeutralToneMapping:xM,NeverCompare:xL,NeverDepth:r0,NeverStencilFunc:sH,NoBlending:Ts,NoColorSpace:_o,NoNormalPacking:Z8,NoToneMapping:ns,NormalAnimationBlendMode:Ev,NormalBlending:Ul,NormalGAPacking:K8,NormalRGPacking:$8,NotEqualCompare:ML,NotEqualDepth:u0,NotEqualStencilFunc:uH,NumberKeyframeTrack:ff,Object3D:ln,ObjectLoader:wW,ObjectSpaceNormalMap:yL,OctahedronGeometry:Gf,OneFactor:QN,OneMinusConstantAlphaFactor:uL,OneMinusConstantColorFactor:lL,OneMinusDstAlphaFactor:iL,OneMinusDstColorFactor:sL,OneMinusSrcAlphaFactor:i0,OneMinusSrcColorFactor:tL,OrthographicCamera:Ks,PCFShadowMap:_u,PCFSoftShadowMap:xh,PMREMGenerator:RS,Path:Y0,PerspectiveCamera:Zn,Plane:xo,PlaneGeometry:za,PlaneHelper:fj,PointLight:gD,PointLightHelper:rj,Points:zL,PointsMaterial:NM,PolarGridHelper:lj,PolyhedronGeometry:Ba,PositionalAudio:RW,PropertyBinding:on,PropertyMixer:bD,QuadraticBezierCurve:kM,QuadraticBezierCurve3:OM,Quaternion:Hi,QuaternionKeyframeTrack:Xf,QuaternionLinearInterpolant:dD,R11_EAC_Format:y0,RED_GREEN_RGTC2_Format:V0,RED_RGTC1_Format:B0,REVISION:Nf,RG11_EAC_Format:_0,RGBADepthPacking:X8,RGBAFormat:Kn,RGBAIntegerFormat:Mv,RGBA_ASTC_10x10_Format:L0,RGBA_ASTC_10x5_Format:R0,RGBA_ASTC_10x6_Format:I0,RGBA_ASTC_10x8_Format:N0,RGBA_ASTC_12x10_Format:D0,RGBA_ASTC_12x12_Format:F0,RGBA_ASTC_4x4_Format:w0,RGBA_ASTC_5x4_Format:M0,RGBA_ASTC_5x5_Format:E0,RGBA_ASTC_6x5_Format:b0,RGBA_ASTC_6x6_Format:T0,RGBA_ASTC_8x5_Format:A0,RGBA_ASTC_8x6_Format:C0,RGBA_ASTC_8x8_Format:P0,RGBA_BPTC_Format:U0,RGBA_ETC2_EAC_Format:v0,RGBA_PVRTC_2BPPV1_Format:p0,RGBA_PVRTC_4BPPV1_Format:f0,RGBA_S3TC_DXT1_Format:wh,RGBA_S3TC_DXT3_Format:Mh,RGBA_S3TC_DXT5_Format:Eh,RGBDepthPacking:Y8,RGBFormat:EM,RGBIntegerFormat:H8,RGB_BPTC_SIGNED_Format:k0,RGB_BPTC_UNSIGNED_Format:O0,RGB_ETC1_Format:m0,RGB_ETC2_Format:g0,RGB_PVRTC_2BPPV1_Format:h0,RGB_PVRTC_4BPPV1_Format:d0,RGB_S3TC_DXT1_Format:Sh,RGDepthPacking:q8,RGFormat:Yl,RGIntegerFormat:wv,RawShaderMaterial:zM,Ray:tc,Raycaster:tE,RectAreaLight:xD,RedFormat:Ff,RedIntegerFormat:Uf,ReinhardToneMapping:mM,RenderTarget:AM,RenderTarget3D:WW,RepeatWrapping:tf,ReplaceStencilOp:Q8,ReverseSubtractEquation:ZN,RingGeometry:Hv,SIGNED_R11_EAC_Format:x0,SIGNED_RED_GREEN_RGTC2_Format:H0,SIGNED_RED_RGTC1_Format:z0,SIGNED_RG11_EAC_Format:S0,SRGBColorSpace:Ji,SRGBTransfer:fn,Scene:Bf,ShaderChunk:qt,ShaderLib:Ss,ShaderMaterial:rr,ShadowMaterial:eD,Shape:Bl,ShapeGeometry:Gv,ShapePath:gj,ShapeUtils:Ms,ShortType:xv,Skeleton:Lv,SkeletonHelper:ij,SkinnedMesh:UL,Source:ha,Sphere:Ti,SphereGeometry:Wf,Spherical:CS,SphericalHarmonics3:ZM,SplineCurve:BM,SpotLight:mD,SpotLightHelper:nj,Sprite:DL,SpriteMaterial:RM,SrcAlphaFactor:n0,SrcAlphaSaturateFactor:oL,SrcColorFactor:eL,StaticCopyUsage:vH,StaticDrawUsage:af,StaticReadUsage:pH,StereoCamera:TW,StreamCopyUsage:xH,StreamDrawUsage:fH,StreamReadUsage:gH,StringKeyframeTrack:rc,SubtractEquation:qN,SubtractiveBlending:gS,TOUCH:yl,TangentSpaceNormalMap:Oa,TetrahedronGeometry:Wv,Texture:vn,TextureLoader:yW,TextureUtils:wj,Timer:ZW,TimestampQuery:SH,TorusGeometry:jv,TorusKnotGeometry:Xv,Triangle:gr,TriangleFanDrawMode:j8,TriangleStripDrawMode:W8,TrianglesDrawMode:G8,TubeGeometry:Yv,UVMapping:Ra,Uint16BufferAttribute:CM,Uint32BufferAttribute:PM,Uint8BufferAttribute:aG,Uint8ClampedBufferAttribute:lG,Uniform:eE,UniformsGroup:XW,UniformsLib:rt,UniformsUtils:IL,UnsignedByteType:_i,UnsignedInt101111Type:wM,UnsignedInt248Type:Fu,UnsignedInt5999Type:SM,UnsignedIntType:Fr,UnsignedShort4444Type:_v,UnsignedShort5551Type:Sv,UnsignedShortType:Du,VSMShadowMap:Tl,Vector2:Ee,Vector3:V,Vector4:_n,VectorKeyframeTrack:pf,VideoFrameTexture:IG,VideoTexture:VL,WebGL3DRenderTarget:ZH,WebGLArrayRenderTarget:qH,WebGLCoordinateSystem:Rr,WebGLCubeRenderTarget:Pv,WebGLRenderTarget:Gi,WebGLRenderer:iE,WebGLUtils:LD,WebGPUCoordinateSystem:Uu,WebXRController:xg,WireframeGeometry:QL,WrapAroundEnding:sf,ZeroCurvatureEnding:Al,ZeroFactor:JN,ZeroSlopeEnding:Cl,ZeroStencilOp:J8,createCanvasElement:AL,error:At,getConsoleFunction:TH,log:cf,setConsoleFunction:bH,warn:nt,warnOnce:ku},Symbol.toStringTag,{value:"Module"}));var DD={exports:{}},sc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */sc.ConcurrentRoot=1;sc.ContinuousEventPriority=4;sc.DefaultEventPriority=16;sc.DiscreteEventPriority=1;sc.IdleEventPriority=536870912;sc.LegacyRoot=0;DD.exports=sc;var uu=DD.exports;function vq(n){let e;const t=new Set,i=(u,h)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const p=e;e=h?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},r=()=>e,s=(u,h=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function m(){const y=h(e);if(!f(p,y)){const S=p;u(p=y,S)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(u,h,f)=>h||f?s(u,h,f):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,r,l),l}const yq=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),oP=yq?j.useEffect:j.useLayoutEffect;function FD(n){const e=typeof n=="function"?vq(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=j.useReducer(x=>x+1,0),o=e.getState(),a=j.useRef(o),l=j.useRef(i),u=j.useRef(r),h=j.useRef(!1),f=j.useRef();f.current===void 0&&(f.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||u.current!==r||h.current)&&(p=i(o),m=!r(f.current,p)),oP(()=>{m&&(f.current=p),a.current=o,l.current=i,u.current=r,h.current=!1});const y=j.useRef(o);oP(()=>{const x=()=>{try{const _=e.getState(),M=l.current(_);u.current(f.current,M)||(a.current=_,f.current=M,s())}catch{h.current=!0,s()}},g=e.subscribe(x);return e.getState()!==y.current&&x(),g},[]);const S=m?p:f.current;return j.useDebugValue(S),S};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const xq=n=>typeof n=="object"&&typeof n.then=="function",Il=[];function UD(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function kD(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of Il)if(UD(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=Il.indexOf(r);s!==-1&&Il.splice(s,1)},promise:(xq(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(Il.push(r),!t)throw r.promise}const _q=(n,e,t)=>kD(n,e,!1,t),Sq=(n,e,t)=>void kD(n,e,!0,t),wq=n=>{if(n===void 0||n.length===0)Il.splice(0,Il.length);else{const e=Il.find(t=>UD(n,t.keys,t.equal));e&&e.remove()}};var OD={exports:{}},U_={exports:{}},k_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aP;function Mq(){return aP||(aP=1,function(n){function e(O,Y){var X=O.length;O.push(Y);e:for(;0<X;){var se=X-1>>>1,me=O[se];if(0<r(me,Y))O[se]=Y,O[X]=me,X=se;else break e}}function t(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var Y=O[0],X=O.pop();if(X!==Y){O[0]=X;e:for(var se=0,me=O.length,Re=me>>>1;se<Re;){var at=2*(se+1)-1,Ct=O[at],ue=at+1,Se=O[ue];if(0>r(Ct,X))ue<me&&0>r(Se,Ct)?(O[se]=Se,O[ue]=X,se=ue):(O[se]=Ct,O[at]=X,se=at);else if(ue<me&&0>r(Se,X))O[se]=Se,O[ue]=X,se=ue;else break e}}return Y}function r(O,Y){var X=O.sortIndex-Y.sortIndex;return X!==0?X:O.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,m=!1,y=!1,S=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(O){for(var Y=t(u);Y!==null;){if(Y.callback===null)i(u);else if(Y.startTime<=O)i(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(u)}}function E(O){if(S=!1,M(O),!y)if(t(l)!==null)y=!0,ee(A);else{var Y=t(u);Y!==null&&Q(E,Y.startTime-O)}}function A(O,Y){y=!1,S&&(S=!1,g(N),N=-1),m=!0;var X=p;try{for(M(Y),f=t(l);f!==null&&(!(f.expirationTime>Y)||O&&!k());){var se=f.callback;if(typeof se=="function"){f.callback=null,p=f.priorityLevel;var me=se(f.expirationTime<=Y);Y=n.unstable_now(),typeof me=="function"?f.callback=me:f===t(l)&&i(l),M(Y)}else i(l);f=t(l)}if(f!==null)var Re=!0;else{var at=t(u);at!==null&&Q(E,at.startTime-Y),Re=!1}return Re}finally{f=null,p=X,m=!1}}var P=!1,L=null,N=-1,C=5,R=-1;function k(){return!(n.unstable_now()-R<C)}function H(){if(L!==null){var O=n.unstable_now();R=O;var Y=!0;try{Y=L(!0,O)}finally{Y?$():(P=!1,L=null)}}else P=!1}var $;if(typeof _=="function")$=function(){_(H)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,le=ne.port2;ne.port1.onmessage=H,$=function(){le.postMessage(null)}}else $=function(){x(H,0)};function ee(O){L=O,P||(P=!0,$())}function Q(O,Y){N=x(function(){O(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,ee(A))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var X=p;p=Y;try{return O()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,Y){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var X=p;p=O;try{return Y()}finally{p=X}},n.unstable_scheduleCallback=function(O,Y,X){var se=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?se+X:se):X=se,O){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=X+me,O={id:h++,callback:Y,priorityLevel:O,startTime:X,expirationTime:me,sortIndex:-1},X>se?(O.sortIndex=X,e(u,O),t(l)===null&&O===t(u)&&(S?(g(N),N=-1):S=!0,Q(E,X-se))):(O.sortIndex=me,e(l,O),y||m||(y=!0,ee(A))),O},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(O){var Y=p;return function(){var X=p;p=Y;try{return O.apply(this,arguments)}finally{p=X}}}}(k_)),k_}var lP;function Eq(){return lP||(lP=1,U_.exports=Mq()),U_.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bq=function(e){var t={},i=j,r=Eq(),s=Object.assign;function o(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,v=1;v<arguments.length;v++)d+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),A=Symbol.iterator;function P(c){return c===null||typeof c!="object"?null:(c=A&&c[A]||c["@@iterator"],typeof c=="function"?c:null)}function L(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case h:return"Fragment";case u:return"Portal";case p:return"Profiler";case f:return"StrictMode";case x:return"Suspense";case g:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case y:return(c.displayName||"Context")+".Consumer";case m:return(c._context.displayName||"Context")+".Provider";case S:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case _:return d=c.displayName||null,d!==null?d:L(c.type)||"Memo";case M:d=c._payload,c=c._init;try{return L(c(d))}catch{}}return null}function N(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L(d);case 8:return d===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function C(c){var d=c,v=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,d.flags&4098&&(v=d.return),c=d.return;while(c)}return d.tag===3?v:null}function R(c){if(C(c)!==c)throw Error(o(188))}function k(c){var d=c.alternate;if(!d){if(d=C(c),d===null)throw Error(o(188));return d!==c?null:c}for(var v=c,w=d;;){var b=v.return;if(b===null)break;var I=b.alternate;if(I===null){if(w=b.return,w!==null){v=w;continue}break}if(b.child===I.child){for(I=b.child;I;){if(I===v)return R(b),c;if(I===w)return R(b),d;I=I.sibling}throw Error(o(188))}if(v.return!==w.return)v=b,w=I;else{for(var W=!1,ae=b.child;ae;){if(ae===v){W=!0,v=b,w=I;break}if(ae===w){W=!0,w=b,v=I;break}ae=ae.sibling}if(!W){for(ae=I.child;ae;){if(ae===v){W=!0,v=I,w=b;break}if(ae===w){W=!0,w=I,v=b;break}ae=ae.sibling}if(!W)throw Error(o(189))}}if(v.alternate!==w)throw Error(o(190))}if(v.tag!==3)throw Error(o(188));return v.stateNode.current===v?c:d}function H(c){return c=k(c),c!==null?$(c):null}function $(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=$(c);if(d!==null)return d;c=c.sibling}return null}function ne(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var d=ne(c);if(d!==null)return d}c=c.sibling}return null}var le=Array.isArray,ee=e.getPublicInstance,Q=e.getRootHostContext,O=e.getChildHostContext,Y=e.prepareForCommit,X=e.resetAfterCommit,se=e.createInstance,me=e.appendInitialChild,Re=e.finalizeInitialChildren,at=e.prepareUpdate,Ct=e.shouldSetTextContent,ue=e.createTextInstance,Se=e.scheduleTimeout,et=e.cancelTimeout,wt=e.noTimeout,st=e.isPrimaryRenderer,Ft=e.supportsMutation,Qt=e.supportsPersistence,_t=e.supportsHydration,Te=e.getInstanceFromNode,Ue=e.preparePortalMount,Pe=e.getCurrentEventPriority,Je=e.detachDeletedInstance,G=e.supportsMicrotasks,St=e.scheduleMicrotask,tt=e.supportsTestSelectors,Pt=e.findFiberRoot,je=e.getBoundingRect,z=e.getTextContent,D=e.isHiddenSubtree,ie=e.matchAccessibilityRole,ge=e.setFocusIfFocusable,Ae=e.setupIntersectionObserver,ve=e.appendChild,dt=e.appendChildToContainer,qe=e.commitTextUpdate,ht=e.commitMount,It=e.commitUpdate,Ne=e.insertBefore,Be=e.insertInContainerBefore,ut=e.removeChild,Z=e.removeChildFromContainer,de=e.resetTextContent,Le=e.hideInstance,K=e.hideTextInstance,he=e.unhideInstance,De=e.unhideTextInstance,Qe=e.clearContainer,Oe=e.cloneInstance,be=e.createContainerChildSet,ze=e.appendChildToContainerChildSet,Et=e.finalizeContainerChildren,tn=e.replaceContainerChildren,Zt=e.cloneHiddenInstance,jn=e.cloneHiddenTextInstance,hi=e.canHydrateInstance,td=e.canHydrateTextInstance,oc=e.canHydrateSuspenseInstance,as=e.isSuspenseInstancePending,Ha=e.isSuspenseInstanceFallback,Rs=e.registerSuspenseInstanceRetry,cr=e.getNextHydratableSibling,Ot=e.getFirstHydratableChild,Do=e.getFirstHydratableChildWithinContainer,ac=e.getFirstHydratableChildWithinSuspenseInstance,F=e.hydrateInstance,B=e.hydrateTextInstance,J=e.hydrateSuspenseInstance,fe=e.getNextHydratableInstanceAfterSuspenseInstance,xe=e.commitHydratedContainer,_e=e.commitHydratedSuspenseInstance,We=e.clearSuspenseBoundary,ke=e.clearSuspenseBoundaryFromContainer,$e=e.shouldDeleteUnhydratedTailInstances,Ze=e.didNotMatchHydratedContainerTextInstance,Ke=e.didNotMatchHydratedTextInstance,Xe;function U(c){if(Xe===void 0)try{throw Error()}catch(v){var d=v.stack.trim().match(/\n( *(at )?)/);Xe=d&&d[1]||""}return`
`+Xe+c}var q=!1;function re(c,d){if(!c||q)return"";q=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Ye){var w=Ye}Reflect.construct(c,[],d)}else{try{d.call()}catch(Ye){w=Ye}c.call(d.prototype)}else{try{throw Error()}catch(Ye){w=Ye}c()}}catch(Ye){if(Ye&&w&&typeof Ye.stack=="string"){for(var b=Ye.stack.split(`
`),I=w.stack.split(`
`),W=b.length-1,ae=I.length-1;1<=W&&0<=ae&&b[W]!==I[ae];)ae--;for(;1<=W&&0<=ae;W--,ae--)if(b[W]!==I[ae]){if(W!==1||ae!==1)do if(W--,ae--,0>ae||b[W]!==I[ae]){var we=`
`+b[W].replace(" at new "," at ");return c.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",c.displayName)),we}while(1<=W&&0<=ae);break}}}finally{q=!1,Error.prepareStackTrace=v}return(c=c?c.displayName||c.name:"")?U(c):""}var oe=Object.prototype.hasOwnProperty,te=[],Ce=-1;function Fe(c){return{current:c}}function Me(c){0>Ce||(c.current=te[Ce],te[Ce]=null,Ce--)}function Ie(c,d){Ce++,te[Ce]=c.current,c.current=d}var Ve={},it=Fe(Ve),He=Fe(!1),vt=Ve;function Bt(c,d){var v=c.type.contextTypes;if(!v)return Ve;var w=c.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===d)return w.__reactInternalMemoizedMaskedChildContext;var b={},I;for(I in v)b[I]=d[I];return w&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=b),b}function Vt(c){return c=c.childContextTypes,c!=null}function $t(){Me(He),Me(it)}function bt(c,d,v){if(it.current!==Ve)throw Error(o(168));Ie(it,d),Ie(He,v)}function lt(c,d,v){var w=c.stateNode;if(d=d.childContextTypes,typeof w.getChildContext!="function")return v;w=w.getChildContext();for(var b in w)if(!(b in d))throw Error(o(108,N(c)||"Unknown",b));return s({},v,w)}function Mt(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Ve,vt=it.current,Ie(it,c),Ie(He,He.current),!0}function yt(c,d,v){var w=c.stateNode;if(!w)throw Error(o(169));v?(c=lt(c,d,vt),w.__reactInternalMemoizedMergedChildContext=c,Me(He),Me(it),Ie(it,c)):Me(He),Ie(He,v)}var en=Math.clz32?Math.clz32:Pi,Ci=Math.log,pn=Math.LN2;function Pi(c){return c>>>=0,c===0?32:31-(Ci(c)/pn|0)|0}var hn=64,si=4194304;function fi(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Jn(c,d){var v=c.pendingLanes;if(v===0)return 0;var w=0,b=c.suspendedLanes,I=c.pingedLanes,W=v&268435455;if(W!==0){var ae=W&~b;ae!==0?w=fi(ae):(I&=W,I!==0&&(w=fi(I)))}else W=v&~b,W!==0?w=fi(W):I!==0&&(w=fi(I));if(w===0)return 0;if(d!==0&&d!==w&&!(d&b)&&(b=w&-w,I=d&-d,b>=I||b===16&&(I&4194240)!==0))return d;if(w&4&&(w|=v&16),d=c.entangledLanes,d!==0)for(c=c.entanglements,d&=w;0<d;)v=31-en(d),b=1<<v,w|=c[v],d&=~b;return w}function Ri(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nd(c,d){for(var v=c.suspendedLanes,w=c.pingedLanes,b=c.expirationTimes,I=c.pendingLanes;0<I;){var W=31-en(I),ae=1<<W,we=b[W];we===-1?(!(ae&v)||ae&w)&&(b[W]=Ri(ae,d)):we<=d&&(c.expiredLanes|=ae),I&=~ae}}function ls(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function ey(c){for(var d=[],v=0;31>v;v++)d.push(c);return d}function id(c,d,v){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,d=31-en(d),c[d]=v}function vF(c,d){var v=c.pendingLanes&~d;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=d,c.mutableReadLanes&=d,c.entangledLanes&=d,d=c.entanglements;var w=c.eventTimes;for(c=c.expirationTimes;0<v;){var b=31-en(v),I=1<<b;d[b]=0,w[b]=-1,c[b]=-1,v&=~I}}function ty(c,d){var v=c.entangledLanes|=d;for(c=c.entanglements;v;){var w=31-en(v),b=1<<w;b&d|c[w]&d&&(c[w]|=d),v&=~b}}var cn=0;function mE(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var ny=r.unstable_scheduleCallback,gE=r.unstable_cancelCallback,yF=r.unstable_shouldYield,xF=r.unstable_requestPaint,pi=r.unstable_now,iy=r.unstable_ImmediatePriority,_F=r.unstable_UserBlockingPriority,ry=r.unstable_NormalPriority,SF=r.unstable_IdlePriority,Zf=null,Is=null;function wF(c){if(Is&&typeof Is.onCommitFiberRoot=="function")try{Is.onCommitFiberRoot(Zf,c,void 0,(c.current.flags&128)===128)}catch{}}function MF(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var Ns=typeof Object.is=="function"?Object.is:MF,io=null,$f=!1,sy=!1;function vE(c){io===null?io=[c]:io.push(c)}function EF(c){$f=!0,vE(c)}function Ls(){if(!sy&&io!==null){sy=!0;var c=0,d=cn;try{var v=io;for(cn=1;c<v.length;c++){var w=v[c];do w=w(!0);while(w!==null)}io=null,$f=!1}catch(b){throw io!==null&&(io=io.slice(c+1)),ny(iy,Ls),b}finally{cn=d,sy=!1}}return null}var bF=a.ReactCurrentBatchConfig;function Kf(c,d){if(Ns(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var v=Object.keys(c),w=Object.keys(d);if(v.length!==w.length)return!1;for(w=0;w<v.length;w++){var b=v[w];if(!oe.call(d,b)||!Ns(c[b],d[b]))return!1}return!0}function TF(c){switch(c.tag){case 5:return U(c.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return c=re(c.type,!1),c;case 11:return c=re(c.type.render,!1),c;case 1:return c=re(c.type,!0),c;default:return""}}function cs(c,d){if(c&&c.defaultProps){d=s({},d),c=c.defaultProps;for(var v in c)d[v]===void 0&&(d[v]=c[v]);return d}return d}var Jf=Fe(null),Qf=null,lc=null,oy=null;function ay(){oy=lc=Qf=null}function yE(c,d,v){st?(Ie(Jf,d._currentValue),d._currentValue=v):(Ie(Jf,d._currentValue2),d._currentValue2=v)}function ly(c){var d=Jf.current;Me(Jf),st?c._currentValue=d:c._currentValue2=d}function cy(c,d,v){for(;c!==null;){var w=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,w!==null&&(w.childLanes|=d)):w!==null&&(w.childLanes&d)!==d&&(w.childLanes|=d),c===v)break;c=c.return}}function cc(c,d){Qf=c,oy=lc=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&d&&(Er=!0),c.firstContext=null)}function Br(c){var d=st?c._currentValue:c._currentValue2;if(oy!==c)if(c={context:c,memoizedValue:d,next:null},lc===null){if(Qf===null)throw Error(o(308));lc=c,Qf.dependencies={lanes:0,firstContext:c}}else lc=lc.next=c;return d}var Ds=null,Fo=!1;function uy(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xE(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function ro(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function Uo(c,d){var v=c.updateQueue;v!==null&&(v=v.shared,Qn!==null&&c.mode&1&&!(Jt&2)?(c=v.interleaved,c===null?(d.next=d,Ds===null?Ds=[v]:Ds.push(v)):(d.next=c.next,c.next=d),v.interleaved=d):(c=v.pending,c===null?d.next=d:(d.next=c.next,c.next=d),v.pending=d))}function ep(c,d,v){if(d=d.updateQueue,d!==null&&(d=d.shared,(v&4194240)!==0)){var w=d.lanes;w&=c.pendingLanes,v|=w,d.lanes=v,ty(c,v)}}function _E(c,d){var v=c.updateQueue,w=c.alternate;if(w!==null&&(w=w.updateQueue,v===w)){var b=null,I=null;if(v=v.firstBaseUpdate,v!==null){do{var W={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};I===null?b=I=W:I=I.next=W,v=v.next}while(v!==null);I===null?b=I=d:I=I.next=d}else b=I=d;v={baseState:w.baseState,firstBaseUpdate:b,lastBaseUpdate:I,shared:w.shared,effects:w.effects},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=d:c.next=d,v.lastBaseUpdate=d}function tp(c,d,v,w){var b=c.updateQueue;Fo=!1;var I=b.firstBaseUpdate,W=b.lastBaseUpdate,ae=b.shared.pending;if(ae!==null){b.shared.pending=null;var we=ae,Ye=we.next;we.next=null,W===null?I=Ye:W.next=Ye,W=we;var xt=c.alternate;xt!==null&&(xt=xt.updateQueue,ae=xt.lastBaseUpdate,ae!==W&&(ae===null?xt.firstBaseUpdate=Ye:ae.next=Ye,xt.lastBaseUpdate=we))}if(I!==null){var Ht=b.baseState;W=0,xt=Ye=we=null,ae=I;do{var Nt=ae.lane,xn=ae.eventTime;if((w&Nt)===Nt){xt!==null&&(xt=xt.next={eventTime:xn,lane:0,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null});e:{var Rt=c,Di=ae;switch(Nt=d,xn=v,Di.tag){case 1:if(Rt=Di.payload,typeof Rt=="function"){Ht=Rt.call(xn,Ht,Nt);break e}Ht=Rt;break e;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=Di.payload,Nt=typeof Rt=="function"?Rt.call(xn,Ht,Nt):Rt,Nt==null)break e;Ht=s({},Ht,Nt);break e;case 2:Fo=!0}}ae.callback!==null&&ae.lane!==0&&(c.flags|=64,Nt=b.effects,Nt===null?b.effects=[ae]:Nt.push(ae))}else xn={eventTime:xn,lane:Nt,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},xt===null?(Ye=xt=xn,we=Ht):xt=xt.next=xn,W|=Nt;if(ae=ae.next,ae===null){if(ae=b.shared.pending,ae===null)break;Nt=ae,ae=Nt.next,Nt.next=null,b.lastBaseUpdate=Nt,b.shared.pending=null}}while(!0);if(xt===null&&(we=Ht),b.baseState=we,b.firstBaseUpdate=Ye,b.lastBaseUpdate=xt,d=b.shared.interleaved,d!==null){b=d;do W|=b.lane,b=b.next;while(b!==d)}else I===null&&(b.shared.lanes=0);yc|=W,c.lanes=W,c.memoizedState=Ht}}function SE(c,d,v){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var w=c[d],b=w.callback;if(b!==null){if(w.callback=null,w=v,typeof b!="function")throw Error(o(191,b));b.call(w)}}}var wE=new i.Component().refs;function dy(c,d,v,w){d=c.memoizedState,v=v(w,d),v=v==null?d:s({},d,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}var np={isMounted:function(c){return(c=c._reactInternals)?C(c)===c:!1},enqueueSetState:function(c,d,v){c=c._reactInternals;var w=qi(),b=Bo(c),I=ro(w,b);I.payload=d,v!=null&&(I.callback=v),Uo(c,I),d=Wr(c,b,w),d!==null&&ep(d,c,b)},enqueueReplaceState:function(c,d,v){c=c._reactInternals;var w=qi(),b=Bo(c),I=ro(w,b);I.tag=1,I.payload=d,v!=null&&(I.callback=v),Uo(c,I),d=Wr(c,b,w),d!==null&&ep(d,c,b)},enqueueForceUpdate:function(c,d){c=c._reactInternals;var v=qi(),w=Bo(c),b=ro(v,w);b.tag=2,d!=null&&(b.callback=d),Uo(c,b),d=Wr(c,w,v),d!==null&&ep(d,c,w)}};function ME(c,d,v,w,b,I,W){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(w,I,W):d.prototype&&d.prototype.isPureReactComponent?!Kf(v,w)||!Kf(b,I):!0}function EE(c,d,v){var w=!1,b=Ve,I=d.contextType;return typeof I=="object"&&I!==null?I=Br(I):(b=Vt(d)?vt:it.current,w=d.contextTypes,I=(w=w!=null)?Bt(c,b):Ve),d=new d(v,I),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=np,c.stateNode=d,d._reactInternals=c,w&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=b,c.__reactInternalMemoizedMaskedChildContext=I),d}function bE(c,d,v,w){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(v,w),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(v,w),d.state!==c&&np.enqueueReplaceState(d,d.state,null)}function hy(c,d,v,w){var b=c.stateNode;b.props=v,b.state=c.memoizedState,b.refs=wE,uy(c);var I=d.contextType;typeof I=="object"&&I!==null?b.context=Br(I):(I=Vt(d)?vt:it.current,b.context=Bt(c,I)),b.state=c.memoizedState,I=d.getDerivedStateFromProps,typeof I=="function"&&(dy(c,d,I,v),b.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(d=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),d!==b.state&&np.enqueueReplaceState(b,b.state,null),tp(c,v,b,w),b.state=c.memoizedState),typeof b.componentDidMount=="function"&&(c.flags|=4194308)}var uc=[],dc=0,ip=null,rp=0,zr=[],Vr=0,Ga=null,so=1,oo="";function Wa(c,d){uc[dc++]=rp,uc[dc++]=ip,ip=c,rp=d}function TE(c,d,v){zr[Vr++]=so,zr[Vr++]=oo,zr[Vr++]=Ga,Ga=c;var w=so;c=oo;var b=32-en(w)-1;w&=~(1<<b),v+=1;var I=32-en(d)+b;if(30<I){var W=b-b%5;I=(w&(1<<W)-1).toString(32),w>>=W,b-=W,so=1<<32-en(d)+b|v<<b|w,oo=I+c}else so=1<<I|v<<b|w,oo=c}function fy(c){c.return!==null&&(Wa(c,1),TE(c,1,0))}function py(c){for(;c===ip;)ip=uc[--dc],uc[dc]=null,rp=uc[--dc],uc[dc]=null;for(;c===Ga;)Ga=zr[--Vr],zr[Vr]=null,oo=zr[--Vr],zr[Vr]=null,so=zr[--Vr],zr[Vr]=null}var wr=null,Mr=null,Pn=!1,rd=!1,us=null;function AE(c,d){var v=jr(5,null,null,0);v.elementType="DELETED",v.stateNode=d,v.return=c,d=c.deletions,d===null?(c.deletions=[v],c.flags|=16):d.push(v)}function CE(c,d){switch(c.tag){case 5:return d=hi(d,c.type,c.pendingProps),d!==null?(c.stateNode=d,wr=c,Mr=Ot(d),!0):!1;case 6:return d=td(d,c.pendingProps),d!==null?(c.stateNode=d,wr=c,Mr=null,!0):!1;case 13:if(d=oc(d),d!==null){var v=Ga!==null?{id:so,overflow:oo}:null;return c.memoizedState={dehydrated:d,treeContext:v,retryLane:1073741824},v=jr(18,null,null,0),v.stateNode=d,v.return=c,c.child=v,wr=c,Mr=null,!0}return!1;default:return!1}}function my(c){return(c.mode&1)!==0&&(c.flags&128)===0}function gy(c){if(Pn){var d=Mr;if(d){var v=d;if(!CE(c,d)){if(my(c))throw Error(o(418));d=cr(v);var w=wr;d&&CE(c,d)?AE(w,v):(c.flags=c.flags&-4097|2,Pn=!1,wr=c)}}else{if(my(c))throw Error(o(418));c.flags=c.flags&-4097|2,Pn=!1,wr=c}}}function PE(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;wr=c}function sd(c){if(!_t||c!==wr)return!1;if(!Pn)return PE(c),Pn=!0,!1;if(c.tag!==3&&(c.tag!==5||$e(c.type)&&!Ct(c.type,c.memoizedProps))){var d=Mr;if(d){if(my(c)){for(c=Mr;c;)c=cr(c);throw Error(o(418))}for(;d;)AE(c,d),d=cr(d)}}if(PE(c),c.tag===13){if(!_t)throw Error(o(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));Mr=fe(c)}else Mr=wr?cr(c.stateNode):null;return!0}function hc(){_t&&(Mr=wr=null,rd=Pn=!1)}function vy(c){us===null?us=[c]:us.push(c)}function od(c,d,v){if(c=v.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(o(309));var w=v.stateNode}if(!w)throw Error(o(147,c));var b=w,I=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===I?d.ref:(d=function(W){var ae=b.refs;ae===wE&&(ae=b.refs={}),W===null?delete ae[I]:ae[I]=W},d._stringRef=I,d)}if(typeof c!="string")throw Error(o(284));if(!v._owner)throw Error(o(290,c))}return c}function sp(c,d){throw c=Object.prototype.toString.call(d),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function RE(c){var d=c._init;return d(c._payload)}function IE(c){function d(pe,ce){if(c){var ye=pe.deletions;ye===null?(pe.deletions=[ce],pe.flags|=16):ye.push(ce)}}function v(pe,ce){if(!c)return null;for(;ce!==null;)d(pe,ce),ce=ce.sibling;return null}function w(pe,ce){for(pe=new Map;ce!==null;)ce.key!==null?pe.set(ce.key,ce):pe.set(ce.index,ce),ce=ce.sibling;return pe}function b(pe,ce){return pe=Vo(pe,ce),pe.index=0,pe.sibling=null,pe}function I(pe,ce,ye){return pe.index=ye,c?(ye=pe.alternate,ye!==null?(ye=ye.index,ye<ce?(pe.flags|=2,ce):ye):(pe.flags|=2,ce)):(pe.flags|=1048576,ce)}function W(pe){return c&&pe.alternate===null&&(pe.flags|=2),pe}function ae(pe,ce,ye,ct){return ce===null||ce.tag!==6?(ce=ex(ye,pe.mode,ct),ce.return=pe,ce):(ce=b(ce,ye),ce.return=pe,ce)}function we(pe,ce,ye,ct){var Tt=ye.type;return Tt===h?xt(pe,ce,ye.props.children,ct,ye.key):ce!==null&&(ce.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===M&&RE(Tt)===ce.type)?(ct=b(ce,ye.props),ct.ref=od(pe,ce,ye),ct.return=pe,ct):(ct=Up(ye.type,ye.key,ye.props,null,pe.mode,ct),ct.ref=od(pe,ce,ye),ct.return=pe,ct)}function Ye(pe,ce,ye,ct){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==ye.containerInfo||ce.stateNode.implementation!==ye.implementation?(ce=tx(ye,pe.mode,ct),ce.return=pe,ce):(ce=b(ce,ye.children||[]),ce.return=pe,ce)}function xt(pe,ce,ye,ct,Tt){return ce===null||ce.tag!==7?(ce=Ka(ye,pe.mode,ct,Tt),ce.return=pe,ce):(ce=b(ce,ye),ce.return=pe,ce)}function Ht(pe,ce,ye){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=ex(""+ce,pe.mode,ye),ce.return=pe,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:return ye=Up(ce.type,ce.key,ce.props,null,pe.mode,ye),ye.ref=od(pe,null,ce),ye.return=pe,ye;case u:return ce=tx(ce,pe.mode,ye),ce.return=pe,ce;case M:var ct=ce._init;return Ht(pe,ct(ce._payload),ye)}if(le(ce)||P(ce))return ce=Ka(ce,pe.mode,ye,null),ce.return=pe,ce;sp(pe,ce)}return null}function Nt(pe,ce,ye,ct){var Tt=ce!==null?ce.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return Tt!==null?null:ae(pe,ce,""+ye,ct);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case l:return ye.key===Tt?we(pe,ce,ye,ct):null;case u:return ye.key===Tt?Ye(pe,ce,ye,ct):null;case M:return Tt=ye._init,Nt(pe,ce,Tt(ye._payload),ct)}if(le(ye)||P(ye))return Tt!==null?null:xt(pe,ce,ye,ct,null);sp(pe,ye)}return null}function xn(pe,ce,ye,ct,Tt){if(typeof ct=="string"&&ct!==""||typeof ct=="number")return pe=pe.get(ye)||null,ae(ce,pe,""+ct,Tt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case l:return pe=pe.get(ct.key===null?ye:ct.key)||null,we(ce,pe,ct,Tt);case u:return pe=pe.get(ct.key===null?ye:ct.key)||null,Ye(ce,pe,ct,Tt);case M:var Kt=ct._init;return xn(pe,ce,ye,Kt(ct._payload),Tt)}if(le(ct)||P(ct))return pe=pe.get(ye)||null,xt(ce,pe,ct,Tt,null);sp(ce,ct)}return null}function Rt(pe,ce,ye,ct){for(var Tt=null,Kt=null,Gt=ce,un=ce=0,gi=null;Gt!==null&&un<ye.length;un++){Gt.index>un?(gi=Gt,Gt=null):gi=Gt.sibling;var dn=Nt(pe,Gt,ye[un],ct);if(dn===null){Gt===null&&(Gt=gi);break}c&&Gt&&dn.alternate===null&&d(pe,Gt),ce=I(dn,ce,un),Kt===null?Tt=dn:Kt.sibling=dn,Kt=dn,Gt=gi}if(un===ye.length)return v(pe,Gt),Pn&&Wa(pe,un),Tt;if(Gt===null){for(;un<ye.length;un++)Gt=Ht(pe,ye[un],ct),Gt!==null&&(ce=I(Gt,ce,un),Kt===null?Tt=Gt:Kt.sibling=Gt,Kt=Gt);return Pn&&Wa(pe,un),Tt}for(Gt=w(pe,Gt);un<ye.length;un++)gi=xn(Gt,pe,un,ye[un],ct),gi!==null&&(c&&gi.alternate!==null&&Gt.delete(gi.key===null?un:gi.key),ce=I(gi,ce,un),Kt===null?Tt=gi:Kt.sibling=gi,Kt=gi);return c&&Gt.forEach(function(Ho){return d(pe,Ho)}),Pn&&Wa(pe,un),Tt}function Di(pe,ce,ye,ct){var Tt=P(ye);if(typeof Tt!="function")throw Error(o(150));if(ye=Tt.call(ye),ye==null)throw Error(o(151));for(var Kt=Tt=null,Gt=ce,un=ce=0,gi=null,dn=ye.next();Gt!==null&&!dn.done;un++,dn=ye.next()){Gt.index>un?(gi=Gt,Gt=null):gi=Gt.sibling;var Ho=Nt(pe,Gt,dn.value,ct);if(Ho===null){Gt===null&&(Gt=gi);break}c&&Gt&&Ho.alternate===null&&d(pe,Gt),ce=I(Ho,ce,un),Kt===null?Tt=Ho:Kt.sibling=Ho,Kt=Ho,Gt=gi}if(dn.done)return v(pe,Gt),Pn&&Wa(pe,un),Tt;if(Gt===null){for(;!dn.done;un++,dn=ye.next())dn=Ht(pe,dn.value,ct),dn!==null&&(ce=I(dn,ce,un),Kt===null?Tt=dn:Kt.sibling=dn,Kt=dn);return Pn&&Wa(pe,un),Tt}for(Gt=w(pe,Gt);!dn.done;un++,dn=ye.next())dn=xn(Gt,pe,un,dn.value,ct),dn!==null&&(c&&dn.alternate!==null&&Gt.delete(dn.key===null?un:dn.key),ce=I(dn,ce,un),Kt===null?Tt=dn:Kt.sibling=dn,Kt=dn);return c&&Gt.forEach(function(nU){return d(pe,nU)}),Pn&&Wa(pe,un),Tt}function Xr(pe,ce,ye,ct){if(typeof ye=="object"&&ye!==null&&ye.type===h&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case l:e:{for(var Tt=ye.key,Kt=ce;Kt!==null;){if(Kt.key===Tt){if(Tt=ye.type,Tt===h){if(Kt.tag===7){v(pe,Kt.sibling),ce=b(Kt,ye.props.children),ce.return=pe,pe=ce;break e}}else if(Kt.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===M&&RE(Tt)===Kt.type){v(pe,Kt.sibling),ce=b(Kt,ye.props),ce.ref=od(pe,Kt,ye),ce.return=pe,pe=ce;break e}v(pe,Kt);break}else d(pe,Kt);Kt=Kt.sibling}ye.type===h?(ce=Ka(ye.props.children,pe.mode,ct,ye.key),ce.return=pe,pe=ce):(ct=Up(ye.type,ye.key,ye.props,null,pe.mode,ct),ct.ref=od(pe,ce,ye),ct.return=pe,pe=ct)}return W(pe);case u:e:{for(Kt=ye.key;ce!==null;){if(ce.key===Kt)if(ce.tag===4&&ce.stateNode.containerInfo===ye.containerInfo&&ce.stateNode.implementation===ye.implementation){v(pe,ce.sibling),ce=b(ce,ye.children||[]),ce.return=pe,pe=ce;break e}else{v(pe,ce);break}else d(pe,ce);ce=ce.sibling}ce=tx(ye,pe.mode,ct),ce.return=pe,pe=ce}return W(pe);case M:return Kt=ye._init,Xr(pe,ce,Kt(ye._payload),ct)}if(le(ye))return Rt(pe,ce,ye,ct);if(P(ye))return Di(pe,ce,ye,ct);sp(pe,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,ce!==null&&ce.tag===6?(v(pe,ce.sibling),ce=b(ce,ye),ce.return=pe,pe=ce):(v(pe,ce),ce=ex(ye,pe.mode,ct),ce.return=pe,pe=ce),W(pe)):v(pe,ce)}return Xr}var fc=IE(!0),NE=IE(!1),ad={},Hr=Fe(ad),ld=Fe(ad),pc=Fe(ad);function Fs(c){if(c===ad)throw Error(o(174));return c}function yy(c,d){Ie(pc,d),Ie(ld,c),Ie(Hr,ad),c=Q(d),Me(Hr),Ie(Hr,c)}function mc(){Me(Hr),Me(ld),Me(pc)}function LE(c){var d=Fs(pc.current),v=Fs(Hr.current);d=O(v,c.type,d),v!==d&&(Ie(ld,c),Ie(Hr,d))}function xy(c){ld.current===c&&(Me(Hr),Me(ld))}var In=Fe(0);function op(c){for(var d=c;d!==null;){if(d.tag===13){var v=d.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||as(v)||Ha(v)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var _y=[];function Sy(){for(var c=0;c<_y.length;c++){var d=_y[c];st?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}_y.length=0}var ap=a.ReactCurrentDispatcher,Gr=a.ReactCurrentBatchConfig,gc=0,zn=null,Ii=null,mi=null,lp=!1,cd=!1,ud=0,AF=0;function Ni(){throw Error(o(321))}function wy(c,d){if(d===null)return!1;for(var v=0;v<d.length&&v<c.length;v++)if(!Ns(c[v],d[v]))return!1;return!0}function My(c,d,v,w,b,I){if(gc=I,zn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,ap.current=c===null||c.memoizedState===null?IF:NF,c=v(w,b),cd){I=0;do{if(cd=!1,ud=0,25<=I)throw Error(o(301));I+=1,mi=Ii=null,d.updateQueue=null,ap.current=LF,c=v(w,b)}while(cd)}if(ap.current=fp,d=Ii!==null&&Ii.next!==null,gc=0,mi=Ii=zn=null,lp=!1,d)throw Error(o(300));return c}function Ey(){var c=ud!==0;return ud=0,c}function ao(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?zn.memoizedState=mi=c:mi=mi.next=c,mi}function Us(){if(Ii===null){var c=zn.alternate;c=c!==null?c.memoizedState:null}else c=Ii.next;var d=mi===null?zn.memoizedState:mi.next;if(d!==null)mi=d,Ii=c;else{if(c===null)throw Error(o(310));Ii=c,c={memoizedState:Ii.memoizedState,baseState:Ii.baseState,baseQueue:Ii.baseQueue,queue:Ii.queue,next:null},mi===null?zn.memoizedState=mi=c:mi=mi.next=c}return mi}function ja(c,d){return typeof d=="function"?d(c):d}function cp(c){var d=Us(),v=d.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=c;var w=Ii,b=w.baseQueue,I=v.pending;if(I!==null){if(b!==null){var W=b.next;b.next=I.next,I.next=W}w.baseQueue=b=I,v.pending=null}if(b!==null){I=b.next,w=w.baseState;var ae=W=null,we=null,Ye=I;do{var xt=Ye.lane;if((gc&xt)===xt)we!==null&&(we=we.next={lane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),w=Ye.hasEagerState?Ye.eagerState:c(w,Ye.action);else{var Ht={lane:xt,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null};we===null?(ae=we=Ht,W=w):we=we.next=Ht,zn.lanes|=xt,yc|=xt}Ye=Ye.next}while(Ye!==null&&Ye!==I);we===null?W=w:we.next=ae,Ns(w,d.memoizedState)||(Er=!0),d.memoizedState=w,d.baseState=W,d.baseQueue=we,v.lastRenderedState=w}if(c=v.interleaved,c!==null){b=c;do I=b.lane,zn.lanes|=I,yc|=I,b=b.next;while(b!==c)}else b===null&&(v.lanes=0);return[d.memoizedState,v.dispatch]}function up(c){var d=Us(),v=d.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=c;var w=v.dispatch,b=v.pending,I=d.memoizedState;if(b!==null){v.pending=null;var W=b=b.next;do I=c(I,W.action),W=W.next;while(W!==b);Ns(I,d.memoizedState)||(Er=!0),d.memoizedState=I,d.baseQueue===null&&(d.baseState=I),v.lastRenderedState=I}return[I,w]}function DE(){}function FE(c,d){var v=zn,w=Us(),b=d(),I=!Ns(w.memoizedState,b);if(I&&(w.memoizedState=b,Er=!0),w=w.queue,hd(OE.bind(null,v,w,c),[c]),w.getSnapshot!==d||I||mi!==null&&mi.memoizedState.tag&1){if(v.flags|=2048,dd(9,kE.bind(null,v,w,b,d),void 0,null),Qn===null)throw Error(o(349));gc&30||UE(v,d,b)}return b}function UE(c,d,v){c.flags|=16384,c={getSnapshot:d,value:v},d=zn.updateQueue,d===null?(d={lastEffect:null,stores:null},zn.updateQueue=d,d.stores=[c]):(v=d.stores,v===null?d.stores=[c]:v.push(c))}function kE(c,d,v,w){d.value=v,d.getSnapshot=w,BE(d)&&Wr(c,1,-1)}function OE(c,d,v){return v(function(){BE(d)&&Wr(c,1,-1)})}function BE(c){var d=c.getSnapshot;c=c.value;try{var v=d();return!Ns(c,v)}catch{return!0}}function by(c){var d=ao();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:c},d.queue=c,c=c.dispatch=RF.bind(null,zn,c),[d.memoizedState,c]}function dd(c,d,v,w){return c={tag:c,create:d,destroy:v,deps:w,next:null},d=zn.updateQueue,d===null?(d={lastEffect:null,stores:null},zn.updateQueue=d,d.lastEffect=c.next=c):(v=d.lastEffect,v===null?d.lastEffect=c.next=c:(w=v.next,v.next=c,c.next=w,d.lastEffect=c)),c}function zE(){return Us().memoizedState}function dp(c,d,v,w){var b=ao();zn.flags|=c,b.memoizedState=dd(1|d,v,void 0,w===void 0?null:w)}function hp(c,d,v,w){var b=Us();w=w===void 0?null:w;var I=void 0;if(Ii!==null){var W=Ii.memoizedState;if(I=W.destroy,w!==null&&wy(w,W.deps)){b.memoizedState=dd(d,v,I,w);return}}zn.flags|=c,b.memoizedState=dd(1|d,v,I,w)}function Ty(c,d){return dp(8390656,8,c,d)}function hd(c,d){return hp(2048,8,c,d)}function VE(c,d){return hp(4,2,c,d)}function HE(c,d){return hp(4,4,c,d)}function GE(c,d){if(typeof d=="function")return c=c(),d(c),function(){d(null)};if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function WE(c,d,v){return v=v!=null?v.concat([c]):null,hp(4,4,GE.bind(null,d,c),v)}function Ay(){}function jE(c,d){var v=Us();d=d===void 0?null:d;var w=v.memoizedState;return w!==null&&d!==null&&wy(d,w[1])?w[0]:(v.memoizedState=[c,d],c)}function XE(c,d){var v=Us();d=d===void 0?null:d;var w=v.memoizedState;return w!==null&&d!==null&&wy(d,w[1])?w[0]:(c=c(),v.memoizedState=[c,d],c)}function CF(c,d){var v=cn;cn=v!==0&&4>v?v:4,c(!0);var w=Gr.transition;Gr.transition={};try{c(!1),d()}finally{cn=v,Gr.transition=w}}function YE(){return Us().memoizedState}function PF(c,d,v){var w=Bo(c);v={lane:w,action:v,hasEagerState:!1,eagerState:null,next:null},qE(c)?ZE(d,v):($E(c,d,v),v=qi(),c=Wr(c,w,v),c!==null&&KE(c,d,w))}function RF(c,d,v){var w=Bo(c),b={lane:w,action:v,hasEagerState:!1,eagerState:null,next:null};if(qE(c))ZE(d,b);else{$E(c,d,b);var I=c.alternate;if(c.lanes===0&&(I===null||I.lanes===0)&&(I=d.lastRenderedReducer,I!==null))try{var W=d.lastRenderedState,ae=I(W,v);if(b.hasEagerState=!0,b.eagerState=ae,Ns(ae,W))return}catch{}finally{}v=qi(),c=Wr(c,w,v),c!==null&&KE(c,d,w)}}function qE(c){var d=c.alternate;return c===zn||d!==null&&d===zn}function ZE(c,d){cd=lp=!0;var v=c.pending;v===null?d.next=d:(d.next=v.next,v.next=d),c.pending=d}function $E(c,d,v){Qn!==null&&c.mode&1&&!(Jt&2)?(c=d.interleaved,c===null?(v.next=v,Ds===null?Ds=[d]:Ds.push(d)):(v.next=c.next,c.next=v),d.interleaved=v):(c=d.pending,c===null?v.next=v:(v.next=c.next,c.next=v),d.pending=v)}function KE(c,d,v){if(v&4194240){var w=d.lanes;w&=c.pendingLanes,v|=w,d.lanes=v,ty(c,v)}}var fp={readContext:Br,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useInsertionEffect:Ni,useLayoutEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useMutableSource:Ni,useSyncExternalStore:Ni,useId:Ni,unstable_isNewReconciler:!1},IF={readContext:Br,useCallback:function(c,d){return ao().memoizedState=[c,d===void 0?null:d],c},useContext:Br,useEffect:Ty,useImperativeHandle:function(c,d,v){return v=v!=null?v.concat([c]):null,dp(4194308,4,GE.bind(null,d,c),v)},useLayoutEffect:function(c,d){return dp(4194308,4,c,d)},useInsertionEffect:function(c,d){return dp(4,2,c,d)},useMemo:function(c,d){var v=ao();return d=d===void 0?null:d,c=c(),v.memoizedState=[c,d],c},useReducer:function(c,d,v){var w=ao();return d=v!==void 0?v(d):d,w.memoizedState=w.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},w.queue=c,c=c.dispatch=PF.bind(null,zn,c),[w.memoizedState,c]},useRef:function(c){var d=ao();return c={current:c},d.memoizedState=c},useState:by,useDebugValue:Ay,useDeferredValue:function(c){var d=by(c),v=d[0],w=d[1];return Ty(function(){var b=Gr.transition;Gr.transition={};try{w(c)}finally{Gr.transition=b}},[c]),v},useTransition:function(){var c=by(!1),d=c[0];return c=CF.bind(null,c[1]),ao().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,v){var w=zn,b=ao();if(Pn){if(v===void 0)throw Error(o(407));v=v()}else{if(v=d(),Qn===null)throw Error(o(349));gc&30||UE(w,d,v)}b.memoizedState=v;var I={value:v,getSnapshot:d};return b.queue=I,Ty(OE.bind(null,w,I,c),[c]),w.flags|=2048,dd(9,kE.bind(null,w,I,v,d),void 0,null),v},useId:function(){var c=ao(),d=Qn.identifierPrefix;if(Pn){var v=oo,w=so;v=(w&~(1<<32-en(w)-1)).toString(32)+v,d=":"+d+"R"+v,v=ud++,0<v&&(d+="H"+v.toString(32)),d+=":"}else v=AF++,d=":"+d+"r"+v.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},NF={readContext:Br,useCallback:jE,useContext:Br,useEffect:hd,useImperativeHandle:WE,useInsertionEffect:VE,useLayoutEffect:HE,useMemo:XE,useReducer:cp,useRef:zE,useState:function(){return cp(ja)},useDebugValue:Ay,useDeferredValue:function(c){var d=cp(ja),v=d[0],w=d[1];return hd(function(){var b=Gr.transition;Gr.transition={};try{w(c)}finally{Gr.transition=b}},[c]),v},useTransition:function(){var c=cp(ja)[0],d=Us().memoizedState;return[c,d]},useMutableSource:DE,useSyncExternalStore:FE,useId:YE,unstable_isNewReconciler:!1},LF={readContext:Br,useCallback:jE,useContext:Br,useEffect:hd,useImperativeHandle:WE,useInsertionEffect:VE,useLayoutEffect:HE,useMemo:XE,useReducer:up,useRef:zE,useState:function(){return up(ja)},useDebugValue:Ay,useDeferredValue:function(c){var d=up(ja),v=d[0],w=d[1];return hd(function(){var b=Gr.transition;Gr.transition={};try{w(c)}finally{Gr.transition=b}},[c]),v},useTransition:function(){var c=up(ja)[0],d=Us().memoizedState;return[c,d]},useMutableSource:DE,useSyncExternalStore:FE,useId:YE,unstable_isNewReconciler:!1};function Cy(c,d){try{var v="",w=d;do v+=TF(w),w=w.return;while(w);var b=v}catch(I){b=`
Error generating stack: `+I.message+`
`+I.stack}return{value:c,source:d,stack:b}}function Py(c,d){try{console.error(d.value)}catch(v){setTimeout(function(){throw v})}}var DF=typeof WeakMap=="function"?WeakMap:Map;function JE(c,d,v){v=ro(-1,v),v.tag=3,v.payload={element:null};var w=d.value;return v.callback=function(){Pp||(Pp=!0,Yy=w),Py(c,d)},v}function QE(c,d,v){v=ro(-1,v),v.tag=3;var w=c.type.getDerivedStateFromError;if(typeof w=="function"){var b=d.value;v.payload=function(){return w(b)},v.callback=function(){Py(c,d)}}var I=c.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(v.callback=function(){Py(c,d),typeof w!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var W=d.stack;this.componentDidCatch(d.value,{componentStack:W!==null?W:""})}),v}function eb(c,d,v){var w=c.pingCache;if(w===null){w=c.pingCache=new DF;var b=new Set;w.set(d,b)}else b=w.get(d),b===void 0&&(b=new Set,w.set(d,b));b.has(v)||(b.add(v),c=qF.bind(null,c,d,v),d.then(c,c))}function tb(c){do{var d;if((d=c.tag===13)&&(d=c.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return c;c=c.return}while(c!==null);return null}function nb(c,d,v,w,b){return c.mode&1?(c.flags|=65536,c.lanes=b,c):(c===d?c.flags|=65536:(c.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(d=ro(-1,1),d.tag=2,Uo(v,d))),v.lanes|=1),c)}function ks(c){c.flags|=4}function ib(c,d){if(c!==null&&c.child===d.child)return!0;if(d.flags&16)return!1;for(c=d.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var fd,pd,pp,mp;if(Ft)fd=function(c,d){for(var v=d.child;v!==null;){if(v.tag===5||v.tag===6)me(c,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===d)break;for(;v.sibling===null;){if(v.return===null||v.return===d)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},pd=function(){},pp=function(c,d,v,w,b){if(c=c.memoizedProps,c!==w){var I=d.stateNode,W=Fs(Hr.current);v=at(I,v,c,w,b,W),(d.updateQueue=v)&&ks(d)}},mp=function(c,d,v,w){v!==w&&ks(d)};else if(Qt){fd=function(c,d,v,w){for(var b=d.child;b!==null;){if(b.tag===5){var I=b.stateNode;v&&w&&(I=Zt(I,b.type,b.memoizedProps,b)),me(c,I)}else if(b.tag===6)I=b.stateNode,v&&w&&(I=jn(I,b.memoizedProps,b)),me(c,I);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)I=b.child,I!==null&&(I.return=b),fd(c,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===d)break;for(;b.sibling===null;){if(b.return===null||b.return===d)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};var rb=function(c,d,v,w){for(var b=d.child;b!==null;){if(b.tag===5){var I=b.stateNode;v&&w&&(I=Zt(I,b.type,b.memoizedProps,b)),ze(c,I)}else if(b.tag===6)I=b.stateNode,v&&w&&(I=jn(I,b.memoizedProps,b)),ze(c,I);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)I=b.child,I!==null&&(I.return=b),rb(c,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===d)break;for(;b.sibling===null;){if(b.return===null||b.return===d)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};pd=function(c,d){var v=d.stateNode;if(!ib(c,d)){c=v.containerInfo;var w=be(c);rb(w,d,!1,!1),v.pendingChildren=w,ks(d),Et(c,w)}},pp=function(c,d,v,w,b){var I=c.stateNode,W=c.memoizedProps;if((c=ib(c,d))&&W===w)d.stateNode=I;else{var ae=d.stateNode,we=Fs(Hr.current),Ye=null;W!==w&&(Ye=at(ae,v,W,w,b,we)),c&&Ye===null?d.stateNode=I:(I=Oe(I,Ye,v,W,w,d,c,ae),Re(I,v,w,b,we)&&ks(d),d.stateNode=I,c?ks(d):fd(I,d,!1,!1))}},mp=function(c,d,v,w){v!==w?(c=Fs(pc.current),v=Fs(Hr.current),d.stateNode=ue(w,c,v,d),ks(d)):d.stateNode=c.stateNode}}else pd=function(){},pp=function(){},mp=function(){};function md(c,d){if(!Pn)switch(c.tailMode){case"hidden":d=c.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var w=null;v!==null;)v.alternate!==null&&(w=v),v=v.sibling;w===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:w.sibling=null}}function Li(c){var d=c.alternate!==null&&c.alternate.child===c.child,v=0,w=0;if(d)for(var b=c.child;b!==null;)v|=b.lanes|b.childLanes,w|=b.subtreeFlags&14680064,w|=b.flags&14680064,b.return=c,b=b.sibling;else for(b=c.child;b!==null;)v|=b.lanes|b.childLanes,w|=b.subtreeFlags,w|=b.flags,b.return=c,b=b.sibling;return c.subtreeFlags|=w,c.childLanes=v,d}function FF(c,d,v){var w=d.pendingProps;switch(py(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Li(d),null;case 1:return Vt(d.type)&&$t(),Li(d),null;case 3:return w=d.stateNode,mc(),Me(He),Me(it),Sy(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(c===null||c.child===null)&&(sd(d)?ks(d):c===null||c.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,us!==null&&($y(us),us=null))),pd(c,d),Li(d),null;case 5:xy(d),v=Fs(pc.current);var b=d.type;if(c!==null&&d.stateNode!=null)pp(c,d,b,w,v),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!w){if(d.stateNode===null)throw Error(o(166));return Li(d),null}if(c=Fs(Hr.current),sd(d)){if(!_t)throw Error(o(175));c=F(d.stateNode,d.type,d.memoizedProps,v,c,d,!rd),d.updateQueue=c,c!==null&&ks(d)}else{var I=se(b,w,v,c,d);fd(I,d,!1,!1),d.stateNode=I,Re(I,b,w,v,c)&&ks(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Li(d),null;case 6:if(c&&d.stateNode!=null)mp(c,d,c.memoizedProps,w);else{if(typeof w!="string"&&d.stateNode===null)throw Error(o(166));if(c=Fs(pc.current),v=Fs(Hr.current),sd(d)){if(!_t)throw Error(o(176));if(c=d.stateNode,w=d.memoizedProps,(v=B(c,w,d,!rd))&&(b=wr,b!==null))switch(I=(b.mode&1)!==0,b.tag){case 3:Ze(b.stateNode.containerInfo,c,w,I);break;case 5:Ke(b.type,b.memoizedProps,b.stateNode,c,w,I)}v&&ks(d)}else d.stateNode=ue(w,c,v,d)}return Li(d),null;case 13:if(Me(In),w=d.memoizedState,Pn&&Mr!==null&&d.mode&1&&!(d.flags&128)){for(c=Mr;c;)c=cr(c);return hc(),d.flags|=98560,d}if(w!==null&&w.dehydrated!==null){if(w=sd(d),c===null){if(!w)throw Error(o(318));if(!_t)throw Error(o(344));if(c=d.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));J(c,d)}else hc(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return Li(d),null}return us!==null&&($y(us),us=null),d.flags&128?(d.lanes=v,d):(w=w!==null,v=!1,c===null?sd(d):v=c.memoizedState!==null,w&&!v&&(d.child.flags|=8192,d.mode&1&&(c===null||In.current&1?oi===0&&(oi=3):Jy())),d.updateQueue!==null&&(d.flags|=4),Li(d),null);case 4:return mc(),pd(c,d),c===null&&Ue(d.stateNode.containerInfo),Li(d),null;case 10:return ly(d.type._context),Li(d),null;case 17:return Vt(d.type)&&$t(),Li(d),null;case 19:if(Me(In),b=d.memoizedState,b===null)return Li(d),null;if(w=(d.flags&128)!==0,I=b.rendering,I===null)if(w)md(b,!1);else{if(oi!==0||c!==null&&c.flags&128)for(c=d.child;c!==null;){if(I=op(c),I!==null){for(d.flags|=128,md(b,!1),c=I.updateQueue,c!==null&&(d.updateQueue=c,d.flags|=4),d.subtreeFlags=0,c=v,w=d.child;w!==null;)v=w,b=c,v.flags&=14680066,I=v.alternate,I===null?(v.childLanes=0,v.lanes=b,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=I.childLanes,v.lanes=I.lanes,v.child=I.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=I.memoizedProps,v.memoizedState=I.memoizedState,v.updateQueue=I.updateQueue,v.type=I.type,b=I.dependencies,v.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext}),w=w.sibling;return Ie(In,In.current&1|2),d.child}c=c.sibling}b.tail!==null&&pi()>Xy&&(d.flags|=128,w=!0,md(b,!1),d.lanes=4194304)}else{if(!w)if(c=op(I),c!==null){if(d.flags|=128,w=!0,c=c.updateQueue,c!==null&&(d.updateQueue=c,d.flags|=4),md(b,!0),b.tail===null&&b.tailMode==="hidden"&&!I.alternate&&!Pn)return Li(d),null}else 2*pi()-b.renderingStartTime>Xy&&v!==1073741824&&(d.flags|=128,w=!0,md(b,!1),d.lanes=4194304);b.isBackwards?(I.sibling=d.child,d.child=I):(c=b.last,c!==null?c.sibling=I:d.child=I,b.last=I)}return b.tail!==null?(d=b.tail,b.rendering=d,b.tail=d.sibling,b.renderingStartTime=pi(),d.sibling=null,c=In.current,Ie(In,w?c&1|2:c&1),d):(Li(d),null);case 22:case 23:return Ky(),w=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==w&&(d.flags|=8192),w&&d.mode&1?br&1073741824&&(Li(d),Ft&&d.subtreeFlags&6&&(d.flags|=8192)):Li(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}var UF=a.ReactCurrentOwner,Er=!1;function Yi(c,d,v,w){d.child=c===null?NE(d,null,v,w):fc(d,c.child,v,w)}function sb(c,d,v,w,b){v=v.render;var I=d.ref;return cc(d,b),w=My(c,d,v,w,I,b),v=Ey(),c!==null&&!Er?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~b,lo(c,d,b)):(Pn&&v&&fy(d),d.flags|=1,Yi(c,d,w,b),d.child)}function ob(c,d,v,w,b){if(c===null){var I=v.type;return typeof I=="function"&&!Qy(I)&&I.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(d.tag=15,d.type=I,ab(c,d,I,w,b)):(c=Up(v.type,null,w,d,d.mode,b),c.ref=d.ref,c.return=d,d.child=c)}if(I=c.child,!(c.lanes&b)){var W=I.memoizedProps;if(v=v.compare,v=v!==null?v:Kf,v(W,w)&&c.ref===d.ref)return lo(c,d,b)}return d.flags|=1,c=Vo(I,w),c.ref=d.ref,c.return=d,d.child=c}function ab(c,d,v,w,b){if(c!==null&&Kf(c.memoizedProps,w)&&c.ref===d.ref)if(Er=!1,(c.lanes&b)!==0)c.flags&131072&&(Er=!0);else return d.lanes=c.lanes,lo(c,d,b);return Ry(c,d,v,w,b)}function lb(c,d,v){var w=d.pendingProps,b=w.children,I=c!==null?c.memoizedState:null;if(w.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},Ie(vc,br),br|=v;else if(v&1073741824)d.memoizedState={baseLanes:0,cachePool:null},w=I!==null?I.baseLanes:v,Ie(vc,br),br|=w;else return c=I!==null?I.baseLanes|v:v,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null},d.updateQueue=null,Ie(vc,br),br|=c,null;else I!==null?(w=I.baseLanes|v,d.memoizedState=null):w=v,Ie(vc,br),br|=w;return Yi(c,d,b,v),d.child}function cb(c,d){var v=d.ref;(c===null&&v!==null||c!==null&&c.ref!==v)&&(d.flags|=512,d.flags|=2097152)}function Ry(c,d,v,w,b){var I=Vt(v)?vt:it.current;return I=Bt(d,I),cc(d,b),v=My(c,d,v,w,I,b),w=Ey(),c!==null&&!Er?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~b,lo(c,d,b)):(Pn&&w&&fy(d),d.flags|=1,Yi(c,d,v,b),d.child)}function ub(c,d,v,w,b){if(Vt(v)){var I=!0;Mt(d)}else I=!1;if(cc(d,b),d.stateNode===null)c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2),EE(d,v,w),hy(d,v,w,b),w=!0;else if(c===null){var W=d.stateNode,ae=d.memoizedProps;W.props=ae;var we=W.context,Ye=v.contextType;typeof Ye=="object"&&Ye!==null?Ye=Br(Ye):(Ye=Vt(v)?vt:it.current,Ye=Bt(d,Ye));var xt=v.getDerivedStateFromProps,Ht=typeof xt=="function"||typeof W.getSnapshotBeforeUpdate=="function";Ht||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ae!==w||we!==Ye)&&bE(d,W,w,Ye),Fo=!1;var Nt=d.memoizedState;W.state=Nt,tp(d,w,W,b),we=d.memoizedState,ae!==w||Nt!==we||He.current||Fo?(typeof xt=="function"&&(dy(d,v,xt,w),we=d.memoizedState),(ae=Fo||ME(d,v,ae,w,Nt,we,Ye))?(Ht||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(d.flags|=4194308)):(typeof W.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=w,d.memoizedState=we),W.props=w,W.state=we,W.context=Ye,w=ae):(typeof W.componentDidMount=="function"&&(d.flags|=4194308),w=!1)}else{W=d.stateNode,xE(c,d),ae=d.memoizedProps,Ye=d.type===d.elementType?ae:cs(d.type,ae),W.props=Ye,Ht=d.pendingProps,Nt=W.context,we=v.contextType,typeof we=="object"&&we!==null?we=Br(we):(we=Vt(v)?vt:it.current,we=Bt(d,we));var xn=v.getDerivedStateFromProps;(xt=typeof xn=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ae!==Ht||Nt!==we)&&bE(d,W,w,we),Fo=!1,Nt=d.memoizedState,W.state=Nt,tp(d,w,W,b);var Rt=d.memoizedState;ae!==Ht||Nt!==Rt||He.current||Fo?(typeof xn=="function"&&(dy(d,v,xn,w),Rt=d.memoizedState),(Ye=Fo||ME(d,v,Ye,w,Nt,Rt,we)||!1)?(xt||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(w,Rt,we),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(w,Rt,we)),typeof W.componentDidUpdate=="function"&&(d.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof W.componentDidUpdate!="function"||ae===c.memoizedProps&&Nt===c.memoizedState||(d.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ae===c.memoizedProps&&Nt===c.memoizedState||(d.flags|=1024),d.memoizedProps=w,d.memoizedState=Rt),W.props=w,W.state=Rt,W.context=we,w=Ye):(typeof W.componentDidUpdate!="function"||ae===c.memoizedProps&&Nt===c.memoizedState||(d.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ae===c.memoizedProps&&Nt===c.memoizedState||(d.flags|=1024),w=!1)}return Iy(c,d,v,w,I,b)}function Iy(c,d,v,w,b,I){cb(c,d);var W=(d.flags&128)!==0;if(!w&&!W)return b&&yt(d,v,!1),lo(c,d,I);w=d.stateNode,UF.current=d;var ae=W&&typeof v.getDerivedStateFromError!="function"?null:w.render();return d.flags|=1,c!==null&&W?(d.child=fc(d,c.child,null,I),d.child=fc(d,null,ae,I)):Yi(c,d,ae,I),d.memoizedState=w.state,b&&yt(d,v,!0),d.child}function db(c){var d=c.stateNode;d.pendingContext?bt(c,d.pendingContext,d.pendingContext!==d.context):d.context&&bt(c,d.context,!1),yy(c,d.containerInfo)}function hb(c,d,v,w,b){return hc(),vy(b),d.flags|=256,Yi(c,d,v,w),d.child}var gp={dehydrated:null,treeContext:null,retryLane:0};function vp(c){return{baseLanes:c,cachePool:null}}function fb(c,d,v){var w=d.pendingProps,b=In.current,I=!1,W=(d.flags&128)!==0,ae;if((ae=W)||(ae=c!==null&&c.memoizedState===null?!1:(b&2)!==0),ae?(I=!0,d.flags&=-129):(c===null||c.memoizedState!==null)&&(b|=1),Ie(In,b&1),c===null)return gy(d),c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(d.mode&1?Ha(c)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(b=w.children,c=w.fallback,I?(w=d.mode,I=d.child,b={mode:"hidden",children:b},!(w&1)&&I!==null?(I.childLanes=0,I.pendingProps=b):I=kp(b,w,0,null),c=Ka(c,w,v,null),I.return=d,c.return=d,I.sibling=c,d.child=I,d.child.memoizedState=vp(v),d.memoizedState=gp,c):Ny(d,b));if(b=c.memoizedState,b!==null){if(ae=b.dehydrated,ae!==null){if(W)return d.flags&256?(d.flags&=-257,yp(c,d,v,Error(o(422)))):d.memoizedState!==null?(d.child=c.child,d.flags|=128,null):(I=w.fallback,b=d.mode,w=kp({mode:"visible",children:w.children},b,0,null),I=Ka(I,b,v,null),I.flags|=2,w.return=d,I.return=d,w.sibling=I,d.child=w,d.mode&1&&fc(d,c.child,null,v),d.child.memoizedState=vp(v),d.memoizedState=gp,I);if(!(d.mode&1))d=yp(c,d,v,null);else if(Ha(ae))d=yp(c,d,v,Error(o(419)));else if(w=(v&c.childLanes)!==0,Er||w){if(w=Qn,w!==null){switch(v&-v){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}w=I&(w.suspendedLanes|v)?0:I,w!==0&&w!==b.retryLane&&(b.retryLane=w,Wr(c,w,-1))}Jy(),d=yp(c,d,v,Error(o(421)))}else as(ae)?(d.flags|=128,d.child=c.child,d=ZF.bind(null,c),Rs(ae,d),d=null):(v=b.treeContext,_t&&(Mr=ac(ae),wr=d,Pn=!0,us=null,rd=!1,v!==null&&(zr[Vr++]=so,zr[Vr++]=oo,zr[Vr++]=Ga,so=v.id,oo=v.overflow,Ga=d)),d=Ny(d,d.pendingProps.children),d.flags|=4096);return d}return I?(w=mb(c,d,w.children,w.fallback,v),I=d.child,b=c.child.memoizedState,I.memoizedState=b===null?vp(v):{baseLanes:b.baseLanes|v,cachePool:null},I.childLanes=c.childLanes&~v,d.memoizedState=gp,w):(v=pb(c,d,w.children,v),d.memoizedState=null,v)}return I?(w=mb(c,d,w.children,w.fallback,v),I=d.child,b=c.child.memoizedState,I.memoizedState=b===null?vp(v):{baseLanes:b.baseLanes|v,cachePool:null},I.childLanes=c.childLanes&~v,d.memoizedState=gp,w):(v=pb(c,d,w.children,v),d.memoizedState=null,v)}function Ny(c,d){return d=kp({mode:"visible",children:d},c.mode,0,null),d.return=c,c.child=d}function pb(c,d,v,w){var b=c.child;return c=b.sibling,v=Vo(b,{mode:"visible",children:v}),!(d.mode&1)&&(v.lanes=w),v.return=d,v.sibling=null,c!==null&&(w=d.deletions,w===null?(d.deletions=[c],d.flags|=16):w.push(c)),d.child=v}function mb(c,d,v,w,b){var I=d.mode;c=c.child;var W=c.sibling,ae={mode:"hidden",children:v};return!(I&1)&&d.child!==c?(v=d.child,v.childLanes=0,v.pendingProps=ae,d.deletions=null):(v=Vo(c,ae),v.subtreeFlags=c.subtreeFlags&14680064),W!==null?w=Vo(W,w):(w=Ka(w,I,b,null),w.flags|=2),w.return=d,v.return=d,v.sibling=w,d.child=v,w}function yp(c,d,v,w){return w!==null&&vy(w),fc(d,c.child,null,v),c=Ny(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function gb(c,d,v){c.lanes|=d;var w=c.alternate;w!==null&&(w.lanes|=d),cy(c.return,d,v)}function Ly(c,d,v,w,b){var I=c.memoizedState;I===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:w,tail:v,tailMode:b}:(I.isBackwards=d,I.rendering=null,I.renderingStartTime=0,I.last=w,I.tail=v,I.tailMode=b)}function vb(c,d,v){var w=d.pendingProps,b=w.revealOrder,I=w.tail;if(Yi(c,d,w.children,v),w=In.current,w&2)w=w&1|2,d.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&gb(c,v,d);else if(c.tag===19)gb(c,v,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}w&=1}if(Ie(In,w),!(d.mode&1))d.memoizedState=null;else switch(b){case"forwards":for(v=d.child,b=null;v!==null;)c=v.alternate,c!==null&&op(c)===null&&(b=v),v=v.sibling;v=b,v===null?(b=d.child,d.child=null):(b=v.sibling,v.sibling=null),Ly(d,!1,b,v,I);break;case"backwards":for(v=null,b=d.child,d.child=null;b!==null;){if(c=b.alternate,c!==null&&op(c)===null){d.child=b;break}c=b.sibling,b.sibling=v,v=b,b=c}Ly(d,!0,v,null,I);break;case"together":Ly(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function lo(c,d,v){if(c!==null&&(d.dependencies=c.dependencies),yc|=d.lanes,!(v&d.childLanes))return null;if(c!==null&&d.child!==c.child)throw Error(o(153));if(d.child!==null){for(c=d.child,v=Vo(c,c.pendingProps),d.child=v,v.return=d;c.sibling!==null;)c=c.sibling,v=v.sibling=Vo(c,c.pendingProps),v.return=d;v.sibling=null}return d.child}function kF(c,d,v){switch(d.tag){case 3:db(d),hc();break;case 5:LE(d);break;case 1:Vt(d.type)&&Mt(d);break;case 4:yy(d,d.stateNode.containerInfo);break;case 10:yE(d,d.type._context,d.memoizedProps.value);break;case 13:var w=d.memoizedState;if(w!==null)return w.dehydrated!==null?(Ie(In,In.current&1),d.flags|=128,null):v&d.child.childLanes?fb(c,d,v):(Ie(In,In.current&1),c=lo(c,d,v),c!==null?c.sibling:null);Ie(In,In.current&1);break;case 19:if(w=(v&d.childLanes)!==0,c.flags&128){if(w)return vb(c,d,v);d.flags|=128}var b=d.memoizedState;if(b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Ie(In,In.current),w)break;return null;case 22:case 23:return d.lanes=0,lb(c,d,v)}return lo(c,d,v)}function OF(c,d){switch(py(d),d.tag){case 1:return Vt(d.type)&&$t(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return mc(),Me(He),Me(it),Sy(),c=d.flags,c&65536&&!(c&128)?(d.flags=c&-65537|128,d):null;case 5:return xy(d),null;case 13:if(Me(In),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(o(340));hc()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return Me(In),null;case 4:return mc(),null;case 10:return ly(d.type._context),null;case 22:case 23:return Ky(),null;case 24:return null;default:return null}}var xp=!1,Xa=!1,BF=typeof WeakSet=="function"?WeakSet:Set,ot=null;function _p(c,d){var v=c.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(w){hr(c,d,w)}else v.current=null}function Dy(c,d,v){try{v()}catch(w){hr(c,d,w)}}var yb=!1;function zF(c,d){for(Y(c.containerInfo),ot=d;ot!==null;)if(c=ot,d=c.child,(c.subtreeFlags&1028)!==0&&d!==null)d.return=c,ot=d;else for(;ot!==null;){c=ot;try{var v=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,b=v.memoizedState,I=c.stateNode,W=I.getSnapshotBeforeUpdate(c.elementType===c.type?w:cs(c.type,w),b);I.__reactInternalSnapshotBeforeUpdate=W}break;case 3:Ft&&Qe(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ae){hr(c,c.return,ae)}if(d=c.sibling,d!==null){d.return=c.return,ot=d;break}ot=c.return}return v=yb,yb=!1,v}function Ya(c,d,v){var w=d.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var b=w=w.next;do{if((b.tag&c)===c){var I=b.destroy;b.destroy=void 0,I!==void 0&&Dy(d,v,I)}b=b.next}while(b!==w)}}function gd(c,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var v=d=d.next;do{if((v.tag&c)===c){var w=v.create;v.destroy=w()}v=v.next}while(v!==d)}}function Fy(c){var d=c.ref;if(d!==null){var v=c.stateNode;switch(c.tag){case 5:c=ee(v);break;default:c=v}typeof d=="function"?d(c):d.current=c}}function xb(c,d,v){if(Is&&typeof Is.onCommitFiberUnmount=="function")try{Is.onCommitFiberUnmount(Zf,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(c=d.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var w=c=c.next;do{var b=w,I=b.destroy;b=b.tag,I!==void 0&&(b&2||b&4)&&Dy(d,v,I),w=w.next}while(w!==c)}break;case 1:if(_p(d,v),c=d.stateNode,typeof c.componentWillUnmount=="function")try{c.props=d.memoizedProps,c.state=d.memoizedState,c.componentWillUnmount()}catch(W){hr(d,v,W)}break;case 5:_p(d,v);break;case 4:Ft?bb(c,d,v):Qt&&Qt&&(d=d.stateNode.containerInfo,v=be(d),tn(d,v))}}function _b(c,d,v){for(var w=d;;)if(xb(c,w,v),w.child===null||Ft&&w.tag===4){if(w===d)break;for(;w.sibling===null;){if(w.return===null||w.return===d)return;w=w.return}w.sibling.return=w.return,w=w.sibling}else w.child.return=w,w=w.child}function Sb(c){var d=c.alternate;d!==null&&(c.alternate=null,Sb(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&Je(d)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function wb(c){return c.tag===5||c.tag===3||c.tag===4}function Mb(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||wb(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Eb(c){if(Ft){e:{for(var d=c.return;d!==null;){if(wb(d))break e;d=d.return}throw Error(o(160))}var v=d;switch(v.tag){case 5:d=v.stateNode,v.flags&32&&(de(d),v.flags&=-33),v=Mb(c),ky(c,v,d);break;case 3:case 4:d=v.stateNode.containerInfo,v=Mb(c),Uy(c,v,d);break;default:throw Error(o(161))}}}function Uy(c,d,v){var w=c.tag;if(w===5||w===6)c=c.stateNode,d?Be(v,c,d):dt(v,c);else if(w!==4&&(c=c.child,c!==null))for(Uy(c,d,v),c=c.sibling;c!==null;)Uy(c,d,v),c=c.sibling}function ky(c,d,v){var w=c.tag;if(w===5||w===6)c=c.stateNode,d?Ne(v,c,d):ve(v,c);else if(w!==4&&(c=c.child,c!==null))for(ky(c,d,v),c=c.sibling;c!==null;)ky(c,d,v),c=c.sibling}function bb(c,d,v){for(var w=d,b=!1,I,W;;){if(!b){b=w.return;e:for(;;){if(b===null)throw Error(o(160));switch(I=b.stateNode,b.tag){case 5:W=!1;break e;case 3:I=I.containerInfo,W=!0;break e;case 4:I=I.containerInfo,W=!0;break e}b=b.return}b=!0}if(w.tag===5||w.tag===6)_b(c,w,v),W?Z(I,w.stateNode):ut(I,w.stateNode);else if(w.tag===18)W?ke(I,w.stateNode):We(I,w.stateNode);else if(w.tag===4){if(w.child!==null){I=w.stateNode.containerInfo,W=!0,w.child.return=w,w=w.child;continue}}else if(xb(c,w,v),w.child!==null){w.child.return=w,w=w.child;continue}if(w===d)break;for(;w.sibling===null;){if(w.return===null||w.return===d)return;w=w.return,w.tag===4&&(b=!1)}w.sibling.return=w.return,w=w.sibling}}function Oy(c,d){if(Ft){switch(d.tag){case 0:case 11:case 14:case 15:Ya(3,d,d.return),gd(3,d),Ya(5,d,d.return);return;case 1:return;case 5:var v=d.stateNode;if(v!=null){var w=d.memoizedProps;c=c!==null?c.memoizedProps:w;var b=d.type,I=d.updateQueue;d.updateQueue=null,I!==null&&It(v,I,b,c,w,d)}return;case 6:if(d.stateNode===null)throw Error(o(162));v=d.memoizedProps,qe(d.stateNode,c!==null?c.memoizedProps:v,v);return;case 3:_t&&c!==null&&c.memoizedState.isDehydrated&&xe(d.stateNode.containerInfo);return;case 12:return;case 13:Sp(d);return;case 19:Sp(d);return;case 17:return}throw Error(o(163))}switch(d.tag){case 0:case 11:case 14:case 15:Ya(3,d,d.return),gd(3,d),Ya(5,d,d.return);return;case 12:return;case 13:Sp(d);return;case 19:Sp(d);return;case 3:_t&&c!==null&&c.memoizedState.isDehydrated&&xe(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(Qt){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,tn(d.containerInfo,d.pendingChildren);break e}throw Error(o(163))}}function Sp(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var v=c.stateNode;v===null&&(v=c.stateNode=new BF),d.forEach(function(w){var b=$F.bind(null,c,w);v.has(w)||(v.add(w),w.then(b,b))})}}function VF(c,d){for(ot=d;ot!==null;){d=ot;var v=d.deletions;if(v!==null)for(var w=0;w<v.length;w++){var b=v[w];try{var I=c;Ft?bb(I,b,d):_b(I,b,d);var W=b.alternate;W!==null&&(W.return=null),b.return=null}catch(Tt){hr(b,d,Tt)}}if(v=d.child,d.subtreeFlags&12854&&v!==null)v.return=d,ot=v;else for(;ot!==null;){d=ot;try{var ae=d.flags;if(ae&32&&Ft&&de(d.stateNode),ae&512){var we=d.alternate;if(we!==null){var Ye=we.ref;Ye!==null&&(typeof Ye=="function"?Ye(null):Ye.current=null)}}if(ae&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var xt=d.alternate;(xt===null||xt.memoizedState===null)&&(jy=pi())}break;case 22:var Ht=d.memoizedState!==null,Nt=d.alternate,xn=Nt!==null&&Nt.memoizedState!==null;if(v=d,Ft){e:if(w=v,b=Ht,I=null,Ft)for(var Rt=w;;){if(Rt.tag===5){if(I===null){I=Rt;var Di=Rt.stateNode;b?Le(Di):he(Rt.stateNode,Rt.memoizedProps)}}else if(Rt.tag===6){if(I===null){var Xr=Rt.stateNode;b?K(Xr):De(Xr,Rt.memoizedProps)}}else if((Rt.tag!==22&&Rt.tag!==23||Rt.memoizedState===null||Rt===w)&&Rt.child!==null){Rt.child.return=Rt,Rt=Rt.child;continue}if(Rt===w)break;for(;Rt.sibling===null;){if(Rt.return===null||Rt.return===w)break e;I===Rt&&(I=null),Rt=Rt.return}I===Rt&&(I=null),Rt.sibling.return=Rt.return,Rt=Rt.sibling}}if(Ht&&!xn&&v.mode&1){ot=v;for(var pe=v.child;pe!==null;){for(v=ot=pe;ot!==null;){w=ot;var ce=w.child;switch(w.tag){case 0:case 11:case 14:case 15:Ya(4,w,w.return);break;case 1:_p(w,w.return);var ye=w.stateNode;if(typeof ye.componentWillUnmount=="function"){var ct=w.return;try{ye.props=w.memoizedProps,ye.state=w.memoizedState,ye.componentWillUnmount()}catch(Tt){hr(w,ct,Tt)}}break;case 5:_p(w,w.return);break;case 22:if(w.memoizedState!==null){Cb(v);continue}}ce!==null?(ce.return=w,ot=ce):Cb(v)}pe=pe.sibling}}}switch(ae&4102){case 2:Eb(d),d.flags&=-3;break;case 6:Eb(d),d.flags&=-3,Oy(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,Oy(d.alternate,d);break;case 4:Oy(d.alternate,d)}}catch(Tt){hr(d,d.return,Tt)}if(v=d.sibling,v!==null){v.return=d.return,ot=v;break}ot=d.return}}}function HF(c,d,v){ot=c,Tb(c)}function Tb(c,d,v){for(var w=(c.mode&1)!==0;ot!==null;){var b=ot,I=b.child;if(b.tag===22&&w){var W=b.memoizedState!==null||xp;if(!W){var ae=b.alternate,we=ae!==null&&ae.memoizedState!==null||Xa;ae=xp;var Ye=Xa;if(xp=W,(Xa=we)&&!Ye)for(ot=b;ot!==null;)W=ot,we=W.child,W.tag===22&&W.memoizedState!==null?Pb(b):we!==null?(we.return=W,ot=we):Pb(b);for(;I!==null;)ot=I,Tb(I),I=I.sibling;ot=b,xp=ae,Xa=Ye}Ab(c)}else b.subtreeFlags&8772&&I!==null?(I.return=b,ot=I):Ab(c)}}function Ab(c){for(;ot!==null;){var d=ot;if(d.flags&8772){var v=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:Xa||gd(5,d);break;case 1:var w=d.stateNode;if(d.flags&4&&!Xa)if(v===null)w.componentDidMount();else{var b=d.elementType===d.type?v.memoizedProps:cs(d.type,v.memoizedProps);w.componentDidUpdate(b,v.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var I=d.updateQueue;I!==null&&SE(d,I,w);break;case 3:var W=d.updateQueue;if(W!==null){if(v=null,d.child!==null)switch(d.child.tag){case 5:v=ee(d.child.stateNode);break;case 1:v=d.child.stateNode}SE(d,W,v)}break;case 5:var ae=d.stateNode;v===null&&d.flags&4&&ht(ae,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(_t&&d.memoizedState===null){var we=d.alternate;if(we!==null){var Ye=we.memoizedState;if(Ye!==null){var xt=Ye.dehydrated;xt!==null&&_e(xt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Xa||d.flags&512&&Fy(d)}catch(Ht){hr(d,d.return,Ht)}}if(d===c){ot=null;break}if(v=d.sibling,v!==null){v.return=d.return,ot=v;break}ot=d.return}}function Cb(c){for(;ot!==null;){var d=ot;if(d===c){ot=null;break}var v=d.sibling;if(v!==null){v.return=d.return,ot=v;break}ot=d.return}}function Pb(c){for(;ot!==null;){var d=ot;try{switch(d.tag){case 0:case 11:case 15:var v=d.return;try{gd(4,d)}catch(we){hr(d,v,we)}break;case 1:var w=d.stateNode;if(typeof w.componentDidMount=="function"){var b=d.return;try{w.componentDidMount()}catch(we){hr(d,b,we)}}var I=d.return;try{Fy(d)}catch(we){hr(d,I,we)}break;case 5:var W=d.return;try{Fy(d)}catch(we){hr(d,W,we)}}}catch(we){hr(d,d.return,we)}if(d===c){ot=null;break}var ae=d.sibling;if(ae!==null){ae.return=d.return,ot=ae;break}ot=d.return}}var wp=0,Mp=1,Ep=2,bp=3,Tp=4;if(typeof Symbol=="function"&&Symbol.for){var vd=Symbol.for;wp=vd("selector.component"),Mp=vd("selector.has_pseudo_class"),Ep=vd("selector.role"),bp=vd("selector.test_id"),Tp=vd("selector.text")}function By(c){var d=Te(c);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(c=Pt(c),c===null)throw Error(o(362));return c.stateNode.current}function zy(c,d){switch(d.$$typeof){case wp:if(c.type===d.value)return!0;break;case Mp:e:{d=d.value,c=[c,0];for(var v=0;v<c.length;){var w=c[v++],b=c[v++],I=d[b];if(w.tag!==5||!D(w)){for(;I!=null&&zy(w,I);)b++,I=d[b];if(b===d.length){d=!0;break e}else for(w=w.child;w!==null;)c.push(w,b),w=w.sibling}}d=!1}return d;case Ep:if(c.tag===5&&ie(c.stateNode,d.value))return!0;break;case Tp:if((c.tag===5||c.tag===6)&&(c=z(c),c!==null&&0<=c.indexOf(d.value)))return!0;break;case bp:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Vy(c){switch(c.$$typeof){case wp:return"<"+(L(c.value)||"Unknown")+">";case Mp:return":has("+(Vy(c)||"")+")";case Ep:return'[role="'+c.value+'"]';case Tp:return'"'+c.value+'"';case bp:return'[data-testname="'+c.value+'"]';default:throw Error(o(365))}}function Rb(c,d){var v=[];c=[c,0];for(var w=0;w<c.length;){var b=c[w++],I=c[w++],W=d[I];if(b.tag!==5||!D(b)){for(;W!=null&&zy(b,W);)I++,W=d[I];if(I===d.length)v.push(b);else for(b=b.child;b!==null;)c.push(b,I),b=b.sibling}}return v}function Hy(c,d){if(!tt)throw Error(o(363));c=By(c),c=Rb(c,d),d=[],c=Array.from(c);for(var v=0;v<c.length;){var w=c[v++];if(w.tag===5)D(w)||d.push(w.stateNode);else for(w=w.child;w!==null;)c.push(w),w=w.sibling}return d}var GF=Math.ceil,Ap=a.ReactCurrentDispatcher,Gy=a.ReactCurrentOwner,Xn=a.ReactCurrentBatchConfig,Jt=0,Qn=null,ei=null,wi=0,br=0,vc=Fe(0),oi=0,yd=null,yc=0,Cp=0,Wy=0,xd=null,ur=null,jy=0,Xy=1/0;function xc(){Xy=pi()+500}var Pp=!1,Yy=null,ko=null,Rp=!1,Oo=null,Ip=0,_d=0,qy=null,Np=-1,Lp=0;function qi(){return Jt&6?pi():Np!==-1?Np:Np=pi()}function Bo(c){return c.mode&1?Jt&2&&wi!==0?wi&-wi:bF.transition!==null?(Lp===0&&(c=hn,hn<<=1,!(hn&4194240)&&(hn=64),Lp=c),Lp):(c=cn,c!==0?c:Pe()):1}function Wr(c,d,v){if(50<_d)throw _d=0,qy=null,Error(o(185));var w=Dp(c,d);return w===null?null:(id(w,d,v),(!(Jt&2)||w!==Qn)&&(w===Qn&&(!(Jt&2)&&(Cp|=d),oi===4&&zo(w,wi)),dr(w,v),d===1&&Jt===0&&!(c.mode&1)&&(xc(),$f&&Ls())),w)}function Dp(c,d){c.lanes|=d;var v=c.alternate;for(v!==null&&(v.lanes|=d),v=c,c=c.return;c!==null;)c.childLanes|=d,v=c.alternate,v!==null&&(v.childLanes|=d),v=c,c=c.return;return v.tag===3?v.stateNode:null}function dr(c,d){var v=c.callbackNode;nd(c,d);var w=Jn(c,c===Qn?wi:0);if(w===0)v!==null&&gE(v),c.callbackNode=null,c.callbackPriority=0;else if(d=w&-w,c.callbackPriority!==d){if(v!=null&&gE(v),d===1)c.tag===0?EF(Nb.bind(null,c)):vE(Nb.bind(null,c)),G?St(function(){Jt===0&&Ls()}):ny(iy,Ls),v=null;else{switch(mE(w)){case 1:v=iy;break;case 4:v=_F;break;case 16:v=ry;break;case 536870912:v=SF;break;default:v=ry}v=Vb(v,Ib.bind(null,c))}c.callbackPriority=d,c.callbackNode=v}}function Ib(c,d){if(Np=-1,Lp=0,Jt&6)throw Error(o(327));var v=c.callbackNode;if($a()&&c.callbackNode!==v)return null;var w=Jn(c,c===Qn?wi:0);if(w===0)return null;if(w&30||w&c.expiredLanes||d)d=Fp(c,w);else{d=w;var b=Jt;Jt|=2;var I=Fb();(Qn!==c||wi!==d)&&(xc(),qa(c,d));do try{XF();break}catch(ae){Db(c,ae)}while(!0);ay(),Ap.current=I,Jt=b,ei!==null?d=0:(Qn=null,wi=0,d=oi)}if(d!==0){if(d===2&&(b=ls(c),b!==0&&(w=b,d=Zy(c,b))),d===1)throw v=yd,qa(c,0),zo(c,w),dr(c,pi()),v;if(d===6)zo(c,w);else{if(b=c.current.alternate,!(w&30)&&!WF(b)&&(d=Fp(c,w),d===2&&(I=ls(c),I!==0&&(w=I,d=Zy(c,I))),d===1))throw v=yd,qa(c,0),zo(c,w),dr(c,pi()),v;switch(c.finishedWork=b,c.finishedLanes=w,d){case 0:case 1:throw Error(o(345));case 2:Za(c,ur);break;case 3:if(zo(c,w),(w&130023424)===w&&(d=jy+500-pi(),10<d)){if(Jn(c,0)!==0)break;if(b=c.suspendedLanes,(b&w)!==w){qi(),c.pingedLanes|=c.suspendedLanes&b;break}c.timeoutHandle=Se(Za.bind(null,c,ur),d);break}Za(c,ur);break;case 4:if(zo(c,w),(w&4194240)===w)break;for(d=c.eventTimes,b=-1;0<w;){var W=31-en(w);I=1<<W,W=d[W],W>b&&(b=W),w&=~I}if(w=b,w=pi()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*GF(w/1960))-w,10<w){c.timeoutHandle=Se(Za.bind(null,c,ur),w);break}Za(c,ur);break;case 5:Za(c,ur);break;default:throw Error(o(329))}}}return dr(c,pi()),c.callbackNode===v?Ib.bind(null,c):null}function Zy(c,d){var v=xd;return c.current.memoizedState.isDehydrated&&(qa(c,d).flags|=256),c=Fp(c,d),c!==2&&(d=ur,ur=v,d!==null&&$y(d)),c}function $y(c){ur===null?ur=c:ur.push.apply(ur,c)}function WF(c){for(var d=c;;){if(d.flags&16384){var v=d.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var w=0;w<v.length;w++){var b=v[w],I=b.getSnapshot;b=b.value;try{if(!Ns(I(),b))return!1}catch{return!1}}}if(v=d.child,d.subtreeFlags&16384&&v!==null)v.return=d,d=v;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function zo(c,d){for(d&=~Wy,d&=~Cp,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var v=31-en(d),w=1<<v;c[v]=-1,d&=~w}}function Nb(c){if(Jt&6)throw Error(o(327));$a();var d=Jn(c,0);if(!(d&1))return dr(c,pi()),null;var v=Fp(c,d);if(c.tag!==0&&v===2){var w=ls(c);w!==0&&(d=w,v=Zy(c,w))}if(v===1)throw v=yd,qa(c,0),zo(c,d),dr(c,pi()),v;if(v===6)throw Error(o(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,Za(c,ur),dr(c,pi()),null}function Lb(c){Oo!==null&&Oo.tag===0&&!(Jt&6)&&$a();var d=Jt;Jt|=1;var v=Xn.transition,w=cn;try{if(Xn.transition=null,cn=1,c)return c()}finally{cn=w,Xn.transition=v,Jt=d,!(Jt&6)&&Ls()}}function Ky(){br=vc.current,Me(vc)}function qa(c,d){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==wt&&(c.timeoutHandle=wt,et(v)),ei!==null)for(v=ei.return;v!==null;){var w=v;switch(py(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&$t();break;case 3:mc(),Me(He),Me(it),Sy();break;case 5:xy(w);break;case 4:mc();break;case 13:Me(In);break;case 19:Me(In);break;case 10:ly(w.type._context);break;case 22:case 23:Ky()}v=v.return}if(Qn=c,ei=c=Vo(c.current,null),wi=br=d,oi=0,yd=null,Wy=Cp=yc=0,ur=xd=null,Ds!==null){for(d=0;d<Ds.length;d++)if(v=Ds[d],w=v.interleaved,w!==null){v.interleaved=null;var b=w.next,I=v.pending;if(I!==null){var W=I.next;I.next=b,w.next=W}v.pending=w}Ds=null}return c}function Db(c,d){do{var v=ei;try{if(ay(),ap.current=fp,lp){for(var w=zn.memoizedState;w!==null;){var b=w.queue;b!==null&&(b.pending=null),w=w.next}lp=!1}if(gc=0,mi=Ii=zn=null,cd=!1,ud=0,Gy.current=null,v===null||v.return===null){oi=1,yd=d,ei=null;break}e:{var I=c,W=v.return,ae=v,we=d;if(d=wi,ae.flags|=32768,we!==null&&typeof we=="object"&&typeof we.then=="function"){var Ye=we,xt=ae,Ht=xt.tag;if(!(xt.mode&1)&&(Ht===0||Ht===11||Ht===15)){var Nt=xt.alternate;Nt?(xt.updateQueue=Nt.updateQueue,xt.memoizedState=Nt.memoizedState,xt.lanes=Nt.lanes):(xt.updateQueue=null,xt.memoizedState=null)}var xn=tb(W);if(xn!==null){xn.flags&=-257,nb(xn,W,ae,I,d),xn.mode&1&&eb(I,Ye,d),d=xn,we=Ye;var Rt=d.updateQueue;if(Rt===null){var Di=new Set;Di.add(we),d.updateQueue=Di}else Rt.add(we);break e}else{if(!(d&1)){eb(I,Ye,d),Jy();break e}we=Error(o(426))}}else if(Pn&&ae.mode&1){var Xr=tb(W);if(Xr!==null){!(Xr.flags&65536)&&(Xr.flags|=256),nb(Xr,W,ae,I,d),vy(we);break e}}I=we,oi!==4&&(oi=2),xd===null?xd=[I]:xd.push(I),we=Cy(we,ae),ae=W;do{switch(ae.tag){case 3:ae.flags|=65536,d&=-d,ae.lanes|=d;var pe=JE(ae,we,d);_E(ae,pe);break e;case 1:I=we;var ce=ae.type,ye=ae.stateNode;if(!(ae.flags&128)&&(typeof ce.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(ko===null||!ko.has(ye)))){ae.flags|=65536,d&=-d,ae.lanes|=d;var ct=QE(ae,I,d);_E(ae,ct);break e}}ae=ae.return}while(ae!==null)}kb(v)}catch(Tt){d=Tt,ei===v&&v!==null&&(ei=v=v.return);continue}break}while(!0)}function Fb(){var c=Ap.current;return Ap.current=fp,c===null?fp:c}function Jy(){(oi===0||oi===3||oi===2)&&(oi=4),Qn===null||!(yc&268435455)&&!(Cp&268435455)||zo(Qn,wi)}function Fp(c,d){var v=Jt;Jt|=2;var w=Fb();Qn===c&&wi===d||qa(c,d);do try{jF();break}catch(b){Db(c,b)}while(!0);if(ay(),Jt=v,Ap.current=w,ei!==null)throw Error(o(261));return Qn=null,wi=0,oi}function jF(){for(;ei!==null;)Ub(ei)}function XF(){for(;ei!==null&&!yF();)Ub(ei)}function Ub(c){var d=zb(c.alternate,c,br);c.memoizedProps=c.pendingProps,d===null?kb(c):ei=d,Gy.current=null}function kb(c){var d=c;do{var v=d.alternate;if(c=d.return,d.flags&32768){if(v=OF(v,d),v!==null){v.flags&=32767,ei=v;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{oi=6,ei=null;return}}else if(v=FF(v,d,br),v!==null){ei=v;return}if(d=d.sibling,d!==null){ei=d;return}ei=d=c}while(d!==null);oi===0&&(oi=5)}function Za(c,d){var v=cn,w=Xn.transition;try{Xn.transition=null,cn=1,YF(c,d,v)}finally{Xn.transition=w,cn=v}return null}function YF(c,d,v){do $a();while(Oo!==null);if(Jt&6)throw Error(o(327));var w=c.finishedWork,b=c.finishedLanes;if(w===null)return null;if(c.finishedWork=null,c.finishedLanes=0,w===c.current)throw Error(o(177));c.callbackNode=null,c.callbackPriority=0;var I=w.lanes|w.childLanes;if(vF(c,I),c===Qn&&(ei=Qn=null,wi=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||Rp||(Rp=!0,Vb(ry,function(){return $a(),null})),I=(w.flags&15990)!==0,w.subtreeFlags&15990||I){I=Xn.transition,Xn.transition=null;var W=cn;cn=1;var ae=Jt;Jt|=4,Gy.current=null,zF(c,w),VF(c,w),X(c.containerInfo),c.current=w,HF(w),xF(),Jt=ae,cn=W,Xn.transition=I}else c.current=w;if(Rp&&(Rp=!1,Oo=c,Ip=b),I=c.pendingLanes,I===0&&(ko=null),wF(w.stateNode),dr(c,pi()),d!==null)for(v=c.onRecoverableError,w=0;w<d.length;w++)v(d[w]);if(Pp)throw Pp=!1,c=Yy,Yy=null,c;return Ip&1&&c.tag!==0&&$a(),I=c.pendingLanes,I&1?c===qy?_d++:(_d=0,qy=c):_d=0,Ls(),null}function $a(){if(Oo!==null){var c=mE(Ip),d=Xn.transition,v=cn;try{if(Xn.transition=null,cn=16>c?16:c,Oo===null)var w=!1;else{if(c=Oo,Oo=null,Ip=0,Jt&6)throw Error(o(331));var b=Jt;for(Jt|=4,ot=c.current;ot!==null;){var I=ot,W=I.child;if(ot.flags&16){var ae=I.deletions;if(ae!==null){for(var we=0;we<ae.length;we++){var Ye=ae[we];for(ot=Ye;ot!==null;){var xt=ot;switch(xt.tag){case 0:case 11:case 15:Ya(8,xt,I)}var Ht=xt.child;if(Ht!==null)Ht.return=xt,ot=Ht;else for(;ot!==null;){xt=ot;var Nt=xt.sibling,xn=xt.return;if(Sb(xt),xt===Ye){ot=null;break}if(Nt!==null){Nt.return=xn,ot=Nt;break}ot=xn}}}var Rt=I.alternate;if(Rt!==null){var Di=Rt.child;if(Di!==null){Rt.child=null;do{var Xr=Di.sibling;Di.sibling=null,Di=Xr}while(Di!==null)}}ot=I}}if(I.subtreeFlags&2064&&W!==null)W.return=I,ot=W;else e:for(;ot!==null;){if(I=ot,I.flags&2048)switch(I.tag){case 0:case 11:case 15:Ya(9,I,I.return)}var pe=I.sibling;if(pe!==null){pe.return=I.return,ot=pe;break e}ot=I.return}}var ce=c.current;for(ot=ce;ot!==null;){W=ot;var ye=W.child;if(W.subtreeFlags&2064&&ye!==null)ye.return=W,ot=ye;else e:for(W=ce;ot!==null;){if(ae=ot,ae.flags&2048)try{switch(ae.tag){case 0:case 11:case 15:gd(9,ae)}}catch(Tt){hr(ae,ae.return,Tt)}if(ae===W){ot=null;break e}var ct=ae.sibling;if(ct!==null){ct.return=ae.return,ot=ct;break e}ot=ae.return}}if(Jt=b,Ls(),Is&&typeof Is.onPostCommitFiberRoot=="function")try{Is.onPostCommitFiberRoot(Zf,c)}catch{}w=!0}return w}finally{cn=v,Xn.transition=d}}return!1}function Ob(c,d,v){d=Cy(v,d),d=JE(c,d,1),Uo(c,d),d=qi(),c=Dp(c,1),c!==null&&(id(c,1,d),dr(c,d))}function hr(c,d,v){if(c.tag===3)Ob(c,c,v);else for(;d!==null;){if(d.tag===3){Ob(d,c,v);break}else if(d.tag===1){var w=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(ko===null||!ko.has(w))){c=Cy(v,c),c=QE(d,c,1),Uo(d,c),c=qi(),d=Dp(d,1),d!==null&&(id(d,1,c),dr(d,c));break}}d=d.return}}function qF(c,d,v){var w=c.pingCache;w!==null&&w.delete(d),d=qi(),c.pingedLanes|=c.suspendedLanes&v,Qn===c&&(wi&v)===v&&(oi===4||oi===3&&(wi&130023424)===wi&&500>pi()-jy?qa(c,0):Wy|=v),dr(c,d)}function Bb(c,d){d===0&&(c.mode&1?(d=si,si<<=1,!(si&130023424)&&(si=4194304)):d=1);var v=qi();c=Dp(c,d),c!==null&&(id(c,d,v),dr(c,v))}function ZF(c){var d=c.memoizedState,v=0;d!==null&&(v=d.retryLane),Bb(c,v)}function $F(c,d){var v=0;switch(c.tag){case 13:var w=c.stateNode,b=c.memoizedState;b!==null&&(v=b.retryLane);break;case 19:w=c.stateNode;break;default:throw Error(o(314))}w!==null&&w.delete(d),Bb(c,v)}var zb;zb=function(c,d,v){if(c!==null)if(c.memoizedProps!==d.pendingProps||He.current)Er=!0;else{if(!(c.lanes&v)&&!(d.flags&128))return Er=!1,kF(c,d,v);Er=!!(c.flags&131072)}else Er=!1,Pn&&d.flags&1048576&&TE(d,rp,d.index);switch(d.lanes=0,d.tag){case 2:var w=d.type;c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2),c=d.pendingProps;var b=Bt(d,it.current);cc(d,v),b=My(null,d,w,c,b,v);var I=Ey();return d.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Vt(w)?(I=!0,Mt(d)):I=!1,d.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,uy(d),b.updater=np,d.stateNode=b,b._reactInternals=d,hy(d,w,c,v),d=Iy(null,d,w,!0,I,v)):(d.tag=0,Pn&&I&&fy(d),Yi(null,d,b,v),d=d.child),d;case 16:w=d.elementType;e:{switch(c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2),c=d.pendingProps,b=w._init,w=b(w._payload),d.type=w,b=d.tag=JF(w),c=cs(w,c),b){case 0:d=Ry(null,d,w,c,v);break e;case 1:d=ub(null,d,w,c,v);break e;case 11:d=sb(null,d,w,c,v);break e;case 14:d=ob(null,d,w,cs(w.type,c),v);break e}throw Error(o(306,w,""))}return d;case 0:return w=d.type,b=d.pendingProps,b=d.elementType===w?b:cs(w,b),Ry(c,d,w,b,v);case 1:return w=d.type,b=d.pendingProps,b=d.elementType===w?b:cs(w,b),ub(c,d,w,b,v);case 3:e:{if(db(d),c===null)throw Error(o(387));w=d.pendingProps,I=d.memoizedState,b=I.element,xE(c,d),tp(d,w,null,v);var W=d.memoizedState;if(w=W.element,_t&&I.isDehydrated)if(I={element:w,isDehydrated:!1,cache:W.cache,transitions:W.transitions},d.updateQueue.baseState=I,d.memoizedState=I,d.flags&256){b=Error(o(423)),d=hb(c,d,w,v,b);break e}else if(w!==b){b=Error(o(424)),d=hb(c,d,w,v,b);break e}else for(_t&&(Mr=Do(d.stateNode.containerInfo),wr=d,Pn=!0,us=null,rd=!1),v=NE(d,null,w,v),d.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(hc(),w===b){d=lo(c,d,v);break e}Yi(c,d,w,v)}d=d.child}return d;case 5:return LE(d),c===null&&gy(d),w=d.type,b=d.pendingProps,I=c!==null?c.memoizedProps:null,W=b.children,Ct(w,b)?W=null:I!==null&&Ct(w,I)&&(d.flags|=32),cb(c,d),Yi(c,d,W,v),d.child;case 6:return c===null&&gy(d),null;case 13:return fb(c,d,v);case 4:return yy(d,d.stateNode.containerInfo),w=d.pendingProps,c===null?d.child=fc(d,null,w,v):Yi(c,d,w,v),d.child;case 11:return w=d.type,b=d.pendingProps,b=d.elementType===w?b:cs(w,b),sb(c,d,w,b,v);case 7:return Yi(c,d,d.pendingProps,v),d.child;case 8:return Yi(c,d,d.pendingProps.children,v),d.child;case 12:return Yi(c,d,d.pendingProps.children,v),d.child;case 10:e:{if(w=d.type._context,b=d.pendingProps,I=d.memoizedProps,W=b.value,yE(d,w,W),I!==null)if(Ns(I.value,W)){if(I.children===b.children&&!He.current){d=lo(c,d,v);break e}}else for(I=d.child,I!==null&&(I.return=d);I!==null;){var ae=I.dependencies;if(ae!==null){W=I.child;for(var we=ae.firstContext;we!==null;){if(we.context===w){if(I.tag===1){we=ro(-1,v&-v),we.tag=2;var Ye=I.updateQueue;if(Ye!==null){Ye=Ye.shared;var xt=Ye.pending;xt===null?we.next=we:(we.next=xt.next,xt.next=we),Ye.pending=we}}I.lanes|=v,we=I.alternate,we!==null&&(we.lanes|=v),cy(I.return,v,d),ae.lanes|=v;break}we=we.next}}else if(I.tag===10)W=I.type===d.type?null:I.child;else if(I.tag===18){if(W=I.return,W===null)throw Error(o(341));W.lanes|=v,ae=W.alternate,ae!==null&&(ae.lanes|=v),cy(W,v,d),W=I.sibling}else W=I.child;if(W!==null)W.return=I;else for(W=I;W!==null;){if(W===d){W=null;break}if(I=W.sibling,I!==null){I.return=W.return,W=I;break}W=W.return}I=W}Yi(c,d,b.children,v),d=d.child}return d;case 9:return b=d.type,w=d.pendingProps.children,cc(d,v),b=Br(b),w=w(b),d.flags|=1,Yi(c,d,w,v),d.child;case 14:return w=d.type,b=cs(w,d.pendingProps),b=cs(w.type,b),ob(c,d,w,b,v);case 15:return ab(c,d,d.type,d.pendingProps,v);case 17:return w=d.type,b=d.pendingProps,b=d.elementType===w?b:cs(w,b),c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,Vt(w)?(c=!0,Mt(d)):c=!1,cc(d,v),EE(d,w,b),hy(d,w,b,v),Iy(null,d,w,!0,c,v);case 19:return vb(c,d,v);case 22:return lb(c,d,v)}throw Error(o(156,d.tag))};function Vb(c,d){return ny(c,d)}function KF(c,d,v,w){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(c,d,v,w){return new KF(c,d,v,w)}function Qy(c){return c=c.prototype,!(!c||!c.isReactComponent)}function JF(c){if(typeof c=="function")return Qy(c)?1:0;if(c!=null){if(c=c.$$typeof,c===S)return 11;if(c===_)return 14}return 2}function Vo(c,d){var v=c.alternate;return v===null?(v=jr(c.tag,d,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=d,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&14680064,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,d=c.dependencies,v.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v}function Up(c,d,v,w,b,I){var W=2;if(w=c,typeof c=="function")Qy(c)&&(W=1);else if(typeof c=="string")W=5;else e:switch(c){case h:return Ka(v.children,b,I,d);case f:W=8,b|=8;break;case p:return c=jr(12,v,d,b|2),c.elementType=p,c.lanes=I,c;case x:return c=jr(13,v,d,b),c.elementType=x,c.lanes=I,c;case g:return c=jr(19,v,d,b),c.elementType=g,c.lanes=I,c;case E:return kp(v,b,I,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case m:W=10;break e;case y:W=9;break e;case S:W=11;break e;case _:W=14;break e;case M:W=16,w=null;break e}throw Error(o(130,c==null?c:typeof c,""))}return d=jr(W,v,d,b),d.elementType=c,d.type=w,d.lanes=I,d}function Ka(c,d,v,w){return c=jr(7,c,w,d),c.lanes=v,c}function kp(c,d,v,w){return c=jr(22,c,w,d),c.elementType=E,c.lanes=v,c.stateNode={},c}function ex(c,d,v){return c=jr(6,c,null,d),c.lanes=v,c}function tx(c,d,v){return d=jr(4,c.children!==null?c.children:[],c.key,d),d.lanes=v,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function QF(c,d,v,w,b){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=wt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ey(0),this.expirationTimes=ey(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ey(0),this.identifierPrefix=w,this.onRecoverableError=b,_t&&(this.mutableSourceEagerHydrationData=null)}function Hb(c,d,v,w,b,I,W,ae,we){return c=new QF(c,d,v,ae,we),d===1?(d=1,I===!0&&(d|=8)):d=0,I=jr(3,null,null,d),c.current=I,I.stateNode=c,I.memoizedState={element:w,isDehydrated:v,cache:null,transitions:null},uy(I),c}function Gb(c){if(!c)return Ve;c=c._reactInternals;e:{if(C(c)!==c||c.tag!==1)throw Error(o(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Vt(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(c.tag===1){var v=c.type;if(Vt(v))return lt(c,v,d)}return d}function Wb(c){var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=H(d),c===null?null:c.stateNode}function jb(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<d?v:d}}function nx(c,d){jb(c,d),(c=c.alternate)&&jb(c,d)}function eU(c){return c=H(c),c===null?null:c.stateNode}function tU(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var d=qi();Wr(c,134217728,d),nx(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var d=qi(),v=Bo(c);Wr(c,v,d),nx(c,v)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var v=fi(d.pendingLanes);v!==0&&(ty(d,v|1),dr(d,pi()),!(Jt&6)&&(xc(),Ls()))}break;case 13:var w=qi();Lb(function(){return Wr(c,1,w)}),nx(c,1)}},t.batchedUpdates=function(c,d){var v=Jt;Jt|=1;try{return c(d)}finally{Jt=v,Jt===0&&(xc(),$f&&Ls())}},t.createComponentSelector=function(c){return{$$typeof:wp,value:c}},t.createContainer=function(c,d,v,w,b,I,W){return Hb(c,d,!1,null,v,w,b,I,W)},t.createHasPseudoClassSelector=function(c){return{$$typeof:Mp,value:c}},t.createHydrationContainer=function(c,d,v,w,b,I,W,ae,we){return c=Hb(v,w,!0,c,b,I,W,ae,we),c.context=Gb(null),v=c.current,w=qi(),b=Bo(v),I=ro(w,b),I.callback=d??null,Uo(v,I),c.current.lanes=b,id(c,b,w),dr(c,w),c},t.createPortal=function(c,d,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:w==null?null:""+w,children:c,containerInfo:d,implementation:v}},t.createRoleSelector=function(c){return{$$typeof:Ep,value:c}},t.createTestNameSelector=function(c){return{$$typeof:bp,value:c}},t.createTextSelector=function(c){return{$$typeof:Tp,value:c}},t.deferredUpdates=function(c){var d=cn,v=Xn.transition;try{return Xn.transition=null,cn=16,c()}finally{cn=d,Xn.transition=v}},t.discreteUpdates=function(c,d,v,w,b){var I=cn,W=Xn.transition;try{return Xn.transition=null,cn=1,c(d,v,w,b)}finally{cn=I,Xn.transition=W,Jt===0&&xc()}},t.findAllNodes=Hy,t.findBoundingRects=function(c,d){if(!tt)throw Error(o(363));d=Hy(c,d),c=[];for(var v=0;v<d.length;v++)c.push(je(d[v]));for(d=c.length-1;0<d;d--){v=c[d];for(var w=v.x,b=w+v.width,I=v.y,W=I+v.height,ae=d-1;0<=ae;ae--)if(d!==ae){var we=c[ae],Ye=we.x,xt=Ye+we.width,Ht=we.y,Nt=Ht+we.height;if(w>=Ye&&I>=Ht&&b<=xt&&W<=Nt){c.splice(d,1);break}else if(w!==Ye||v.width!==we.width||Nt<I||Ht>W){if(!(I!==Ht||v.height!==we.height||xt<w||Ye>b)){Ye>w&&(we.width+=Ye-w,we.x=w),xt<b&&(we.width=b-Ye),c.splice(d,1);break}}else{Ht>I&&(we.height+=Ht-I,we.y=I),Nt<W&&(we.height=W-Ht),c.splice(d,1);break}}}return c},t.findHostInstance=Wb,t.findHostInstanceWithNoPortals=function(c){return c=k(c),c=c!==null?ne(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return Wb(c)},t.flushControlled=function(c){var d=Jt;Jt|=1;var v=Xn.transition,w=cn;try{Xn.transition=null,cn=1,c()}finally{cn=w,Xn.transition=v,Jt=d,Jt===0&&(xc(),Ls())}},t.flushPassiveEffects=$a,t.flushSync=Lb,t.focusWithin=function(c,d){if(!tt)throw Error(o(363));for(c=By(c),d=Rb(c,d),d=Array.from(d),c=0;c<d.length;){var v=d[c++];if(!D(v)){if(v.tag===5&&ge(v.stateNode))return!0;for(v=v.child;v!==null;)d.push(v),v=v.sibling}}return!1},t.getCurrentUpdatePriority=function(){return cn},t.getFindAllNodesFailureDescription=function(c,d){if(!tt)throw Error(o(363));var v=0,w=[];c=[By(c),0];for(var b=0;b<c.length;){var I=c[b++],W=c[b++],ae=d[W];if((I.tag!==5||!D(I))&&(zy(I,ae)&&(w.push(Vy(ae)),W++,W>v&&(v=W)),W<d.length))for(I=I.child;I!==null;)c.push(I,W),I=I.sibling}if(v<d.length){for(c=[];v<d.length;v++)c.push(Vy(d[v]));return`findAllNodes was able to match part of the selector:
  `+(w.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return ee(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:eU,findFiberByHostInstance:c.findFiberByHostInstance||tU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)c=!0;else{try{Zf=d.inject(c),Is=d}catch{}c=!!d.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,d,v,w){if(!tt)throw Error(o(363));c=Hy(c,d);var b=Ae(c,v,w).disconnect;return{disconnect:function(){b()}}},t.registerMutableSourceForHydration=function(c,d){var v=d._getVersion;v=v(d._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[d,v]:c.mutableSourceEagerHydrationData.push(d,v)},t.runWithPriority=function(c,d){var v=cn;try{return cn=c,d()}finally{cn=v}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,d,v,w){var b=d.current,I=qi(),W=Bo(b);return v=Gb(v),d.context===null?d.context=v:d.pendingContext=v,d=ro(I,W),d.payload={element:c},w=w===void 0?null:w,w!==null&&(d.callback=w),Uo(b,d),c=Wr(b,W,I),c!==null&&ep(c,b,W),W},t};OD.exports=bq;var Tq=OD.exports;const Aq=CP(Tq);var BD={exports:{}},zD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,Y){var X=O.length;O.push(Y);e:for(;0<X;){var se=X-1>>>1,me=O[se];if(0<r(me,Y))O[se]=Y,O[X]=me,X=se;else break e}}function t(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var Y=O[0],X=O.pop();if(X!==Y){O[0]=X;e:for(var se=0,me=O.length,Re=me>>>1;se<Re;){var at=2*(se+1)-1,Ct=O[at],ue=at+1,Se=O[ue];if(0>r(Ct,X))ue<me&&0>r(Se,Ct)?(O[se]=Se,O[ue]=X,se=ue):(O[se]=Ct,O[at]=X,se=at);else if(ue<me&&0>r(Se,X))O[se]=Se,O[ue]=X,se=ue;else break e}}return Y}function r(O,Y){var X=O.sortIndex-Y.sortIndex;return X!==0?X:O.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,m=!1,y=!1,S=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(O){for(var Y=t(u);Y!==null;){if(Y.callback===null)i(u);else if(Y.startTime<=O)i(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(u)}}function E(O){if(S=!1,M(O),!y)if(t(l)!==null)y=!0,ee(A);else{var Y=t(u);Y!==null&&Q(E,Y.startTime-O)}}function A(O,Y){y=!1,S&&(S=!1,g(N),N=-1),m=!0;var X=p;try{for(M(Y),f=t(l);f!==null&&(!(f.expirationTime>Y)||O&&!k());){var se=f.callback;if(typeof se=="function"){f.callback=null,p=f.priorityLevel;var me=se(f.expirationTime<=Y);Y=n.unstable_now(),typeof me=="function"?f.callback=me:f===t(l)&&i(l),M(Y)}else i(l);f=t(l)}if(f!==null)var Re=!0;else{var at=t(u);at!==null&&Q(E,at.startTime-Y),Re=!1}return Re}finally{f=null,p=X,m=!1}}var P=!1,L=null,N=-1,C=5,R=-1;function k(){return!(n.unstable_now()-R<C)}function H(){if(L!==null){var O=n.unstable_now();R=O;var Y=!0;try{Y=L(!0,O)}finally{Y?$():(P=!1,L=null)}}else P=!1}var $;if(typeof _=="function")$=function(){_(H)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,le=ne.port2;ne.port1.onmessage=H,$=function(){le.postMessage(null)}}else $=function(){x(H,0)};function ee(O){L=O,P||(P=!0,$())}function Q(O,Y){N=x(function(){O(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,ee(A))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var X=p;p=Y;try{return O()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,Y){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var X=p;p=O;try{return Y()}finally{p=X}},n.unstable_scheduleCallback=function(O,Y,X){var se=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?se+X:se):X=se,O){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=X+me,O={id:h++,callback:Y,priorityLevel:O,startTime:X,expirationTime:me,sortIndex:-1},X>se?(O.sortIndex=X,e(u,O),t(l)===null&&O===t(u)&&(S?(g(N),N=-1):S=!0,Q(E,X-se))):(O.sortIndex=me,e(l,O),y||m||(y=!0,ee(A))),O},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(O){var Y=p;return function(){var X=p;p=Y;try{return O.apply(this,arguments)}finally{p=X}}}})(zD);BD.exports=zD;var cP=BD.exports;const rE={},VD=n=>void Object.assign(rE,n);function Cq(n,e){function t(h,{args:f=[],attach:p,...m},y){let S=`${h[0].toUpperCase()}${h.slice(1)}`,x;if(h==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;x=Gc(g,{type:h,root:y,attach:p,primitive:!0})}else{const g=rE[S];if(!g)throw new Error(`R3F: ${S} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");x=Gc(new g(...f),{type:h,root:y,attach:p,memoizedProps:{args:f}})}return x.__r3f.attach===void 0&&(x.isBufferGeometry?x.__r3f.attach="geometry":x.isMaterial&&(x.__r3f.attach="material")),S!=="inject"&&z_(x,m),x}function i(h,f){let p=!1;if(f){var m,y;(m=f.__r3f)!=null&&m.attach?B_(h,f,f.__r3f.attach):f.isObject3D&&h.isObject3D&&(h.add(f),p=!0),p||(y=h.__r3f)==null||y.objects.push(f),f.__r3f||Gc(f,{}),f.__r3f.parent=h,DS(f),Wc(f)}}function r(h,f,p){let m=!1;if(f){var y,S;if((y=f.__r3f)!=null&&y.attach)B_(h,f,f.__r3f.attach);else if(f.isObject3D&&h.isObject3D){f.parent=h,f.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:f});const x=h.children.filter(_=>_!==f),g=x.indexOf(p);h.children=[...x.slice(0,g),f,...x.slice(g)],m=!0}m||(S=h.__r3f)==null||S.objects.push(f),f.__r3f||Gc(f,{}),f.__r3f.parent=h,DS(f),Wc(f)}}function s(h,f,p=!1){h&&[...h].forEach(m=>o(f,m,p))}function o(h,f,p){if(f){var m,y,S;if(f.__r3f&&(f.__r3f.parent=null),(m=h.__r3f)!=null&&m.objects&&(h.__r3f.objects=h.__r3f.objects.filter(E=>E!==f)),(y=f.__r3f)!=null&&y.attach)pP(h,f,f.__r3f.attach);else if(f.isObject3D&&h.isObject3D){var x;h.remove(f),(x=f.__r3f)!=null&&x.root&&Uq(Sg(f),f)}const _=(S=f.__r3f)==null?void 0:S.primitive,M=!_&&(p===void 0?f.dispose!==null:p);if(!_){var g;s((g=f.__r3f)==null?void 0:g.objects,f,M),s(f.children,f,M)}if(delete f.__r3f,M&&f.dispose&&f.type!=="Scene"){const E=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?cP.unstable_scheduleCallback(cP.unstable_IdlePriority,E):E()}Wc(h)}}function a(h,f,p,m){var y;const S=(y=h.__r3f)==null?void 0:y.parent;if(!S)return;const x=t(f,p,h.__r3f.root);if(h.children){for(const g of h.children)g.__r3f&&i(x,g);h.children=h.children.filter(g=>!g.__r3f)}h.__r3f.objects.forEach(g=>i(x,g)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(S,h),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(S,x),x.raycast&&x.__r3f.eventCount&&Sg(x).getState().internal.interaction.push(x),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=x,g.ref&&(typeof g.ref=="function"?g.ref(x):g.ref.current=x))})}const l=()=>{};return{reconciler:Aq({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,f)=>{if(!f)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,i(p,f))},removeChildFromContainer:(h,f)=>{f&&o(h.getState().scene,f)},insertInContainerBefore:(h,f,p)=>{if(!f||!p)return;const m=h.getState().scene;m.__r3f&&r(m,f,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var f;return!!((f=h==null?void 0:h.__r3f)!=null?f:{}).handlers},prepareUpdate(h,f,p,m){var y;if(((y=h==null?void 0:h.__r3f)!=null?y:{}).primitive&&m.object&&m.object!==h)return[!0];{const{args:x=[],children:g,..._}=m,{args:M=[],children:E,...A}=p;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((L,N)=>L!==M[N]))return[!0];const P=qD(h,_,A,!0);return P.changes.length?[!1,P]:null}},commitUpdate(h,[f,p],m,y,S,x){f?a(h,m,S,x):z_(h,p)},commitMount(h,f,p,m){var y;const S=(y=h.__r3f)!=null?y:{};h.raycast&&S.handlers&&S.eventCount&&Sg(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>Gc(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var f;const{attach:p,parent:m}=(f=h.__r3f)!=null?f:{};p&&m&&pP(m,h,p),h.isObject3D&&(h.visible=!1),Wc(h)},unhideInstance(h,f){var p;const{attach:m,parent:y}=(p=h.__r3f)!=null?p:{};m&&y&&B_(y,h,m),(h.isObject3D&&f.visible==null||f.visible)&&(h.visible=!0),Wc(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():uu.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Sn.fun(performance.now)?performance.now:Sn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Sn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Sn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:z_}}var uP,dP;const O_=n=>"colorSpace"in n||"outputColorSpace"in n,HD=()=>{var n;return(n=rE.ColorManagement)!=null?n:null},GD=n=>n&&n.isOrthographicCamera,Pq=n=>n&&n.hasOwnProperty("current"),Yf=typeof window<"u"&&((uP=window.document)!=null&&uP.createElement||((dP=window.navigator)==null?void 0:dP.product)==="ReactNative")?j.useLayoutEffect:j.useEffect;function WD(n){const e=j.useRef(n);return Yf(()=>void(e.current=n),[n]),e}function Rq({set:n}){return Yf(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class jD extends j.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}jD.getDerivedStateFromError=()=>({error:!0});const XD="__default",hP=new Map,Iq=n=>n&&!!n.memoized&&!!n.changes;function YD(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Xd=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Sg(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Sn={obj:n=>n===Object(n)&&!Sn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Sn.str(n)||Sn.num(n)||Sn.boo(n))return n===e;const s=Sn.obj(n);if(s&&i==="reference")return n===e;const o=Sn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!Sn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(Sn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Nq(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function Lq(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Gc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function LS(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const fP=/-\d+$/;function B_(n,e,t){if(Sn.str(t)){if(fP.test(t)){const s=t.replace(fP,""),{target:o,key:a}=LS(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=LS(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function pP(n,e,t){var i,r;if(Sn.str(t)){const{target:s,key:o}=LS(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function qD(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},u=!1){const h=n.__r3f,f=Object.entries(r),p=[];if(u){const y=Object.keys(l);for(let S=0;S<y.length;S++)r.hasOwnProperty(y[S])||f.unshift([y[S],XD+"remove"])}f.forEach(([y,S])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&y==="object"||Sn.equ(S,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return p.push([y,S,!0,[]]);let g=[];y.includes("-")&&(g=y.split("-")),p.push([y,S,!1,g]);for(const _ in r){const M=r[_];_.startsWith(`${y}-`)&&p.push([_,M,!1,_.split("-")])}});const m={...r};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(m.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(m.attach=h.memoizedProps.attach),{memoized:m,changes:p}}const Dq=typeof process<"u"&&!1;function z_(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=Iq(e)?e:qD(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let p=0;p<a.length;p++){let[m,y,S,x]=a[p];if(O_(n)){const E="srgb",A="srgb-linear";m==="encoding"?(m="colorSpace",y=y===3001?E:A):m==="outputEncoding"&&(m="outputColorSpace",y=y===3001?E:A)}let g=n,_=g[m];if(x.length&&(_=x.reduce((M,E)=>M[E],n),!(_&&_.set))){const[M,...E]=x.reverse();g=E.reverse().reduce((A,P)=>A[P],n),m=M}if(y===XD+"remove")if(g.constructor){let M=hP.get(g.constructor);M||(M=new g.constructor,hP.set(g.constructor,M)),y=M[m]}else y=0;if(S&&i)y?i.handlers[m]=y:delete i.handlers[m],i.eventCount=Object.keys(i.handlers).length;else if(_&&_.set&&(_.copy||_ instanceof Ol)){if(Array.isArray(y))_.fromArray?_.fromArray(y):_.set(...y);else if(_.copy&&y&&y.constructor&&(Dq?_.constructor.name===y.constructor.name:_.constructor===y.constructor))_.copy(y);else if(y!==void 0){var u;const M=(u=_)==null?void 0:u.isColor;!M&&_.setScalar?_.setScalar(y):_ instanceof Ol&&y instanceof Ol?_.mask=y.mask:_.set(y),!HD()&&s&&!s.linear&&M&&_.convertSRGBToLinear()}}else{var h;if(g[m]=y,(h=g[m])!=null&&h.isTexture&&g[m].format===Kn&&g[m].type===_i&&s){const M=g[m];O_(M)&&O_(s.gl)?M.colorSpace=s.gl.outputColorSpace:M.encoding=s.gl.outputEncoding}}Wc(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const p=Sg(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),i.eventCount&&p.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&DS(n),n}function Wc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function DS(n){n.onUpdate==null||n.onUpdate(n)}function ZD(n,e){n.manual||(GD(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Zm(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Fq(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return uu.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return uu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return uu.ContinuousEventPriority;default:return uu.DefaultEventPriority}}function $D(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function Uq(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{$D(t.capturedMap,e,i,r)})}function kq(n){function e(l){const{internal:u}=n.getState(),h=l.offsetX-u.initialClick[0],f=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+f*f))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var f;return(f=u.__r3f)==null?void 0:f.handlers["onPointer"+h]}))}function i(l,u){const h=n.getState(),f=new Set,p=[],m=u?u(h.internal.interaction):h.internal.interaction;for(let g=0;g<m.length;g++){const _=Xd(m[g]);_&&(_.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function y(g){const _=Xd(g);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var M;_.events.compute==null||_.events.compute(l,_,(M=_.previousRoot)==null?void 0:M.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(g,!0):[]}let S=m.flatMap(y).sort((g,_)=>{const M=Xd(g.object),E=Xd(_.object);return!M||!E?g.distance-_.distance:E.events.priority-M.events.priority||g.distance-_.distance}).filter(g=>{const _=Zm(g);return f.has(_)?!1:(f.add(_),!0)});h.events.filter&&(S=h.events.filter(S,h));for(const g of S){let _=g.object;for(;_;){var x;(x=_.__r3f)!=null&&x.eventCount&&p.push({...g,eventObject:_}),_=_.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let g of h.internal.capturedMap.get(l.pointerId).values())f.has(Zm(g.intersection))||p.push(g.intersection);return p}function r(l,u,h,f){const p=n.getState();if(l.length){const m={stopped:!1};for(const y of l){const S=Xd(y.object)||p,{raycaster:x,pointer:g,camera:_,internal:M}=S,E=new V(g.x,g.y,0).unproject(_),A=R=>{var k,H;return(k=(H=M.capturedMap.get(R))==null?void 0:H.has(y.eventObject))!=null?k:!1},P=R=>{const k={intersection:y,target:u.target};M.capturedMap.has(R)?M.capturedMap.get(R).set(y.eventObject,k):M.capturedMap.set(R,new Map([[y.eventObject,k]])),u.target.setPointerCapture(R)},L=R=>{const k=M.capturedMap.get(R);k&&$D(M.capturedMap,y.eventObject,k,R)};let N={};for(let R in u){let k=u[R];typeof k!="function"&&(N[R]=k)}let C={...y,...N,pointer:g,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:E,ray:x.ray,camera:_,stopPropagation(){const R="pointerId"in u&&M.capturedMap.get(u.pointerId);if((!R||R.has(y.eventObject))&&(C.stopped=m.stopped=!0,M.hovered.size&&Array.from(M.hovered.values()).find(k=>k.eventObject===y.eventObject))){const k=l.slice(0,l.indexOf(y));s([...k,y])}},target:{hasPointerCapture:A,setPointerCapture:P,releasePointerCapture:L},currentTarget:{hasPointerCapture:A,setPointerCapture:P,releasePointerCapture:L},nativeEvent:u};if(f(C),m.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const h of u.hovered.values())if(!l.length||!l.find(f=>f.object===h.object&&f.index===h.index&&f.instanceId===h.instanceId)){const p=h.eventObject.__r3f,m=p==null?void 0:p.handlers;if(u.hovered.delete(Zm(h)),p!=null&&p.eventCount){const y={...h,intersections:l};m.onPointerOut==null||m.onPointerOut(y),m.onPointerLeave==null||m.onPointerLeave(y)}}}function o(l,u){for(let h=0;h<u.length;h++){const f=u[h].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:h}=n.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),s([]))})}}return function(h){const{onPointerMissed:f,internal:p}=n.getState();p.lastEvent.current=h;const m=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=i(h,m?t:void 0),g=y?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=x.map(M=>M.eventObject)),y&&!x.length&&g<=2&&(o(h,p.interaction),f&&f(h)),m&&s(x);function _(M){const E=M.eventObject,A=E.__r3f,P=A==null?void 0:A.handlers;if(A!=null&&A.eventCount)if(m){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const L=Zm(M),N=p.hovered.get(L);N?N.stopped&&M.stopPropagation():(p.hovered.set(L,M),P.onPointerOver==null||P.onPointerOver(M),P.onPointerEnter==null||P.onPointerEnter(M))}P.onPointerMove==null||P.onPointerMove(M)}else{const L=P[l];L?(!y||p.initialHits.includes(E))&&(o(h,p.interaction.filter(N=>!p.initialHits.includes(N))),L(M)):y&&p.initialHits.includes(E)&&o(h,p.interaction.filter(N=>!p.initialHits.includes(N)))}}r(x,h,g,_)}}return{handlePointer:a}}const Oq=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],KD=n=>!!(n!=null&&n.render),sE=j.createContext(null),Bq=(n,e)=>{const t=FD((a,l)=>{const u=new V,h=new V,f=new V;function p(g=l().camera,_=h,M=l().size){const{width:E,height:A,top:P,left:L}=M,N=E/A;_.isVector3?f.copy(_):f.set(..._);const C=g.getWorldPosition(u).distanceTo(f);if(GD(g))return{width:E/g.zoom,height:A/g.zoom,top:P,left:L,factor:1,distance:C,aspect:N};{const R=g.fov*Math.PI/180,k=2*Math.tan(R/2)*C,H=k*(E/A);return{width:H,height:k,top:P,left:L,factor:E/H,distance:C,aspect:N}}}let m;const y=g=>a(_=>({performance:{..._.performance,current:g}})),S=new Ee;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,_)=>e(g,_,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new KM,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&y(g.performance.min),m=setTimeout(()=>y(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(_=>({..._,events:{..._.events,...g}})),setSize:(g,_,M,E,A)=>{const P=l().camera,L={width:g,height:_,top:E||0,left:A||0,updateStyle:M};a(N=>({size:L,viewport:{...N.viewport,...p(P,h,L)}}))},setDpr:g=>a(_=>{const M=YD(g);return{viewport:{..._.viewport,dpr:M,initialDpr:_.viewport.initialDpr||M}}}),setFrameloop:(g="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,g!=="never"&&(_.start(),_.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:j.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,_,M)=>{const E=l().internal;return E.priority=E.priority+(_>0?1:0),E.subscribers.push({ref:g,priority:_,store:M}),E.subscribers=E.subscribers.sort((A,P)=>A.priority-P.priority),()=>{const A=l().internal;A!=null&&A.subscribers&&(A.priority=A.priority-(_>0?1:0),A.subscribers=A.subscribers.filter(P=>P.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:h,set:f}=t.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==s){var p;r=l,s=u.dpr,ZD(a,l),h.setPixelRatio(u.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let $m,zq=new Set,Vq=new Set,Hq=new Set;function V_(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Yd(n,e){switch(n){case"before":return V_(zq,e);case"after":return V_(Vq,e);case"tail":return V_(Hq,e)}}let H_,G_;function W_(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),H_=e.internal.subscribers,$m=0;$m<H_.length;$m++)G_=H_[$m],G_.ref.current(G_.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Gq(n){let e=!1,t=!1,i,r,s;function o(u){r=requestAnimationFrame(o),e=!0,i=0,Yd("before",u),t=!0;for(const f of n.values()){var h;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((h=s.gl.xr)!=null&&h.isPresenting)&&(i+=W_(u,s))}if(t=!1,Yd("after",u),i===0)return Yd("tail",u),e=!1,cancelAnimationFrame(r)}function a(u,h=1){var f;if(!u)return n.forEach(p=>a(p.store.getState(),h));(f=u.gl.xr)!=null&&f.isPresenting||!u.internal.active||u.frameloop==="never"||(h>1?u.internal.frames=Math.min(60,u.internal.frames+h):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,h=!0,f,p){if(h&&Yd("before",u),f)W_(u,f,p);else for(const m of n.values())W_(u,m.store.getState());h&&Yd("after",u)}return{loop:o,invalidate:a,advance:l}}function oE(){const n=j.useContext(sE);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function xi(n=t=>t,e){return oE()(n,e)}function Jv(n,e=0){const t=oE(),i=t.getState().internal.subscribe,r=WD(n);return Yf(()=>i(r,e,t),[e,i,t]),null}const mP=new WeakMap;function JD(n,e){return function(t,...i){let r=mP.get(t);return r||(r=new t,mP.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,Nq(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function Hu(n,e,t,i){const r=Array.isArray(e)?e:[e],s=_q(JD(t,i),[n,...r],{equal:Sn.equ});return Array.isArray(e)?s:s[0]}Hu.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return Sq(JD(t),[n,...i])};Hu.clear=function(n,e){const t=Array.isArray(e)?e:[e];return wq([n,...t])};const Gu=new Map,{invalidate:gP,advance:vP}=Gq(Gu),{reconciler:vf,applyProps:ia}=Cq(Gu,Fq),Hc={objects:"shallow",strict:!1},Wq=(n,e)=>{const t=typeof n=="function"?n(e):n;return KD(t)?t:new iE({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function jq(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Xq(n){const e=Gu.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||Bq(gP,vP),o=t||vf.createContainer(s,uu.ConcurrentRoot,null,!1,null,"",r,null);e||Gu.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(h={}){let{gl:f,size:p,scene:m,events:y,onCreated:S,shadows:x=!1,linear:g=!1,flat:_=!1,legacy:M=!1,orthographic:E=!1,frameloop:A="always",dpr:P=[1,2],performance:L,raycaster:N,camera:C,onPointerMissed:R}=h,k=s.getState(),H=k.gl;k.gl||k.set({gl:H=Wq(f,n)});let $=k.raycaster;$||k.set({raycaster:$=new tE});const{params:ne,...le}=N||{};if(Sn.equ(le,$,Hc)||ia($,{...le}),Sn.equ(ne,$.params,Hc)||ia($,{params:{...$.params,...ne}}),!k.camera||k.camera===u&&!Sn.equ(u,C,Hc)){u=C;const X=C instanceof kf,se=X?C:E?new Ks(0,0,0,0,.1,1e3):new Zn(75,0,.1,1e3);X||(se.position.z=5,C&&(ia(se,C),("aspect"in C||"left"in C||"right"in C||"bottom"in C||"top"in C)&&(se.manual=!0,se.updateProjectionMatrix())),!k.camera&&!(C!=null&&C.rotation)&&se.lookAt(0,0,0)),k.set({camera:se}),$.camera=se}if(!k.scene){let X;m!=null&&m.isScene?X=m:(X=new Bf,m&&ia(X,m)),k.set({scene:Gc(X)})}if(!k.xr){var ee;const X=(Re,at)=>{const Ct=s.getState();Ct.frameloop!=="never"&&vP(Re,!0,Ct,at)},se=()=>{const Re=s.getState();Re.gl.xr.enabled=Re.gl.xr.isPresenting,Re.gl.xr.setAnimationLoop(Re.gl.xr.isPresenting?X:null),Re.gl.xr.isPresenting||gP(Re)},me={connect(){const Re=s.getState().gl;Re.xr.addEventListener("sessionstart",se),Re.xr.addEventListener("sessionend",se)},disconnect(){const Re=s.getState().gl;Re.xr.removeEventListener("sessionstart",se),Re.xr.removeEventListener("sessionend",se)}};typeof((ee=H.xr)==null?void 0:ee.addEventListener)=="function"&&me.connect(),k.set({xr:me})}if(H.shadowMap){const X=H.shadowMap.enabled,se=H.shadowMap.type;if(H.shadowMap.enabled=!!x,Sn.boo(x))H.shadowMap.type=xh;else if(Sn.str(x)){var Q;const me={basic:XN,percentage:_u,soft:xh,variance:Tl};H.shadowMap.type=(Q=me[x])!=null?Q:xh}else Sn.obj(x)&&Object.assign(H.shadowMap,x);(X!==H.shadowMap.enabled||se!==H.shadowMap.type)&&(H.shadowMap.needsUpdate=!0)}const O=HD();O&&("enabled"in O?O.enabled=!M:"legacyMode"in O&&(O.legacyMode=M)),l||ia(H,{outputEncoding:g?3e3:3001,toneMapping:_?ns:vv}),k.legacy!==M&&k.set(()=>({legacy:M})),k.linear!==g&&k.set(()=>({linear:g})),k.flat!==_&&k.set(()=>({flat:_})),f&&!Sn.fun(f)&&!KD(f)&&!Sn.equ(f,H,Hc)&&ia(H,f),y&&!k.events.handlers&&k.set({events:y(s)});const Y=jq(n,p);return Sn.equ(Y,k.size,Hc)||k.setSize(Y.width,Y.height,Y.updateStyle,Y.top,Y.left),P&&k.viewport.dpr!==YD(P)&&k.setDpr(P),k.frameloop!==A&&k.setFrameloop(A),k.onPointerMissed||k.set({onPointerMissed:R}),L&&!Sn.equ(L,k.performance,Hc)&&k.set(X=>({performance:{...X.performance,...L}})),a=S,l=!0,this},render(h){return l||this.configure(),vf.updateContainer(T.jsx(Yq,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){QD(n)}}}function Yq({store:n,children:e,onCreated:t,rootElement:i}){return Yf(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),T.jsx(sE.Provider,{value:n,children:e})}function QD(n,e){const t=Gu.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),vf.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),Lq(r),Gu.delete(n)}catch{}},500)})}}function qq(n,e,t){return T.jsx(Zq,{children:n,container:e,state:t},e.uuid)}function Zq({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=oE(),[a]=j.useState(()=>new tE),[l]=j.useState(()=>new Ee),u=j.useCallback((f,p)=>{const m={...f};Object.keys(f).forEach(S=>{(Oq.includes(S)||f[S]!==p[S]&&p[S])&&delete m[S]});let y;if(p&&r){const S=p.camera;y=f.viewport.getCurrentViewport(S,new V,r),S!==f.camera&&ZD(S,r)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...p==null?void 0:p.events,...i},size:{...f.size,...r},viewport:{...f.viewport,...y},...s}},[n]),[h]=j.useState(()=>{const f=o.getState();return FD((m,y)=>({...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...i},size:{...f.size,...r},...s,set:m,get:y,setEvents:S=>m(x=>({...x,events:{...x.events,...S}}))}))});return j.useEffect(()=>{const f=o.subscribe(p=>h.setState(m=>u(p,m)));return()=>{f()}},[u]),j.useEffect(()=>{h.setState(f=>u(o.getState(),f))},[u]),j.useEffect(()=>()=>{h.destroy()},[]),T.jsx(T.Fragment,{children:vf.createPortal(T.jsx(sE.Provider,{value:h,children:e}),h,null)})}vf.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:j.version});const j_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function $q(n){const{handlePointer:e}=kq(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(j_).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,u]=j_[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=j_[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function yP(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function Kq({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=j.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=j.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,h=j.useRef(!1);j.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[f,p,m]=j.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:_,top:M,width:E,height:A,bottom:P,right:L,x:N,y:C}=a.current.element.getBoundingClientRect(),R={left:_,top:M,width:E,height:A,bottom:P,right:L,x:N,y:C};a.current.element instanceof HTMLElement&&i&&(R.height=a.current.element.offsetHeight,R.width=a.current.element.offsetWidth),Object.freeze(R),h.current&&!tZ(a.current.lastBounds,R)&&o(a.current.lastBounds=R)};return[g,u?yP(g,u):g,l?yP(g,l):g]},[o,i,l,u]);function y(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function S(){a.current.element&&(a.current.resizeObserver=new r(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const x=g=>{!g||g===a.current.element||(y(),a.current.element=g,a.current.scrollContainers=eF(g),S())};return Qq(m,!!e),Jq(p),j.useEffect(()=>{y(),S()},[e,m,p]),j.useEffect(()=>y,[]),[x,s,f]}function Jq(n){j.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Qq(n,e){j.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function eF(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...eF(n.parentElement)]}const eZ=["x","y","top","bottom","left","right","width","height"],tZ=(n,e)=>eZ.every(t=>n[t]===e[t]);var nZ=Object.defineProperty,iZ=Object.defineProperties,rZ=Object.getOwnPropertyDescriptors,xP=Object.getOwnPropertySymbols,sZ=Object.prototype.hasOwnProperty,oZ=Object.prototype.propertyIsEnumerable,_P=(n,e,t)=>e in n?nZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,SP=(n,e)=>{for(var t in e||(e={}))sZ.call(e,t)&&_P(n,t,e[t]);if(xP)for(var t of xP(e))oZ.call(e,t)&&_P(n,t,e[t]);return n},aZ=(n,e)=>iZ(n,rZ(e)),wP,MP;typeof window<"u"&&((wP=window.document)!=null&&wP.createElement||((MP=window.navigator)==null?void 0:MP.product)==="ReactNative")?j.useLayoutEffect:j.useEffect;function tF(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=tF(i,e,t);if(r)return r;i=i.sibling}}function nF(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const EP=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=EP;return}return EP.apply(this,arguments)};const aE=nF(j.createContext(null));class iF extends j.Component{render(){return j.createElement(aE.Provider,{value:this._reactInternals},this.props.children)}}function lZ(){const n=j.useContext(aE);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=j.useId();return j.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=tF(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function cZ(){const n=lZ(),[e]=j.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==aE&&!e.has(r)&&e.set(r,j.useContext(nF(r)))}t=t.return}return e}function uZ(){const n=cZ();return j.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>j.createElement(e,null,j.createElement(t.Provider,aZ(SP({},i),{value:n.get(t)}))),e=>j.createElement(iF,SP({},e))),[n])}const dZ=j.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=$q,eventSource:a,eventPrefix:l,shadows:u,linear:h,flat:f,legacy:p,orthographic:m,frameloop:y,dpr:S,performance:x,raycaster:g,camera:_,scene:M,onPointerMissed:E,onCreated:A,...P},L){j.useMemo(()=>VD(gq),[]);const N=uZ(),[C,R]=Kq({scroll:!0,debounce:{scroll:50,resize:0},...i}),k=j.useRef(null),H=j.useRef(null);j.useImperativeHandle(L,()=>k.current);const $=WD(E),[ne,le]=j.useState(!1),[ee,Q]=j.useState(!1);if(ne)throw ne;if(ee)throw ee;const O=j.useRef(null);Yf(()=>{const X=k.current;R.width>0&&R.height>0&&X&&(O.current||(O.current=Xq(X)),O.current.configure({gl:s,events:o,shadows:u,linear:h,flat:f,legacy:p,orthographic:m,frameloop:y,dpr:S,performance:x,raycaster:g,camera:_,scene:M,size:R,onPointerMissed:(...se)=>$.current==null?void 0:$.current(...se),onCreated:se=>{se.events.connect==null||se.events.connect(a?Pq(a)?a.current:a:H.current),l&&se.setEvents({compute:(me,Re)=>{const at=me[l+"X"],Ct=me[l+"Y"];Re.pointer.set(at/Re.size.width*2-1,-(Ct/Re.size.height)*2+1),Re.raycaster.setFromCamera(Re.pointer,Re.camera)}}),A==null||A(se)}}),O.current.render(T.jsx(N,{children:T.jsx(jD,{set:Q,children:T.jsx(j.Suspense,{fallback:T.jsx(Rq,{set:le}),children:e??null})})})))}),j.useEffect(()=>{const X=k.current;if(X)return()=>QD(X)},[]);const Y=a?"none":"auto";return T.jsx("div",{ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Y,...r},...P,children:T.jsx("div",{ref:C,style:{width:"100%",height:"100%"},children:T.jsx("canvas",{ref:k,style:{display:"block"},children:t})})})}),hZ=j.forwardRef(function(e,t){return T.jsx(iF,{children:T.jsx(dZ,{...e,ref:t})})});function yf(){return yf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},yf.apply(null,arguments)}const rF=parseInt(Nf.replace(/\D+/g,""));var Kr=Uint8Array,pa=Uint16Array,FS=Uint32Array,sF=new Kr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),oF=new Kr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fZ=new Kr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),aF=function(n,e){for(var t=new pa(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new FS(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},lF=aF(sF,2),cF=lF[0],pZ=lF[1];cF[28]=258,pZ[258]=28;var mZ=aF(oF,0),gZ=mZ[0],US=new pa(32768);for(var bn=0;bn<32768;++bn){var Qo=(bn&43690)>>>1|(bn&21845)<<1;Qo=(Qo&52428)>>>2|(Qo&13107)<<2,Qo=(Qo&61680)>>>4|(Qo&3855)<<4,US[bn]=((Qo&65280)>>>8|(Qo&255)<<8)>>>1}var Ch=function(n,e,t){for(var i=n.length,r=0,s=new pa(e);r<i;++r)++s[n[r]-1];var o=new pa(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new pa(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var u=r<<4|n[r],h=e-n[r],f=o[n[r]-1]++<<h,p=f|(1<<h)-1;f<=p;++f)a[US[f]>>>l]=u}else for(a=new pa(i),r=0;r<i;++r)n[r]&&(a[r]=US[o[n[r]-1]++]>>>15-n[r]);return a},qf=new Kr(288);for(var bn=0;bn<144;++bn)qf[bn]=8;for(var bn=144;bn<256;++bn)qf[bn]=9;for(var bn=256;bn<280;++bn)qf[bn]=7;for(var bn=280;bn<288;++bn)qf[bn]=8;var uF=new Kr(32);for(var bn=0;bn<32;++bn)uF[bn]=5;var vZ=Ch(qf,9,1),yZ=Ch(uF,5,1),X_=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},gs=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},Y_=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},xZ=function(n){return(n/8|0)+(n&7&&1)},_Z=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof pa?pa:n instanceof FS?FS:Kr)(t-e);return i.set(n.subarray(e,t)),i},SZ=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new Kr(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new Kr(i*3));var o=function(ue){var Se=e.length;if(ue>Se){var et=new Kr(Math.max(Se*2,ue));et.set(e),e=et}},a=t.f||0,l=t.p||0,u=t.b||0,h=t.l,f=t.d,p=t.m,m=t.n,y=i*8;do{if(!h){t.f=a=gs(n,l,1);var S=gs(n,l+1,3);if(l+=3,S)if(S==1)h=vZ,f=yZ,p=9,m=5;else if(S==2){var M=gs(n,l,31)+257,E=gs(n,l+10,15)+4,A=M+gs(n,l+5,31)+1;l+=14;for(var P=new Kr(A),L=new Kr(19),N=0;N<E;++N)L[fZ[N]]=gs(n,l+N*3,7);l+=E*3;for(var C=X_(L),R=(1<<C)-1,k=Ch(L,C,1),N=0;N<A;){var H=k[gs(n,l,R)];l+=H&15;var x=H>>>4;if(x<16)P[N++]=x;else{var $=0,ne=0;for(x==16?(ne=3+gs(n,l,3),l+=2,$=P[N-1]):x==17?(ne=3+gs(n,l,7),l+=3):x==18&&(ne=11+gs(n,l,127),l+=7);ne--;)P[N++]=$}}var le=P.subarray(0,M),ee=P.subarray(M);p=X_(le),m=X_(ee),h=Ch(le,p,1),f=Ch(ee,m,1)}else throw"invalid block type";else{var x=xZ(l)+4,g=n[x-4]|n[x-3]<<8,_=x+g;if(_>i){if(s)throw"unexpected EOF";break}r&&o(u+g),e.set(n.subarray(x,_),u),t.b=u+=g,t.p=l=_*8;continue}if(l>y){if(s)throw"unexpected EOF";break}}r&&o(u+131072);for(var Q=(1<<p)-1,O=(1<<m)-1,Y=l;;Y=l){var $=h[Y_(n,l)&Q],X=$>>>4;if(l+=$&15,l>y){if(s)throw"unexpected EOF";break}if(!$)throw"invalid length/literal";if(X<256)e[u++]=X;else if(X==256){Y=l,h=null;break}else{var se=X-254;if(X>264){var N=X-257,me=sF[N];se=gs(n,l,(1<<me)-1)+cF[N],l+=me}var Re=f[Y_(n,l)&O],at=Re>>>4;if(!Re)throw"invalid distance";l+=Re&15;var ee=gZ[at];if(at>3){var me=oF[at];ee+=Y_(n,l)&(1<<me)-1,l+=me}if(l>y){if(s)throw"unexpected EOF";break}r&&o(u+131072);for(var Ct=u+se;u<Ct;u+=4)e[u]=e[u-ee],e[u+1]=e[u+1-ee],e[u+2]=e[u+2-ee],e[u+3]=e[u+3-ee];u=Ct}}t.l=h,t.p=Y,t.b=u,h&&(a=1,t.m=p,t.d=f,t.n=m)}while(!a);return u==e.length?e:_Z(e,0,u)},wZ=new Kr(0),MZ=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Km(n,e){return SZ((MZ(n),n.subarray(2,-4)),e)}var EZ=typeof TextDecoder<"u"&&new TextDecoder,bZ=0;try{EZ.decode(wZ,{stream:!0}),bZ=1}catch{}const TZ=n=>n&&n.isCubeTexture;class AZ extends Bn{constructor(e,t){var i,r;const s=TZ(e),a=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(a)),u=Math.pow(2,l),h=3*Math.max(u,16*7),f=4*u,p=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/h}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,y=p.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${rF>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,S={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},x=new Hf(1,16),g=new rr({uniforms:S,fragmentShader:y,vertexShader:m,side:ws});super(x,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var CZ=Object.defineProperty,PZ=(n,e,t)=>e in n?CZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,RZ=(n,e,t)=>(PZ(n,e+"",t),t);class IZ{constructor(){RZ(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var NZ=Object.defineProperty,LZ=(n,e,t)=>e in n?NZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Lt=(n,e,t)=>(LZ(n,typeof e!="symbol"?e+"":e,t),t);const Jm=new tc,bP=new xo,DZ=Math.cos(70*(Math.PI/180)),TP=(n,e)=>(n%e+e)%e;let FZ=class extends IZ{constructor(e,t){super(),Lt(this,"object"),Lt(this,"domElement"),Lt(this,"enabled",!0),Lt(this,"target",new V),Lt(this,"minDistance",0),Lt(this,"maxDistance",1/0),Lt(this,"minZoom",0),Lt(this,"maxZoom",1/0),Lt(this,"minPolarAngle",0),Lt(this,"maxPolarAngle",Math.PI),Lt(this,"minAzimuthAngle",-1/0),Lt(this,"maxAzimuthAngle",1/0),Lt(this,"enableDamping",!1),Lt(this,"dampingFactor",.05),Lt(this,"enableZoom",!0),Lt(this,"zoomSpeed",1),Lt(this,"enableRotate",!0),Lt(this,"rotateSpeed",1),Lt(this,"enablePan",!0),Lt(this,"panSpeed",1),Lt(this,"screenSpacePanning",!0),Lt(this,"keyPanSpeed",7),Lt(this,"zoomToCursor",!1),Lt(this,"autoRotate",!1),Lt(this,"autoRotateSpeed",2),Lt(this,"reverseOrbit",!1),Lt(this,"reverseHorizontalOrbit",!1),Lt(this,"reverseVerticalOrbit",!1),Lt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Lt(this,"mouseButtons",{LEFT:vl.ROTATE,MIDDLE:vl.DOLLY,RIGHT:vl.PAN}),Lt(this,"touches",{ONE:yl.ROTATE,TWO:yl.DOLLY_PAN}),Lt(this,"target0"),Lt(this,"position0"),Lt(this,"zoom0"),Lt(this,"_domElementKeyEvents",null),Lt(this,"getPolarAngle"),Lt(this,"getAzimuthalAngle"),Lt(this,"setPolarAngle"),Lt(this,"setAzimuthalAngle"),Lt(this,"getDistance"),Lt(this,"getZoomScale"),Lt(this,"listenToKeyEvents"),Lt(this,"stopListenToKeyEvents"),Lt(this,"saveState"),Lt(this,"reset"),Lt(this,"update"),Lt(this,"connect"),Lt(this,"dispose"),Lt(this,"dollyIn"),Lt(this,"dollyOut"),Lt(this,"getScale"),Lt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=Z=>{let de=TP(Z,2*Math.PI),Le=h.phi;Le<0&&(Le+=2*Math.PI),de<0&&(de+=2*Math.PI);let K=Math.abs(de-Le);2*Math.PI-K<K&&(de<Le?de+=2*Math.PI:Le+=2*Math.PI),f.phi=de-Le,i.update()},this.setAzimuthalAngle=Z=>{let de=TP(Z,2*Math.PI),Le=h.theta;Le<0&&(Le+=2*Math.PI),de<0&&(de+=2*Math.PI);let K=Math.abs(de-Le);2*Math.PI-K<K&&(de<Le?de+=2*Math.PI:Le+=2*Math.PI),f.theta=de-Le,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=Z=>{Z.addEventListener("keydown",ve),this._domElementKeyEvents=Z},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ve),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const Z=new V,de=new V(0,1,0),Le=new Hi().setFromUnitVectors(e.up,de),K=Le.clone().invert(),he=new V,De=new Hi,Qe=2*Math.PI;return function(){const be=i.object.position;Le.setFromUnitVectors(e.up,de),K.copy(Le).invert(),Z.copy(be).sub(i.target),Z.applyQuaternion(Le),h.setFromVector3(Z),i.autoRotate&&l===a.NONE&&ne(H()),i.enableDamping?(h.theta+=f.theta*i.dampingFactor,h.phi+=f.phi*i.dampingFactor):(h.theta+=f.theta,h.phi+=f.phi);let ze=i.minAzimuthAngle,Et=i.maxAzimuthAngle;isFinite(ze)&&isFinite(Et)&&(ze<-Math.PI?ze+=Qe:ze>Math.PI&&(ze-=Qe),Et<-Math.PI?Et+=Qe:Et>Math.PI&&(Et-=Qe),ze<=Et?h.theta=Math.max(ze,Math.min(Et,h.theta)):h.theta=h.theta>(ze+Et)/2?Math.max(ze,h.theta):Math.min(Et,h.theta)),h.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,h.phi)),h.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.zoomToCursor&&C||i.object.isOrthographicCamera?h.radius=Re(h.radius):h.radius=Re(h.radius*p),Z.setFromSpherical(h),Z.applyQuaternion(K),be.copy(i.target).add(Z),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(f.theta*=1-i.dampingFactor,f.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(f.set(0,0,0),m.set(0,0,0));let tn=!1;if(i.zoomToCursor&&C){let Zt=null;if(i.object instanceof Zn&&i.object.isPerspectiveCamera){const jn=Z.length();Zt=Re(jn*p);const hi=jn-Zt;i.object.position.addScaledVector(L,hi),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const jn=new V(N.x,N.y,0);jn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),tn=!0;const hi=new V(N.x,N.y,0);hi.unproject(i.object),i.object.position.sub(hi).add(jn),i.object.updateMatrixWorld(),Zt=Z.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Zt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Zt).add(i.object.position):(Jm.origin.copy(i.object.position),Jm.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Jm.direction))<DZ?e.lookAt(i.target):(bP.setFromNormalAndCoplanarPoint(i.object.up,i.target),Jm.intersectPlane(bP,i.target))))}else i.object instanceof Ks&&i.object.isOrthographicCamera&&(tn=p!==1,tn&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,C=!1,tn||he.distanceToSquared(i.object.position)>u||8*(1-De.dot(i.object.quaternion))>u?(i.dispatchEvent(r),he.copy(i.object.position),De.copy(i.object.quaternion),tn=!1,!0):!1}})(),this.connect=Z=>{i.domElement=Z,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",ht),i.domElement.addEventListener("pointerdown",je),i.domElement.addEventListener("pointercancel",D),i.domElement.addEventListener("wheel",Ae)},this.dispose=()=>{var Z,de,Le,K,he,De;i.domElement&&(i.domElement.style.touchAction="auto"),(Z=i.domElement)==null||Z.removeEventListener("contextmenu",ht),(de=i.domElement)==null||de.removeEventListener("pointerdown",je),(Le=i.domElement)==null||Le.removeEventListener("pointercancel",D),(K=i.domElement)==null||K.removeEventListener("wheel",Ae),(he=i.domElement)==null||he.ownerDocument.removeEventListener("pointermove",z),(De=i.domElement)==null||De.ownerDocument.removeEventListener("pointerup",D),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ve)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,h=new CS,f=new CS;let p=1;const m=new V,y=new Ee,S=new Ee,x=new Ee,g=new Ee,_=new Ee,M=new Ee,E=new Ee,A=new Ee,P=new Ee,L=new V,N=new Ee;let C=!1;const R=[],k={};function H(){return 2*Math.PI/60/60*i.autoRotateSpeed}function $(){return Math.pow(.95,i.zoomSpeed)}function ne(Z){i.reverseOrbit||i.reverseHorizontalOrbit?f.theta+=Z:f.theta-=Z}function le(Z){i.reverseOrbit||i.reverseVerticalOrbit?f.phi+=Z:f.phi-=Z}const ee=(()=>{const Z=new V;return function(Le,K){Z.setFromMatrixColumn(K,0),Z.multiplyScalar(-Le),m.add(Z)}})(),Q=(()=>{const Z=new V;return function(Le,K){i.screenSpacePanning===!0?Z.setFromMatrixColumn(K,1):(Z.setFromMatrixColumn(K,0),Z.crossVectors(i.object.up,Z)),Z.multiplyScalar(Le),m.add(Z)}})(),O=(()=>{const Z=new V;return function(Le,K){const he=i.domElement;if(he&&i.object instanceof Zn&&i.object.isPerspectiveCamera){const De=i.object.position;Z.copy(De).sub(i.target);let Qe=Z.length();Qe*=Math.tan(i.object.fov/2*Math.PI/180),ee(2*Le*Qe/he.clientHeight,i.object.matrix),Q(2*K*Qe/he.clientHeight,i.object.matrix)}else he&&i.object instanceof Ks&&i.object.isOrthographicCamera?(ee(Le*(i.object.right-i.object.left)/i.object.zoom/he.clientWidth,i.object.matrix),Q(K*(i.object.top-i.object.bottom)/i.object.zoom/he.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function Y(Z){i.object instanceof Zn&&i.object.isPerspectiveCamera||i.object instanceof Ks&&i.object.isOrthographicCamera?p=Z:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function X(Z){Y(p/Z)}function se(Z){Y(p*Z)}function me(Z){if(!i.zoomToCursor||!i.domElement)return;C=!0;const de=i.domElement.getBoundingClientRect(),Le=Z.clientX-de.left,K=Z.clientY-de.top,he=de.width,De=de.height;N.x=Le/he*2-1,N.y=-(K/De)*2+1,L.set(N.x,N.y,1).unproject(i.object).sub(i.object.position).normalize()}function Re(Z){return Math.max(i.minDistance,Math.min(i.maxDistance,Z))}function at(Z){y.set(Z.clientX,Z.clientY)}function Ct(Z){me(Z),E.set(Z.clientX,Z.clientY)}function ue(Z){g.set(Z.clientX,Z.clientY)}function Se(Z){S.set(Z.clientX,Z.clientY),x.subVectors(S,y).multiplyScalar(i.rotateSpeed);const de=i.domElement;de&&(ne(2*Math.PI*x.x/de.clientHeight),le(2*Math.PI*x.y/de.clientHeight)),y.copy(S),i.update()}function et(Z){A.set(Z.clientX,Z.clientY),P.subVectors(A,E),P.y>0?X($()):P.y<0&&se($()),E.copy(A),i.update()}function wt(Z){_.set(Z.clientX,Z.clientY),M.subVectors(_,g).multiplyScalar(i.panSpeed),O(M.x,M.y),g.copy(_),i.update()}function st(Z){me(Z),Z.deltaY<0?se($()):Z.deltaY>0&&X($()),i.update()}function Ft(Z){let de=!1;switch(Z.code){case i.keys.UP:O(0,i.keyPanSpeed),de=!0;break;case i.keys.BOTTOM:O(0,-i.keyPanSpeed),de=!0;break;case i.keys.LEFT:O(i.keyPanSpeed,0),de=!0;break;case i.keys.RIGHT:O(-i.keyPanSpeed,0),de=!0;break}de&&(Z.preventDefault(),i.update())}function Qt(){if(R.length==1)y.set(R[0].pageX,R[0].pageY);else{const Z=.5*(R[0].pageX+R[1].pageX),de=.5*(R[0].pageY+R[1].pageY);y.set(Z,de)}}function _t(){if(R.length==1)g.set(R[0].pageX,R[0].pageY);else{const Z=.5*(R[0].pageX+R[1].pageX),de=.5*(R[0].pageY+R[1].pageY);g.set(Z,de)}}function Te(){const Z=R[0].pageX-R[1].pageX,de=R[0].pageY-R[1].pageY,Le=Math.sqrt(Z*Z+de*de);E.set(0,Le)}function Ue(){i.enableZoom&&Te(),i.enablePan&&_t()}function Pe(){i.enableZoom&&Te(),i.enableRotate&&Qt()}function Je(Z){if(R.length==1)S.set(Z.pageX,Z.pageY);else{const Le=ut(Z),K=.5*(Z.pageX+Le.x),he=.5*(Z.pageY+Le.y);S.set(K,he)}x.subVectors(S,y).multiplyScalar(i.rotateSpeed);const de=i.domElement;de&&(ne(2*Math.PI*x.x/de.clientHeight),le(2*Math.PI*x.y/de.clientHeight)),y.copy(S)}function G(Z){if(R.length==1)_.set(Z.pageX,Z.pageY);else{const de=ut(Z),Le=.5*(Z.pageX+de.x),K=.5*(Z.pageY+de.y);_.set(Le,K)}M.subVectors(_,g).multiplyScalar(i.panSpeed),O(M.x,M.y),g.copy(_)}function St(Z){const de=ut(Z),Le=Z.pageX-de.x,K=Z.pageY-de.y,he=Math.sqrt(Le*Le+K*K);A.set(0,he),P.set(0,Math.pow(A.y/E.y,i.zoomSpeed)),X(P.y),E.copy(A)}function tt(Z){i.enableZoom&&St(Z),i.enablePan&&G(Z)}function Pt(Z){i.enableZoom&&St(Z),i.enableRotate&&Je(Z)}function je(Z){var de,Le;i.enabled!==!1&&(R.length===0&&((de=i.domElement)==null||de.ownerDocument.addEventListener("pointermove",z),(Le=i.domElement)==null||Le.ownerDocument.addEventListener("pointerup",D)),It(Z),Z.pointerType==="touch"?dt(Z):ie(Z))}function z(Z){i.enabled!==!1&&(Z.pointerType==="touch"?qe(Z):ge(Z))}function D(Z){var de,Le,K;Ne(Z),R.length===0&&((de=i.domElement)==null||de.releasePointerCapture(Z.pointerId),(Le=i.domElement)==null||Le.ownerDocument.removeEventListener("pointermove",z),(K=i.domElement)==null||K.ownerDocument.removeEventListener("pointerup",D)),i.dispatchEvent(o),l=a.NONE}function ie(Z){let de;switch(Z.button){case 0:de=i.mouseButtons.LEFT;break;case 1:de=i.mouseButtons.MIDDLE;break;case 2:de=i.mouseButtons.RIGHT;break;default:de=-1}switch(de){case vl.DOLLY:if(i.enableZoom===!1)return;Ct(Z),l=a.DOLLY;break;case vl.ROTATE:if(Z.ctrlKey||Z.metaKey||Z.shiftKey){if(i.enablePan===!1)return;ue(Z),l=a.PAN}else{if(i.enableRotate===!1)return;at(Z),l=a.ROTATE}break;case vl.PAN:if(Z.ctrlKey||Z.metaKey||Z.shiftKey){if(i.enableRotate===!1)return;at(Z),l=a.ROTATE}else{if(i.enablePan===!1)return;ue(Z),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function ge(Z){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;Se(Z);break;case a.DOLLY:if(i.enableZoom===!1)return;et(Z);break;case a.PAN:if(i.enablePan===!1)return;wt(Z);break}}function Ae(Z){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Z.preventDefault(),i.dispatchEvent(s),st(Z),i.dispatchEvent(o))}function ve(Z){i.enabled===!1||i.enablePan===!1||Ft(Z)}function dt(Z){switch(Be(Z),R.length){case 1:switch(i.touches.ONE){case yl.ROTATE:if(i.enableRotate===!1)return;Qt(),l=a.TOUCH_ROTATE;break;case yl.PAN:if(i.enablePan===!1)return;_t(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case yl.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ue(),l=a.TOUCH_DOLLY_PAN;break;case yl.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Pe(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function qe(Z){switch(Be(Z),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;Je(Z),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;G(Z),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;tt(Z),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Pt(Z),i.update();break;default:l=a.NONE}}function ht(Z){i.enabled!==!1&&Z.preventDefault()}function It(Z){R.push(Z)}function Ne(Z){delete k[Z.pointerId];for(let de=0;de<R.length;de++)if(R[de].pointerId==Z.pointerId){R.splice(de,1);return}}function Be(Z){let de=k[Z.pointerId];de===void 0&&(de=new Ee,k[Z.pointerId]=de),de.set(Z.pageX,Z.pageY)}function ut(Z){const de=Z.pointerId===R[0].pointerId?R[1]:R[0];return k[de.pointerId]}this.dollyIn=(Z=$())=>{se(Z),i.update()},this.dollyOut=(Z=$())=>{X(Z),i.update()},this.getScale=()=>p,this.setScale=Z=>{Y(Z),i.update()},this.getZoomScale=()=>$(),t!==void 0&&this.connect(t),this.update()}};class UZ extends YM{constructor(e){super(e),this.type=Un}parse(e){const o=function(N,C){switch(N){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(C||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(C||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(C||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(C||""))}},h=`
`,f=function(N,C,R){C=C||1024;let H=N.pos,$=-1,ne=0,le="",ee=String.fromCharCode.apply(null,new Uint16Array(N.subarray(H,H+128)));for(;0>($=ee.indexOf(h))&&ne<C&&H<N.byteLength;)le+=ee,ne+=ee.length,H+=128,ee+=String.fromCharCode.apply(null,new Uint16Array(N.subarray(H,H+128)));return-1<$?(N.pos+=ne+$+1,le+ee.slice(0,$)):!1},p=function(N){const C=/^#\?(\S+)/,R=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,k=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,H=/^\s*FORMAT=(\S+)\s*$/,$=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,ne={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let le,ee;for((N.pos>=N.byteLength||!(le=f(N)))&&o(1,"no header found"),(ee=le.match(C))||o(3,"bad initial token"),ne.valid|=1,ne.programtype=ee[1],ne.string+=le+`
`;le=f(N),le!==!1;){if(ne.string+=le+`
`,le.charAt(0)==="#"){ne.comments+=le+`
`;continue}if((ee=le.match(R))&&(ne.gamma=parseFloat(ee[1])),(ee=le.match(k))&&(ne.exposure=parseFloat(ee[1])),(ee=le.match(H))&&(ne.valid|=2,ne.format=ee[1]),(ee=le.match($))&&(ne.valid|=4,ne.height=parseInt(ee[1],10),ne.width=parseInt(ee[2],10)),ne.valid&2&&ne.valid&4)break}return ne.valid&2||o(3,"missing format specifier"),ne.valid&4||o(3,"missing image size specifier"),ne},m=function(N,C,R){const k=C;if(k<8||k>32767||N[0]!==2||N[1]!==2||N[2]&128)return new Uint8Array(N);k!==(N[2]<<8|N[3])&&o(3,"wrong scanline width");const H=new Uint8Array(4*C*R);H.length||o(4,"unable to allocate buffer space");let $=0,ne=0;const le=4*k,ee=new Uint8Array(4),Q=new Uint8Array(le);let O=R;for(;O>0&&ne<N.byteLength;){ne+4>N.byteLength&&o(1),ee[0]=N[ne++],ee[1]=N[ne++],ee[2]=N[ne++],ee[3]=N[ne++],(ee[0]!=2||ee[1]!=2||(ee[2]<<8|ee[3])!=k)&&o(3,"bad rgbe scanline format");let Y=0,X;for(;Y<le&&ne<N.byteLength;){X=N[ne++];const me=X>128;if(me&&(X-=128),(X===0||Y+X>le)&&o(3,"bad scanline data"),me){const Re=N[ne++];for(let at=0;at<X;at++)Q[Y++]=Re}else Q.set(N.subarray(ne,ne+X),Y),Y+=X,ne+=X}const se=k;for(let me=0;me<se;me++){let Re=0;H[$]=Q[me+Re],Re+=k,H[$+1]=Q[me+Re],Re+=k,H[$+2]=Q[me+Re],Re+=k,H[$+3]=Q[me+Re],$+=4}O--}return H},y=function(N,C,R,k){const H=N[C+3],$=Math.pow(2,H-128)/255;R[k+0]=N[C+0]*$,R[k+1]=N[C+1]*$,R[k+2]=N[C+2]*$,R[k+3]=1},S=function(N,C,R,k){const H=N[C+3],$=Math.pow(2,H-128)/255;R[k+0]=Pl.toHalfFloat(Math.min(N[C+0]*$,65504)),R[k+1]=Pl.toHalfFloat(Math.min(N[C+1]*$,65504)),R[k+2]=Pl.toHalfFloat(Math.min(N[C+2]*$,65504)),R[k+3]=Pl.toHalfFloat(1)},x=new Uint8Array(e);x.pos=0;const g=p(x),_=g.width,M=g.height,E=m(x.subarray(x.pos),_,M);let A,P,L;switch(this.type){case Cn:L=E.length/4;const N=new Float32Array(L*4);for(let R=0;R<L;R++)y(E,R*4,N,R*4);A=N,P=Cn;break;case Un:L=E.length/4;const C=new Uint16Array(L*4);for(let R=0;R<L;R++)S(E,R*4,C,R*4);A=C,P=Un;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:_,height:M,data:A,header:g.string,gamma:g.gamma,exposure:g.exposure,type:P}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){switch(o.type){case Cn:case Un:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=nn,o.magFilter=nn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,r)}}const qd=rF>=152;class kZ extends YM{constructor(e){super(e),this.type=Un}parse(e){const C=Math.pow(2.7182818,2.2);function R(F,B){for(var J=0,fe=0;fe<65536;++fe)(fe==0||F[fe>>3]&1<<(fe&7))&&(B[J++]=fe);for(var xe=J-1;J<65536;)B[J++]=0;return xe}function k(F){for(var B=0;B<16384;B++)F[B]={},F[B].len=0,F[B].lit=0,F[B].p=null}const H={l:0,c:0,lc:0};function $(F,B,J,fe,xe){for(;J<F;)B=B<<8|ut(fe,xe),J+=8;J-=F,H.l=B>>J&(1<<F)-1,H.c=B,H.lc=J}const ne=new Array(59);function le(F){for(var B=0;B<=58;++B)ne[B]=0;for(var B=0;B<65537;++B)ne[F[B]]+=1;for(var J=0,B=58;B>0;--B){var fe=J+ne[B]>>1;ne[B]=J,J=fe}for(var B=0;B<65537;++B){var xe=F[B];xe>0&&(F[B]=xe|ne[xe]++<<6)}}function ee(F,B,J,fe,xe,_e,We){for(var ke=J,$e=0,Ze=0;xe<=_e;xe++){if(ke.value-J.value>fe)return!1;$(6,$e,Ze,F,ke);var Ke=H.l;if($e=H.c,Ze=H.lc,We[xe]=Ke,Ke==63){if(ke.value-J.value>fe)throw"Something wrong with hufUnpackEncTable";$(8,$e,Ze,F,ke);var Xe=H.l+6;if($e=H.c,Ze=H.lc,xe+Xe>_e+1)throw"Something wrong with hufUnpackEncTable";for(;Xe--;)We[xe++]=0;xe--}else if(Ke>=59){var Xe=Ke-59+2;if(xe+Xe>_e+1)throw"Something wrong with hufUnpackEncTable";for(;Xe--;)We[xe++]=0;xe--}}le(We)}function Q(F){return F&63}function O(F){return F>>6}function Y(F,B,J,fe){for(;B<=J;B++){var xe=O(F[B]),_e=Q(F[B]);if(xe>>_e)throw"Invalid table entry";if(_e>14){var We=fe[xe>>_e-14];if(We.len)throw"Invalid table entry";if(We.lit++,We.p){var ke=We.p;We.p=new Array(We.lit);for(var $e=0;$e<We.lit-1;++$e)We.p[$e]=ke[$e]}else We.p=new Array(1);We.p[We.lit-1]=B}else if(_e)for(var Ze=0,$e=1<<14-_e;$e>0;$e--){var We=fe[(xe<<14-_e)+Ze];if(We.len||We.p)throw"Invalid table entry";We.len=_e,We.lit=B,Ze++}}return!0}const X={c:0,lc:0};function se(F,B,J,fe){F=F<<8|ut(J,fe),B+=8,X.c=F,X.lc=B}const me={c:0,lc:0};function Re(F,B,J,fe,xe,_e,We,ke,$e,Ze){if(F==B){fe<8&&(se(J,fe,xe,We),J=X.c,fe=X.lc),fe-=8;var Ke=J>>fe,Ke=new Uint8Array([Ke])[0];if($e.value+Ke>Ze)return!1;for(var Xe=ke[$e.value-1];Ke-- >0;)ke[$e.value++]=Xe}else if($e.value<Ze)ke[$e.value++]=F;else return!1;me.c=J,me.lc=fe}function at(F){return F&65535}function Ct(F){var B=at(F);return B>32767?B-65536:B}const ue={a:0,b:0};function Se(F,B){var J=Ct(F),fe=Ct(B),xe=fe,_e=J+(xe&1)+(xe>>1),We=_e,ke=_e-xe;ue.a=We,ue.b=ke}function et(F,B){var J=at(F),fe=at(B),xe=J-(fe>>1)&65535,_e=fe+xe-32768&65535;ue.a=_e,ue.b=xe}function wt(F,B,J,fe,xe,_e,We){for(var ke=We<16384,$e=J>xe?xe:J,Ze=1,Ke;Ze<=$e;)Ze<<=1;for(Ze>>=1,Ke=Ze,Ze>>=1;Ze>=1;){for(var Xe=0,U=Xe+_e*(xe-Ke),q=_e*Ze,re=_e*Ke,oe=fe*Ze,te=fe*Ke,Ce,Fe,Me,Ie;Xe<=U;Xe+=re){for(var Ve=Xe,it=Xe+fe*(J-Ke);Ve<=it;Ve+=te){var He=Ve+oe,vt=Ve+q,Bt=vt+oe;ke?(Se(F[Ve+B],F[vt+B]),Ce=ue.a,Me=ue.b,Se(F[He+B],F[Bt+B]),Fe=ue.a,Ie=ue.b,Se(Ce,Fe),F[Ve+B]=ue.a,F[He+B]=ue.b,Se(Me,Ie),F[vt+B]=ue.a,F[Bt+B]=ue.b):(et(F[Ve+B],F[vt+B]),Ce=ue.a,Me=ue.b,et(F[He+B],F[Bt+B]),Fe=ue.a,Ie=ue.b,et(Ce,Fe),F[Ve+B]=ue.a,F[He+B]=ue.b,et(Me,Ie),F[vt+B]=ue.a,F[Bt+B]=ue.b)}if(J&Ze){var vt=Ve+q;ke?Se(F[Ve+B],F[vt+B]):et(F[Ve+B],F[vt+B]),Ce=ue.a,F[vt+B]=ue.b,F[Ve+B]=Ce}}if(xe&Ze)for(var Ve=Xe,it=Xe+fe*(J-Ke);Ve<=it;Ve+=te){var He=Ve+oe;ke?Se(F[Ve+B],F[He+B]):et(F[Ve+B],F[He+B]),Ce=ue.a,F[He+B]=ue.b,F[Ve+B]=Ce}Ke=Ze,Ze>>=1}return Xe}function st(F,B,J,fe,xe,_e,We,ke,$e,Ze){for(var Ke=0,Xe=0,U=ke,q=Math.trunc(xe.value+(_e+7)/8);xe.value<q;)for(se(Ke,Xe,J,xe),Ke=X.c,Xe=X.lc;Xe>=14;){var re=Ke>>Xe-14&16383,oe=B[re];if(oe.len)Xe-=oe.len,Re(oe.lit,We,Ke,Xe,J,fe,xe,$e,Ze,U),Ke=me.c,Xe=me.lc;else{if(!oe.p)throw"hufDecode issues";var te;for(te=0;te<oe.lit;te++){for(var Ce=Q(F[oe.p[te]]);Xe<Ce&&xe.value<q;)se(Ke,Xe,J,xe),Ke=X.c,Xe=X.lc;if(Xe>=Ce&&O(F[oe.p[te]])==(Ke>>Xe-Ce&(1<<Ce)-1)){Xe-=Ce,Re(oe.p[te],We,Ke,Xe,J,fe,xe,$e,Ze,U),Ke=me.c,Xe=me.lc;break}}if(te==oe.lit)throw"hufDecode issues"}}var Fe=8-_e&7;for(Ke>>=Fe,Xe-=Fe;Xe>0;){var oe=B[Ke<<14-Xe&16383];if(oe.len)Xe-=oe.len,Re(oe.lit,We,Ke,Xe,J,fe,xe,$e,Ze,U),Ke=me.c,Xe=me.lc;else throw"hufDecode issues"}return!0}function Ft(F,B,J,fe,xe,_e){var We={value:0},ke=J.value,$e=Be(B,J),Ze=Be(B,J);J.value+=4;var Ke=Be(B,J);if(J.value+=4,$e<0||$e>=65537||Ze<0||Ze>=65537)throw"Something wrong with HUF_ENCSIZE";var Xe=new Array(65537),U=new Array(16384);k(U);var q=fe-(J.value-ke);if(ee(F,B,J,q,$e,Ze,Xe),Ke>8*(fe-(J.value-ke)))throw"Something wrong with hufUncompress";Y(Xe,$e,Ze,U),st(Xe,U,F,B,J,Ke,Ze,_e,xe,We)}function Qt(F,B,J){for(var fe=0;fe<J;++fe)B[fe]=F[B[fe]]}function _t(F){for(var B=1;B<F.length;B++){var J=F[B-1]+F[B]-128;F[B]=J}}function Te(F,B){for(var J=0,fe=Math.floor((F.length+1)/2),xe=0,_e=F.length-1;!(xe>_e||(B[xe++]=F[J++],xe>_e));)B[xe++]=F[fe++]}function Ue(F){for(var B=F.byteLength,J=new Array,fe=0,xe=new DataView(F);B>0;){var _e=xe.getInt8(fe++);if(_e<0){var We=-_e;B-=We+1;for(var ke=0;ke<We;ke++)J.push(xe.getUint8(fe++))}else{var We=_e;B-=2;for(var $e=xe.getUint8(fe++),ke=0;ke<We+1;ke++)J.push($e)}}return J}function Pe(F,B,J,fe,xe,_e){var He=new DataView(_e.buffer),We=J[F.idx[0]].width,ke=J[F.idx[0]].height,$e=3,Ze=Math.floor(We/8),Ke=Math.ceil(We/8),Xe=Math.ceil(ke/8),U=We-(Ke-1)*8,q=ke-(Xe-1)*8,re={value:0},oe=new Array($e),te=new Array($e),Ce=new Array($e),Fe=new Array($e),Me=new Array($e);for(let bt=0;bt<$e;++bt)Me[bt]=B[F.idx[bt]],oe[bt]=bt<1?0:oe[bt-1]+Ke*Xe,te[bt]=new Float32Array(64),Ce[bt]=new Uint16Array(64),Fe[bt]=new Uint16Array(Ke*64);for(let bt=0;bt<Xe;++bt){var Ie=8;bt==Xe-1&&(Ie=q);var Ve=8;for(let Mt=0;Mt<Ke;++Mt){Mt==Ke-1&&(Ve=U);for(let yt=0;yt<$e;++yt)Ce[yt].fill(0),Ce[yt][0]=xe[oe[yt]++],Je(re,fe,Ce[yt]),G(Ce[yt],te[yt]),St(te[yt]);tt(te);for(let yt=0;yt<$e;++yt)Pt(te[yt],Fe[yt],Mt*64)}let lt=0;for(let Mt=0;Mt<$e;++Mt){const yt=J[F.idx[Mt]].type;for(let en=8*bt;en<8*bt+Ie;++en){lt=Me[Mt][en];for(let Ci=0;Ci<Ze;++Ci){const pn=Ci*64+(en&7)*8;He.setUint16(lt+0*2*yt,Fe[Mt][pn+0],!0),He.setUint16(lt+1*2*yt,Fe[Mt][pn+1],!0),He.setUint16(lt+2*2*yt,Fe[Mt][pn+2],!0),He.setUint16(lt+3*2*yt,Fe[Mt][pn+3],!0),He.setUint16(lt+4*2*yt,Fe[Mt][pn+4],!0),He.setUint16(lt+5*2*yt,Fe[Mt][pn+5],!0),He.setUint16(lt+6*2*yt,Fe[Mt][pn+6],!0),He.setUint16(lt+7*2*yt,Fe[Mt][pn+7],!0),lt+=8*2*yt}}if(Ze!=Ke)for(let en=8*bt;en<8*bt+Ie;++en){const Ci=Me[Mt][en]+8*Ze*2*yt,pn=Ze*64+(en&7)*8;for(let Pi=0;Pi<Ve;++Pi)He.setUint16(Ci+Pi*2*yt,Fe[Mt][pn+Pi],!0)}}}for(var it=new Uint16Array(We),He=new DataView(_e.buffer),vt=0;vt<$e;++vt){J[F.idx[vt]].decoded=!0;var Bt=J[F.idx[vt]].type;if(J[vt].type==2)for(var Vt=0;Vt<ke;++Vt){const bt=Me[vt][Vt];for(var $t=0;$t<We;++$t)it[$t]=He.getUint16(bt+$t*2*Bt,!0);for(var $t=0;$t<We;++$t)He.setFloat32(bt+$t*2*Bt,he(it[$t]),!0)}}}function Je(F,B,J){for(var fe,xe=1;xe<64;)fe=B[F.value],fe==65280?xe=64:fe>>8==255?xe+=fe&255:(J[xe]=fe,xe++),F.value++}function G(F,B){B[0]=he(F[0]),B[1]=he(F[1]),B[2]=he(F[5]),B[3]=he(F[6]),B[4]=he(F[14]),B[5]=he(F[15]),B[6]=he(F[27]),B[7]=he(F[28]),B[8]=he(F[2]),B[9]=he(F[4]),B[10]=he(F[7]),B[11]=he(F[13]),B[12]=he(F[16]),B[13]=he(F[26]),B[14]=he(F[29]),B[15]=he(F[42]),B[16]=he(F[3]),B[17]=he(F[8]),B[18]=he(F[12]),B[19]=he(F[17]),B[20]=he(F[25]),B[21]=he(F[30]),B[22]=he(F[41]),B[23]=he(F[43]),B[24]=he(F[9]),B[25]=he(F[11]),B[26]=he(F[18]),B[27]=he(F[24]),B[28]=he(F[31]),B[29]=he(F[40]),B[30]=he(F[44]),B[31]=he(F[53]),B[32]=he(F[10]),B[33]=he(F[19]),B[34]=he(F[23]),B[35]=he(F[32]),B[36]=he(F[39]),B[37]=he(F[45]),B[38]=he(F[52]),B[39]=he(F[54]),B[40]=he(F[20]),B[41]=he(F[22]),B[42]=he(F[33]),B[43]=he(F[38]),B[44]=he(F[46]),B[45]=he(F[51]),B[46]=he(F[55]),B[47]=he(F[60]),B[48]=he(F[21]),B[49]=he(F[34]),B[50]=he(F[37]),B[51]=he(F[47]),B[52]=he(F[50]),B[53]=he(F[56]),B[54]=he(F[59]),B[55]=he(F[61]),B[56]=he(F[35]),B[57]=he(F[36]),B[58]=he(F[48]),B[59]=he(F[49]),B[60]=he(F[57]),B[61]=he(F[58]),B[62]=he(F[62]),B[63]=he(F[63])}function St(F){const B=.5*Math.cos(.7853975),J=.5*Math.cos(3.14159/16),fe=.5*Math.cos(3.14159/8),xe=.5*Math.cos(3*3.14159/16),_e=.5*Math.cos(5*3.14159/16),We=.5*Math.cos(3*3.14159/8),ke=.5*Math.cos(7*3.14159/16);for(var $e=new Array(4),Ze=new Array(4),Ke=new Array(4),Xe=new Array(4),U=0;U<8;++U){var q=U*8;$e[0]=fe*F[q+2],$e[1]=We*F[q+2],$e[2]=fe*F[q+6],$e[3]=We*F[q+6],Ze[0]=J*F[q+1]+xe*F[q+3]+_e*F[q+5]+ke*F[q+7],Ze[1]=xe*F[q+1]-ke*F[q+3]-J*F[q+5]-_e*F[q+7],Ze[2]=_e*F[q+1]-J*F[q+3]+ke*F[q+5]+xe*F[q+7],Ze[3]=ke*F[q+1]-_e*F[q+3]+xe*F[q+5]-J*F[q+7],Ke[0]=B*(F[q+0]+F[q+4]),Ke[3]=B*(F[q+0]-F[q+4]),Ke[1]=$e[0]+$e[3],Ke[2]=$e[1]-$e[2],Xe[0]=Ke[0]+Ke[1],Xe[1]=Ke[3]+Ke[2],Xe[2]=Ke[3]-Ke[2],Xe[3]=Ke[0]-Ke[1],F[q+0]=Xe[0]+Ze[0],F[q+1]=Xe[1]+Ze[1],F[q+2]=Xe[2]+Ze[2],F[q+3]=Xe[3]+Ze[3],F[q+4]=Xe[3]-Ze[3],F[q+5]=Xe[2]-Ze[2],F[q+6]=Xe[1]-Ze[1],F[q+7]=Xe[0]-Ze[0]}for(var re=0;re<8;++re)$e[0]=fe*F[16+re],$e[1]=We*F[16+re],$e[2]=fe*F[48+re],$e[3]=We*F[48+re],Ze[0]=J*F[8+re]+xe*F[24+re]+_e*F[40+re]+ke*F[56+re],Ze[1]=xe*F[8+re]-ke*F[24+re]-J*F[40+re]-_e*F[56+re],Ze[2]=_e*F[8+re]-J*F[24+re]+ke*F[40+re]+xe*F[56+re],Ze[3]=ke*F[8+re]-_e*F[24+re]+xe*F[40+re]-J*F[56+re],Ke[0]=B*(F[re]+F[32+re]),Ke[3]=B*(F[re]-F[32+re]),Ke[1]=$e[0]+$e[3],Ke[2]=$e[1]-$e[2],Xe[0]=Ke[0]+Ke[1],Xe[1]=Ke[3]+Ke[2],Xe[2]=Ke[3]-Ke[2],Xe[3]=Ke[0]-Ke[1],F[0+re]=Xe[0]+Ze[0],F[8+re]=Xe[1]+Ze[1],F[16+re]=Xe[2]+Ze[2],F[24+re]=Xe[3]+Ze[3],F[32+re]=Xe[3]-Ze[3],F[40+re]=Xe[2]-Ze[2],F[48+re]=Xe[1]-Ze[1],F[56+re]=Xe[0]-Ze[0]}function tt(F){for(var B=0;B<64;++B){var J=F[0][B],fe=F[1][B],xe=F[2][B];F[0][B]=J+1.5747*xe,F[1][B]=J-.1873*fe-.4682*xe,F[2][B]=J+1.8556*fe}}function Pt(F,B,J){for(var fe=0;fe<64;++fe)B[J+fe]=Pl.toHalfFloat(je(F[fe]))}function je(F){return F<=1?Math.sign(F)*Math.pow(Math.abs(F),2.2):Math.sign(F)*Math.pow(C,Math.abs(F)-1)}function z(F){return new DataView(F.array.buffer,F.offset.value,F.size)}function D(F){var B=F.viewer.buffer.slice(F.offset.value,F.offset.value+F.size),J=new Uint8Array(Ue(B)),fe=new Uint8Array(J.length);return _t(J),Te(J,fe),new DataView(fe.buffer)}function ie(F){var B=F.array.slice(F.offset.value,F.offset.value+F.size),J=Km(B),fe=new Uint8Array(J.length);return _t(J),Te(J,fe),new DataView(fe.buffer)}function ge(F){for(var B=F.viewer,J={value:F.offset.value},fe=new Uint16Array(F.width*F.scanlineBlockSize*(F.channels*F.type)),xe=new Uint8Array(8192),_e=0,We=new Array(F.channels),ke=0;ke<F.channels;ke++)We[ke]={},We[ke].start=_e,We[ke].end=We[ke].start,We[ke].nx=F.width,We[ke].ny=F.lines,We[ke].size=F.type,_e+=We[ke].nx*We[ke].ny*We[ke].size;var $e=De(B,J),Ze=De(B,J);if(Ze>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if($e<=Ze)for(var ke=0;ke<Ze-$e+1;ke++)xe[ke+$e]=Z(B,J);var Ke=new Uint16Array(65536),Xe=R(xe,Ke),U=Be(B,J);Ft(F.array,B,J,U,fe,_e);for(var ke=0;ke<F.channels;++ke)for(var q=We[ke],re=0;re<We[ke].size;++re)wt(fe,q.start+re,q.nx,q.size,q.ny,q.nx*q.size,Xe);Qt(Ke,fe,_e);for(var oe=0,te=new Uint8Array(fe.buffer.byteLength),Ce=0;Ce<F.lines;Ce++)for(var Fe=0;Fe<F.channels;Fe++){var q=We[Fe],Me=q.nx*q.size,Ie=new Uint8Array(fe.buffer,q.end*2,Me*2);te.set(Ie,oe),oe+=Me*2,q.end+=Me}return new DataView(te.buffer)}function Ae(F){var B=F.array.slice(F.offset.value,F.offset.value+F.size),J=Km(B);const fe=F.lines*F.channels*F.width,xe=F.type==1?new Uint16Array(fe):new Uint32Array(fe);let _e=0,We=0;const ke=new Array(4);for(let $e=0;$e<F.lines;$e++)for(let Ze=0;Ze<F.channels;Ze++){let Ke=0;switch(F.type){case 1:ke[0]=_e,ke[1]=ke[0]+F.width,_e=ke[1]+F.width;for(let Xe=0;Xe<F.width;++Xe){const U=J[ke[0]++]<<8|J[ke[1]++];Ke+=U,xe[We]=Ke,We++}break;case 2:ke[0]=_e,ke[1]=ke[0]+F.width,ke[2]=ke[1]+F.width,_e=ke[2]+F.width;for(let Xe=0;Xe<F.width;++Xe){const U=J[ke[0]++]<<24|J[ke[1]++]<<16|J[ke[2]++]<<8;Ke+=U,xe[We]=Ke,We++}break}}return new DataView(xe.buffer)}function ve(F){var B=F.viewer,J={value:F.offset.value},fe=new Uint8Array(F.width*F.lines*(F.channels*F.type*2)),xe={version:de(B,J),unknownUncompressedSize:de(B,J),unknownCompressedSize:de(B,J),acCompressedSize:de(B,J),dcCompressedSize:de(B,J),rleCompressedSize:de(B,J),rleUncompressedSize:de(B,J),rleRawSize:de(B,J),totalAcUncompressedCount:de(B,J),totalDcUncompressedCount:de(B,J),acCompression:de(B,J)};if(xe.version<2)throw"EXRLoader.parse: "+cr.compression+" version "+xe.version+" is unsupported";for(var _e=new Array,We=De(B,J)-2;We>0;){var ke=dt(B.buffer,J),$e=Z(B,J),Ze=$e>>2&3,Ke=($e>>4)-1,Xe=new Int8Array([Ke])[0],U=Z(B,J);_e.push({name:ke,index:Xe,type:U,compression:Ze}),We-=ke.length+3}for(var q=cr.channels,re=new Array(F.channels),oe=0;oe<F.channels;++oe){var te=re[oe]={},Ce=q[oe];te.name=Ce.name,te.compression=0,te.decoded=!1,te.type=Ce.pixelType,te.pLinear=Ce.pLinear,te.width=F.width,te.height=F.lines}for(var Fe={idx:new Array(3)},Me=0;Me<F.channels;++Me)for(var te=re[Me],oe=0;oe<_e.length;++oe){var Ie=_e[oe];te.name==Ie.name&&(te.compression=Ie.compression,Ie.index>=0&&(Fe.idx[Ie.index]=Me),te.offset=Me)}if(xe.acCompressedSize>0)switch(xe.acCompression){case 0:var He=new Uint16Array(xe.totalAcUncompressedCount);Ft(F.array,B,J,xe.acCompressedSize,He,xe.totalAcUncompressedCount);break;case 1:var Ve=F.array.slice(J.value,J.value+xe.totalAcUncompressedCount),it=Km(Ve),He=new Uint16Array(it.buffer);J.value+=xe.totalAcUncompressedCount;break}if(xe.dcCompressedSize>0){var vt={array:F.array,offset:J,size:xe.dcCompressedSize},Bt=new Uint16Array(ie(vt).buffer);J.value+=xe.dcCompressedSize}if(xe.rleRawSize>0){var Ve=F.array.slice(J.value,J.value+xe.rleCompressedSize),it=Km(Ve),Vt=Ue(it.buffer);J.value+=xe.rleCompressedSize}for(var $t=0,bt=new Array(re.length),oe=0;oe<bt.length;++oe)bt[oe]=new Array;for(var lt=0;lt<F.lines;++lt)for(var Mt=0;Mt<re.length;++Mt)bt[Mt].push($t),$t+=re[Mt].width*F.type*2;Pe(Fe,bt,re,He,Bt,fe);for(var oe=0;oe<re.length;++oe){var te=re[oe];if(!te.decoded)switch(te.compression){case 2:for(var yt=0,en=0,lt=0;lt<F.lines;++lt){for(var Ci=bt[oe][yt],pn=0;pn<te.width;++pn){for(var Pi=0;Pi<2*te.type;++Pi)fe[Ci++]=Vt[en+Pi*te.width*te.height];en++}yt++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(fe.buffer)}function dt(F,B){for(var J=new Uint8Array(F),fe=0;J[B.value+fe]!=0;)fe+=1;var xe=new TextDecoder().decode(J.slice(B.value,B.value+fe));return B.value=B.value+fe+1,xe}function qe(F,B,J){var fe=new TextDecoder().decode(new Uint8Array(F).slice(B.value,B.value+J));return B.value=B.value+J,fe}function ht(F,B){var J=Ne(F,B),fe=Be(F,B);return[J,fe]}function It(F,B){var J=Be(F,B),fe=Be(F,B);return[J,fe]}function Ne(F,B){var J=F.getInt32(B.value,!0);return B.value=B.value+4,J}function Be(F,B){var J=F.getUint32(B.value,!0);return B.value=B.value+4,J}function ut(F,B){var J=F[B.value];return B.value=B.value+1,J}function Z(F,B){var J=F.getUint8(B.value);return B.value=B.value+1,J}const de=function(F,B){let J;return"getBigInt64"in DataView.prototype?J=Number(F.getBigInt64(B.value,!0)):J=F.getUint32(B.value+4,!0)+Number(F.getUint32(B.value,!0)<<32),B.value+=8,J};function Le(F,B){var J=F.getFloat32(B.value,!0);return B.value+=4,J}function K(F,B){return Pl.toHalfFloat(Le(F,B))}function he(F){var B=(F&31744)>>10,J=F&1023;return(F>>15?-1:1)*(B?B===31?J?NaN:1/0:Math.pow(2,B-15)*(1+J/1024):6103515625e-14*(J/1024))}function De(F,B){var J=F.getUint16(B.value,!0);return B.value+=2,J}function Qe(F,B){return he(De(F,B))}function Oe(F,B,J,fe){for(var xe=J.value,_e=[];J.value<xe+fe-1;){var We=dt(B,J),ke=Ne(F,J),$e=Z(F,J);J.value+=3;var Ze=Ne(F,J),Ke=Ne(F,J);_e.push({name:We,pixelType:ke,pLinear:$e,xSampling:Ze,ySampling:Ke})}return J.value+=1,_e}function be(F,B){var J=Le(F,B),fe=Le(F,B),xe=Le(F,B),_e=Le(F,B),We=Le(F,B),ke=Le(F,B),$e=Le(F,B),Ze=Le(F,B);return{redX:J,redY:fe,greenX:xe,greenY:_e,blueX:We,blueY:ke,whiteX:$e,whiteY:Ze}}function ze(F,B){var J=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],fe=Z(F,B);return J[fe]}function Et(F,B){var J=Be(F,B),fe=Be(F,B),xe=Be(F,B),_e=Be(F,B);return{xMin:J,yMin:fe,xMax:xe,yMax:_e}}function tn(F,B){var J=["INCREASING_Y"],fe=Z(F,B);return J[fe]}function Zt(F,B){var J=Le(F,B),fe=Le(F,B);return[J,fe]}function jn(F,B){var J=Le(F,B),fe=Le(F,B),xe=Le(F,B);return[J,fe,xe]}function hi(F,B,J,fe,xe){if(fe==="string"||fe==="stringvector"||fe==="iccProfile")return qe(B,J,xe);if(fe==="chlist")return Oe(F,B,J,xe);if(fe==="chromaticities")return be(F,J);if(fe==="compression")return ze(F,J);if(fe==="box2i")return Et(F,J);if(fe==="lineOrder")return tn(F,J);if(fe==="float")return Le(F,J);if(fe==="v2f")return Zt(F,J);if(fe==="v3f")return jn(F,J);if(fe==="int")return Ne(F,J);if(fe==="rational")return ht(F,J);if(fe==="timecode")return It(F,J);if(fe==="preview")return J.value+=xe,"skipped";J.value+=xe}function td(F,B,J){const fe={};if(F.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";fe.version=F.getUint8(4);const xe=F.getUint8(5);fe.spec={singleTile:!!(xe&2),longName:!!(xe&4),deepFormat:!!(xe&8),multiPart:!!(xe&16)},J.value=8;for(var _e=!0;_e;){var We=dt(B,J);if(We==0)_e=!1;else{var ke=dt(B,J),$e=Be(F,J),Ze=hi(F,B,J,ke,$e);Ze===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${ke}'.`):fe[We]=Ze}}if(xe&-5)throw console.error("EXRHeader:",fe),"THREE.EXRLoader: provided file is currently unsupported.";return fe}function oc(F,B,J,fe,xe){const _e={size:0,viewer:B,array:J,offset:fe,width:F.dataWindow.xMax-F.dataWindow.xMin+1,height:F.dataWindow.yMax-F.dataWindow.yMin+1,channels:F.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:F.channels[0].pixelType,uncompress:null,getter:null,format:null,[qd?"colorSpace":"encoding"]:null};switch(F.compression){case"NO_COMPRESSION":_e.lines=1,_e.uncompress=z;break;case"RLE_COMPRESSION":_e.lines=1,_e.uncompress=D;break;case"ZIPS_COMPRESSION":_e.lines=1,_e.uncompress=ie;break;case"ZIP_COMPRESSION":_e.lines=16,_e.uncompress=ie;break;case"PIZ_COMPRESSION":_e.lines=32,_e.uncompress=ge;break;case"PXR24_COMPRESSION":_e.lines=16,_e.uncompress=Ae;break;case"DWAA_COMPRESSION":_e.lines=32,_e.uncompress=ve;break;case"DWAB_COMPRESSION":_e.lines=256,_e.uncompress=ve;break;default:throw"EXRLoader.parse: "+F.compression+" is unsupported"}if(_e.scanlineBlockSize=_e.lines,_e.type==1)switch(xe){case Cn:_e.getter=Qe,_e.inputSize=2;break;case Un:_e.getter=De,_e.inputSize=2;break}else if(_e.type==2)switch(xe){case Cn:_e.getter=Le,_e.inputSize=4;break;case Un:_e.getter=K,_e.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+_e.type+" for "+F.compression+".";_e.blockCount=(F.dataWindow.yMax+1)/_e.scanlineBlockSize;for(var We=0;We<_e.blockCount;We++)de(B,fe);_e.outputChannels=_e.channels==3?4:_e.channels;const ke=_e.width*_e.height*_e.outputChannels;switch(xe){case Cn:_e.byteArray=new Float32Array(ke),_e.channels<_e.outputChannels&&_e.byteArray.fill(1,0,ke);break;case Un:_e.byteArray=new Uint16Array(ke),_e.channels<_e.outputChannels&&_e.byteArray.fill(15360,0,ke);break;default:console.error("THREE.EXRLoader: unsupported type: ",xe);break}return _e.bytesPerLine=_e.width*_e.inputSize*_e.channels,_e.outputChannels==4?_e.format=Kn:_e.format=Ff,qd?_e.colorSpace="srgb-linear":_e.encoding=3e3,_e}const as=new DataView(e),Ha=new Uint8Array(e),Rs={value:0},cr=td(as,e,Rs),Ot=oc(cr,as,Ha,Rs,this.type),Do={value:0},ac={R:0,G:1,B:2,A:3,Y:0};for(let F=0;F<Ot.height/Ot.scanlineBlockSize;F++){const B=Be(as,Rs);Ot.size=Be(as,Rs),Ot.lines=B+Ot.scanlineBlockSize>Ot.height?Ot.height-B:Ot.scanlineBlockSize;const fe=Ot.size<Ot.lines*Ot.bytesPerLine?Ot.uncompress(Ot):z(Ot);Rs.value+=Ot.size;for(let xe=0;xe<Ot.scanlineBlockSize;xe++){const _e=xe+F*Ot.scanlineBlockSize;if(_e>=Ot.height)break;for(let We=0;We<Ot.channels;We++){const ke=ac[cr.channels[We].name];for(let $e=0;$e<Ot.width;$e++){Do.value=(xe*(Ot.channels*Ot.width)+We*Ot.width+$e)*Ot.inputSize;const Ze=(Ot.height-1-_e)*(Ot.width*Ot.outputChannels)+$e*Ot.outputChannels+ke;Ot.byteArray[Ze]=Ot.getter(fe,Do)}}}}return{header:cr,width:Ot.width,height:Ot.height,data:Ot.byteArray,format:Ot.format,[qd?"colorSpace":"encoding"]:Ot[qd?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){qd?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=nn,o.magFilter=nn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,i,r)}}function OZ(n,e,t){const i=xi(m=>m.size),r=xi(m=>m.viewport),s=typeof n=="number"?n:i.width*r.dpr,o=i.height*r.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:u,...h}=a,f=u??a.depthBuffer,p=j.useMemo(()=>{const m=new Gi(s,o,{minFilter:nn,magFilter:nn,type:Un,...h});return f&&(m.depthTexture=new Zl(s,o,Cn)),m.samples=l,m},[]);return j.useLayoutEffect(()=>{p.setSize(s,o),l&&(p.samples=l)},[l,p,s,o]),j.useEffect(()=>()=>p.dispose(),[]),p}const BZ=n=>typeof n=="function",zZ=j.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:i,children:r,...s},o)=>{const a=xi(({set:x})=>x),l=xi(({camera:x})=>x),u=xi(({size:x})=>x),h=j.useRef(null);j.useImperativeHandle(o,()=>h.current,[]);const f=j.useRef(null),p=OZ(e);j.useLayoutEffect(()=>{s.manual||(h.current.aspect=u.width/u.height)},[u,s]),j.useLayoutEffect(()=>{h.current.updateProjectionMatrix()});let m=0,y=null;const S=BZ(r);return Jv(x=>{S&&(t===1/0||m<t)&&(f.current.visible=!1,x.gl.setRenderTarget(p),y=x.scene.background,n&&(x.scene.background=n),x.gl.render(x.scene,h.current),x.scene.background=y,x.gl.setRenderTarget(null),f.current.visible=!0,m++)}),j.useLayoutEffect(()=>{if(i){const x=l;return a(()=>({camera:h.current})),()=>a(()=>({camera:x}))}},[h,i,a]),j.createElement(j.Fragment,null,j.createElement("perspectiveCamera",yf({ref:h},s),!S&&r),j.createElement("group",{ref:f},S&&r(p.texture)))}),VZ=j.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},h)=>{const f=xi(P=>P.invalidate),p=xi(P=>P.camera),m=xi(P=>P.gl),y=xi(P=>P.events),S=xi(P=>P.setEvents),x=xi(P=>P.set),g=xi(P=>P.get),_=xi(P=>P.performance),M=e||p,E=i||y.connected||m.domElement,A=j.useMemo(()=>new FZ(M),[M]);return Jv(()=>{A.enabled&&A.update()},-1),j.useEffect(()=>(s&&A.connect(s===!0?E:s),A.connect(E),()=>void A.dispose()),[s,E,t,A,f]),j.useEffect(()=>{const P=C=>{f(),t&&_.regress(),o&&o(C)},L=C=>{a&&a(C)},N=C=>{l&&l(C)};return A.addEventListener("change",P),A.addEventListener("start",L),A.addEventListener("end",N),()=>{A.removeEventListener("start",L),A.removeEventListener("end",N),A.removeEventListener("change",P)}},[o,a,l,A,f,S]),j.useEffect(()=>{if(n){const P=g().controls;return x({controls:A}),()=>x({controls:P})}},[n,A]),j.createElement("primitive",yf({ref:h,object:A,enableDamping:r},u))}),dF=(n,e,t)=>{let i;switch(n){case _i:i=new Uint8ClampedArray(e*t*4);break;case Un:i=new Uint16Array(e*t*4);break;case Fr:i=new Uint32Array(e*t*4);break;case yv:i=new Int8Array(e*t*4);break;case xv:i=new Int16Array(e*t*4);break;case Df:i=new Int32Array(e*t*4);break;case Cn:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let Qm;const HZ=(n,e,t,i)=>{if(Qm!==void 0)return Qm;const r=new Gi(1,1,i);e.setRenderTarget(r);const s=new Bn(new za,new Lo({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=dF(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),s.geometry.dispose(),s.material.dispose(),Qm=o[0]!==0,Qm};class lE{constructor(e){Vn(this,"_renderer");Vn(this,"_rendererIsDisposable",!1);Vn(this,"_material");Vn(this,"_scene");Vn(this,"_camera");Vn(this,"_quad");Vn(this,"_renderTarget");Vn(this,"_width");Vn(this,"_height");Vn(this,"_type");Vn(this,"_colorSpace");Vn(this,"_supportsReadPixels",!0);Vn(this,"render",()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)});var i,r,s,o,a,l,u,h,f,p,m,y,S,x,g,_;this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const t={format:Kn,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((i=e.renderTargetOptions)==null?void 0:i.anisotropy)!==void 0?(r=e.renderTargetOptions)==null?void 0:r.anisotropy:1,generateMipmaps:((s=e.renderTargetOptions)==null?void 0:s.generateMipmaps)!==void 0?(o=e.renderTargetOptions)==null?void 0:o.generateMipmaps:!1,magFilter:((a=e.renderTargetOptions)==null?void 0:a.magFilter)!==void 0?(l=e.renderTargetOptions)==null?void 0:l.magFilter:nn,minFilter:((u=e.renderTargetOptions)==null?void 0:u.minFilter)!==void 0?(h=e.renderTargetOptions)==null?void 0:h.minFilter:nn,samples:((f=e.renderTargetOptions)==null?void 0:f.samples)!==void 0?(p=e.renderTargetOptions)==null?void 0:p.samples:void 0,wrapS:((m=e.renderTargetOptions)==null?void 0:m.wrapS)!==void 0?(y=e.renderTargetOptions)==null?void 0:y.wrapS:Wn,wrapT:((S=e.renderTargetOptions)==null?void 0:S.wrapT)!==void 0?(x=e.renderTargetOptions)==null?void 0:x.wrapT:Wn};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=lE.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Bf,this._camera=new Ks,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!HZ(this._type,this._renderer,this._camera,t)){let M;switch(this._type){case Un:M=this._renderer.extensions.has("EXT_color_buffer_float")?Cn:void 0;break}M!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Cn}`),this._type=M):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Bn(new za,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Gi(this.width,this.height,t),this._renderTarget.texture.mapping=((g=e.renderTargetOptions)==null?void 0:g.mapping)!==void 0?(_=e.renderTargetOptions)==null?void 0:_.mapping:Ra}static instantiateRenderer(){const e=new iE;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=dF(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new is(this.toArray(),this.width,this.height,Kn,this._type,(e==null?void 0:e.mapping)||Ra,(e==null?void 0:e.wrapS)||Wn,(e==null?void 0:e.wrapT)||Wn,(e==null?void 0:e.magFilter)||nn,(e==null?void 0:e.minFilter)||nn,(e==null?void 0:e.anisotropy)||1,eo);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof rr&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof vn&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof vn&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class hF extends Error{}class fF extends Error{}const Zd=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(r){const s=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(o=>o.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},GZ=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),r=e.slice(t,i+10);try{const s=Zd(r,"hdrgm:GainMapMin","0"),o=Zd(r,"hdrgm:GainMapMax"),a=Zd(r,"hdrgm:Gamma","1"),l=Zd(r,"hdrgm:OffsetSDR","0.015625"),u=Zd(r,"hdrgm:OffsetHDR","0.015625"),h=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),f=h?h[1]:"0",p=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!p)throw new Error("Incomplete gainmap metadata");const m=p[1];return{gainMapMin:Array.isArray(s)?s.map(y=>parseFloat(y)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(o)?o.map(y=>parseFloat(y)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(a)?a.map(y=>parseFloat(y)):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(l)?l.map(y=>parseFloat(y)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(u)?u.map(y=>parseFloat(y)):[parseFloat(u),parseFloat(u),parseFloat(u)],hdrCapacityMin:parseFloat(f),hdrCapacityMax:parseFloat(m)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class WZ{constructor(e){Vn(this,"options");this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,u;for(;a<o;){if(++l>250){i(new Error(`Found no marker after ${l} loops `));return}if(s.getUint8(a)!==255){i(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(u=s.getUint8(a+1),r&&console.log(`Marker: ${u.toString(16)}`),u===226){r&&console.log("Found APP2 marker (0xffe2)");const h=a+4;if(s.getUint32(h)===1297106432){const f=h+4;let p;if(s.getUint16(f)===18761)p=!1;else if(s.getUint16(f)===19789)p=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(f+2,!p)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const m=s.getUint32(f+4,!p);if(m<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const y=f+m,S=s.getUint16(y,!p),x=y+2;let g=0;for(let A=x;A<x+12*S;A+=12)s.getUint16(A,!p)===45057&&(g=s.getUint32(A+8,!p));const M=y+2+S*12+4,E=[];for(let A=M;A<M+g*16;A+=16){const P={MPType:s.getUint32(A,!p),size:s.getUint32(A+4,!p),dataOffset:s.getUint32(A+8,!p),dependantImages:s.getUint32(A+12,!p),start:-1,end:-1,isFII:!1};P.dataOffset?(P.start=f+P.dataOffset,P.isFII=!1):(P.start=0,P.isFII=!0),P.end=P.start+P.size,E.push(P)}if(this.options.extractNonFII&&E.length){const A=new Blob([s]),P=[];for(const L of E){if(L.isFII&&!this.options.extractFII)continue;const N=A.slice(L.start,L.end+1,"image/jpeg");P.push(N)}t(P)}}}a+=2+s.getUint16(a+2)}})}}const jZ=async n=>{const e=GZ(n);if(!e)throw new fF("Gain map XMP metadata not found");const i=await new WZ({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new hF("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},AP=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class XZ extends lr{constructor(t,i){super(i);Vn(this,"_renderer");Vn(this,"_renderTargetOptions");Vn(this,"_internalLoadingManager");Vn(this,"_config");this._config=t,t.renderer&&(this._renderer=t.renderer),this._internalLoadingManager=new qv}setRenderer(t){return this._renderer=t,this}setRenderTargetOptions(t){return this._renderTargetOptions=t,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const t=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new vn,sdr:new vn});return this._config.createQuadRenderer({width:16,height:16,type:Un,colorSpace:eo,material:t,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(t,i,r){const s=i?new Blob([i],{type:"image/jpeg"}):void 0,o=new Blob([t],{type:"image/jpeg"});let a,l,u=!1;if(typeof createImageBitmap>"u"){const h=await Promise.all([s?AP(s):Promise.resolve(void 0),AP(o)]);l=h[0],a=h[1],u=r==="flipY"}else{const h=await Promise.all([s?createImageBitmap(s,{imageOrientation:r||"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:r||"flipY"})]);l=h[0],a=h[1]}return{sdrImage:a,gainMapImage:l,needsFlip:u}}createTextures(t,i,r){const s=new vn(i||new ImageData(2,2),Ra,Wn,Wn,nn,xS,Kn,_i,1,eo);s.flipY=r,s.needsUpdate=!0;const o=new vn(t,Ra,Wn,Wn,nn,xS,Kn,_i,1,Ji);return o.flipY=r,o.needsUpdate=!0,{gainMap:s,sdr:o}}updateQuadRenderer(t,i,r,s,o){t.width=i.width,t.height=i.height,t.material.gainMap=r,t.material.sdr=s,t.material.gainMapMin=o.gainMapMin,t.material.gainMapMax=o.gainMapMax,t.material.offsetHdr=o.offsetHdr,t.material.offsetSdr=o.offsetSdr,t.material.gamma=o.gamma,t.material.hdrCapacityMin=o.hdrCapacityMin,t.material.hdrCapacityMax=o.hdrCapacityMax,t.material.maxDisplayBoost=Math.pow(2,o.hdrCapacityMax),t.material.needsUpdate=!0}}const YZ=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,qZ=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class ZZ extends rr{constructor({gamma:t,offsetHdr:i,offsetSdr:r,gainMapMin:s,gainMapMax:o,maxDisplayBoost:a,hdrCapacityMin:l,hdrCapacityMax:u,sdr:h,gainMap:f}){super({name:"GainMapDecoderMaterial",vertexShader:YZ,fragmentShader:qZ,uniforms:{sdr:{value:h},gainMap:{value:f},gamma:{value:new V(1/t[0],1/t[1],1/t[2])},offsetHdr:{value:new V().fromArray(i)},offsetSdr:{value:new V().fromArray(r)},gainMapMin:{value:new V().fromArray(s)},gainMapMax:{value:new V().fromArray(o)},weightFactor:{value:(Math.log2(a)-l)/(u-l)}},blending:Ts,depthTest:!1,depthWrite:!1});Vn(this,"_maxDisplayBoost");Vn(this,"_hdrCapacityMin");Vn(this,"_hdrCapacityMax");this._maxDisplayBoost=a,this._hdrCapacityMin=l,this._hdrCapacityMax=u,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(t){this.uniforms.sdr.value=t}get gainMap(){return this.uniforms.gainMap.value}set gainMap(t){this.uniforms.gainMap.value=t}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(t){this.uniforms.offsetHdr.value.fromArray(t)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(t){this.uniforms.offsetSdr.value.fromArray(t)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(t){this.uniforms.gainMapMin.value.fromArray(t)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(t){this.uniforms.gainMapMax.value.fromArray(t)}get gamma(){const t=this.uniforms.gamma.value;return[1/t.x,1/t.y,1/t.z]}set gamma(t){const i=this.uniforms.gamma.value;i.x=1/t[0],i.y=1/t[1],i.z=1/t[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(t){this._hdrCapacityMin=t,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(t){this._hdrCapacityMax=t,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(t){this._maxDisplayBoost=Math.max(1,Math.min(65504,t)),this.calculateWeight()}calculateWeight(){const t=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,t))}}class pF extends XZ{constructor(e,t){super({renderer:e,createMaterial:i=>new ZZ(i),createQuadRenderer:i=>new lE(i)},t)}async render(e,t,i,r){const{sdrImage:s,gainMapImage:o,needsFlip:a}=await this.processImages(i,r,"flipY"),{gainMap:l,sdr:u}=this.createTextures(s,o,a);this.updateQuadRenderer(e,s,l,u,t),e.render()}}class $Z extends pF{load([e,t,i],r,s,o){const a=this.prepareQuadRenderer();let l,u,h;const f=async()=>{if(l&&u&&h){try{await this.render(a,h,l,u)}catch(C){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof o=="function"&&o(C),a.disposeOnDemandRenderer();return}typeof r=="function"&&r(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),a.disposeOnDemandRenderer()}};let p=!0,m=0,y=0,S=!0,x=0,g=0,_=!0,M=0,E=0;const A=()=>{if(typeof s=="function"){const C=m+x+M,R=y+g+E,k=p&&S&&_;s(new ProgressEvent("progress",{lengthComputable:k,loaded:R,total:C}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const P=new Lr(this._internalLoadingManager);P.setResponseType("arraybuffer"),P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(e,async C=>{if(typeof C=="string")throw new Error("Invalid sdr buffer");l=C,await f()},C=>{p=C.lengthComputable,y=C.loaded,m=C.total,A()},C=>{this.manager.itemError(e),typeof o=="function"&&o(C)});const L=new Lr(this._internalLoadingManager);L.setResponseType("arraybuffer"),L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(this.withCredentials),L.load(t,async C=>{if(typeof C=="string")throw new Error("Invalid gainmap buffer");u=C,await f()},C=>{S=C.lengthComputable,g=C.loaded,x=C.total,A()},C=>{this.manager.itemError(t),typeof o=="function"&&o(C)});const N=new Lr(this._internalLoadingManager);return N.setRequestHeader(this.requestHeader),N.setPath(this.path),N.setWithCredentials(this.withCredentials),N.load(i,async C=>{if(typeof C!="string")throw new Error("Invalid metadata string");h=JSON.parse(C),await f()},C=>{_=C.lengthComputable,E=C.loaded,M=C.total,A()},C=>{this.manager.itemError(i),typeof o=="function"&&o(C)}),a}}class KZ extends pF{load(e,t,i,r){const s=this.prepareQuadRenderer(),o=new Lr(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let u,h,f;try{const p=await jZ(l);u=p.sdr,h=p.gainMap,f=p.metadata}catch(p){if(p instanceof fF||p instanceof hF)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},u=l;else throw p}try{await this.render(s,f,u.buffer,h==null?void 0:h.buffer)}catch(p){this.manager.itemError(e),typeof r=="function"&&r(p),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,a=>{this.manager.itemError(e),typeof r=="function"&&r(a)}),s}}const xf={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},mF="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",wu=n=>Array.isArray(n),cE=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Qv({files:n=cE,path:e="",preset:t=void 0,colorSpace:i=void 0,extensions:r}={}){t&&(uE(t),n=xf[t],e=mF);const s=wu(n),{extension:o,isCubemap:a}=dE(n),l=hE(o);if(!l)throw new Error("useEnvironment: Unrecognized file extension: "+n);const u=xi(m=>m.gl);j.useLayoutEffect(()=>{if(o!=="webp"&&o!=="jpg"&&o!=="jpeg")return;function m(){Hu.clear(l,s?[n]:n)}u.domElement.addEventListener("webglcontextlost",m,{once:!0})},[n,u.domElement]);const h=Hu(l,s?[n]:n,m=>{(o==="webp"||o==="jpg"||o==="jpeg")&&m.setRenderer(u),m.setPath==null||m.setPath(e),r&&r(m)});let f=s?h[0]:h;if(o==="jpg"||o==="jpeg"||o==="webp"){var p;f=(p=f.renderTarget)==null?void 0:p.texture}return f.mapping=a?Cs:Lu,f.colorSpace=i??(a?"srgb":"srgb-linear"),f}const JZ={files:cE,path:"",preset:void 0,extensions:void 0};Qv.preload=n=>{const e={...JZ,...n};let{files:t,path:i=""}=e;const{preset:r,extensions:s}=e;r&&(uE(r),t=xf[r],i=mF);const{extension:o}=dE(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const a=hE(o);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);Hu.preload(a,wu(t)?[t]:t,l=>{l.setPath==null||l.setPath(i),s&&s(l)})};const QZ={files:cE,preset:void 0};Qv.clear=n=>{const e={...QZ,...n};let{files:t}=e;const{preset:i}=e;i&&(uE(i),t=xf[i]);const{extension:r}=dE(t),s=hE(r);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);Hu.clear(s,wu(t)?[t]:t)};function uE(n){if(!(n in xf))throw new Error("Preset must be one of: "+Object.keys(xf).join(", "))}function dE(n){var e;const t=wu(n)&&n.length===6,i=wu(n)&&n.length===3&&n.some(o=>o.endsWith("json")),r=wu(n)?n[0]:n;return{extension:t?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:i}}function hE(n){return n==="cube"?fD:n==="hdr"?UZ:n==="exr"?kZ:n==="jpg"||n==="jpeg"?KZ:n==="webp"?$Z:null}const e$=n=>n.current&&n.current.isScene,t$=n=>e$(n)?n.current:n;function fE(n,e,t,i,r={}){var s,o,a,l;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const u=t$(e||t),h=u.background,f=u.environment,p={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(s=(o=u.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(a=(l=u.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&a!==void 0?a:[0,0,0]};return n!=="only"&&(u.environment=i),n&&(u.background=i),ia(u,r),()=>{n!=="only"&&(u.environment=f),n&&(u.background=h),ia(u,p)}}function pE({scene:n,background:e=!1,map:t,...i}){const r=xi(s=>s.scene);return j.useLayoutEffect(()=>{if(t)return fE(e,n,r,t,i)}),null}function gF({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const u=Qv(l),h=xi(f=>f.scene);return j.useLayoutEffect(()=>fE(n,e,h,u,{backgroundBlurriness:t??i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),j.useEffect(()=>()=>{u.dispose()},[u]),null}function n$({children:n,near:e=.1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:u,backgroundRotation:h,environmentIntensity:f,environmentRotation:p,scene:m,files:y,path:S,preset:x=void 0,extensions:g}){const _=xi(N=>N.gl),M=xi(N=>N.scene),E=j.useRef(null),[A]=j.useState(()=>new Bf),P=j.useMemo(()=>{const N=new Pv(i);return N.texture.type=Un,N},[i]);j.useEffect(()=>()=>{P.dispose()},[P]),j.useLayoutEffect(()=>{if(r===1){const N=_.autoClear;_.autoClear=!0,E.current.update(_,A),_.autoClear=N}return fE(o,m,M,P.texture,{backgroundBlurriness:a??l,backgroundIntensity:u,backgroundRotation:h,environmentIntensity:f,environmentRotation:p})},[n,A,P.texture,m,M,o,r,_]);let L=1;return Jv(()=>{if(r===1/0||L<r){const N=_.autoClear;_.autoClear=!0,E.current.update(_,A),_.autoClear=N,L++}}),j.createElement(j.Fragment,null,qq(j.createElement(j.Fragment,null,n,j.createElement("cubeCamera",{ref:E,args:[e,t,P]}),y||x?j.createElement(gF,{background:!0,files:y,preset:x,path:S,extensions:g}):s?j.createElement(pE,{background:!0,map:s,extensions:g}):null),A))}function i$(n){var e,t,i,r;const s=Qv(n),o=n.map||s;j.useMemo(()=>VD({GroundProjectedEnvImpl:AZ}),[]),j.useEffect(()=>()=>{s.dispose()},[s]);const a=j.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,u=(t=n.ground)==null?void 0:t.radius,h=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return j.createElement(j.Fragment,null,j.createElement(pE,yf({},n,{map:o})),j.createElement("groundProjectedEnvImpl",{args:a,scale:h,height:l,radius:u}))}function r$(n){return n.ground?j.createElement(i$,n):n.map?j.createElement(pE,n):n.children?j.createElement(n$,n):j.createElement(gF,n)}function s$(){const n=j.useRef(null);return Jv(e=>{n.current&&(n.current.rotation.y+=.002,n.current.position.y=Math.sin(e.clock.elapsedTime*.5)*.1)}),T.jsxs("group",{children:[T.jsxs("mesh",{ref:n,position:[0,0,0],children:[T.jsx("octahedronGeometry",{args:[1,0]}),T.jsx("meshStandardMaterial",{color:"#00FF9D",wireframe:!0,emissive:"#00FF9D",emissiveIntensity:.5})]}),Array.from({length:20}).map((e,t)=>{const i=t/20*Math.PI*2,r=2+Math.random(),s=(Math.random()-.5)*4;return T.jsxs("mesh",{position:[Math.cos(i)*r,s,Math.sin(i)*r],scale:.05,children:[T.jsx("sphereGeometry",{args:[1,16,16]}),T.jsx("meshStandardMaterial",{color:"#FFB800",emissive:"#FFB800",emissiveIntensity:1})]},t)})]})}function o$(){return T.jsx("div",{className:"fixed inset-0 z-0 bg-cyber-black",children:T.jsx(hZ,{className:"w-full h-full",children:T.jsxs(j.Suspense,{fallback:null,children:[T.jsx(zZ,{makeDefault:!0,position:[0,2,5],fov:50}),T.jsx("ambientLight",{intensity:.2,color:"#00FF9D"}),T.jsx("spotLight",{position:[10,10,10],angle:.15,penumbra:1,intensity:1,color:"#00FF9D"}),T.jsx("pointLight",{position:[-10,-10,-10],intensity:1,color:"#FFB800"}),T.jsx(s$,{}),T.jsx(VZ,{enableZoom:!1,enablePan:!1,maxPolarAngle:Math.PI/1.5,minPolarAngle:Math.PI/3}),T.jsx(r$,{preset:"night"})]})})})}function a$({children:n,className:e,variant:t="default",...i}){return T.jsxs(Dt.div,{className:If("glass-panel rounded-2xl p-6 relative overflow-hidden",{"bg-cyber-glass/50":t==="default","bg-black/60":t==="dark","border-cyber-green/20":t==="bordered"},e),initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,ease:"outCirc"},...i,children:[T.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-cyber-green/50 to-transparent opacity-50"}),n]})}const l$=[{id:"triage",name:"Triage Agent",icon:x6,color:"text-cyber-green"},{id:"vision",name:"Vision Agent",icon:jl,color:"text-emerald-400"},{id:"sourcing",name:"Sourcing Agent",icon:c$,color:"text-cyan-400"},{id:"market",name:"Market Agent",icon:Nu,color:"text-purple-400"},{id:"strategy",name:"Strategy Agent",icon:kN,color:"text-orange-400"},{id:"communication",name:"Comm Agent",icon:C6,color:"text-pink-400"}];function c$(n){return T.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),T.jsx("circle",{cx:"12",cy:"10",r:"3"})]})}function u$({activeAgent:n="triage"}){return T.jsx("div",{className:"fixed bottom-8 right-8 z-50",children:T.jsxs(a$,{className:"p-4 w-64",children:[T.jsxs("div",{className:"flex items-center justify-between mb-4 pb-2 border-b border-white/10",children:[T.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-muted-foreground",children:"System Status"}),T.jsx(y6,{className:"w-4 h-4 text-cyber-green animate-pulse"})]}),T.jsx("div",{className:"space-y-3",children:l$.map(e=>{const t=n===e.id;return T.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-lg transition-all duration-300 ${t?"bg-white/5 border border-cyber-green/30 shadow-[0_0_10px_rgba(0,255,157,0.1)]":"opacity-40"}`,children:[T.jsx(e.icon,{className:`w-4 h-4 ${e.color}`}),T.jsx("span",{className:`text-xs font-medium ${t?"text-white":"text-muted-foreground"}`,children:e.name}),t&&T.jsx(Dt.div,{layoutId:"active-dot",className:"ml-auto w-1.5 h-1.5 rounded-full bg-cyber-green animate-pulse"})]},e.id)})})]})})}function d$(){return T.jsx(R4,{children:T.jsxs("div",{className:"relative w-full min-h-screen overflow-hidden bg-cyber-black text-cyber-text font-ui selection:bg-cyber-green/30",children:[T.jsx(o$,{}),T.jsxs("div",{className:"relative z-10 w-full h-full",children:[T.jsx(H6,{children:T.jsxs(M4,{children:[T.jsx(ml,{path:"/",element:T.jsx(E8,{})}),T.jsx(ml,{path:"/diagnosis",element:T.jsx(T8,{})}),T.jsx(ml,{path:"/sourcing",element:T.jsx(P8,{})}),T.jsx(ml,{path:"/market",element:T.jsx(N8,{})}),T.jsx(ml,{path:"/strategy",element:T.jsx(D8,{})}),T.jsx(ml,{path:"/schemes",element:T.jsx(k8,{})})]})}),T.jsx(u$,{activeAgent:"triage"})]})]})})}V3(document.getElementById("root")).render(T.jsx(d$,{}));
